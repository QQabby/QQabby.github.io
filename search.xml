<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[ÁΩëÁªúÁü•ËØÜ]]></title>
    <url>%2F2019%2F04%2F30%2F%E7%BD%91%E7%BB%9C%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[1. OSI ‰∏ÉÂ±Ç Â∫îÁî®Â±ÇÔºàÁ¨¨‰∏ÉÂ±ÇÔºâ Ë°®Á§∫Â±ÇÔºàÁ¨¨ÂÖ≠Â±ÇÔºâ ‰ºöËØùÂ±ÇÔºàÁ¨¨‰∫îÂ±ÇÔºâ ‰º†ËæìÂ±ÇÔºàÁ¨¨ÂõõÂ±ÇÔºâ ÁΩëÁªúÂ±ÇÔºàÁ¨¨‰∏âÂ±ÇÔºâ Êï∞ÊçÆÈìæË∑ØÂ±ÇÔºàÁ¨¨‰∫åÂ±ÇÔºâ Áâ©ÁêÜÂ±ÇÔºàÁ¨¨‰∏ÄÂ±ÇÔºâ 1.1 TCP/IP ÂõõÂ±Ç Â∫îÁî®Â±ÇÔºàHttpÔºâ ÔºàSSL httpsÂú®ËøôÈáåÂÅöÂ§ÑÁêÜÔºâ ‰º†ËæìÂ±ÇÔºàTCP/UDPÔºâ ÁΩëÁªúÂ±ÇÔºàIPÔºâ ÁΩëÁªúÊé•Âè£Â±Ç 2. TCP/UDP ‰∫åËÄÖÁöÑÂå∫Âà´ TCP ÊòØÂèØÈù†ÁöÑÔºàÁªèËøá‰∏âÊ¨°Êè°ÊâãÔºåÂõõÊ¨°Êå•ÊâãÔºâÔºåÈù¢ÂêëËøûÊé•ÁöÑÂçèËÆÆ Ôºå‰º†ËæìÈÄüÂ∫¶ÊÖ¢ Ôºõ UDP ÊòØ‰∏çÂèØÈù†ÁöÑÔºåÊó†ËøûÊé•ÁöÑÂçèËÆÆÔºåÂçèËÆÆÁÆÄÂçïÔºåÈ¢ùÂ§ñÂºÄÈîÄÂ∞èÔºåÊïàÁéáÈ´òÔºå‰º†ËæìÈÄüÂ∫¶Âø´Ôºå‰∏çËÉΩ‰øùËØÅ‰º†ËæìÊòØÂê¶Ê≠£Á°Æ„ÄÇ 3. TCPÂíåUDPÂØπÂ∫îÁöÑÂçèËÆÆTCP ÂØπÂ∫îÁöÑÂçèËÆÆ HTTPÂçèËÆÆÔºö‰ªéWebÊúçÂä°Âô®‰º†Âà∞Ë∂ÖÊñáÊú¨Âà∞Êú¨Âú∞ÊµèËßàÂô®ÁöÑ‰º†ÈÄÅÂçèËÆÆÔºåÈªòËÆ§‰ΩøÁî®80Á´ØÂè£ Ôºõ FTP : Êñá‰ª∂‰º†ËæìÂçèËÆÆÔºåÈªòËÆ§‰ΩøÁî®21Á´ØÂè£ Ôºõ SMTP : ÈÇÆ‰ª∂‰º†ÈÄÅÂçèËÆÆÔºåÁî®‰∫éÂèëÈÄÅÈÇÆ‰ª∂ÔºåÈªòËÆ§‰ΩøÁî®25Âè∑Á´ØÂè£ Ôºõ POP3 ÔºöÂíå SMTP ÂØπÂ∫îÔºåPOP3 Áî®‰∫éÊé•Êî∂ÈÇÆ‰ª∂ÔºåÈªòËÆ§‰ΩøÁî® 110 Á´ØÂè£Ôºõ TEInet : ËøúÁ®ãÁôªÂΩïÁöÑÁ´ØÂè£ ÔºåÈªòËÆ§‰ΩøÁî®23Á´ØÂè£ UDP ÂØπÂ∫îÁöÑÂçèËÆÆ DNS : ÂüüÂêçËß£ÊûêÊúçÂä°ÔºåÂ∞ÜÂüüÂêçÂú∞ÂùÄËΩ¨Âåñ‰∏∫ IP Âú∞ÂùÄ ÔºåÈªòËÆ§‰ΩøÁî®53Á´ØÂè£ Ôºõ TFTP Ôºö ÁÆÄÂçïÊñá‰ª∂‰º†ËæìÂçèËÆÆÔºåÈªòËÆ§‰ΩøÁî®69Á´ØÂè£ Ôºõ SNMP Ôºö ÁÆÄÂçïÁΩëÁªúÁÆ°ÁêÜÂçèËÆÆÔºåÈªòËÆ§‰ΩøÁî®161Á´ØÂè£ÔºåÁî®Êù•ÁÆ°ÁêÜÁΩëÁªúËÆæÂ§áÁöÑ „ÄÇ 4. TCP ÁöÑÊä•ÊñáÊÆµ TCP ÊòØÈù¢ÂêëËøûÊé•ÔºåÂèØÈù†ÁöÑ‰º†ËæìÂçèËÆÆÔºåÈÄöËøáTCPÊä•ÊñáËøõË°å‰º†ËæìÔºåÊä•ÊñáÊÆµÂàÜ‰∏∫Â§¥ÈÉ®ÂíåÊï∞ÊçÆ‰∏§ÈÉ®ÂàÜ Â§¥ÈÉ®ÂåÖÂê´‰ø°ÊÅØ ÂéüÁ´ØÂè£ÂíåÁõÆÁöÑÁ´ØÂè£ Â∫îÁî®Á®ãÂ∫èÂú®ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÊâÄÂØπÂ∫îÁöÑÁ´ØÂè£Âè∑ Â∫èÂè∑ÔºàseqÔºâÂíåÁ°ÆËÆ§Â∫èÂè∑ÔºàackÔºâ TCP ÂèØÈù†‰º†ËæìÁöÑÂÖ≥ÈîÆÈÉ®ÂàÜÔºåack‰∏∫1Êó∂ÊâçÊúâÊïà Êï∞ÊçÆÂÅèÁßª Â§¥ÈÉ®ÈïøÂ∫¶‰∏çÂõ∫ÂÆöÔºåÊúÄÁü≠20ÔºåÊúÄÈïø60Â≠óËäÇÔºàË°•ÂÖÖÂêéÈù¢Ôºâ ‰øùÁïô ‰∏∫Â∞ÜÊù•ÂÆö‰πâÊñ∞ÁöÑÁî®ÈÄî‰øùÁïôÔºåÁé∞Âú®‰∏ÄËà¨ÁΩÆ‰∏∫0 Á™óÂè£ ÊªëÂä®Á™óÂè£Â§ßÂ∞èÔºåÁî®Êù•ÂëäÁü•ÂèëÈÄÅÁ´ØÊé•Êî∂Á´ØÁöÑÁºìÂ≠òÂ§ßÂ∞èÔºå‰ª•Ê≠§Êù•ÊéßÂà∂ÂèëÈÄÅÁ´ØÂèëÈÄÅÊï∞ÊçÆÁöÑÈÄüÁéáÔºå‰ªéËÄåËææÂà∞ÊµÅÈáèÊéßÂà∂„ÄÇ Êï∞ÊçÆÂÅèÁßªÔºö4‰ΩçÂ§¥ÈÉ®ÊâÄËÉΩË°®Á§∫ÁöÑÊúÄÂ§ßÂÄºÊòØ 1111 ÔºåËΩ¨‰∏∫ÂçÅËøõÂà∂‰∏∫ 15 Ôºå15*Ôºà32/8Ôºâ= 60 5. TCP ‰∏âÊ¨°Êè°ÊâãÔºåÂõõÊ¨°Êå•Êâã 6. TCP ‰∏∫‰ªÄ‰πàÊòØ‰∏âÊ¨°Êè°Êâã‰∏çÊòØ‰∏§Ê¨°Ôºü TCP ÁöÑ‰∏âÊ¨°Êè°ÊâãÊúÄ‰∏ªË¶ÅÊòØÈò≤Ê≠¢Â∑≤ËøáÊúüÁöÑËøûÊé•ÂÜçÊ¨°‰º†Âà∞Ë¢´ËøûÊé•ÁöÑ‰∏ªÊú∫ÔºåÂ¶ÇÊûú‰∏§Ê¨°Êè°ÊâãÔºåÊúâÂèØËÉΩÁ¨¨‰∏ÄÊ¨°Êè°ÊâãÂÆ¢Êà∑Á´ØÂèëÈÄÅÁöÑÊä•ÊñáÊÆµËøá‰∫ÜÂæà‰πÖÊâçÂà∞ÊúçÂä°Á´ØÔºåÊ≠§Êó∂ÂÆ¢Êà∑Á´ØÂ∑≤Áªè‰∏çÈúÄË¶ÅËøûÊé•‰∫ÜÔºåÂ¶ÇÊûúÊúçÂä°Á´ØÂª∫Á´ã‰∫ÜËøûÊé•ÔºåÂ∞±‰ºöÈÄ†ÊàêÊúçÂä°Âô®ËµÑÊ∫êÁöÑÊµ™Ë¥π„ÄÇ 7. TCPÊµÅÈáèÊéßÂà∂ÔºöÊªëÂä®Á™óÂè£ ÂâçÈù¢Âú®TCP Â§¥ÈÉ®Êê∫Â∏¶‰ø°ÊÅØ‰∏≠ÊèêÂà∞ËøáÔºöÁ™óÂè£ÁöÑÊ¶ÇÂøµÔºõ ÊâÄË∞ìÊµÅÈáèÊéßÂà∂Â∞±ÊòØËÆ©ÂèëÈÄÅÊñπÁöÑÂèëÈÄÅÈÄüÂ∫¶‰∏çË¶ÅÂ§™Âø´ÔºåË¶ÅËÆ©Êé•Êî∂ÊñπÊù•ÂæóÂèäÊé•Êî∂ Ôºõ ÊØèÊ¨°Client ËøîÂõûÁöÑ ACK ÈÉΩ‰ºöÂëäÁü• Server ÂΩìÂâç Client Á™óÂè£ÁöÑÂ§ßÂ∞èÔºåServer ‰ºöÊ†πÊçÆÁ™óÂè£ÁöÑÂ§ßÂ∞èÊéßÂà∂ÂèëÈÄÅÊï∞ÊçÆÂíåÂêëÂâçÊªëÂä® Ôºõ 8. HTTP ÂçèËÆÆÂåÖÊã¨Âì™‰∫õËØ∑Ê±ÇÔºü get post update delete head : Ë∑ü Get ÊñπÊ≥ïÁõ∏Âêå ÔºåÂè™‰∏çËøáÊúçÂä°Âô®ÂìçÂ∫îÊó∂‰∏ç‰ºöËøîÂõûÊ∂àÊÅØ‰ΩìÔºåÂèØ‰ª•Áî®‰∫éËé∑ÂèñËØ∑Ê±Ç‰∏≠ÈöêÂê´ÁöÑÂÖÉ‰ø°ÊÅØÔºåËÄå‰∏çÁî®‰º†ËæìÂÆû‰ΩìÊú¨Ë∫´Ôºå‰πüÁªèÂ∏∏Áî®Êù•ÊµãËØïË∂ÖÈìæÊé•ÁöÑÊúâÊïàÊÄßÔºåÂèØÁî®ÊÄßÂíåÊúÄËøëÁöÑ‰øÆÊîπ„ÄÇ options 9. Http Âíå Socket Âå∫Âà´ HTTP ÊòØË∂ÖÊñáÊú¨‰º†ËæìÂçèËÆÆ Ôºå Socket Â±û‰∫éÊé•Âè£ Ôºõ Http ÂèØËÉΩÊòØÂü∫‰∫éSocket ÁöÑ Ôºõ Socket ÂèØ‰ª•Áª¥ÊåÅ‰∏Ä‰∏™ÈïøËøûÊé• Ôºå HTTP ÊòØËØ∑Ê±ÇÂìçÂ∫îÂºèÔºåÈÄöÂ∏∏ Socket ÊïàÁéáÈ´ò Ôºõ 10. Http 1.0/1.1/2.0 Âå∫Âà´ 1.1 Áõ∏ÂØπ‰∫é1.0Ôºö ÊîØÊåÅÈïøËøûÊé• : Http 1.1 ÊîØÊåÅÈïøËøûÊé• Âíå ËØ∑Ê±ÇÁöÑÊµÅÊ∞¥Á∫øÂ§ÑÁêÜ Ôºå Âú®‰∏Ä‰∏™ TCP ËøûÊé•‰∏äÂèØ‰ª•‰º†ÈÄÅÂ§ö‰∏™HTTPËØ∑Ê±ÇÂíåÂìçÂ∫îÔºåÂáèÂ∞ë‰∫ÜÂª∫Á´ãÂíåÂÖ≥Èó≠ËøûÊé•ÁöÑÊ∂àËÄóÂíåÂª∂ËøüÔºåÂú®HTTP 1.1 ‰∏≠ÈªòËÆ§ÂºÄÂêØ‰∫Ü Connection: keep-alive , ‰∏ÄÂÆöÁ®ãÂ∫è‰∏äÂº•Ë°•‰∫Ü HTTP1.0 ÊØèÊ¨°ËØ∑Ê±ÇÈÉΩË¶ÅÂàõÂª∫ËøûÊé•ÁöÑÁº∫ÁÇπÔºõ ÁºìÂ≠òÂ§ÑÁêÜ Ôºö‰ΩøÁî® if-Modified-Since , Expires Êù•ÂÅö‰∏∫ÁºìÂ≠òÂà§Êñ≠ÁöÑÊ†áÂáÜ Ôºå 1.1‰∏≠ÂºïÂÖ•‰∫ÜÊõ¥Â§öÂèØ‰æõÈÄâÊã©ÁöÑÁºìÂ≠òÂ§¥Êù•ÊéßÂà∂ÁºìÂ≠òÁ≠ñÁï•Ôºàif-Modified-Since, if-Match, if-None-MatchÔºâ Â¢ûÂä†‰∫Ü range Â§¥ÂüüÔºåÊîØÊåÅÊñ≠ÁÇπÁª≠‰º†Ôºõ Host Â§¥Âüü Ôºö Âú®HTTP1.0 ‰∏≠ËÆ§‰∏∫ÊØèÂè∞ÊúçÂä°Âô®ÈÉΩÁªëÂÆö‰∏Ä‰∏™ÂîØ‰∏ÄÁöÑIPÂú∞ÂùÄÔºåÂõ†Ê≠§ÔºåËØ∑Ê±ÇÊ∂àÊÅØ‰∏≠ÁöÑURLÈ•ºÊ≤°Êúâ‰º†ÈÄí‰∏ªÊú∫ÂêçÔºàhostnameÔºâ , ‰ΩÜÈöèÁùÄËôöÊãü‰∏ªÊú∫ÊäÄÊúØÁöÑÂèëÂ±ïÔºå‰∏ÄÂè∞ÊúçÂä°Âô®‰∏äÂèØ‰ª•Â≠òÂú®Â§ö‰∏™ËôöÊãü‰∏ªÊú∫ÔºåÂπ∂‰∏îÂÖ±‰∫´Âêå‰∏Ä‰∏™IPÂú∞ÂùÄÔºåHTTP1.1 ÁöÑËØ∑Ê±ÇÊ∂àÊÅØÂíåÂìçÂ∫îÊ∂àÊÅØÈÉΩÂ∫îÊîØÊåÅ Host Â§¥ÂüüÔºåÂ¶ÇÊûúÊ≤°ÊúâHost Â§¥Âüü‰ºöÊä•Âëä‰∏Ä‰∏™ÈîôËØØÔºà400 Bad RequestÔºâ 2.0Áõ∏ÂØπ‰∫é1.x Ôºö ÊîØÊåÅÂ§öË∑ØÂ§çÁî® ÔºõÈíàÂØπ HTTPÈ´òÂª∂ËøüÁöÑÈóÆÈ¢òÔºåÂ§ö‰∏™ËØ∑Ê±Çstream ÂÖ±‰∫´‰∏Ä‰∏™ tcp ËøûÊé•ÁöÑÊñπÂºèÔºåËß£ÂÜ≥‰∫ÜHOL Blocking ÁöÑÈóÆÈ¢òÔºåÈôç‰Ωé‰∫ÜÂª∂ËøüÂêåÊó∂ÊèêÈ´ò‰∫ÜÂÆΩÂ∏¶ÁöÑÂà©Áî®Áéá ÔºõÂèØ‰ª•ËÆæÁΩÆ‰ºòÂÖàÁ∫ß Ôºõ ÈááÁî®‰∫åËøõÂà∂Ëß£Êûê Ôºö HTTP 1.x ÁöÑËß£ÊûêÊòØÂü∫‰∫éÊñáÊú¨„ÄÇÂü∫‰∫éÊñáÊú¨ÂçèËÆÆÁöÑÊ†ºÂºèËß£ÊûêÂ≠òÂú®Â§©ÁÑ∂Áº∫Èô∑ÔºåÊñáÊú¨ÁöÑË°®Áé∞ÂΩ¢ÂºèÊúâÂ§öÊ†∑ÊÄßÔºåË¶ÅÂÅöÂà∞ÂÅ•Â£ÆÊÄßÈúÄË¶ÅËÄÉËôëÁöÑÂú∫ÊôØÂæàÂ§öÔºå‰ΩÜÊòØ‰∫åËøõÂà∂Âàô‰∏çÂêåÔºåÂè™ËÆ§0Âíå1ÁöÑÁªÑÂêàÔºåÂü∫‰∫éËøôÁßçËÄÉËôëHttp2.0 Ëß£ÊûêÂÜ≥ÂÆöÈááÁî®‰∫åËøõÂà∂Ê†ºÂºèÔºåÂÆûÁé∞Êñπ‰æø‰∏îÂÅ•Â£ÆÔºõ È¶ñÈÉ®ÂéãÁº© Ôºö header Â§¥ÈÉ®ÂéãÁº©ÔºåÈÄâÊã©ÂêàÈÄÇÁöÑÂéãÁº©ÁÆóÊ≥ïÂèØ‰ª•ÂáèÂ∞ëÂåÖÁöÑÂ§ßÂ∞èÂíåÊï∞Èáè Ôºõ ÊúçÂä°Âô®Êé®ÈÄÅ Ôºö ÈááÁî®‰∫Ü SPDY ÁöÑÁΩëÈ°µÔºå‰æãÂ¶ÇÊàëÁöÑÁΩëÈ°µÊúâ‰∏Ä‰∏™ style,css ÁöÑËØ∑Ê±ÇÔºåÂú®ÂÆ¢Êà∑Á´ØÊî∂Âà∞ style.css Êï∞ÊçÆÁöÑÂêåÊó∂ÔºåÊúçÂä°Âô®‰ºöÂ∞Ü style.js Êñá‰ª∂Êé®ÈÄÅÁªôÂÆ¢Êà∑Á´ØÔºåÂΩìÂÆ¢Êà∑Á´ØÂÜçÊ¨°Â∞ùËØïËé∑Âèñ style.js Êó∂Â∞±ÂèØ‰ª•Áõ¥Êé•‰ªéÁºìÂ≠ò‰∏≠Ëé∑ÂèñÂà∞Ôºå‰∏çÁî®ÂÜçÂèëËØ∑Ê±Ç‰∫ÜÔºõ SPDY ÊûÑÊàêÂõæ 11. HTTPS ÂÆâÂÖ®ÁâàÊú¨ÁöÑHTTP ÔºåÂü∫‰∫é SSL Âä†ÂØÜ Ôºõ SSL Âª∫Á´ãËøáÁ®ãÔºö ÂÆ¢Êà∑Á´ØÁªôÂá∫ÔºàÂçèËÆÆÁâàÊú¨Âè∑ÔºåÁîüÊàêÁöÑÈöèÊú∫Êï∞ÔºåÂÆ¢Êà∑Á´ØÊîØÊåÅÁöÑÂä†ÂØÜÊñπÊ≥ïÔºâÔºõ ÊúçÂä°Á´ØÁ°ÆËÆ§ÂèåÊñπ‰ΩøÁî®ÁöÑÂä†ÂØÜÊñπÊ≥ïÔºåÂπ∂ÁªôÂá∫Êï∞Â≠óËØÅ‰π¶Ôºå‰ª•ÂèäÊúçÂä°Âô®ÁîüÊàêÁöÑÈöèÊú∫Êï∞ Ôºõ ÂÆ¢Êà∑Á´ØÁ°ÆËÆ§Êï∞Â≠óËØÅ‰π¶ÊúâÊïàÔºåÁÑ∂ÂêéÁîüÊàê‰∏Ä‰∏™Êñ∞ÁöÑÈöèÊú∫Êï∞ÔºåÂπ∂‰ΩøÁî®Êï∞Â≠óËØÅ‰π¶‰∏≠ÁöÑÂÖ¨Èí•ÔºåÂä†ÂØÜËøô‰∏™ÈöèÊú∫Êï∞ÔºåÂèëÁªôÊúçÂä°Âô® Ôºõ ÊúçÂä°Âô®‰ΩøÁî®Ëá™Â∑±ÁöÑÁßÅÈí•ÔºåËé∑ÂèñÂÆ¢Êà∑Á´ØÂèëÊù•È¢ùÈöèÊú∫Êï∞ Ôºõ ÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÊåâÁÖßÁ∫¶ÂÆöÁöÑÂä†ÂØÜÊñπÊ≥ïÔºå‰ΩøÁî®ÂâçÈù¢ÁöÑ‰∏â‰∏™ÈöèÊú∫Êï∞ÔºåÁîüÊàê ‚ÄúÂØπËØùÂØÜÈí•Ôºàsession keyÔºâ‚Äù, Áî®Êù•Âä†ÂØÜÊé•‰∏ãÊù•ÁöÑÊï¥‰∏™ÂØπËØùËøáÁ®ã „ÄÇ 12. Cookie Âíå Session Êúâ‰ªÄ‰πàÂå∫Âà´ Âõ†‰∏∫HTTPÊòØÊó†Áä∂ÊÄÅÁöÑÔºåÊâÄ‰ª•ÈúÄË¶ÅÊüêÁßçÊú∫Âà∂ËØÜÂà´Áî®Êà∑ Ôºõ Session ÊòØÂú®ÊúçÂä°Á´Ø‰øùÂ≠òÁöÑ‰∏Ä‰∏™Êï∞ÊçÆÁªìÊûÑÔºåÁî®Êù•Ë∑üË∏™Áî®Êà∑ÁöÑÁä∂ÊÄÅÔºåËøô‰∏™Êï∞ÊçÆÂèØ‰ª•‰øùÂ≠òÂú®ÈõÜÁæ§ÔºåÊï∞ÊçÆÂ∫ìÔºåÊñá‰ª∂‰∏≠ Ôºõ Cookie ÊòØÂÆ¢Êà∑Á´Ø‰øùÂ≠òÁî®Êà∑‰ø°ÊÅØÁöÑ‰∏ÄÁßçÊú∫Âà∂ ÔºåÁî®Êù•ËÆ∞ÂΩïÁî®Êà∑ÁöÑ‰∏Ä‰∫õ‰ø°ÊÅØÔºå‰πüÊòØÂÆûÁé∞ Session ÁöÑ‰∏ÄÁßçÊñπÂºè 13. HTTP Áä∂ÊÄÅÁ†Å Ê∂àÊÅØ 100 Continue Áî®Êù•ÈÄöÁü•ÂÆ¢Êà∑Á´ØÂÆÉÁöÑÈÉ®ÂàÜËØ∑Ê±ÇÂ∑≤ÁªèË¢´ÊúçÂä°Á´ØÊé•Êî∂Ôºå‰∏î‰ªçÊú™Ë¢´ÊãíÁªù Ôºõ ÊàêÂäü 200Âå∫Èó¥ÊÆµ ÈáçÂÆöÂêë 300Âå∫Èó¥ÊÆµ ËØ∑Ê±ÇÈîôËØØ 400~ ÊúçÂä°Á´ØÈîôËØØ 500~ 14. Â∏∏ËßÅÁöÑËØ∑Ê±ÇÂ§¥ÂíåÂìçÂ∫îÂ§¥ËØ∑Ê±ÇÂ§¥ Accept : ÂèØÊé•ÂèóÁöÑÂìçÂ∫îÂÜÖÂÆπÁ±ªÂûã Ôºå‰æãÂ¶ÇÔºöAccept: text/plain Accept-Language : ÂèØÊé•ÂèóÁöÑÂìçÂ∫îÂÜÖÂÆπÁöÑËØ≠Ë®ÄÂàóË°®„ÄÇ ‰æãÂ¶ÇÔºöAccept-Language:en-US Cache-Control : ÊòØÂê¶‰ΩøÁî®ÁºìÂ≠òÊú∫Âà∂ „ÄÇ‰æãÂ¶ÇÔºöCache-Control : no-cache Cookie : Http ÂçèËÆÆÁöÑCookie „ÄÇ ‰æãÂ¶ÇÔºöCookieÔºö$Version=1,Skin=new ; Connection : ÂÆ¢Êà∑Á´ØÊÉ≥Ë¶Å‰ºòÂÖà‰ΩøÁî®ÁöÑËøûÊé•Á±ªÂûã „ÄÇ ‰æãÂ¶ÇÔºö Connection: keep-alive ; Range : Êñ≠ÁÇπÁª≠‰º† Ôºõ User-Agent : ÊµèËßàÂô®ÁöÑË∫´‰ªΩÊ†áËØÜÂ≠óÁ¨¶‰∏≤ „ÄÇ ‰æãÂ¶ÇÔºö User-Agent:Mozi‚Ä¶ Date : ÂèëÈÄÅËØ•Ê∂àÊÅØÁöÑÊó•ÊúüÂíåÊó∂Èó¥ ËøîÂõûÂ§¥ Accept-Ranges : ÊúçÂä°Âô®ÊâÄÊîØÊåÅÁöÑÂÜÖÂÆπËåÉÂõ¥ „ÄÇ ‰æãÂ¶ÇÔºöAccept-Ranges:bytes Date : ÂèëÈÄÅÁöÑÊó•ÊúüÂíåÊó∂Èó¥ Cache-Control : ÈÄöÁü•‰ªéÊúçÂä°Á´ØÂà∞ÂÆ¢Êà∑Á´ØÂÜÖÁöÑÊâÄÊúâÁºìÂ≠òÊú∫Âà∂ÔºåË°®Á§∫ÂÆÉ‰ª¨ÊòØÂê¶ÂèØ‰ª•ÁºìÂ≠òËøô‰∏™ÂØπË±°ÂèäÁºìÂ≠òÊúâÊïàÊó∂Èó¥ Content-length : ÂìçÂ∫îÊ∂àÊÅØ‰ΩìÁöÑÈïøÂ∫¶ÔºåÁî®8ËøõÂà∂Â≠óËäÇË°®Á§∫ „ÄÇ ‰æãÂ¶ÇÔºö Content-Length: 348 ;]]></content>
      <tags>
        <tag>ÁΩëÁªú</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∏∏ËßÅadbÂëΩ‰ª§]]></title>
    <url>%2F2019%2F04%2F28%2F%E5%B8%B8%E8%A7%81adb%E5%91%BD%E4%BB%A4%2F</url>
    <content type="text"><![CDATA[1. Êü•ÁúãÂΩìÂâçËÆæÂ§á1adb devices 2. Êü•ÁúãËøûÊé•ËÆæÂ§áÁöÑËØ¶ÁªÜ‰ø°ÊÅØ1adb devices -l 3.Êü•ÁúãÂΩìÂâç‰∫§‰∫íÁöÑActivity‰ø°ÊÅØ12adb shell;//ËøõÂÖ•adb shell Èáådumpsys activity | grep "mFoc"]]></content>
      <tags>
        <tag>adb</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∫åÂèâÊ†ë]]></title>
    <url>%2F2019%2F04%2F23%2F%E4%BA%8C%E5%8F%89%E6%A0%91%2F</url>
    <content type="text"><![CDATA[1. ÁÆÄËø∞‰∏Ä‰∏™ËäÇÁÇπÊúâ‰∏çË∂ÖËøá2‰∏™Â≠êËäÇÁÇπÔºåË∂ÖËøá2‰∏™ÊòØÂ§öË∑ØÊ†ëÔºå‰∏çÂ±û‰∫é‰∫åÂèâÊ†ë„ÄÇ 2. ‰∫åÂèâÊêúÁ¥¢Ê†ëÂ∑¶ËäÇÁÇπÊØîÊ†πËäÇÁÇπÂ∞èÔºåÊØîÊ†πËäÇÁÇπÂ§ßÁöÑ‰∏∫Âè≥ËäÇÁÇπÔºõ 2.1 ‰∫åÂèâÊêúÁ¥¢Ê†ëÁöÑÈÅçÂéÜÂàÜ‰∏∫ÂâçÂ∫èÔºå‰∏≠Â∫èÂíåÂêéÂ∫èÔºå‰ΩøÁî®ÊúÄÂ§öÁöÑÊòØ‰∏≠Â∫èÔºõ ÂâçÂ∫è Ôºö Ê†πËäÇÁÇπ‚Äî‚Äî-&gt;Â∑¶ËäÇÁÇπ‚Äî‚Äî‚Äî-&gt;Âè≥ËäÇÁÇπÔºõ ‰∏≠Â∫è Ôºö Â∑¶ËäÇÁÇπ‚Äî‚Äî-&gt; Ê†πËäÇÁÇπ‚Äî‚Äî‚Äî&gt;Âè≥ËäÇÁÇπÔºõ ÂêéÂ∫è Ôºö Â∑¶ËäÇÁÇπ‚Äî‚Äî&gt; Âè≥ËäÇÁÇπ‚Äî‚Äî‚Äì&gt;Ê†πËäÇÁÇπ Á§∫‰æã‰ª£Á†ÅÔºö Node.java 123456789public class Node &#123; public int data; public Node leftNode; public Node rightNode; public Node(int data) &#123; this.data = data; &#125;&#125; BinarySearchTree.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150/** * ‰∫åÂèâÊêúÁ¥¢Ê†ëÔºàBinary Search TreeÔºâ * Ë¶ÅÊ±ÇÊòØÔºöËã•‰ªñÁöÑÂ∑¶Â≠êÊ†ë‰∏ç‰∏∫null,ÂàôÂ∑¶Â≠êÊ†ë‰∏äÁöÑÊâÄÊúâËäÇÁÇπÁöÑÂÄºÂùáÂ∞è‰∫éÊ†πËäÇÁÇπÔºõ * Ëã•Âè≥Â≠êÊ†ë‰∏ç‰∏∫nullÔºåÂàôÂè≥Â≠êÊ†ë‰∏äÁöÑÊâÄÊúâËäÇÁÇπÁöÑÂÄºÂùáÂ§ß‰∫éÊ†πËäÇÁÇπÔºõ */public class BinarySearchTree implements ITree &#123; //Ê†πËäÇÁÇπ private Node root; @Override public Node find(int key) &#123; //Êü•ÊâæËäÇÁÇπ Node current = root; if(root.data == key)&#123;//Â¶ÇÊûúÂàöÂ•ΩÊòØÊ†πËäÇÁÇπ return root; &#125;else&#123; while(current != null)&#123; if(current.data &gt; key)&#123; //ÂΩìÂâçËäÇÁÇπÊØîÊü•ÊâæÂÄºÂ§ßÔºåË¶ÅÂéªÂ∑¶ÊµãËäÇÁÇπÊü•Êâæ current = current.leftNode; &#125;else if(current.data == key)&#123; return current; &#125;else&#123; current = current.rightNode; &#125; &#125; &#125; return null; &#125; public Node getRoot()&#123; return root; &#125; @Override public boolean insert(int key) &#123; //Ë¶ÅÊèíÂÖ•Êñ∞ÁöÑËäÇÁÇπ Node newNode = new Node(key); //Â¶ÇÊûúÊ≤°ÊúâÊ†πËäÇÁÇπ if(root == null)&#123; root = newNode; return true; &#125;else&#123; //Â¶ÇÊûúÊúâÊ†πËäÇÁÇπÔºåÈúÄË¶ÅÂà§Êñ≠‰∏éÊ†πËäÇÁÇπÁöÑÊØîËæÉÂ§ßÂ∞è Node current = root; Node parentNode = null; while(current!=null)&#123; parentNode = current; if(current.data &gt; key)&#123; //ÂΩìÂâçÂÄºÊØîÊèíÂÖ•ÂÄºÂ§ßÔºåÈúÄË¶ÅÊêúÁ¥¢Â∑¶ËäÇÁÇπ current = current.leftNode; if(current == null)&#123; parentNode.leftNode = newNode; return true; &#125; &#125;else&#123; //ÊâæÂè≥ËäÇÁÇπ current = current.rightNode; if(current == null)&#123; parentNode.rightNode = newNode; return true; &#125; &#125; &#125; &#125; return false; &#125; //ÂâçÂ∫è @Override public void preOrder(Node current) &#123; //ÂâçÂ∫èÊòØÔºöÊ†πËäÇÁÇπ-Â∑¶ËäÇÁÇπ-Âè≥ËäÇÁÇπ //ÈªòËÆ§‰ªéÈ°∂ÈÉ®ËøõË°åÈÅçÂéÜ if(current!= null)&#123; System.out.println(current.data); preOrder(current.leftNode); preOrder(current.rightNode); &#125; &#125; //‰∏≠Â∫è @Override public void middleOrder(Node current) &#123; //‰∏≠Â∫èÔºöÂ∑¶ËäÇÁÇπ-Ê†πËäÇÁÇπ-Âè≥ËäÇÁÇπ , ‰∏≠Â∫èÊòØÊúÄÂ∏∏Áî®ÁöÑ if(current!=null)&#123; middleOrder(current.leftNode); System.out.println(current.data); middleOrder(current.rightNode); &#125; &#125; //ÂêéÂ∫è @Override public void postOrder(Node current) &#123; //ÂêéÂ∫èÔºöÂ∑¶ËäÇÁÇπ-Âè≥ËäÇÁÇπ-Ê†πËäÇÁÇπ postOrder(current.leftNode); postOrder(current.rightNode); System.out.println(current.data); &#125; //Êü•ÊâæÊúÄÂ∞èÂÄº @Override public Node findMin() &#123; //‰ªéÊ†πËäÇÁÇπÂºÄÂßãÊü•Êâæ Node currentNode = root; while(currentNode != null)&#123; if(currentNode.leftNode == null)&#123; return currentNode; &#125; currentNode = currentNode.leftNode; &#125; return currentNode; &#125; @Override public Node findMax() &#123; //‰∏ÄÁõ¥ÂØªÊâæÂè≥ËäÇÁÇπ Node currentNode = root; Node maxNode = currentNode; while (currentNode!=null)&#123; maxNode = currentNode; currentNode = currentNode.rightNode; &#125; return maxNode; &#125; //Âà†Èô§ËäÇÁÇπ(ÊúÄÁÆÄÂçïÁöÑÂÅöÊ≥ïÊòØÁªôËäÇÁÇπÂä†‰∏Ä‰∏™Â±ûÊÄßisDelete) /** * 1.ËØ•ËäÇÁÇπÊ≤°ÊúâÂ≠êËäÇÁÇπ * 2.ËØ•ËäÇÁÇπÂè™Êúâ1‰∏™Â≠êËäÇÁÇπ * 3.ËØ•ËäÇÁÇπÊúâ2‰∏™ËäÇÁÇπÔºàÊúÄÂ§çÊùÇÔºâ */ @Override public boolean delete(int deleteKey) &#123; //Ë¶ÅÂà†Èô§ËäÇÁÇπÈ¶ñÂÖàË¶ÅÊâæÂà∞Âà†Èô§ËäÇÁÇπÁöÑÁà∂ËäÇÁÇπ// Node currentNode = root;// Node parentNode = currentNode;// boolean isLeftNode = false;// while(currentNode != null)&#123;// parentNode = currentNode;// if(currentNode.data &gt; deleteKey)&#123;// isLeftNode = true;// currentNode = currentNode.leftNode;// &#125;else&#123;// isLeftNode = false;// currentNode = currentNode.rightNode;// &#125;// &#125; return false; &#125; Test.java 123456BinarySearchTree binarySearchTree = new BinarySearchTree();binarySearchTree.insert(30);binarySearchTree.insert(25);binarySearchTree.insert(20);binarySearchTree.insert(31);binarySearchTree.middleOrder(binarySearchTree.getRoot());]]></content>
      <tags>
        <tag>‰∫åÂèâÊ†ë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Handler‰∏≠ÁöÑPrinter]]></title>
    <url>%2F2019%2F03%2F13%2FHandler%E4%B8%AD%E7%9A%84Printer%2F</url>
    <content type="text"><![CDATA[Âú® Looper#loop() ÊñπÊ≥ï„ÄÇ 123456789101112131415161718192021222324252627282930313233public static void loop() &#123; final Looper me = myLooper();//ËøôÈáå‰∏ªÁ∫øÁ®ãÁöÑLooper ...xxx for (;;) &#123; Message msg = queue.next(); // might block if (msg == null) &#123; // No message indicates that the message queue is quitting. return; &#125; // This must be in a local variable, in case a UI event sets the logger //Áªô UI ‰∫ã‰ª∂ËÆæÁΩÆ‰∏Ä‰∏™Êó•Âøó final Printer logging = me.mLogging; if (logging != null) &#123; logging.println("&gt;&gt;&gt;&gt;&gt; Dispatching to " + msg.target + " " + msg.callback + ": " + msg.what); &#125; ...xx try &#123; //Á∫øÁ®ãÂàÜÂèëÊ∂àÊÅØÁªôHandler //msg.target ÊåáÁöÑÊòØ Handler msg.target.dispatchMessage(msg); dispatchEnd = needEndTime ? SystemClock.uptimeMillis() : 0; &#125; finally &#123; ....xx &#125; ....xx if (logging != null) &#123; logging.println("&lt;&lt;&lt;&lt;&lt; Finished to " + msg.target + " " + msg.callback); &#125; ....xx &#125; &#125; Ëøô‰∏™ Printer Êó•ÂøóÁªôÊàëÊâìÂç∞‰∫Ü‰∏ªÁ∫øÁ®ãÂàÜÂèëÊ∂àÊÅØ‰πãÂâçÊâìÂç∞‰∏Ä‰∏™Êó•ÂøóÔºåÂàÜÂèëÂÆåÊàê‰πãÂêéÂèàÊâìÂç∞‰∏ÄÊù°Êó•ÂøóÔºåÂàÜÂà´ÊòØÔºö 123Dispatching to + ÁõÆÊ†áHandler + msg.what;Finished to + ÁõÆÊ†áHandler,ÂàÜÂèëÂÆåÊàê Êàë‰ª¨Áü•ÈÅìËøô‰∏™Âú®Â∫îÁî®Á®ãÂ∫èÂêØÂä®ÁöÑÂÖ•Âè£ ActivityThread#main ÊñπÊ≥ïÔºåÂàùÂßãÂåñ‰∫Ü‰∏ªÁ∫øÁ®ãÁöÑ Looper . ÂêåÊó∂‰πüÊúâ‰∏Ä‰∏™ Handler H , Activity ÁöÑÁîüÂëΩÂë®ÊúüÂ∞±ÊòØÈÄöËøáÂêë H ÂèëÈÄÅÊ∂àÊÅØÊù•ÂÆåÊàêÁöÑ„ÄÇ Android ÊòØÊ∂àÊÅØÈ©±Âä®ÁöÑÔºåËøôÂ§ßÊ¶ÇÂ∞±ÊòØËøô‰∏™ÊÑèÊÄùÂêß„ÄÇÂ¶ÇÊûúÊàë‰ª¨ÂèØ‰ª•ÂæóÁü•‰∏ªÁ∫øÁ®ãÊØè‰∏™messageÁöÑÊ∂àËÄóÊó∂Èó¥ÔºåÂèØ‰ª•Èó¥Êé•Áî®Êù•ÂàÜÊûêÊØè‰∏™ÊñπÊ≥ïÁöÑËÄóÊó∂Ôºå‰ªéËÄåËøõË°å‰∏Ä‰∏™‰ºòÂåñÂ∑•‰ΩúÔºåÂèØ‰ª•Áªô‰∏ªÁ∫øÁ®ãÁöÑLooper ËÆæÁΩÆ‰∏Ä‰∏™PrinterÔºå Â¶Ç‰∏ãÔºö 123456Looper.myLooper().setMessageLogging(new Printer() &#123; @Override public void println(String x) &#123; xxx... &#125; &#125;); Â¶ÇÊûúÊúâÂè¶Â§ñ‰∏ÄÊù°Á∫øÁ®ãÔºåËÆ∞ÂΩïÊàë‰ª¨ÊâßË°åÂâçÁöÑÂ†ÜÊ†à‰ø°ÊÅØÔºåÂêåÊó∂ËÆ∞ÂΩïÊØèÊ¨° dispatchMessage ÊñπÊ≥ïËÄóÊó∂ÔºåÁÆóÂá∫‰∫åËÄÖ‰πãÂ∑ÆÔºåÂΩìË∂ÖËøáÊüê‰∏™Êó∂Èó¥ÁöÑÊó∂ÂÄôÔºåËÆ§‰∏∫ËØ•ÊñπÊ≥ïËÄóÊó∂ËøáÈïøÔºåÈúÄË¶ÅËøõË°å‰ºòÂåñ„ÄÇÂà∞ËøôÈáå‰Ω†ÂèØËÉΩÊÉ≥Âà∞‰∫Ü BlockCannary ÊòØÁöÑÂÆÉÂü∫Êú¨‰∏äÂ∞±ÊòØÂà©Áî®‰∫ÜËøô‰∏™ÂéüÁêÜÔºåÊù•ÂàÜÊûê‰ºòÂåñÁöÑ„ÄÇ]]></content>
      <tags>
        <tag>Logging</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â±èÂπïÊóãËΩ¨ÂêéActivityÁîüÂëΩÂë®Êúü]]></title>
    <url>%2F2019%2F03%2F12%2F%E5%B1%8F%E5%B9%95%E6%97%8B%E8%BD%AC%E5%90%8EActivity%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%2F</url>
    <content type="text"><![CDATA[‰∏ªË¶ÅÈíàÂØπÂ±èÂπïÊóãËΩ¨ÂØπ Activity ÁîüÂëΩÂë®ÊúüÊúâ‰ΩïÂΩ±Âìç„ÄÇ Á¨¨‰∏ÄÁßçÊÉÖÂÜµÂú®Ê≤°ÊúâÂÖ∂ÂÆÉÈÖçÁΩÆÁöÑÊÉÖÂÜµ‰∏ãÔºåÈÄöËøáÊó•ÂøóÊâìÂç∞Â±èÂπïÊóãËΩ¨‰ºöË∞ÉÁî®ÁöÑÊñπÊ≥ï„ÄÇ 1//onPause()----onStop()-----onDestroy()-----onCreate() ---- onStart()---onResume() Á¨¨‰∫åÁßçÊÉÖÂÜµÂÖ≥‰∫é android:configChanges ÁöÑÈÖçÁΩÆÔºå‰∏çÂêåÁöÑÂÄºÂØπÁîüÂëΩÂë®Êúü‰πü‰ºöÊúâ‰∏çÂêåÁöÑÂΩ±Âìç„ÄÇËøô‰∏™ÂÄºÊúÄÂ∏∏Áî®ÁöÑÂÄºÂåÖÊã¨Ôºö orientation Âíå keyboardHidden, ÂàÜÂà´Áî®‰∫éÈÅøÂÖçÂõ†Â±èÂπïÊñπÂêëÂíåÂèØÁî®ÈîÆÁõòÊîπÂèòËÄåÂØºËá¥ÁöÑÈáçÂêØ„ÄÇ ‰æãÂ¶ÇÔºö 12&lt;activity android:name=".MainActivity" android:configChanges="orientation|keyboardHidden" / &gt; ÂΩìÂÖ∂‰∏≠‰∏Ä‰∏™ÈÖçÁΩÆÂèëÁîüÂèòÂåñÊó∂Ôºå MainActivity ‰∏ç‰ºöÈáçÂêØ„ÄÇ ‰ΩÜÊòØ‰ºöÊî∂Âà∞ onConfigurationChanged() ÁöÑË∞ÉÁî®„ÄÇÂêëÊ≠§ÊñπÊ≥ï‰º†ÈÄí Configuration ÂØπË±°ÊåáÂÆöÊñ∞ËÆæÂ§áÈÖçÁΩÆ„ÄÇÂèØ‰ª•ÈÄöËøáËØªÂèñ Configuration ‰∏≠ÁöÑÂ≠óÊÆµÔºåÁ°ÆÂÆöÊñ∞ÈÖçÁΩÆ„ÄÇÁÑ∂ÂêéÈÄöËøáÊõ¥Êñ∞ÁïåÈù¢‰∏≠‰ΩøÁî®ÁöÑËµÑÊ∫êËøõË°åÈÄÇÂΩìÁöÑÊõ¥Êîπ„ÄÇË∞ÉÁî®Ê≠§ÊñπÊ≥ïÊó∂ÔºåActivity ÁöÑ Resources ÂØπË±°‰ºöÁõ∏Â∫îÁöÑËøõË°åÊõ¥Êñ∞Ôºå‰ª•Ê†πÊçÆÊñ∞ÈÖçÁΩÆËøîÂõûËµÑÊ∫êÔºåËøôÊ†∑ÔºåÂ∞±ËÉΩÂ§üÂú®Á≥ªÁªü‰∏çÈáçÂêØ Activity ÁöÑÊÉÖÂÜµ‰∏ãËΩªÊùæÈáçÁΩÆ UI ÁöÑÂÖÉÁ¥†„ÄÇ ‰ΩÜÊòØÔºåÊàëÁöÑÁºñËØëÁâàÊú¨È´ò‰∏Ä‰∫õÔºåÂÆûÈ™åÔºåÂèëÁé∞ÂΩìÈÖçÁΩÆ‰ª•‰∏äconfigChanges ËøòÊòØ‰ºöÈáçÂêØ Activity, Âπ∂‰∏îÊ≤°ÊúâÂõûË∞É onConfigurationChanged() ÁöÑÂõûË∞É ËÄåÂêéÔºåÂºÄÂßãÊü•ÈòÖÊñáÊ°£ËØ¥ÊòéÔºåÂèëÁé∞Ôºö 1Ê≥®ÊÑè: Âú®Android3.2ÔºàAPI 13ÔºâÂºÄÂßãÔºåÂΩìËÆæÂ§áÂú®Á∫µÂêëÂíåÊ®™Âêë‰πãÈó¥ÂàáÊç¢Êó∂Ôºå ‚ÄúÂ±èÂπïÂ∞∫ÂØ∏‚Äù‰πü‰ºöÂèëÁîüÊîπÂèòÔºåÂõ†Ê≠§ÔºåÂú®ÂºÄÂèëÈíàÂØπ API 13ÊàñËÄÖÊõ¥È´òÁâàÊú¨ÁöÑÂ∫îÁî®Êó∂ÔºàÂΩìÁÑ∂Êàë‰ª¨Áé∞Âú®Âü∫Êú¨ÈÉΩÊòØ4.0 ‰ª•‰∏äÔºâÔºåËã•Ë¶ÅÈÅøÂÖçÁî±‰∫éËÆæÂ§áÊñπÂêëÊîπÂèòËÄåÂØºËá¥ËøêË°åÊó∂ÈáçÂêØÔºåÂàôÈô§‰∫Ü "orientation" ÂÄº‰ª•Â§ñÔºåËøòÂøÖÈ°ªÊ∑ªÂä† "screenSize" ÂÄºÔºå ‰πüÂ∞±ÊòØËØ¥ÔºåÊÇ®ÂøÖÈ°ªÂ£∞ÊòéÔºöandroid:configChanges="orientation|screenSize". ÂΩìÊ∑ªÂä†Êñ∞ÁöÑÈÖçÁΩÆ screenSize ‰πãÂêéÔºåÂ±èÂπïÊóãËΩ¨ÂõûË∞ÉÂ¶Ç‰∏ãÔºö 1// onConfigurationChanged invoked... Âè™‰ºöË∞ÉÁî®onConfigurationChangedÔºàÔºâ ÊñπÊ≥ïÔºåÂπ∂Ê≤°ÊúâÈáçÂêØ ÊúÄÂêéÂ∞±ÊòØ‰∏Ä‰∫õËµÑÊ∫êÁöÑÂèòÊõ¥ÔºåÂ¶ÇÊûúÊúâ‰∫õÂõæÂÉèÂ∫îËØ•Âú®Ê®™ÂêëÂíåÁ∫µÂêë‰πãÈó¥ÂàáÊç¢ÔºåÂ∞±ÂøÖÈ°ªÂú® onConfigurationChanged() ÊúüÈó¥Â∞ÜÊØè‰∏™ËµÑÊ∫êÈáçÊñ∞ÂàÜÈÖçÁªôÊØè‰∏™ÂÖÉÁ¥†„ÄÇ ÊñáÊ°£Âú∞ÂùÄÔºöhttps://developer.android.com/guide/topics/resources/runtime-changes?hl=zh-cn]]></content>
      <tags>
        <tag>ÁîüÂëΩÂë®Êúü</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Handler‰∏≠ÁöÑIdleHandler]]></title>
    <url>%2F2019%2F03%2F07%2FHandler%E4%B8%AD%E7%9A%84IdleHandler%2F</url>
    <content type="text"><![CDATA[1.1 IdleHandler Âü∫Êú¨ÊÉÖÂÜµ IdleHandler ÂèØ‰ª•Áî®Êù•ÊèêÂçáÊÄßËÉΩÔºå‰∏ªË¶ÅÁî®Âú®Êàë‰ª¨Â∏åÊúõËÉΩÂ§üÂú®ÂΩìÂâçÁ∫øÁ®ã Ê∂àÊÅØÈòüÂàóÁ©∫Èó≤Êó∂ ÂÅö‰∫õ‰∫ãÊÉÖÔºà‰æãÂ¶ÇUIÁ∫øÁ®ãÂú®ÊòæÁ§∫ÂÆåÊàêÂêéÔºåÂ¶ÇÊûúÁ∫øÁ®ãÁ©∫Èó≤Êàë‰ª¨Â∞±ÂèØ‰ª•ÊèêÂâçÂáÜÂ§áÂÖ∂‰ªñÂÜÖÂÆπÔºâÁöÑÊÉÖÂÜµ‰∏ãÔºå‰∏çËøáÊúÄÂ•Ω‰∏çË¶ÅÂÅöËÄóÊó∂Êìç‰Ωú„ÄÇ IdleHandler ‰Ωç‰∫é MessageQueue Á±ª‰∏≠ÁöÑ‰∏Ä‰∏™ÈùôÊÄÅÊé•Âè£ÔºåÂ¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143MessageQueue#IdleHandlerclass MessageQueue&#123; ... /** * Callback interface for discovering when a thread is going to block * waiting for more messages. * // ÂèØ‰ª•ÁêÜËß£‰∏∫Ê∂àÊÅØÊöÇÊó∂Â§ÑÁêÜÂÆåÁöÑÈÄÇÂêàÂõûË∞ÉÁöÑ public static interface IdleHandler &#123; /** * Called when the message queue has run out of messages and will now * wait for more. Return true to keep your idle handler active, false * to have it removed. This may be called if there are still messages * pending in the queue, but they are all scheduled to be dispatched * after the current time. */ //ËøîÂõûtrueÂ∞±ÊòØÂçïÊ¨°ÂõûË∞ÉÂêé‰∏çÂà†Èô§Ôºå‰∏ãÊ¨°ËøõÂÖ•Á©∫Èó≤Êó∂ÁªßÁª≠ÂõûË∞ÉËØ•ÊñπÊ≥ïÔºåfalse Âè™ÂõûË∞ÉÂçïÊ¨°ÊâßË°åÂÆå‰πãÂêé‰ºöÁßªÈô§ boolean queueIdle(); &#125; //Âà§Êñ≠ÂΩìÂâçÈòüÂàóÊòØ‰∏çÊòØÁ©∫Èó≤ÁöÑÔºåËæÖÂä©ÊñπÊ≥ï public boolean isIdle() &#123; synchronized (this) &#123; final long now = SystemClock.uptimeMillis(); return mMessages == null || now &lt; mMessages.when; &#125; &#125; //Ê∑ªÂä†‰∏Ä‰∏™IdleHandler Âà∞Á©∫Èó≤ÈòüÂàó‰∏≠ÔºåArrayList Â≠òÂÇ® public void addIdleHandler(@NonNull IdleHandler handler) &#123; if (handler == null) &#123; throw new NullPointerException("Can't add a null IdleHandler"); &#125; synchronized (this) &#123; mIdleHandlers.add(handler); &#125; &#125; // Âà†Èô§‰∏Ä‰∏™IdleHandler public void removeIdleHandler(@NonNull IdleHandler handler) &#123; synchronized (this) &#123; mIdleHandlers.remove(handler); &#125; &#125; //message ÁöÑËé∑Âèñ‰∏ã‰∏ÄÊù°Ê∂àÊÅØ Message next() &#123; ... int pendingIdleHandlerCount = -1; // -1 only during first iteration int nextPollTimeoutMillis = 0; for (;;) &#123;//Âæ™ÁéØËé∑Âèñ‰∏ã‰∏ÄÊù°Ê∂àÊÅØ if (nextPollTimeoutMillis != 0) &#123; Binder.flushPendingCommands(); &#125; nativePollOnce(ptr, nextPollTimeoutMillis); synchronized (this) &#123; // Try to retrieve the next message. Return if found. final long now = SystemClock.uptimeMillis(); Message prevMsg = null; Message msg = mMessages; if (msg != null &amp;&amp; msg.target == null) &#123; // Stalled by a barrier. Find the next asynchronous message in the queue. do &#123; prevMsg = msg; msg = msg.next; &#125; while (msg != null &amp;&amp; !msg.isAsynchronous()); &#125; if (msg != null) &#123; if (now &lt; msg.when) &#123; // Next message is not ready. Set a timeout to wake up when it is ready. nextPollTimeoutMillis = (int) Math.min(msg.when - now, Integer.MAX_VALUE); &#125; else &#123; // Got a message. mBlocked = false; if (prevMsg != null) &#123; prevMsg.next = msg.next; &#125; else &#123; mMessages = msg.next; &#125; msg.next = null; if (DEBUG) Log.v(TAG, "Returning message: " + msg); msg.markInUse(); return msg; &#125; &#125; else &#123; // No more messages. nextPollTimeoutMillis = -1; &#125; // Process the quit message now that all pending messages have been handled. if (mQuitting) &#123; dispose(); return null; &#125; // If first time idle, then get the number of idlers to run. // Idle handles only run if the queue is empty or if the first message // in the queue (possibly a barrier) is due to be handled in the future. if (pendingIdleHandlerCount &lt; 0 &amp;&amp; (mMessages == null || now &lt; mMessages.when)) &#123; pendingIdleHandlerCount = mIdleHandlers.size(); &#125; //Ë°®Á§∫Ê≤°ÊúâËÆæÁΩÆidle handler ÂéªËøêË°åÔºåÂ∞±ÈòªÂ°û if (pendingIdleHandlerCount &lt;= 0) &#123; // No idle handlers to run. Loop and wait some more. mBlocked = true; continue; &#125; //ËÆæÁΩÆÈïøÂ∫¶ÔºåÊúÄÂ∞èÈïøÂ∫¶ÊòØ4 if (mPendingIdleHandlers == null) &#123; mPendingIdleHandlers = new IdleHandler[Math.max(pendingIdleHandlerCount, 4)]; &#125; //Â∞ÜÈõÜÂêàËΩ¨Âåñ‰∏∫Êï∞ÁªÑ mPendingIdleHandlers = mIdleHandlers.toArray(mPendingIdleHandlers); &#125; // Run the idle handlers. // We only ever reach this code block during the first iteration. //Âæ™ÁéØÈÅçÂéÜËøô‰∏™Á©∫Èó≤ÈòüÂàóÊï∞ÁªÑ for (int i = 0; i &lt; pendingIdleHandlerCount; i++) &#123; final IdleHandler idler = mPendingIdleHandlers[i]; mPendingIdleHandlers[i] = null; // release the reference to the handler boolean keep = false; try &#123; //ÂõûË∞ÉÂèñÂá∫ËøîÂõûÂÄº keep = idler.queueIdle(); &#125; catch (Throwable t) &#123; Log.wtf(TAG, "IdleHandler threw exception", t); &#125; //ËøôÈáåÁúãÂà∞‰∫ÜÂêßÔºåÂ¶ÇÊûúÊòØËøîÂõûfalse, ÈÇ£Â∞±ËøõÂéª‰∫ÜÔºåÊâßË°åÊìç‰ΩúÂêéÂ∞±‰ªéÈõÜÂêà‰∏≠remove‰∫Ü if (!keep) &#123; synchronized (this) &#123; mIdleHandlers.remove(idler); &#125; &#125; &#125; .... &#125; &#125; ...&#125; 1.2 ‰ΩøÁî®Âú∫ÊôØ123456789Looper.myQueue().addIdleHandler(new MessageQueue.IdleHandler() &#123; @Override public boolean queueIdle() &#123; //ËøôÈáåÂÅö‰∏Ä‰∫õÊìç‰Ωú Log.i("xx","addIdleHandler invoked..."+iv.getWidth() + "::"+iv.getHeight()); return false; &#125;&#125;); ÊàëËÆ∞Âæó‰πãÂâçÊàë‰ª¨ÊÉ≥Ë¶ÅËé∑Âèñxml‰∏≠Êüê‰∏™Êéß‰ª∂ÁöÑwidth Âíå height Êó∂ÔºåÂú® onCreate ÊñπÊ≥ï‰∏≠Áõ¥Êé•Ëé∑ÂèñÔºå‰ºöËé∑ÂèñÂà∞ÊòØ 0 Ôºå Âõ†‰∏∫Ëøô‰∏™ view ËøòÊú™ÁªòÂà∂ÂÆåÊàêÔºåÊâÄ‰ª•Ëé∑Âèñ‰∏çÂà∞ÔºåÂΩìÊó∂ÁöÑËß£ÂÜ≥ÊñπÊ°àÊàëËÆ∞ÂæóÊòØ‰ΩøÁî® Handler ÂèëÈÄÅ‰∏Ä‰∏™Âª∂Êó∂Ê∂àÊÅØËé∑ÂèñÔºåÁé∞Âú®ÊúâÊõ¥Â•ΩÁöÑÊñπÂºèÂÆûÁé∞‰∫ÜÔºåÈÇ£Â∞±ÊòØÈÄöËøá IdleHandler, Â¶Ç‰∏äÈù¢‰ª£Á†ÅÊâÄÁ§∫„ÄÇ ÂΩìÁÑ∂ËøòÂèØ‰ª•ÂÅö‰∏Ä‰∫õÂÖ∂ÂÆÉÈ¢ÑÂ§ÑÁêÜÁöÑÁÆÄÂçïÊìç‰Ωú„ÄÇ]]></content>
      <tags>
        <tag>IdleHandler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊÄßËÉΩ‰ºòÂåñ‰∫å]]></title>
    <url>%2F2019%2F02%2F26%2F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[1. SVGÂú®È°πÁõÆ res Âè≥ÈîÆÂá∫Êù•ÔºåNew ---&gt; Vector Asset ÔºåSVG Âõæ‰∏ç‰ºöÂÉè‰ΩçÂõæ‰∏ÄÊ†∑Âõ†‰∏∫Áº©ÊîæËÄå‰ΩøÂõæÁâáË¥®Èáè‰∏ãÈôçÔºå‰ºòÁÇπÂú®‰∫éËäÇÁúÅÁ©∫Èó¥ÂíåÂÜÖÂ≠òÔºåÂ∏∏Â∏∏Áî®‰∫é‰∏Ä‰∫õÁÆÄÂçïÁöÑÂõæÊ†á„ÄÇ Â¶ÇÊûúÊòØ‰ªéÂ§ñÈÉ®ÂØºÂÖ•SVG,ÈúÄË¶Å‰πüÊòØÂè≥ÈîÆres---new---Vector Asset ,ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöAsset Type ÂãæÈÄâÁöÑÊòØÔºö Local File, ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØËøô‰∏™psdÂõæÁâá‰∏çÊîØÊåÅÊ∏êÂèòÂíåÈÄèÊòéÂ∫¶ÔºåÂ¶Ç‰∏ãÂõæÔºö ÂØºÂÖ•ËøõÊù•ÂêéÔºåËá™Âä®ÁîüÊàê xml . ËøôÈáåÊèê‰æõ‰∏Ä‰∏™ android ÊâÄÊúâ Ëá™Â∏¶ÁöÑ svg ÂõæÁâáÁöÑÂú∞ÂùÄÔºö https://megatronking.github.io/SVG-Android/ ÊâπÈáèËΩ¨Âåñ svg2vector ÁöÑÂ∑•ÂÖ∑ÔºåËøôÈáåÂèØ‰ª• ‰∏ãËΩΩ , ÊòØ‰∏Ä‰∏™ svg2vector-cli-1.0.1.jar. Ëøô‰∏™ÊòØÊúÄÊñ∞ÁâàÊú¨ Êìç‰ΩúÂëΩ‰ª§ÊòØÔºö 1234567java -jar svg2vector-cli-1.0.1.jar -d (svgÂõæÁâáÊâÄÂú®ÁöÑÁõÆÂΩï) -o (ËæìÂÖ•ÁõÆÂΩïÁîüÊàêvectorÁöÑÁõÆÂΩï)//ÊåáÂÆöÂÆΩÂíåÈ´òjava -jar svg2vector-cli-1.0.1.jar -d D:\svg -o D:\vector -w 24 -h 24 ‰æãÂ¶ÇÔºöjava -jar svg2vector-cli-1.0.1.jar -d C:\Users\xuqianqian\Desktop\svg\images -o C:\Users\xuqianqian\Desktop\svg\vector-image Â∞Üsvg ÂõæÁâáÁîüÊàêÊåáÂÆöÁõÆÂΩïÁöÑÂõæÁâá„ÄÇ ÈúÄË¶ÅÂú®Êàë‰ª¨ÁöÑapp ÁöÑ build.gradle Êñá‰ª∂‰∏≠ÈÖçÁΩÆ 12345678910android&#123; defaultConfig&#123; ... //Â∞ÜsvgÁîüÊàêÊåáÂÆöÁõÆÂΩïÁöÑpng, ‰∏ãÈù¢ÂèØÊåáÂÆöÁõÆÂΩï vectorDrawables.generatedDensities('hdpi','xhdpi') .... &#125;&#125;//Âú®Â∏ÉÂ±Ä‰∏≠Áî®Ê≥ïandroid:src="@drawable/eye" ÈÖçÁΩÆÂÆåÊàêÂêéÔºåÊàë‰ª¨ÂèØ‰ª•ÁÇπÂáª Build APK(s) ,ËßÇÂØüÁîüÊàêÁöÑapk ÈáåÈù¢ÁöÑÊñá‰ª∂Ôºö Êàë‰ª¨Âú®Êàë‰ª¨ÊåáÂÆöÁöÑÁõÆÂΩï‰∏ãdrawable-hdpi Âíå drawable-xhdpiÂèëÁé∞‰∫Ü Êàë‰ª¨svg ÂõæÁâáÁîüÊàê‰∫ÜÂØπÂ∫îÁöÑ png ÂõæÁâá„ÄÇËøôÊ†∑ÁöÑÂ•ΩÂ§ÑÊòØÊàë‰ª¨ÂèØ‰ª•ÈÅøÂÖçÈÖçÁΩÆÂ§öÂ•óÂõæÂú®ÊØè‰∏™ÂàÜËæ®Áéá‰∏ãÔºåÁî® svg ÂõæÂèØ‰ª•Ëá™Âä®Â∏ÆÊàë‰ª¨ÁîüÊàêÊåáÂÆöÁõÆÂΩïÁöÑÂõæÁâá„ÄÇ SVG ÂÖºÂÆπÊñπÂºè Âú® Android 5.0 ‰πãÂâçÔºåÂèØ‰ª•Âêë‰∏äÈù¢ÈÇ£‰πàÈÖçÁΩÆÔºåÈÇ£‰πà5.0‰πãÂêéÔºåÂ¶ÇÊûúÈÖçÁΩÆÂë¢Ôºü 12345vectorDrawables.useSupportLibrary=trueimplementation 'com.android.support:appcompat-v7:28.0.0'//Âú®Â∏ÉÂ±Ä‰∏≠Áî®Ê≥ï xmlns:app="http://schemas.android.com/apk/res-auto" app:srcCompat="@drawable/eye" ÈÄöËøá‰ΩøÁî® svg ÂõæÁâáÔºåËß£ÂÜ≥‰∫ÜÊàë‰ª¨Â§ßÈáè‰ΩøÁî®Â•óÂõæÁöÑÈóÆÈ¢ò„ÄÇ 2. Tint ÁùÄËâ≤Âô® tint ÁùÄËâ≤Âô®Â∞±ÊòØÂèØ‰ª•ÊîπÂèòÊàë‰ª¨‰∏Ä‰∫õÂõæÊ†áÁöÑÈ¢úËâ≤Ôºå‰æãÂ¶ÇÔºö ‰∏äËø∞ÈÇ£‰∏™ÂõæÁâáÊòØÈªëËâ≤ÁöÑÔºåÊàë‰ª¨ÈÄöËøáÊ∑ªÂä†Â±ûÊÄß android:tint=&quot;@color/colorAccent&quot; , Â∞±ÂèØ‰ª•ÊîπÂèòÂÆÉÁöÑÈ¢úËâ≤Ôºö Êàë‰ª¨ÁªèÂ∏∏‰ºöÈÅáÂà∞‰æãÂ¶ÇÁÇπÂáªÊåâÈíÆÂèòÈ¢úËâ≤Âï•ÁöÑÔºå‰ª•ÂâçÁªèÂ∏∏ÂºÑ‰∏§Âº†ÂõæÔºå‰∏Ä‰∏™Â∏∏ÊÄÅÁöÑicon, ‰∏Ä‰∏™ÁÇπÂáªÊÄÅÁöÑ icon. Êúâ‰∫ÜËøô‰∏™ÁùÄËâ≤Âô®ÔºåÊúâ‰∫õicon Êàë‰ª¨‰∏çÈúÄË¶ÅÁî®‰∏§Âº†ÂõæÂï¶„ÄÇ‰æãÂ¶ÇÔºö res--color--tint_honor_color.xml 123456&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:color="@color/colorPrimary" android:state_pressed="true"/&gt; &lt;item android:color="@android:color/transparent"/&gt;&lt;/selector&gt; ÂÜçÊù•‰∏Ä‰∏™ res-drawable-tint_honor_src.xml: 123456&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;selector xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:drawable="@drawable/next" android:state_pressed="true"/&gt; &lt;item android:drawable="@drawable/next"/&gt;&lt;/selector&gt; xml ‰∏≠Ôºö 123456789&lt;ImageView android:layout_marginTop="30dp" android:clickable="true" android:focusable="true" android:layout_width="wrap_content" android:layout_height="wrap_content" app:srcCompat="@drawable/tint_honor_src" android:tint="@color/tint_honor_color" /&gt; 3. ËµÑÊ∫êÊâìÂåÖ Áî±‰∫é‰ΩøÁî®Á¨¨‰∏âÊñπÂ∫ìÔºå‰æãÂ¶Ç v7 ÂåÖÁöÑÂºïÂÖ•ÔºåÂ∫ì‰∏≠ÂåÖÂê´‰∫ÜÂ§ßÈáèÂõΩÈôÖÂåñËµÑÊ∫êÔºåÊàë‰ª¨ÂèØ‰ª•Ê†πÊçÆÂÆûÈôÖÊÉÖÂÜµÔºåÈÖçÁΩÆÊàë‰ª¨ÊâÄÈúÄË¶ÅÁöÑËØ≠Ë®ÄÔºåÂéªÈô§ÂÖ∂ÂÆÉËØ≠Ë®ÄÔºå‰ªéËÄåÂáèÂ∞ëstrings Êñá‰ª∂ÁöÑÂ§ßÂ∞è ‰ªé‰∏äÂõæÊàë‰ª¨ÁúãÂà∞ÈªòËÆ§Â∏ÆÊàë‰ª¨ÁîüÊàêÂæàÂ§öÂõΩÂÆ∂ÁöÑËØ≠Ë®ÄÔºåÊàë‰ª¨ÂèØ‰ª•Âè™‰øùÁïô‰∏≠ÊñáÔºåÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 12//Âè™‰øùÁïôÊàë‰ª¨ÊåáÂÆöÁöÑËØ≠Ë®ÄresConfigs('zh-rCN','ko') ÂÜçÊ¨° Build APK Êü•ÁúãÔºö ÁªèÊµãËØïÔºåapk ÁöÑÂ§ßÂ∞èËøòÊòØÊúâÊâÄÂáèÂ∞ëÁöÑ„ÄÇ 4. Âä®ÊÄÅÂ∫ìÊâìÂåÖÈÖçÁΩÆ Âú®Êàë‰ª¨ libs ÁõÆÂΩï‰∏ãÈÖçÁΩÆÊåáÂÆö so Â∫ìÔºåÊàë‰ª¨Áü•ÈÅìÔºåÁúüÊú∫CPU‰∏ÄËà¨ÈÉΩÊòØ armeabi ÁöÑÔºå Ê®°ÊãüÂô®‰∏ÄËà¨ÈÉΩx86 ÁöÑ ÔºåËøòÊúâ‰∏Ä‰∫õ armeabi-v7a mips Á≠âÔºå‰∏ÄËà¨Ë¶ÅÊ†πÊçÆÊàë‰ª¨ÂÆûÈôÖÊÉÖÂÜµÔºåÂè™‰øùÁïôÂØπÊàë‰ª¨ÁúüÂÆûÊúâÁî®ÁöÑ cpu ,Â¶ÇÊûú‰∏çËøõË°åÈÖçÁΩÆÔºåÂ∞±‰ºöÊâìÂåÖÂÖ® cpu Êû∂ÊûÑÁöÑÂä®ÊÄÅÂ∫ìÂà∞apk‰∏≠„ÄÇ Â∞ÜsoÂ∫ìÊâìÂåÖÂà∞apk‰∏≠Ôºö 12345souceSets&#123; main&#123; jniLibs.srcDirs = ['libs'] &#125;&#125; ÈÖçÁΩÆÂ¶Ç‰∏ãÔºö 123ndk&#123; abiFilters('armeabi','armeabi-v7a')&#125; 5. ÁßªÈô§Êó†Áî®ËµÑÊ∫ê Êú™ÈÅøÂÖçÊàë‰ª¨ÁßªÈô§‰∫ÜÈáçË¶ÅÁöÑÊñá‰ª∂ÔºåÁßªÈô§‰πãÂâçÊúÄÂ•ΩÂ§á‰ªΩÔºåÂõ†‰∏∫ÈÉΩÊòØÁâ©ÁêÜÂà†Èô§ÔºåÊ≤°‰∫ÜÂ∞±Ê≤°‰∫Ü„ÄÇ Á¨¨‰∏ÄÁßçÁúã‰∏çËßÅÁöÑÂà†Èô§„ÄÇÊåâÁÖßÂõæÁ§∫Êìç‰ΩúÔºö ÊâßË°å‰πãÂêéÔºå‰Ω†‰ºöÂèëÁé∞Ê≤°ÊúâÁî®ÁöÑËµÑÊ∫êÊñá‰ª∂ÈÉΩË¢´Âà†Èô§‰∫ÜÔºåÂú®ÂÆûÈ™åËøô‰∏™‰πãÂâçÔºå‰Ω†ÂèØ‰ª•Ê∑ªÂä†Â§çÂà∂Âá†‰∏™Êó†Áî®ÁöÑËµÑÊ∫êÔºåËßÇÂØüÊâßË°å‰πãÂêéÊòØÂê¶ËøòÂú®Ôºå‰∏ÄËà¨ÊâßË°å‰πãÂêéÂ∞±Ê≤°Êúâ‰∫ÜÔºåÁâπÂà´Ê≥®ÊÑèÔºöËøôÁßçÊìç‰ΩúÊòØÁâ©ÁêÜÂà†Èô§Ôºå‰∏ç‰ºöÂ±ïÁ§∫Âì™‰∫õÊñá‰ª∂ÈúÄË¶ÅÂà†Èô§ÔºåËÄåÊòØ‰∏ÄÊ¨°ÊÄßÂ∞ÜÂÖ∂Âà†Èô§ÔºåÂà†Èô§ÈúÄË∞®ÊÖé„ÄÇ Á¨¨‰∫åÁßçÊìç‰ΩúÊòØÔºö‰ºöÁªôÊàë‰ª¨ÂàóÂá∫ÈúÄË¶ÅÂà†Èô§Êó†Áî®ÁöÑËµÑÊ∫êÔºåÂ¶Ç‰∏ãÔºö ÊêúÁ¥¢ÊâæÂà∞ unused resources , ‰πãÂêé‰ºöÂàóÂá∫Êó†Áî®ËµÑÊ∫êÔºå‰æãÂ¶ÇÔºö ‰∏äËø∞Êñá‰ª∂ÈÉΩÊòØÊàëÂ§çÂà∂Âá∫Êù•ÁöÑÔºå‰πãÂêéÂÜçÂÜ≥ÂÆöÊòØÂê¶Âà†Èô§„ÄÇ 6. ÂºÄÂêØ‰ª£Á†ÅÂéãÁº© Âç≥ÂØπÊ∫ê‰ª£Á†ÅËøõË°åÊ∑∑Ê∑ÜÔºåËøòÈúÄË¶ÅÂêåÊó∂ÈÖçÁΩÆ proguard Êñá‰ª∂ÔºåÂõ†‰∏∫Êúâ‰∫õÁ¨¨‰∏âÊñπÂ∫ìÂï•ÁöÑ‰∏Ä‰∫õÁ±ª‰∏çËÉΩÊ∑∑Ê∑ÜÔºåÈúÄË¶ÅÂêÑËá™ÈÖçÁΩÆ„ÄÇ ÂºÄÂêØÊ∑∑Ê∑ÜÔºö 123456buildTypes &#123; release &#123; minifyEnabled true // Êîπ‰∏∫true proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; &#125; 7. ÂêØÁî®ËµÑÊ∫êÁº©Âáè123456//‰ª•debug‰∏∫‰æãÔºåÂºÄÂêØËµÑÊ∫êÁº©ÂáèÔºåÂøÖÈ°ªÂ∞Ü minifyEnabled ËÆæÁΩÆ‰∏∫ true, Âê¶Âàô‰ºöÊä•Èîôdebug &#123; minifyEnabled true shrinkResources true proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro' &#125; Â¶ÇÊûúÊúâÊÉ≥Ë¶Å‰øùÁïôÊàñËàçÂºÉÁöÑÁâπÂÆöËµÑÊ∫êÔºåÈúÄË¶ÅÂú®È°πÁõÆ‰∏≠ÂàõÂª∫‰∏Ä‰∏™ÂåÖÂê´ Ê†áËÆ∞ÁöÑ xml Êñá‰ª∂ÔºåÂπ∂Âú®tools:keepÂ±ûÊÄß‰∏≠ÊåáÂÆöÊØè‰∏™Ë¶Å‰øùÁïôÁöÑËµÑÊ∫êÔºåÂú®tools:discard Â±ûÊÄß‰∏≠ÊåáÂÆöÊØè‰∏™Ë¶ÅËàçÂºÉÁöÑËµÑÊ∫ê„ÄÇËøô‰∏§‰∏™Â±ûÊÄßÈÉΩÊé•ÂèóÈÄóÂè∑ÂàÜÈöîÁöÑËµÑÊ∫êÂêçÁß∞ÂàóË°®„ÄÇÂéãÁº©ÈÖçÁΩÆÔºö res/raw/keep.xml ËØ•Êñá‰ª∂‰∏ç‰ºöÊâìÂåÖÂà∞apk‰∏≠ . Áß∞‰∏∫‰∏•Ê†ºÁöÑËµÑÊ∫êÊ£ÄÊü•Ôºö Á§∫‰æãÔºö 1234567&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;resources xmlns:tools=&quot;http://schemas.android.com/tools&quot; tools:discard=&quot;@color/tint_honor_color1&quot; tools:keep=&quot;@drawable/next1&quot; tools:shrinkMode=&quot;strict&quot; /&gt; ‰ΩøÁî®‰πãÂêéÔºå‰ºöÂá∫Áé∞‰ªÄ‰πàÊïàÊûúÂë¢Ôºö ÂØπ‰∫é tint_honor_color1 Êàë‰ª¨ÈÄâÊã©Ë¶ÅËàçÂºÉÔºåBuild APK ‰πãÂêéÔºåÊü•ÁúãÈáåÈù¢ÁöÑÊñá‰ª∂ÂèëÁé∞Â∞±‰∏∫Á©∫‰∫ÜÔºåËÄåÊàë‰ª¨‰øùÁïôÁöÑ next1 Êñá‰ª∂Ê≤°Êúâ‰∏∫Á©∫ÔºåÂõ†‰∏∫Êàë‰ª¨‰øùÁïô keep ‰∫Ü„ÄÇ 8. ÂêØÁî®webp webp Ê†ºÂºèÊòØË∞∑Ê≠åÊé®Âá∫ÁöÑ‰∏ÄÁßçÊúâÊçüÂéãÁº©Ê†ºÂºèÔºåËøôÁßçÂõæÁâáÊ†ºÂºèÁõ∏ÂØπ‰∫épngÊàñjpg Ê†ºÂºèÁöÑÂõæÁâáÊçüÂ§±ÁöÑË¥®ÈáèÂá†‰πéÂèØ‰ª•ÂøΩÁï•‰∏çËÆ°Ôºå‰ΩÜÊòØÂéãÁº©ÂêéÂõæÁâáÁöÑ‰ΩìÁßØÂç¥ÊØîpngÊàñjpgË¶ÅÂ∞èÂæàÂ§ö„ÄÇ ÂèØ‰ª•‰∫≤Ëá™Êâæ‰∏ÄÂº†Â§ßÂõæÔºåÁõÆÂâçÂ∑≤ÁªèÈõÜÊàêÂà∞android studio ‰∏≠‰∫ÜÔºåÂØºÂÖ• android studio ‰∏≠ÂêéÔºåÂè≥ÈîÆ ‚Äîconver to Webp ,Â∞±ÂèØ‰ª•ËøõË°åËΩ¨Âåñ„ÄÇ‰∫≤ÊµãÂèØ‰ª•Â∞Ü‰∏Ä‰∏™4M Â∑¶Âè≥ÁöÑÂõæÁâá Âèò‰∏∫ 400Â§ökb. ÂõæÁâáË¥®Èáè‰πüÂæàÈ´ò„ÄÇ ÊÄªÁªìÁõ∏‰ø°ÁªèËøáÂ±ÇÂ±ÇÂ§ÑÁêÜÔºåapkÂ§ßÂ∞è‰∏ÄÂÆö‰ºöÊúâÊâÄÂáèÂ∞è, ‰∏çÊñ≠Ë°•ÂÖÖ„ÄÇ]]></content>
      <tags>
        <tag>ÊÄßËÉΩ‰ºòÂåñ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VolleryÊ∫êÁ†ÅÈòÖËØª(‰∫å)]]></title>
    <url>%2F2019%2F02%2F25%2FVollery%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[‰∏äËäÇÂÜôÂà∞ÂÖ≥‰∫é Vollery ÁöÑÂâçÂçäÈÉ®ÂàÜÔºåÈúÄË¶ÅÊü•ÁúãÁöÑÁÇπÂáª ËøôÈáå , ËøôÊ¨°‰∏ªË¶ÅÊü•ÁúãÂΩìÊàë‰ª¨ÁúüÊ≠£ add request ÁöÑÊó∂ÂÄôÂÅöËøõ‰∏ÄÊ≠•Êü•Áúã„ÄÇ Êàë‰ª¨ËøòÊòØ‰ªé‰ΩøÁî®ÁöÑÊñπÊ≥ï‰Ωú‰∏∫Êàë‰ª¨ÁöÑÂàáÂÖ•ÁÇπÔºö 1mQueue.add(postRequest);//ÂΩìÊàë‰ª¨ÂêëÈòüÂàó‰∏≠Ê∑ªÂä†‰∏Ä‰∏™ÁΩëÁªúËØ∑Ê±Ç Ë∑üËøõÔºåÊü•Áúã RequestQueue#add() ÊñπÊ≥ïÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263/** * Staging area for requests that already have a duplicate request in * flight. * Â≠òÂÇ®ÊúâÈáçÂ§çËØ∑Ê±ÇÁöÑrequestÊöÇÂ≠òÂå∫ÔºåÊàë‰∏™‰∫∫ËÆ§‰∏∫Â∞±ÊòØÂ¶ÇÊûú Ê≠£Âú®Â§ÑÁêÜAÂèëÂá∫ÁöÑ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÊ≠§Êó∂ÂèàÊù•‰∏Ä‰∏™AÂèëÂá∫ÂêåÊ†∑ÁöÑ‰∏Ä‰∏™ËØ∑Ê±ÇÔºåÈÇ£‰πàÁ¨¨‰∫å‰∏™ËØ∑Ê±ÇÂ∞±‰ºöÊöÇÊó∂‰øùÂ≠òÂú®Ëøô‰∏™ÈõÜÂêà‰∏≠ */private final Map&lt;String, Queue&lt;Request&lt;?&gt;&gt;&gt; mWaitingRequests = new HashMap&lt;String, Queue&lt;Request&lt;?&gt;&gt;&gt;();public &lt;T&gt; Request&lt;T&gt; add(Request&lt;T&gt; request) &#123; // Tag the request as belonging to this queue and add it to the set of // current requests. request.setRequestQueue(this); synchronized (mCurrentRequests) &#123; mCurrentRequests.add(request); &#125; // Process requests in the order they are added. //ÊåâÁÖßÊ∑ªÂä†ËØ∑Ê±ÇÁöÑÈ°∫Â∫èÂ§ÑÁêÜËØ∑Ê±Ç request.setSequence(getSequenceNumber()); request.addMarker("add-to-queue"); // If the request is uncacheable, skip the cache queue and go straight // to the network. //Âà§Êñ≠ÊòØÂê¶ÂèØ‰ª•ÁºìÂ≠ò‰∫ÜÔºå‰∏çÁºìÂ≠òÂ∞±Ê∑ªÂä†Âà∞ÁΩëÁªúËØ∑Ê±ÇÈòüÂàó‰∏≠Âéªreturn,ÂâçÈù¢Â∑≤ÁªèËØ¥ËøáËøô‰∏™ mNetworkQueue Â≠òÂÇ®ÁÆ°ÁêÜÁΩëÁªúËØ∑Ê±ÇÈòüÂàóÁöÑ //ÈªòËÆ§ÊòØÂèØ‰ª•ÁºìÂ≠òÁöÑÔºåÂú®RequestÁöÑÊûÑÈÄ†ÊñπÊ≥ïÂèØ‰ª•ÁúãÂà∞ //public Request(int method, String url, ErrorListener listener) &#123; // this.mShouldCache = true; // &#125; if (!request.shouldCache()) &#123; mNetworkQueue.add(request); return request; &#125; //Áõ¥Êé•Âà∞‰∏ãÈù¢ // Insert request into stage if there's already a request with the same // cache key in flight. synchronized (mWaitingRequests) &#123; //È¶ñÂÖàÊü•ÁúãÊòØÂê¶ÁºìÂ≠òËøáÔºåÂèñkey String cacheKey = request.getCacheKey(); //Â¶ÇÊûúÁºìÂ≠òËøá if (mWaitingRequests.containsKey(cacheKey)) &#123; // There is already a request in flight. Queue up. Queue&lt;Request&lt;?&gt;&gt; stagedRequests = mWaitingRequests .get(cacheKey); if (stagedRequests == null) &#123; stagedRequests = new LinkedList&lt;Request&lt;?&gt;&gt;(); &#125; stagedRequests.add(request); //Ê∑ªÂä†Âà∞ÊöÇÊó∂Â≠òÂÇ®ÈòüÂàó‰∏≠ mWaitingRequests.put(cacheKey, stagedRequests); &#125; else &#123; //Á¨¨‰∏ÄÊ¨°ËØ∑Ê±ÇÔºåÂ∫îËØ•ÊòØËøõÂÖ•Âà∞ËøôÈáåÁöÑ // Insert 'null' queue for this cacheKey, indicating there is // now a request in // flight. //Ê∑ªÂä†‰∏Ä‰∏™ null ÈòüÂàóÔºåË°®Á§∫Êúâ‰∏Ä‰∏™ËØ∑Ê±ÇÊ≠£Âú®ËøõË°å mWaitingRequests.put(cacheKey, null); //Ê∑ªÂä†Âà∞ÁºìÂ≠òÈòüÂàó‰∏≠ÔºåÈÇ£‰πàÊàë‰ª¨Êé•‰∏ãÊù•ÈáçÁÇπÊü•ÁúãCacheDispatcher#runÊñπÊ≥ï mCacheQueue.add(request); &#125; return request; &#125; &#125; Êé•‰∏ãÊù•Â∞±Âà∞ CacheDispatcher#run() ÊñπÊ≥ï‰∫ÜÔºåÂõ†‰∏∫ÈáåÈù¢ÊúâÂÄº‰∫Ü„ÄÇ123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263public void run() &#123; Process.setThreadPriority(10); //ÂàùÂßãÂåñÁºìÂ≠òÁ±ªÂûãÊúâ‰∏§ÁßçÁõÆÂâçÔºöNoCache() Âíå DiskBaseCache() this.mCache.initialize(); //ÂµåÂ•ó‰∫ÜÂ•ΩÂ§ö while Âæ™ÁéØ while(true) &#123; while(true) &#123; while(true) &#123; while(true) &#123; try &#123; //‰ªéÁºìÂ≠òÈòüÂàó‰∏≠ÂèñÂá∫,Âú®‰πãÂâçÁ¨¨‰∏ÄÁØáÊñáÁ´†Êó∂ÔºåÊ≤°Â±ïÁ§∫‰∏ãÂçäÈÉ®ÂàÜÔºåËøôÊ¨°ÊúâËØ∑Ê±ÇÂ∞±ÂèØ‰ª•Áúã‰∏ãÈáåÈù¢ÁöÑÈÄªËæë‰∫Ü„ÄÇ final Request&lt;?&gt; request = (Request)this.mCacheQueue.take(); request.addMarker("cache-queue-take"); //ËØ∑Ê±ÇÊú™ÂèñÊ∂à if (request.isCanceled()) &#123; request.finish("cache-discard-canceled"); &#125; else &#123; //ÊãøÂà∞ÁºìÂ≠òÁªìÊûúÔºåËØ∑Ê±Ç‰ø°ÊÅØÈÉΩ‰øùÂ≠ò‰∏Ä‰∏™Âè´EntryÂÜÖÈÉ®Á±ª‰∏≠ Entry entry = this.mCache.get(request.getCacheKey()); //ÊúâÂèØËÉΩÂèñÂá∫ÁöÑÁºìÂ≠ò‰∏∫null if (entry == null) &#123; request.addMarker("cache-miss"); //Â¶ÇÊûúÊ∏ÖÁ©∫‰∫ÜÁºìÂ≠òÔºåÈÇ£Â∞±ÈáçÊñ∞Ê∑ªÂä†Âà∞ÁΩëÁªúËØ∑Ê±ÇÈòüÂàó‰∏≠Âéª this.mNetworkQueue.put(request); &#125; else if (!entry.isExpired()) &#123;//Âà§Êñ≠ÊòØÂê¶ËøáÊúü request.addMarker("cache-hit"); //ÊãøÂà∞ËØ∑Ê±ÇÁªìÊûúresponse Response&lt;?&gt; response = request.parseNetworkResponse(new NetworkResponse(entry.data, entry.responseHeaders)); request.addMarker("cache-hit-parsed"); //Ë°®Á§∫ÊòØÂê¶ÈúÄË¶ÅÈáçÊñ∞Âà∑Êñ∞ if (!entry.refreshNeeded()) &#123; //‰∏çÈúÄË¶ÅÁöÑËØùÂ∞±Áõ¥Êé•ÂàÜÂèëÁªô‰∏ªÁ∫øÁ®ã‰∫Ü this.mDelivery.postResponse(request, response); &#125; else &#123; //ÈúÄË¶ÅÂà∑Êñ∞ÔºåÂ∞±ÈáçÊñ∞ËøõË°åÁΩëÁªúËØ∑Ê±Ç request.addMarker("cache-hit-refresh-needed"); request.setCacheEntry(entry); response.intermediate = true; this.mDelivery.postResponse(request, response, new Runnable() &#123; public void run() &#123; try &#123; ////ÈúÄË¶ÅÂà∑Êñ∞ÔºåÂ∞±ÈáçÊñ∞ËøõË°åÁΩëÁªúËØ∑Ê±Ç CacheDispatcher.this.mNetworkQueue.put(request); &#125; catch (InterruptedException var2) &#123; ; &#125; &#125; &#125;); &#125; &#125; else &#123; //Ë°®Á§∫ËøáÊúü‰∫ÜÔºå‰πüÈáçÊñ∞ËøõË°åËØ∑Ê±Ç request.addMarker("cache-hit-expired"); request.setCacheEntry(entry); this.mNetworkQueue.put(request); &#125; &#125; &#125; catch (InterruptedException var4) &#123; if (this.mQuit) &#123; return; &#125; &#125; ÂÖ≥‰∫é CacheDispatcher#run Á±ªÊàëÁîª‰∫Ü‰∏ÄÂº†ÂõæÁ§∫: ‰ªéËøôÈáåÊàë‰ª¨Áü•ÈÅìÔºåÁΩëÁªúËØ∑Ê±ÇÈ¶ñÂÖàÈúÄË¶ÅmCacheDispatcher Âà§Êñ≠ÊòØÂê¶Â∑≤ÁºìÂ≠òÔºåËã•ÁºìÂ≠ò‰∫ÜÂàôÁõ¥Êé• postResponse Â¶ÇÊûúÊ≤°ÊúâÔºåÂàôÈáçÊñ∞ËøõË°åÁΩëÁªúËØ∑Ê±ÇÔºåÊàë‰ª¨Â∞±Áõ¥Êé•Ê∑ªÂä†Âà∞ mNetworkQueue ‰∏≠ÔºåÈÇ£Á¨¨‰∏ÄÊ¨°ËØ∑Ê±ÇÔºåËÇØÂÆöËøòÊú™ÁºìÂ≠òÔºå ÈÇ£Êàë‰ª¨‰∏ãÈù¢Â∞±ÂèàÂèØ‰ª•ÁúãËøô‰∏™ NetworkDispatcher#run ÊñπÊ≥ï‰∫ÜÔºåÂõ†‰∏∫Ê≠§Êó∂ÈòüÂàó‰∏≠ÊúâËØ∑Ê±Ç‰∫ÜÔºåÊé•‰∏ãÊù•Êàë‰ª¨ÂÜçËøîÂõûÊü•ÁúãÔºö NetworkDispatcher#run() ÊñπÊ≥ïÔºö1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public void run() &#123; //ËÆæÁΩÆÁ∫øÁ®ã‰ºòÂÖàÁ∫ß Process.setThreadPriority(10); while(true) &#123; Request request; while(true) &#123; try &#123; //‰ªéËøô‰∏™ÁΩëÁªúËØ∑Ê±ÇÈòüÂàó‰∏≠‰∏≠ÂèñÂá∫‰∏ÄÊù°request //Á¨¨‰∫åÊ¨°ËøôÈáåÊúâ‰∫ÜÔºåÂõ†‰∏∫Êàë‰ª¨add ‰∫Ü ‰∏Ä‰∏™ request request = (Request)this.mQueue.take(); break; &#125; catch (InterruptedException var4) &#123; if (this.mQuit) &#123; return; &#125; &#125; &#125; //‰ª•‰∏ãÈÉΩÊòØÁΩëÁªúËØ∑Ê±ÇÈòüÂàóÊúâÁΩëÁªúËØ∑Ê±Ç‰ªªÂä°Êó∂ÊâßË°å request.addMarker("network-queue-take"); if (request.isCanceled()) &#123;//Âà§Êñ≠ÊòØÂê¶ÂèñÊ∂à request.finish("network-discard-cancelled"); &#125; else &#123; //ÁΩëÁªúËØ∑Ê±ÇÊú™ÂèñÊ∂à this.addTrafficStatsTag(request); //Â§ÑÁêÜÁΩëÁªúËØ∑Ê±ÇÔºåÂæóÂà∞NetworkResponse NetworkResponse networkResponse = this.mNetwork.performRequest(request); //Ê†áËØÜËØ∑Ê±ÇÂÆåÊàê request.addMarker("network-http-complete"); if (networkResponse.notModified &amp;&amp; request.hasHadResponseDelivered()) &#123; request.finish("not-modified"); &#125; else &#123; //ÂºÄÂßãËß£ÊûêËøîÂõûÁöÑÁªìÊûúÔºåËß£ÊûêparseNetworkResponseÂèØÊ†πÊçÆ‰∏çÂêåÁ±ªÂûãÁöÑÊñπÂºèËøõË°åËß£ÊûêÔºåËØ∑Áúã‰∏ãÂõæÔºö Response&lt;?&gt; response = request.parseNetworkResponse(networkResponse); //Ê†áËØÜËß£ÊûêÂÆåÊàê request.addMarker("network-parse-complete"); //ÂºÄÂßãÁºìÂ≠òËØ∑Ê±ÇÁªìÊûúÔºåÂà§Êñ≠ÊòØÂê¶ÂèØ‰ª•ÁºìÂ≠òÔºåÈªòËÆ§ÂèØ‰ª• if (request.shouldCache() &amp;&amp; response.cacheEntry != null) &#123; this.mCache.put(request.getCacheKey(), response.cacheEntry); request.addMarker("network-cache-written"); &#125; //ÂàÜÂèëËØ∑Ê±ÇÁªìÊûúÈÄöËøá mDelivery ÂÆåÊàê request.markDelivered(); this.mDelivery.postResponse(request, response); &#125; &#125; &#125; Ëß£Êûê ÊúâJson Image String Á≠âÂ§öÁßçÁ±ªÂûã„ÄÇ Âà∞Ê≠§Âü∫Êú¨ÂàÜÊûêÂÆåÊØï„ÄÇÂ•â‰∏ä‰∏Ä‰∏™Êï¥‰ΩìÊµÅÁ®ãÂõæÔºåÊàëÂú®ÁΩë‰∏äÊâæÂà∞ÁöÑÔºåÊÑüËßâËøò‰∏çÈîôÔºö]]></content>
      <tags>
        <tag>Vollery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[VolleryÊ∫êÁ†ÅÈòÖËØª(‚Äî‚Äî)]]></title>
    <url>%2F2019%2F02%2F22%2FVollery%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB-%E2%80%94%E2%80%94%2F</url>
    <content type="text"><![CDATA[ÂÜôÂú®ÊúÄÂâçÈù¢ÁöÑËØùÔºöÈÄÅÁªôËøòÂú®Ëø∑Ëå´Áúã‰∏çÊáÇÁöÑÁ´•ÈûãÔºåË∑üÁùÄÊàë‰∏ÄÊ≠•Ê≠•ÁúãÔºåÂ∞èÁôΩ‰πüËÉΩÁúãÊáÇÔºå‰ªéËÄåÂØπÊï¥‰ΩìÊúâ‰∏Ä‰∏™ÊääÊè°ÔºåÂàÜÊûêÁöÑÂºÄÂßã‰ª•Âü∫Êú¨‰ΩøÁî®‰∏∫ÂàáÂÖ•ÁÇπÔºå‰∏ÄÊ≠•Ê≠•Ê∑±ÂÖ•„ÄÇ 1. ÂàõÂª∫Ëé∑Âèñ RequestQueue ÂØπË±°1RequestQueue mQueue = Volley.newRequestQueue(this); ÂºÄÂßãËøõÂÖ•ÔºöÔºöÔºöVollery # newRequestQueue()123456789101112131415public static RequestQueue newRequestQueue(Context context, HttpStack stack) &#123; ..... if (stack == null) &#123; if (VERSION.SDK_INT &gt;= 9) &#123; stack = new HurlStack(); &#125; else &#123; stack = new HttpClientStack(AndroidHttpClient.newInstance(userAgent)); &#125; &#125; Network network = new BasicNetwork((HttpStack)stack); RequestQueue queue = new RequestQueue(new NoCache(), network); queue.start(); return queue; &#125; ÁúãÂà∞ÊàëÂºÄÂßãÁΩóÂàó‰ª£Á†Å‰∫ÜÔºå‰∏çË¶ÅÊÖåÔºåËøòÂ•Ω‰∏çÈïøÔºåÂú®ËÉΩÂäõËåÉÂõ¥ÂÜÖ: ÂàöÂºÄÂßãÂ∞±Ê†πÊçÆ‰∏çÂêåÁöÑAndroid Á≥ªÁªüÁâàÊú¨ÔºåÂàõÂª∫‰∏çÂêåÁöÑÂØπË±°ÔºåÊàë‰ª¨ÂÖàÂèØ‰ª•Â§ßÊ¶Ç‰∫ÜËß£‰∏Ä‰∏ã HurlStack Âíå HttpClientStack ÊòØÂï•Ôºü HurlStack.java123456789public class HurlStack implements HttpStack &#123; .... public HttpResponse performRequest(Request&lt;?&gt; request, Map&lt;String, String&gt; additionalHeaders) &#123; .... URL parsedUrl = new URL(url); HttpURLConnection connection = this.openConnection(parsedUrl, request); .... &#125; HttpClientStack.java123456789public class HttpClientStack implements HttpStack &#123; protected final HttpClient mClient; ... public HttpResponse performRequest(Request&lt;?&gt; request, Map&lt;String, String&gt; additionalHeaders) &#123; .... return this.mClient.execute(httpRequest) &#125;&#125; HttpStack.java123public interface HttpStack &#123; HttpResponse performRequest(Request&lt;?&gt; var1, Map&lt;String, String&gt; var2) ;&#125; ÁúãÂà∞ËøôÈáåÊàë‰ª¨Â§ßÊ¶ÇÊòéÁôΩ‰∫ÜÔºåÂéüÊù•ÊòØÊ†πÊçÆ‰∏çÂêåÁöÑÁ≥ªÁªüÁâàÊú¨ÔºåÁ°ÆÂÆöÊúÄÁªàÈÄâÊã©ËøõË°åÁöÑÁΩëÁªúËØ∑Ê±ÇÔºåÈÇ£‰∏∫‰ªÄ‰πàÂ§ß‰∫é9 Áî® HttpUrlConnection Â∞è‰∫é9Áî® HttpClient Âë¢ÔºüÂú®ËøôÈáå‰∏çËøáÂ§ö‰ªãÁªç‰∫ÜÔºåÁΩë‰∏ä‰∏ÄÊêúÂ∞±Áü•ÈÅì‰∫Ü„ÄÇ OkÔºåÈÇ£Êàë‰ª¨ÁªßÁª≠Âêë‰∏ãËµ∞ÔºåÂõûÂà∞‰∏äÈù¢ÁöÑ‰ª£Á†ÅÔºå‰∏∫‰∫ÜÊñπ‰æøÊü•ÁúãÔºåÊàëÈáçÊñ∞Á≤òË¥¥‰∏Ä‰ªΩ‰ª£Á†Å‰∏ãÊù•Ôºö123456789101112131415public static RequestQueue newRequestQueue(Context context, HttpStack stack) &#123; ..... if (stack == null) &#123; if (VERSION.SDK_INT &gt;= 9) &#123; stack = new HurlStack(); &#125; else &#123; stack = new HttpClientStack(AndroidHttpClient.newInstance(userAgent)); &#125; &#125; //HttpStack Âèà‰∏ÄÊ¨°Ë¢´Â∞ÅË£Ö‰∏∫NetworkÊé•Âè£Á±ªÂûã Network network = new BasicNetwork((HttpStack)stack); RequestQueue queue = new RequestQueue(new NoCache(), network); queue.start(); return queue; &#125; Network.java123public interface Network &#123; NetworkResponse performRequest(Request&lt;?&gt; var1) throws VolleyError;&#125; Âì¶ ÂéüÊù•ÊòØÊé•Âè£ÔºåÂÆÉÁöÑÂÆûÁé∞Á±ª BasicNetworkBasicNetwork.java1234567public class BasicNetwork implements Network &#123; //Â∞ÜÁΩëÁªúËØ∑Ê±ÇÁöÑÂÆû‰æã‰º†ÂÖ•ÔºåÊñπ‰æøÂêéÈù¢ÁöÑË∞ÉÁî® public BasicNetwork(HttpStack httpStack) &#123; this(httpStack, new ByteArrayPool(DEFAULT_POOL_SIZE)); &#125; ....&#125; ÁõÆÂâçËÄåÊ≠¢ÔºåÈÇ£‰πàÂÆÉ‰ª¨‰πãÈó¥ÁöÑÂÖ≥Á≥ªÊòØÂï•Ê†∑ÁöÑÂë¢ÔºåÊàëÁîª‰∫Ü‰∏ÄÂº†ÂõæÔºöÂæàÊ∏ÖÊô∞ÂêßÔºåÁõÆÂâçÊàë‰ª¨ÂÖà‰∏çËÄÉËôëËøô‰∏™ BasicNetwork Á±ª‰∏≠Âπ≤‰∫Ü‰ªÄ‰πàÔºåÊàë‰ª¨ÂÖàÊ†πÊçÆ‰ª£Á†ÅÁöÑÊÄùË∑Ø‰∏ÄÊ≠•Ê≠•Âêë‰∏ãËµ∞Ôºå‰øùËØÅÊàë‰ª¨Êï¥‰Ωì‰∏ªÂπ≤‰∏çÂèòÔºåÈÅøÂÖçÈô∑ÂÖ•Âè™ËßÅÊ†ëÊú®‰∏çËßÅÊ£ÆÊûóÁöÑÂ±ÄÂäø„ÄÇ OkÔºåÊàë‰ª¨ÂÜçÊ¨°ÂõûÂà∞ÂéüÊù•ÁöÑ‰ª£Á†ÅÔºö12345678910111213141516171819public static RequestQueue newRequestQueue(Context context, HttpStack stack) &#123; ..... if (stack == null) &#123; if (VERSION.SDK_INT &gt;= 9) &#123; stack = new HurlStack(); &#125; else &#123; stack = new HttpClientStack(AndroidHttpClient.newInstance(userAgent)); &#125; &#125; //HttpStack Âèà‰∏ÄÊ¨°Ë¢´Â∞ÅË£Ö‰∏∫NetworkÊé•Âè£Á±ªÂûãÔºå //ÂàõÂª∫BasicNetworkË∞ÉÁî®‰∫ÜÊûÑÈÄ†ÊñπÊ≥ïÊòØ‰∏Ä‰∏™ÂèÇÊï∞ÁöÑ Network network = new BasicNetwork((HttpStack)stack); //Âà∞ËøôÈáå‰∫Ü........... //ÂàõÂª∫‰∏Ä‰∏™ ËØ∑Ê±ÇÈòüÂàó RequestQueue,Âπ∂‰∏îÂú®ÊûÑÈÄ†ÂáΩÊï∞‰∏≠Ôºå‰º†ÂÖ•‰∫Ü‰∏§‰∏™ //ÂèÇÊï∞ÔºåÂ•ΩÔºåÊàë‰ª¨Êé•‰∏ãÊù•Â∞±Ë¶ÅÂéªRequestQueue.javaÁ±ª‰∏≠Áúã‰∏ÄÁúº‰∫Ü„ÄÇ RequestQueue queue = new RequestQueue(new NoCache(), network); queue.start(); return queue; &#125; RequestQueue.java1234567891011121314151617public RequestQueue(Cache cache, Network network) &#123; this(cache, network, 2); &#125;public RequestQueue(Cache cache, Network network, int threadPoolSize) &#123; this(cache, network, threadPoolSize, new ExecutorDelivery(new Handler(Looper.getMainLooper()))); &#125;public RequestQueue(Cache cache, Network network, int threadPoolSize, ResponseDelivery delivery) &#123; this.mSequenceGenerator = new AtomicInteger(); this.mWaitingRequests = new HashMap(); this.mCurrentRequests = new HashSet(); this.mCacheQueue = new PriorityBlockingQueue(); this.mNetworkQueue = new PriorityBlockingQueue(); this.mCache = cache; this.mNetwork = network; this.mDispatchers = new NetworkDispatcher[threadPoolSize]; this.mDelivery = delivery; &#125; Âú®ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠Ôºå‰º†ÂÖ•‰∏Ä‰∏™Cache ÂØπË±°Ôºånetwork ÂØπË±°ÔºåÈªòËÆ§ÂàùÂßãÂåñ‰∏Ä‰∏™threadPoolSize = 2,ËøòÊúâ‰∏ÄÁ≥ªÂàóÂàùÂßãÂåñÊìç‰Ωú. Ok,ÂÜçÊ¨°ËøîÂõûÊàë‰ª¨‰πãÂâçÁöÑ‰ª£Á†ÅÔºö123 .... RequestQueue queue = new RequestQueue(new NoCache(), network);queue.start(); RequestQueue#start() ÊñπÊ≥ï‰∫ÜÔºö123456789101112public void start() &#123; this.stop(); this.mCacheDispatcher = new CacheDispatcher(this.mCacheQueue, this.mNetworkQueue, this.mCache, this.mDelivery); this.mCacheDispatcher.start(); for(int i = 0; i &lt; this.mDispatchers.length; ++i) &#123; NetworkDispatcher networkDispatcher = new NetworkDispatcher(this.mNetworkQueue, this.mNetwork, this.mCache, this.mDelivery); this.mDispatchers[i] = networkDispatcher; networkDispatcher.start(); &#125; &#125; ËøôÈáåÂèàÂàõÂª∫‰∫Ü‰∏Ä‰∏™ CacheDispatcher Á±ª„ÄÇË∞ÉÁî®Âõõ‰∏™ÂèÇÊï∞ÁöÑÊûÑÈÄ†ÊñπÊ≥ï„ÄÇÂπ∂Ë∞ÉÁî®‰∫Ü start() ÊñπÊ≥ï„ÄÇÊé•‰∏ãÊù•ÔºåÊàë‰ª¨Â∞±ËÆ§ËØÜ‰∏ã CacheDispatcher.java Á±ªÔºö1234567891011121314151617181920212223242526272829//ÂéüÊù•ÂÆÉÊòØ‰∏Ä‰∏™Á∫øÁ®ãpublic class CacheDispatcher extends Thread &#123;//ÁºìÂ≠òÈòüÂàóÔºåÁî®BlockingQueue ÁÆ°ÁêÜÂ≠òÂÇ®private final BlockingQueue&lt;Request&lt;?&gt;&gt; mCacheQueue; public CacheDispatcher(BlockingQueue&lt;Request&lt;?&gt;&gt; cacheQueue, BlockingQueue&lt;Request&lt;?&gt;&gt; networkQueue, Cache cache, ResponseDelivery delivery) &#123; //ÂèÇÊï∞ËµãÂÄº this.mCacheQueue = cacheQueue; this.mNetworkQueue = networkQueue; this.mCache = cache; this.mDelivery = delivery; &#125;//Ë∞ÉÁî®start ÊñπÊ≥ïÂøÖÂÆöË∞ÉÁî®run ÊñπÊ≥ï public void run() &#123; ..... Process.setThreadPriority(10); //ËøôÈáåÂàùÂßãÂåñÁºìÂ≠òÔºåËøòËÆ∞ÂæóÊàë‰ª¨‰πãÂâçÈªòËÆ§‰º†ÂÖ•‰∫Ü‰∏Ä‰∏™ NoCache ÂêóÔºü //ËøôÈáåCache ÊòØÊé•Âè£ÔºåÂ≠êÁ±ªÊúâ‰∏§ÁßçNoCache Âíå DiskBasedCache‰∏§Áßç this.mCache.initialize(); //ÂµåÂ•ó‰∫ÜÂ•ΩÂ§öÂæ™ÁéØÂïä......Âõ†‰∏∫Ë¶Å‰∏çÊñ≠ÂéªËØªÂèñÊòØÂê¶Êúâ‰ªªÂä°ÂòõÔºåÊ≤°ÊúâÁöÑÊó∂ÂÄôÂ∞±‰∏ÄÁõ¥Á≠âÂæÖ while(true) &#123; while(true) &#123; while(true) &#123; while(true) &#123; try &#123; // Ë°®Á§∫‰ªéÁºìÂ≠òÈòüÂàó‰∏≠ÂèñÂá∫‰∏Ä‰∏™ Request, ÈÇ£Á¨¨‰∏ÄÊ¨°ËÇØÂÆöÊ≤°ÊúâÂïäÔºåÂ∞±‰∏ÄÁõ¥Á≠âÂæÖ...... final Request&lt;?&gt; request = (Request)this.mCacheQueue.take(); .....ËøôÈáåÊàëÂÖàÁúÅÁï•‰∫ÜÔºåÂõ†‰∏∫ËøòÊ≤°ÁúüÊ≠£Âà∞Ëøô‰∏ÄÊ≠•&#125; OKÔºåËøîÂõûÂà∞Êàë‰ª¨‰πãÂâçÁöÑÊìç‰ΩúÔºöRequestQueue.java123456789101112131415161718192021222324private NetworkDispatcher[] mDispatchers ;private static final int DEFAULT_NETWORK_THREAD_POOL_SIZE = 2; public RequestQueue(Cache cache, Network network, int threadPoolSize, ResponseDelivery delivery) &#123; .... this.mDispatchers = new NetworkDispatcher[threadPoolSize]; .... &#125;public void start() &#123; this.stop(); this.mCacheDispatcher = new CacheDispatcher(this.mCacheQueue, this.mNetworkQueue, this.mCache, this.mDelivery); this.mCacheDispatcher.start(); //Âà∞ËøôÈáåÂï¶Ôºå //‰ªéÊûÑÈÄ†ÊñπÊ≥ïÊàë‰ª¨ÂèØ‰ª•ÂæóÁü• mDispatchers.length = 2 Ôºå‰∏ä for(int i = 0; i &lt; this.mDispatchers.length; ++i) &#123; NetworkDispatcher networkDispatcher = new NetworkDispatcher(this.mNetworkQueue, this.mNetwork, this.mCache, this.mDelivery); this.mDispatchers[i] = networkDispatcher; networkDispatcher.start(); &#125; &#125; Âæ™ÁéØÈÅçÂéÜÁîüÊàê2 ‰∏™ NetworkDispatcher ÂØπË±°ÔºåÂπ∂Â∞Ü NetworkDispatcher ÂØπË±°Â≠òÂÇ®Âú®‰∏Ä‰∏™ mDispatchers ÁöÑÊï∞ÁªÑ‰∏≠Âéª‰∫ÜÔºåÊúÄÂêéË∞ÉÁî®‰∫Ü start ÊñπÊ≥ï„ÄÇOkÔºåÈÇ£Êé•‰∏ãÊù•Êàë‰ª¨Â∞±Áúã‰∏ãËøô‰∏™ NetworkDispatcher.java Á±ª‰∫Ü„ÄÇ NetworkDispatcher.java123456789101112131415161718192021222324252627282930public class NetworkDispatcher extends Thread &#123; // ÁΩëÁªúËØ∑Ê±ÇÈòüÂàó private final BlockingQueue&lt;Request&lt;?&gt;&gt; mQueueÔºõ //ÂØπË±°ÂàùÂßãÂåñ public NetworkDispatcher(BlockingQueue&lt;Request&lt;?&gt;&gt; queue, Network network, Cache cache, ResponseDelivery delivery) &#123; this.mQueue = queue; this.mNetwork = network; this.mCache = cache; this.mDelivery = delivery; &#125; //Êó¢ÁÑ∂ÊòØÁ∫øÁ®ãÔºåË∞ÉÁî® start ÊñπÊ≥ïÔºåÂøÖÂÆöË∞ÉÁî® run ÊñπÊ≥ïpublic void run() &#123; Process.setThreadPriority(10); //Á∫øÁ®ã‰πüÊòØÔºåÊó¢ÁÑ∂Ë¶ÅÂÅöÁΩëÁªúËØ∑Ê±ÇÔºåÂ∞±Ë¶Å‰∏ÄÁõ¥Á≠âÂæÖËé∑Âèñ while(true) &#123; Request request; while(true) &#123; try &#123; // ‰ªéÁΩëÁªúËØ∑Ê±ÇÈòüÂàó‰∏≠Ëé∑Âèñ‰ªªÂä°ÔºåÈÇ£‰∏ÄÂºÄÂßãÊàë‰ª¨ÂàùÂßãÂåñËÇØÂÆöÊ≤°‰∏úË•øÔºåÈòüÂàóÈáåÊ≤°ËØ∑Ê±Ç‰ªªÂä° request = (Request)this.mQueue.take(); break; &#125; catch (InterruptedException var4) &#123; if (this.mQuit) &#123; return; &#125; &#125; &#125; .....Â∫ïÈÉ®‰ª£Á†ÅÊàë‰πüÁúÅÁï•‰∫ÜÔºåÂõ†‰∏∫ÈÉΩÊòØËé∑ÂèñÂà∞ËØ∑Ê±Ç‰πãÂêéÊâÄÂÅöÁöÑÂ§ÑÁêÜ Ëá≥Ê≠§ÔºåÂØπ‰∫éRequestQueue ÁöÑÂàùÂßãÂåñÁ¨¨‰∏ÄÊ≠•Êàë‰ª¨ÂÆåÊàê‰∫ÜÂØπÂÆÉÁöÑ‰∫ÜËß£Ôºå‰Ω†ÊòéÁôΩ‰∫ÜÂêóÔºü ‰∏ã‰∏ÄÁØáÊàë‰ª¨ÈíàÂØπ mQueue.add(request) ÁúüÊ≠£ÈúÄË¶ÅËøõË°åÁΩëÁªúËØ∑Ê±ÇËøõË°åÁªßÁª≠ÂàÜÊûê„ÄÇÂ¶ÇÊûúËøôÁØáÊñáÁ´†ÊúâÂ∏ÆÂä©Âà∞‰Ω†ÔºåÁªô‰∏™ËµûÂ∞±ÊòØÊàëÊúÄÂ§ßÁöÑÈºìÂä±‰∫ÜÔºåÊØîÂøÉüíó„ÄÇ]]></content>
      <tags>
        <tag>Vollery</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â±èÂπïÈÄÇÈÖç]]></title>
    <url>%2F2019%2F02%2F19%2F%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%2F</url>
    <content type="text"><![CDATA[Â±èÂπïÈÄÇÈÖçÁöÑÂéüÁêÜÂÖ≥‰∫é dp,dpi ‰πãÈó¥ÁöÑËÆ°ÁÆóÂÖ≥Á≥ªÔºåÂú® Ëé∑ÂèñÊâãÊú∫Â±èÂπïÁöÑÂØÜÂ∫¶ ‰∏≠ÈÉΩÂ∑≤ÁªèËÆ∞ÂΩïÂà∞„ÄÇ Êó•Â∏∏ÈÄÇÈÖç ‰ΩøÁî®‰∏çÂêåÂ•óÂõæÈÄÇÈÖçÔºå‰∏ÄËà¨Êàë‰ª¨ÈÉΩ‰ΩøÁî®È´òÂàÜËæ®ÁéáÁöÑÂõæÔºå‰øùËØÅÂ§ßÂ§öÊï∞ËÆæÂ§áÊòæÁ§∫Ê≤°ÊúâÈóÆÈ¢ò„ÄÇ ËøôÊòØÊàë‰ª¨ÁªèÂ∏∏ÂæàÂÆπÊòìÊÉ≥Âà∞ÁöÑÊñπÊ°àÔºåÁº∫ÁÇπ‰πüÂæàÊòéÊòæÔºåÊØèÊ¨°ÈÉΩËÆæËÆ°Â§öÂ•óÂõæÔºåapk‰ΩìÁßØÂèòÂ§ßÔºåÈÇ£‰πàÊúâÊ≤°ÊúâÂäûÊ≥ïÊàë‰ª¨Â∞ΩÂèØËÉΩÂè™‰ΩøÁî®‰∏ÄÂ•óÂõæÔºå‰∏ªË¶ÅÁöÑÂàÜËæ®ÁéáÊúâÔºö1080 1920 Âíå 1280 720Ôºåxhdpi ÊòØÈ¶ñÈÄâ„ÄÇ ‰ΩøÁî®.9 Âõæ ÊàñËÄÖ svg Âõæ Â∏ÉÂ±ÄÈÄÇÈÖç ‰ΩøÁî®ÊùÉÈáçÈÄÇÈÖçÔºå‰∏ÄËà¨Áî®‰∫éÊ†ºÂ±ÄÊØîËæÉÊòéÊúóÁöÑÁïåÈù¢‰∏≠ ‰ΩøÁî® dimens ÈÄÇÈÖçÔºàÂú®‰∏çÂêåÁöÑ values ‰∏ãÁöÑÂàõÂª∫‰∏çÂêåÁöÑÊñá‰ª∂Â§π‰æãÂ¶ÇÔºövalues-1080*1920Á≠âÔºåAndroid ÊâãÊú∫ÂàÜËæ®ÁéáË∂äÊù•Ë∂äÂ§öÔºåÁª¥Êä§ÂçÅÂàÜÁπÅÁêêÔºâ dpÈÄÇÈÖç ËôΩÁÑ∂Âú®‰∏çÂêåÁöÑËÆæÂ§á‰∏äÂèØ‰ª•ÁÆÄÂçïÁöÑÈÄÇÈÖçÔºå‰ΩÜÊòØËøòÊòØÊó†Ê≥ïÂÅöÂà∞ÂÆåÂÆåÂÖ®ÂÖ®ÁöÑÈÄÇÈÖçÔºåÊÄªÁªì‰∏∫Ôºö Âõ†‰∏∫ dpi Âíå ÂÆûÈôÖÂÉèÁ¥†ÂØÜÂ∫¶ÁöÑÂ∑ÆÂºÇÂØºËá¥‰ΩøÁî® dp ÂÅöÂçï‰ΩçÔºåÊ≤°ÊúâÂæàÂ•ΩÁöÑÈÄÇÈÖç„ÄÇ ÊúÄÂ∞èÂÆΩÂ∫¶ÈôêÂÆöÁ¨¶( Â±èÂπïÂÆΩÂíåÈ´òÁöÑËæÉÂ∞èÂÄº) ÂæàÂ§ßÁ®ãÂ∫¶‰∏äÂáèÂ∞ë‰∫ÜÊñá‰ª∂Ôºåvalues-sw160dp values-sw240dp Á∫¶ÊùüÂ∏ÉÂ±Ä Êé®Ëçê‰ΩøÁî®ÁöÑÁ∫¶ÊùüÂ∏ÉÂ±Ä 123456789&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;android.support.constraint.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android" xmlns:app="http://schemas.android.com/apk/res-auto" xmlns:tools="http://schemas.android.com/tools" android:id="@+id/linearLayout2" android:layout_width="match_parent" android:layout_height="match_parent"&gt; //xxx&lt;/android.support.constraint.ConstraintLayout&gt; ‰ªäÊó•Â§¥Êù°ÈÄÇÈÖçÊñπÊ°à ‰∫ÜËß£ Áõ¥Êé•‰øÆÊîπÁ≥ªÁªüÁöÑ density ‰πãÂâçÁöÑÊÄªÁªìÊñáÁ´† Ëé∑ÂèñÊâãÊú∫Â±èÂπïÁöÑÂØÜÂ∫¶ ‰∏≠ÊúâËÆ∞ÂΩïÂà∞„ÄÇ Êàë‰ª¨ÂèØ‰ª•ÂÅö‰∏™ÂÆûÈ™åÂ±ïÁ§∫‰∏ãÔºö ËÆæÂ§á‰ø°ÊÅØ‰∏∫Ôºö1080 1920 Â∞∫ÂØ∏Ôºö5 *dpi = 420, Êàë‰ª¨ËÆæÁΩÆÊåâÈíÆÁöÑÂÆΩÂ∫¶‰∏∫ 100dp 1234//Êàë‰ª¨ÂèØ‰ª•ÊâãÂä®ËÆ°ÁÆó‰∏ãpx = dp * densitydensity = dpi / 160 = 420/160 = 2.625px = 180 * 2.625 = 472.5 = 473px //‰∏éÂÆûÈôÖÂ±ïÁ§∫ÁªìÊûú‰∏ÄËá¥ ÈÇ£Â¶ÇÊûúÂ∞±ÊòØÊàë‰ª¨ÊåâÁÖß‰ªäÊó•Â§¥Êù°ÁöÑÈÄÇÈÖçÊñπÊ≥ïÔºåËÆæËÆ°ÂõæÊòØ‰ª•Ôºö10801920 dpi= 480, density ‰∏∫3Êù•Ê†áÊ≥®ÔºåÈÇ£‰πàÂÆûÈôÖÂ±èÂπïÂ∞±ÊòØÔºö360dp 640dp, ‰πüÂ∞±ÊòØÂÆûÈôÖÂÆΩÂ∫¶‰∏∫360dp. ‰ª•ÂÆΩ‰∏∫ 360dp ‰∏∫Ê†áÂáÜÔºåÈÄÇÈÖçÂêéÂ±ïÁ§∫Ôºö 1234ÂêåÊ†∑ÊòØ180dp, ÂÉèÁ¥†‰∏∫Ôºö540px, Âç≥‰∏∫Â±èÂπïÁöÑ‰∏ÄÂçä„ÄÇÂ∫ï‰∏ã205dpÂ±ïÁ§∫ÁöÑ‰ΩúÁî®ÊòØÔºöÂ¶ÇÊûúÊú™ÂÅöÈÄÇÈÖçÔºåÈÇ£‰πàÈúÄË¶ÅÁ∫¢Ëâ≤Âå∫ÂüüÁöÑÂÆΩÂ∫¶‰∏∫205dpÊâçËÉΩËææÂà∞Â±èÂπïÁöÑ‰∏ÄÂçäÔºåÈÄÇÈÖçÂêéÔºåÁ∫¢Ëâ≤Âå∫ÂüüÁöÑÂÆΩÂ∫¶‰∏∫180dp,Âç≥ÂèØËææÂà∞Â±èÂπï‰∏ÄÂçäÔºåÂç≥ËææÂà∞ÈÄÇÈÖçÁöÑÁõÆÁöÑ„ÄÇËøôÊ†∑ÈÄÇÈÖçÂêéÔºå‰∏çÁÆ°dpi = 480 ÁöÑÊâãÊú∫ËøòÊòØÂú® dpi = 480 ÊâãÊú∫‰∏äËÆæÁΩÆÂÆΩÂ∫¶‰∏∫180dpÈÉΩÂ±ïÁ§∫‰∏∫Â±èÂπïÁöÑ‰∏ÄÂçä„ÄÇ]]></content>
      <tags>
        <tag>Â±èÂπïÈÄÇÈÖç</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HTTPS]]></title>
    <url>%2F2019%2F01%2F23%2FHTTPS%2F</url>
    <content type="text"><![CDATA[Êú¨ÊñáÂèÇËÄÉÈòÖËØªÁêÜËß£Ôºöhttps://showme.codes/2017-02-20/understand-https/ https://baijiahao.baidu.com/s?id=1590626703682162118&amp;wfr=spider&amp;for=pc ÂØπÁß∞Âä†ÂØÜ ‰∫éÊòØÂÆ¢Êà∑Á´ØÂíåÊúçÂä°Á´ØÈÉΩÈúÄË¶Å‰øùÂ≠òÁöÑÂä†ÂØÜÁÆóÊ≥ïÂíåÂØπÂ∫îÁöÑÂØÜÈí• ÈùûÂØπÁß∞Âä†ÂØÜ Âç≥ÊúçÂä°Á´ØÂ∞ÜÂÖ¨Èí•‰∏ãÔºàÊï∞Â≠óÁ≠æÂêçËøáÔºâÂèëÁªôÂÆ¢Êà∑Á´ØÔºåÂÆ¢Êà∑Á´ØÂà©Áî®ÂÖ¨Èí•ËøõË°å‰ø°ÊÅØÂä†ÂØÜÔºåÊúçÂä°Á´ØÊî∂Âà∞‰ø°ÊÅØÂà©Áî®ÁßÅÈí•Ëß£ÂØÜ„ÄÇ ÊÄªÁªìHTTPS Ë¶Å‰ΩøÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Âô®Á´ØÁöÑÈÄö‰ø°ËøáÁ®ãÂæóÂà∞ÂÆâÂÖ®‰øùËØÅÔºåÂøÖÈ°ª‰ΩøÁî®ÁöÑÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÔºå‰ΩÜÊòØÂçèÂïÜÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÁöÑËøáÁ®ãÔºåÈúÄË¶Å‰ΩøÁî®ÈùûÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÊù•‰øùËØÅÂÆâÂÖ®ÔºåÁÑ∂ÂêéÁõ¥Êé•‰ΩøÁî®ÈùûÂØπÁß∞Âä†ÂØÜÁöÑËøáÁ®ãÊú¨Ë∫´‰πü‰∏çÂÆâÂÖ®Ôºå‰ºöÊúâ‰∏≠Èó¥‰∫∫ÁØ°ÊîπÂÖ¨Èí•ÁöÑÂèØËÉΩÊÄßÔºåÊâÄ‰ª•ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´Ø‰∏çÁõ¥Êé•‰ΩøÁî®ÂÖ¨Èí•ÔºåËÄåÊòØ‰ΩøÁî®Êï∞Â≠óËØÅ‰π¶Á≠æÂèëÊú∫ÊûÑÈ¢ÅÂèëÁöÑËØÅ‰π¶Êù•‰øùËØÅÈùûÂØπÁß∞Âä†ÂØÜËøáÁ®ãÊú¨Ë∫´ÁöÑÂÆâÂÖ®„ÄÇËøôÊ†∑ÈÄöËøáËøô‰∫õÊú∫Âà∂ÂçèÂïÜÂá∫‰∏Ä‰∏™ÂØπÁß∞Âä†ÂØÜÁÆóÊ≥ïÔºåÂ∞±Ê≠§ÂèåÊñπ‰ΩøÁî®ËØ•ÁÆóÊ≥ïËøõË°åÂä†ÂØÜËß£ÂØÜ„ÄÇ‰ªéËÄåËß£ÂÜ≥‰∫ÜÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´Ø‰πãÈó¥ÁöÑÈÄö‰ø°ÂÆâÂÖ®ÈóÆÈ¢ò„ÄÇ]]></content>
      <tags>
        <tag>HTTPS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊèèËø∞‰∏ÄÊ¨°ÂÆåÊï¥ÁöÑÁΩëÁªúËØ∑Ê±ÇËøáÁ®ã]]></title>
    <url>%2F2019%2F01%2F22%2F%E6%8F%8F%E8%BF%B0%E4%B8%80%E6%AC%A1%E5%AE%8C%E6%95%B4%E7%9A%84%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[DNS Ëß£Êûê TCPÂª∫Á´ãËøûÊé•Ôºå‰∏âÊ¨°Êè°ÊâãÔºåÂõõÊ¨°Êå•Êâã ÂÆ¢Êà∑Á´ØÂèëÈÄÅhttp ËØ∑Ê±Ç ÊúçÂä°Á´ØÂìçÂ∫îÂÆ¢Êà∑Á´ØËØ∑Ê±ÇÔºåËøîÂõûÊï∞ÊçÆ ÂÆ¢Êà∑Á´ØÊãøÂà∞Êï∞ÊçÆÔºåËß£Êûêxml,ÊòæÁ§∫Âà∞ÊµèËßàÂô®‰∏ä„ÄÇ]]></content>
      <tags>
        <tag>ÁΩëÁªú</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êï∞ÊçÆÂ≠òÂÇ®ÁöÑÊñπÂºè]]></title>
    <url>%2F2019%2F01%2F22%2F%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E7%9A%84%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ÂõûÂøÜAndroid‰∏≠Êï∞ÊçÆÁöÑÂ≠òÂÇ®ÊñπÂºèÊúâÂì™‰∫õÔºåÁÆÄÂçïÂàó‰∏æ‰∏ã„ÄÇ 1. SharedPreferences Android Ëá™Â∏¶ÁöÑÊï∞ÊçÆÂ≠òÂÇ®Ôºå‰ª• xml ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Âú® /data/data/packageName/shared_prefs ËøôÈáåÊèê‰∏Ä‰∏ãÊèê‰∫§ÁöÑ‰∏§ÁßçÊñπÂºèÔºö commit Âíå apply**** commit 1234567891011121314151617181920/** * Commit your preferences changes back from this Editor to the * &#123;@link SharedPreferences&#125; object it is editing. This atomically * performs the requested modifications, replacing whatever is currently * in the SharedPreferences. * *Â¶ÇÊûú‰∏§‰∏™ÈÉΩÂú®‰øÆÊîπÊèê‰∫§ÔºåÈÇ£‰πà‰ª•ÊúÄÂêé‰∏Ä‰∏™‰∏∫‰∏ª„ÄÇ‰πüÂ∞±ÊòØÂêéÈù¢‰ºöË¶ÜÁõñÂâçÈù¢ÁöÑ * &lt;p&gt;Note that when two editors are modifying preferences at the same * time, the last one to call commit wins. * * Â¶ÇÊûú‰Ω†‰∏çÂÖ≥ÂøÉËøîÂõûÁªìÊûúÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÔºåËÄÉËôë‰ΩøÁî®apply‰ª£Êõø * &lt;p&gt;If you don't care about the return value and you're * using this from your application's main thread, consider * using &#123;@link #apply&#125; instead. * * ËøîÂõûtrue Ë°®Á§∫ÊàêÂäü * @return Returns true if the new values were successfully written * to persistent storage. */ boolean commit(); apply 1234567891011121314151617181920212223242526272829303132333435/** *ÂÖàÁ´ãÂç≥Êèê‰∫§Âà∞ÂÜÖÂ≠ò‰∏≠ÔºåÁÑ∂ÂêéÂºÇÊ≠•Êèê‰∫§Âà∞Êï∞ÊçÆÂ∫ì‰∏≠ * &lt;p&gt;Unlike &#123;@link #commit&#125;, which writes its preferences out * to persistent storage synchronously, &#123;@link #apply&#125; * commits its changes to the in-memory * &#123;@link SharedPreferences&#125; immediately but starts an * asynchronous commit to disk and you won't be notified of * any failures. * * Â¶ÇÊûúËøô‰∏™&#123;@link SharedPreferences&#125;‰∏äÁöÑeditorÊâßË°åÂ∏∏ËßÑÁöÑ&#123;@link #commit&#125;ÔºåËÄå *&#123;@link #apply&#125;‰ªçÁÑ∂Êú™ÂÆåÊàêÔºåÈÇ£‰πà&#123;@link #commit&#125;Â∞ÜÈòªÂ°ûÔºåÁõ¥Âà∞ÊâÄÊúâÂºÇÊ≠•Êèê‰∫§‰ª•ÂèäÊèê‰∫§Êú¨Ë∫´ÈÉΩ * ÂÆåÊàê„ÄÇ * If another editor on this * &#123;@link SharedPreferences&#125; does a regular &#123;@link #commit&#125; * while a &#123;@link #apply&#125; is still outstanding, the * &#123;@link #commit&#125; will block until all async commits are * completed as well as the commit itself. * * sharedPreferencesÂú®‰∏Ä‰∏™ËøõÁ®ã‰∏≠ÊòØÂçï‰æãÁöÑÔºåÂÆÉÊòØÂÆâÂÖ®ÁöÑapply ,Â¶ÇÊûú‰Ω†‰∏çÈúÄË¶ÅËøîÂõûÂÄºÁöÑËØù * &lt;p&gt;As &#123;@link SharedPreferences&#125; instances are singletons within * a process, it's safe to replace any instance of &#123;@link #commit&#125; with * &#123;@link #apply&#125; if you were already ignoring the return value. * * ‰∏çÈúÄË¶ÅÊãÖÂøÉAndroidÁöÑÁîüÂëΩÂë®ÊúüÔºåÂÆÉ‰ºöÁ°Æ‰øùÂÜôÂÖ•Á°¨Áõò‰∏≠ÂÜçÂàáÊç¢Áä∂ÊÄÅ * &lt;p&gt;You don't need to worry about Android component * lifecycles and their interaction with &lt;code&gt;apply()&lt;/code&gt; * writing to disk. The framework makes sure in-flight disk * writes from &lt;code&gt;apply()&lt;/code&gt; complete before switching * states. * * &lt;p class='note'&gt;The SharedPreferences.Editor interface * isn't expected to be implemented directly. However, if you * previously did implement it and are now getting errors * about missing &lt;code&gt;apply()&lt;/code&gt;, you can simply call * &#123;@link #commit&#125; from &lt;code&gt;apply()&lt;/code&gt;. */ void apply(); ÁªìËÆ∫ Âú®‰∏çËÄÉËôëË∑®ËøõÁ®ãÈÄö‰ø°ÂíåËøîÂõûÂÄºÁöÑÊÉÖÂÜµ‰∏ãÔºåÂèØ‰ª•‰ºòÂÖàÈÄâÊã© apply ÔºåÂèØ‰ª•Âø´ÈÄüËØªÂèñÊõ¥Êñ∞ÂêéÁöÑÂÄº„ÄÇ 2. Êñá‰ª∂Â≠òÂÇ®ÔºàSDÂç°Ôºâ3. Sqlite4. ContentProvider5. ÁΩëÁªúÂ≠òÂÇ®]]></content>
      <tags>
        <tag>Â≠òÂÇ®</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ëá™ÂÆö‰πâViewÁöÑÊûÑÈÄ†ÊñπÊ≥ï]]></title>
    <url>%2F2019%2F01%2F21%2F%E8%87%AA%E5%AE%9A%E4%B9%89View%E7%9A%84%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%2F</url>
    <content type="text"><![CDATA[‰æãÂ¶ÇÔºö 12345678910111213141516public class MyView extends View &#123; //Âú®‰ª£Á†Å‰∏≠Áõ¥Êé•new MyView()ÂÆû‰æãÁöÑÊó∂ÂÄôÔºå‰ºöË∞ÉÁî®Á¨¨‰∏Ä‰∏™ÊûÑÈÄ†ÊñπÊ≥ï public MyView(Context context) &#123; super(context); &#125; //Âú®xml‰∏≠Â∏ÉÂ±ÄÊñá‰ª∂‰∏≠‰ΩøÁî®MyViewÁöÑÊó∂ÂÄôÔºå‰ºöË∞ÉÁî®Á¨¨‰∫å‰∏™ÊûÑÈÄ†ÂáΩÊï∞Ôºõ //Âú®xml‰∏≠Â∏ÉÂ±ÄÊñá‰ª∂‰∏≠‰ΩøÁî®‰∫ÜMyView,Âπ∂‰∏îËøòÊúâËá™ÂÆö‰πâÂ±ûÊÄßÁöÑÊó∂ÂÄôÔºå‰πüÊòØÁ¨¨‰∫å‰∏™ÊûÑÈÄ†ÂáΩÊï∞„ÄÇ //ÂΩìÊàë‰ª¨Ëá™ÂÆö‰πâÂ±ûÊÄß‰∫ÜÔºåÈÄöËøáobtainStyledAttributesÔºå‰πüÊòØÊúÄÁªàË∞ÉÁî®ÂèÇÊï∞‰∏∫3‰∏™ÁöÑÊûÑÈÄ†ÂáΩÊï∞ public MyView(Context context, AttributeSet attrs) &#123; super(context, attrs); &#125; public MyView(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125;&#125; ÂÖ∂‰∏≠ int defStyleAttr : ËøôÊòØÂΩìÂâç Theme ‰∏≠ÂåÖÂê´ÁöÑ‰∏Ä‰∏™ÊåáÂêë style ÁöÑÂºïÁî®ÔºåÂΩìÊàë‰ª¨Ëá™ÂÆö‰πâÂ±ûÊÄßÊó∂ÔºåÈªòËÆ§‰ªéËøô‰∏™ÈõÜÂêàÈáåÈù¢Êü•ÊâæÂ∏ÉÂ±ÄÊñá‰ª∂‰∏≠ÈÖçÁΩÆÂ±ûÊÄßÂÄºÔºå‰º†ÂÖ•0Ë°®Á§∫‰∏çÂêëËØ• defStyleAttr ‰∏≠Êü•ÊâæÂÄº„ÄÇ Â±ûÊÄßËµãÂÄº‰ºòÂÖàÁ∫ßÊ¨°Â∫èË°®Ôºö 1Âú®xml‰∏≠Áõ¥Êé•ÂÆö‰πâ &gt; Âú®xml‰∏≠ÈÄöËøáStyleÂÆö‰πâ &gt; Ëá™ÂÆö‰πâviewÊâÄÂú®ActivityÁöÑ Theme‰∏≠ÊåáÂÆöStyleÂºïÁî® &gt; ÊûÑÈÄ†ÂáΩÊï∞‰∏≠defStyleResÊåáÂÆöÁöÑÈªòËÆ§ÂÄº„ÄÇ]]></content>
      <tags>
        <tag>Ëá™ÂÆö‰πâView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰∫ã‰ª∂ÂàÜÂèë‰∏≠ÁöÑonTouch ÂíåonTouchEvent Êúâ‰ªÄ‰πàÂå∫Âà´?]]></title>
    <url>%2F2019%2F01%2F21%2F%E4%BA%8B%E4%BB%B6%E5%88%86%E5%8F%91%E4%B8%AD%E7%9A%84onTouch-%E5%92%8ConTouchEvent-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[ÂΩìÁúãÂà∞Ëøô‰∏§‰∏™ÊñπÊ≥ïÊó∂ÔºåÊàë‰ª¨Â§ßÊ¶ÇÂ∞±Â∫îËØ•Áõ¥Âà∞ onTouchEvent ÊòØËß¶Êë∏ÂèçÈ¶àÁöÑ‰∫ã‰ª∂Ôºå onTouch ‰∏∫‰∏Ä‰∏™ÊñπÊ≥ï„ÄÇ ÂÉèËøôÁßçÂÜôÊ≥ïÔºåÊàë‰ª¨ÁªèÂ∏∏ÁúãÂà∞: 123456789101112131415161718//onTouch ÊñπÊ≥ïlayout.setOnTouchListener(new View.OnTouchListener() &#123; @Override public boolean onTouch(View v, MotionEvent event) &#123; //ËøîÂõûÂÄºÂ∞§‰∏∫ÈáçË¶ÅÔºåÂ¶ÇÊûúÁà∂Êéß‰ª∂ËÆæÁΩÆ‰∫ÜÊ≠§ÊñπÊ≥ïÂπ∂ËøîÂõûtrueÔºåÂ∞±‰∏ç‰ºöÂÜçÁªßÁª≠Âêë‰∏ã‰º†ÈÄí return false; &#125; &#125;);//onTouchEvent ÊñπÊ≥ïpublic class MyView extends View &#123; .... @Override public boolean onTouchEvent(MotionEvent event) &#123; //ÂàÜÂà´Â§ÑÁêÜ‰∫ã‰ª∂ÁöÑÊåâ‰∏ãÔºåÁßªÂä®ÔºåÊä¨Ëµ∑Á≠âÊìç‰Ωú return super.onTouchEvent(event); &#125;&#125; Êàë‰ª¨Áõ¥Âà∞‰∫ã‰ª∂ÁöÑ‰º†ÈÄíÂàÜÂèë‰ªé diapatchTouchEvent() ÊñπÊ≥ïÂºÄÂßãÔºåÂèØ‰ª•Áúã‰∏ãËØ•ÊñπÊ≥ïÔºö 12345678910111213141516public boolean dispatchTouchEvent(MotionEvent event) &#123; ... //noinspection SimplifiableIfStatement ListenerInfo li = mListenerInfo; //ËøôÈáåÂà§Êñ≠ÊòØÂê¶ËÆæÁΩÆ‰∫ÜonTouchListener,Êéß‰ª∂ÊòØÂê¶ÂèØÁî®ÔºåonTouchÁöÑËøîÂõûÂÄº if (li != null &amp;&amp; li.mOnTouchListener != null &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp; li.mOnTouchListener.onTouch(this, event)) &#123; result = true; &#125; //Âà§Êñ≠onTouchEvent ÁöÑËøîÂõûÂÄº if (!result &amp;&amp; onTouchEvent(event)) &#123; result = true; &#125; ... &#125; ÂèØ‰ª•ÁúãÂà∞ÔºåÁ®ãÂ∫è‰ºòÂÖàÂà§Êñ≠‰∫ÜËÆæÁΩÆ‰∫Ü onTouchListener ÔºåÁÑ∂ÂêéÂÜçÂà§Êñ≠ onTouchEvent, Âç≥Âà§Êñ≠ÁöÑÂÖàÂêéÈ°∫Â∫è‰∏çÂêå„ÄÇ Âú®ÂâçÈù¢Êàë‰ª¨ËØ¥Âà∞ÔºåÂ¶ÇÊûúËÆæÁΩÆ‰∫Ü onTouchListener Âπ∂‰∏îÂú®ÈáçÂÜô onTouch ÊñπÊ≥ï‰∏≠ËøîÂõû‰∫Ü true ,Ë°®ÊòéÊ∂àË¥πËøô‰∏™Êéß‰ª∂ÁöÑËß¶Êë∏‰∫ã‰ª∂ÔºåÈÇ£‰πàËØ•Êéß‰ª∂ÁöÑÁÇπÂáª‰∫ã‰ª∂Â∞ÜÊó†Ê≥ïÊî∂Âà∞ÔºåÂõ†‰∏∫ÁÇπÂáª‰∫ã‰ª∂ performOnClick ÊòØÂú® onTouchEvent() ÊñπÊ≥ï‰∏≠ÊâßË°åÁöÑÔºåÂ¶Ç‰∏ãÔºö 1234567891011public boolean onTouchEvent(MotionEvent event) &#123; switch (action) &#123; case MotionEvent.ACTION_UP: ... if (mPerformClick == null) &#123; mPerformClick = new PerformClick(); &#125; if (!post(mPerformClick)) &#123; performClickInternal(); &#125;&#125;]]></content>
      <tags>
        <tag>‰∫ã‰ª∂ÂàÜÂèë</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ViewÁöÑÂà∑Êñ∞Êú∫Âà∂]]></title>
    <url>%2F2019%2F01%2F18%2FView%E7%9A%84%E5%88%B7%E6%96%B0%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[Âú®Android Â∏ÉÂ±Ä‰ΩìÁ≥ªÁßçÔºåÁà∂ View Ë¥üË¥£Âà∑Êñ∞ÔºåÂ≠ê View Ë¥üË¥£Â∏ÉÂ±ÄÂ±ïÁ§∫„ÄÇÂ≠êView Â¶ÇÊûúË¶ÅÂà∑Êñ∞ÔºåÈúÄË¶ÅÈÄöÁü•Áà∂View Êù•ÂÆåÊàê„ÄÇ 123456789101112131415161718//invalidate ÊúÄÁªàË∞ÉÁî®Âà∞ËøôÈáåvoid invalidateInternal(int l, int t, int r, int b, boolean invalidateCache, boolean fullInvalidate) &#123; .... //ËøôÈáåÁâπÊÆäÊ≥®ÊÑè‰∏ãËøô‰∏™ AttachInfo final AttachInfo ai = mAttachInfo; //ÂæóÂà∞Áà∂Êéß‰ª∂ final ViewParent p = mParent; if (p != null &amp;&amp; ai != null &amp;&amp; l &lt; r &amp;&amp; t &lt; b) &#123; //Â∞ÜattachInfo ‰ø°ÊÅØ‰øùÂ≠òÂú®damage ‰∏≠ final Rect damage = ai.mTmpInvalRect; damage.set(l, t, r, b); //Áà∂ View--&gt; p Ë∞ÉÁî®Ëá™Ë∫´invalidateChild ÊñπÊ≥ïÂà∑Êñ∞ p.invalidateChild(this, damage); &#125; .... &#125; &#125; Âú® invalidate ‰∏≠ÔºåË∞ÉÁî®Áà∂ View ÁöÑ invalidateChild , ËøôÊòØ‰∏Ä‰∏™Áî±‰ΩéÂêë‰∏äÂõûÊ∫ØÁöÑËøáÁ®ãÔºåÊØè‰∏ÄÂ±ÇÁöÑÁà∂ View ÈÉΩÂ∞ÜËá™Â∑±ÁöÑÊòæÁ§∫Âå∫Âüü‰∏é‰º†ÂÖ•ÁöÑÂà∑Êñ∞ Rect ÂÅö‰∫§ÈõÜÔºå‰∏ÄÁõ¥Âêë‰∏äËøΩÊ∫ØÁõ¥Âà∞ ViewRoot ÈÇ£ÈáåÁªìÊùüÔºåÁî± ViewRoot ÂØπËøô‰∏™ÊúÄÁªàÁöÑÂà∑Êñ∞Âå∫ÂüüÂÅöÂà∑Êñ∞„ÄÇ 123public void invalidateChild(View child, Rect dirty) &#123; scheduleTraversals();&#125;]]></content>
      <tags>
        <tag>ViewÁöÑÂà∑Êñ∞Êú∫Âà∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ëá™ÂÆö‰πâViewÁõ∏ÂÖ≥]]></title>
    <url>%2F2019%2F01%2F18%2F%E8%87%AA%E5%AE%9A%E4%B9%89View%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[setContentViewÁöÑËøáÁ®ã View ÁöÑÁªòÂà∂ÊµÅÁ®ã È¶ñÂÖà WindowManager Ë¥üË¥£Ëøô‰∏™ DecorView Âíå ViewRoot Áõ∏ÂÖ≥ËÅî ÊØè‰∏Ä‰∏™Â∫îÁî®Á®ãÂ∫èÁöÑÁ™óÂè£ DecorView ÈÉΩÊúâ‰∏Ä‰∏™‰∏é‰πãÁõ∏ÂØπÂ∫îÂæó ViewRootÂØπË±° Êï¥‰ΩìÊµÅÁ®ãÂ¶Ç‰∏ãÔºö]]></content>
      <tags>
        <tag>View ÁªòÂà∂ÊµÅÁ®ã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[FragmentÁõ∏ÂÖ≥]]></title>
    <url>%2F2019%2F01%2F17%2FFragment%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[Fragment ÁöÑÊ¶ÇÂøµ ÂÖ≥‰∫é Fragment Â¶Ç‰ΩïÁî®ÊµÖÊòæÁöÑËØ≠Ë®ÄÊù•ÊèèËø∞ÂÆÉÂë¢ÔºåÊàëËÆ§‰∏∫Â∞±ÊòØÔºöActivity Â∞±ÂÉèÊòØ‰∏Ä‰∏™Â§ßÂ±ãÂ≠êÔºåÂ§ßÂ±ãÂ≠êÈáåÊúâÂæàÂ§öÊàøÈó¥ÔºåËÄåËøôÈáåÁöÑÊØè‰∏™ÊàøÈó¥Â∞±ÊòØ fragment ,Áß∞‰∏∫Ê®°ÂùóÂåñÁöÑ Activity. Âπ∂‰∏î fragment ‰∏çËÉΩÂçïÁã¨Â≠òÂú®ÔºåÂøÖÈ°ª‰æùÈôÑ‰∫é Activity; fragment ÁöÑÁîüÂëΩÂë®ÊúüÂèóÂà∞Â§ñÈÉ® Activity ÁöÑÂΩ±ÂìçÔºõ fragment ÊúâËá™Â∑±ÁöÑÁîüÂëΩÂë®ÊúüÔºõ Fragment ‰ºòÁÇπ Fragment ÂèØ‰ª•Â∞Ü Activity ÂàÜÁ¶ªÊàêÂ§ö‰∏™ÂèØÈáçÁî®ÁöÑÁªÑ‰ª∂ÔºåÊØè‰∏™ÈÉΩÊúâÂêÑËá™ÁöÑÁîüÂëΩÂë®ÊúüÂíåUI ÁÅµÊ¥ªÁöÑUIËÆæËÆ°ÔºåÂèØ‰ª•ÈÄÇÁî®‰∫é‰∏çÂêåÁöÑÂ±èÂπïÂ∞∫ÂØ∏ÔºåÊâãÊú∫ÔºåÂπ≥Êùø Fragment ÂÅö‰∏∫‰∏Ä‰∏™Áã¨Á´ãÁöÑÊ®°ÂùóÂèØ‰ª•ËΩªÊùæË¢´ Activity ÊéßÂà∂ÔºåÊ∑ªÂä†ÔºåÁßªÈô§ÂíåÊõøÊç¢ Fragment ÂàáÊç¢ÊµÅÁïÖÔºåÊØîActivity ‰πãÈó¥ÂàáÊç¢Ë¶ÅÂ•Ω Fragment‰∏éActivityÁöÑÈÄö‰ø°ÊñπÂºè ÂèØ‰ª•ÈÄâÊã©Á¨¨‰∏âÊñπÁöÑ EventBus Á≠â setArugments ÊñπÊ≥ïÔºàActivity Âêë Fragment ‰º†ÈÄíÂèÇÊï∞Ôºâ Ëá™ÂÆö‰πâÊé•Âè£ÂõûË∞É ÂΩìÁÑ∂‰πüÂèØ‰ª•Âº∫Âà∂Á±ªÂûãËΩ¨ÂåñÔºå‰æãÂ¶ÇÔºö((MainActivity)getActivity()).text; fragment ‰∏≠Ëé∑ÂèñÂÆø‰∏ª MainActivity ÈáåÁöÑ‰∏Ä‰∏™ public Â≠óÊÆµ„ÄÇ Âú®SDK26 ÁöÑAPI ÂºïÂÖ•‰∫Ü Activity.onAttachFragment(Fragment fragment), ÂèØ‰ª•Â∞Ü Activity ÁöÑÊï∞ÊçÆ‰º†ÈÄíÁªô Fragment. Fragment ÁîüÂëΩÂë®ÊúüÊîæ‰∏ä‰∏ÄÂº†ÂÆòÁΩë Fragment ÁöÑÁîüÂëΩÂë®ÊúüÂõæÔºö Êå∫Ê∏ÖÊô∞ÁöÑÔºåÊÑüËßâÂíå Activity ÁöÑÁîüÂëΩÂë®ÊúüÂæàÂÉèÔºõ Á®ãÂ∫èÂêØÂä®Ôºö onAttach()---&gt; onCreate()----&gt;onCreateView()----onActivityCreate()---&gt;onStart()----&gt; onResume() ‰∏äÂõæÊòæÁ§∫ Fragment Â∑≤ÁªèÂ§Ñ‰∫éËøêË°å Active Áä∂ÊÄÅ ÂêéÂè∞Áä∂ÊÄÅÔºö onPause()---onStop() ÂàáÊç¢Âà∞ÂÖ∂‰ªñFragment :onPause() ---&gt; onStop() ---&gt; onDestroyView(), ÂΩìÂÜçÊ¨°ÂàáÊç¢ÂõûÊù•ÁöÑÊó∂ÂÄôÂ∞±‰∏çÊâßË°å onCreate() ‰∫ÜÔºåÁõ¥Êé•‰ªé onCreateView() ÂºÄÂßãÊâßË°å ÈîÅÂ±èÔºö onPause() ---&gt; onStop() ÁÇπ‰∫ÆÂ±èÂπïÔºö onStart() ---&gt; onResume() ÈÄÄÂá∫Â∫îÁî®Ôºö onPause() ---&gt; onStop() ----&gt; onDestroyView() -- &gt; onDestroy() ----onDetach() Home ÈîÆÔºö onPause() ---&gt; onStop() FragmentÁöÑadd‰∏éreplaceÁöÑÂå∫Âà´1234getSupportFragmentManager().beginTransaction() .add(R.id.fragment_container, mainSpaceFragment)//ËøôÊòØadd .show(mFragment).commit();//replace add ÊñπÂºèÊ∑ªÂä†ÁöÑ Fragment ,Âú®ÂàáÊç¢ Fragment ÁöÑÊó∂ÂÄô‰∏ç‰ºöÂà∑Êñ∞ Fragment,‰ΩÜÊòØ replace ÊñπÂºèÂú®ÂàáÊç¢ Fragment ÁöÑÊó∂ÂÄô‰ºöÈáçÊñ∞ÂàõÂª∫ÔºåÂÆÉ‰ºöÈîÄÊØÅ‰πãÂâçÁöÑÈÇ£‰∏™Ôºåadd ÊñπÂºèÂè™ÊòØÈöêËóè‰∫ÜËÄå‰∏çÊòØÈîÄÊØÅ‰∫Ü, ‰∏ÄËà¨ÂºÄÂèë‰ΩøÁî®ÁöÑÊòØ add ÊñπÂºè„ÄÇ Áî®FragmentÂèØËÉΩ‰ºöÈÅáÂà∞ÁöÑÈóÆÈ¢ò getActivity() ‰∏∫Á©∫ ÊàëÁ¢∞ËßÅËøô‰∏™ÈóÆÈ¢òÁöÑÂá†ÁéáËøòÊå∫Â§ßÁöÑÔºåÁΩë‰∏äËØ¥ÊòØÂõ†‰∏∫ÂÜÖÂ≠òÈáçÂêØÔºåÈáçÂêØÁöÑÊó∂ÂÄôË∞ÉÁî® getActivity() ÁöÑÂú∞ÊñπËøîÂõûnull. ‰∫ßÁîüÁöÑÂéüÂõ†ÔºöÂΩìË∞ÉÁî®‰∫Ü getActivity() Êó∂ÔºåÂΩìÂâç Fragment Â∑≤Áªè onDetach() ËÑ±Á¶ª‰∫ÜÂÆø‰∏ª Activity. Ëß£ÂÜ≥ÁöÑÂäûÊ≥ïÔºöÂΩìÊó∂Âú® stackoverflow ‰∏äÁúãÂà∞ËøáÂ∞±ÊòØÂú®‰ΩøÁî®‰πãÂâçÂÖàÂà§Êñ≠‰∏ã isAdd() Á±ª‰ººÁöÑÊñπÊ≥ï Fragment ÈáçÂè†ÂºÇÂ∏∏ Ê≠£Á°Æ‰ΩøÁî® hide, show ÁöÑÂßøÂäø„ÄÇÂú®Á±ª onCreate() ÁöÑÊñπÊ≥ïÂä†ËΩΩ Fragment, Âπ∂Ê≤°ÊúâÂà§Êñ≠ saveInstanceState == null , ÂØºËá¥ÈáçÂ§çÂä†ËΩΩ‰∫ÜÂêå‰∏Ä‰∏™ Fragment ÂØºËá¥ÈáçÂè†„ÄÇ 12345678@Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123;// Âú®È°µÈù¢ÈáçÂêØÊó∂ÔºåFragment‰ºöË¢´‰øùÂ≠òÊÅ¢Â§çÔºåËÄåÊ≠§Êó∂ÂÜçÂä†ËΩΩFragment‰ºöÈáçÂ§çÂä†ËΩΩÔºåÂØºËá¥ÈáçÂè† ; if(saveInstanceState == null)&#123; // ÊàñËÄÖ if(findFragmentByTag(mFragmentTag) == null) // Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ãÂéª Âä†ËΩΩÊ†πFragment &#125; &#125; getFragmentManagerÔºågetSupportFragmentManager ÔºågetChildFragmentManager‰∏âËÄÖ‰πãÈó¥ÁöÑÂå∫Âà´ getSupportFragmentManager() : ‰∏ªË¶ÅÁî®‰∫éÊîØÊåÅ3.0‰ª•‰∏ãÁöÑAndroidÁ≥ªÁªüAPIÁâàÊú¨Ôºå3.0‰ª•‰∏äÁ≥ªÁªüÂèØ‰ª•Áõ¥Êé•‰ΩøÁî® getFragmentManager() . Âõ†‰∏∫ fragment ÊòØ3.0‰ª•ÂêéÊâçÂá∫Áé∞ÁöÑÁªÑ‰ª∂ÔºåÊâÄ‰ª•Âú®3.0‰ª•‰∏ãÁöÑËÆæÂ§á‰ΩøÁî®v4 ÂåÖ‰∏≠ÁöÑ getSupportFragment() Ôºõ getFragmentManager() : ÂæóÂà∞ÊâÄÂú®fragmentÁöÑÁà∂ÂÆπÂô®ÁöÑÁÆ°ÁêÜÂô®Ôºõ getChildFragmentManager() : ÂæóÂà∞fragmentÈáåÈù¢Â≠êÂÆπÂô®ÁöÑÁÆ°ÁêÜÂô®„ÄÇ ‰∏ÄËà¨ÁöÑ‰ΩøÁî®Âú∫ÊôØ ÂΩì Fragment ÂµåÂ•ó Fragment Êó∂ÔºåÈúÄË¶Å‰ΩøÁî® getChildFragmentManager() FragmentPagerAdapter‰∏éFragmentStatePagerAdapterÁöÑÂå∫Âà´‰∏é‰ΩøÁî®Âú∫ÊôØ ÂØπ‰∫éÁªèÂ∏∏‰ΩøÁî® viewpager ÁöÑÂ∫îËØ•Â§ßÊ¶ÇÈÉΩÁü•ÈÅìÂ∞±ÊòØÔºö ÂΩì viewpager ‰∏≠ÁöÑ fragment Êï∞ÈáèÂ§öÁöÑÊó∂ÂÄôÁî® FragmentStatePagerAdapter ,ÂêåÊ†∑ÂΩìfragment ÊØîËæÉÂ∞ëÁöÑÊó∂ÂÄôÔºåÂàô‰ΩøÁî® FragmentPagerAdapter. Âú® FragmentPagerAdapter ‰∏≠ÁöÑ destroyItem ‰∏≠Ôºö 12345678public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) &#123; if (this.mCurTransaction == null) &#123; this.mCurTransaction = this.mFragmentManager.beginTransaction(); &#125; //ËøôÈáåÂè™ÊòØdetach Fragment ,Âπ∂Ê≤°ÊúâÂÅöÈáäÊîæÂÜÖÂ≠òÁöÑÊìç‰ΩúÔºå //ËøôÊ†∑ÂΩìfragment ÊØîËæÉÂ§öÁöÑÊó∂ÂÄôÔºåÂÜÖÂ≠òÂ∞±‰ºö‰∏çÂ§üÁî®ÔºåË∂äÁî®Ë∂äÂ§ö this.mCurTransaction.detach((Fragment)object); &#125; ÁÑ∂ÂêéÂú®Áúã‰∏ã FragmentStatePagerAdapter ‰∏≠ÁöÑ destroyItem : 1234567891011121314151617public void destroyItem(@NonNull ViewGroup container, int position, @NonNull Object object) &#123; Fragment fragment = (Fragment)object; if (this.mCurTransaction == null) &#123; this.mCurTransaction = this.mFragmentManager.beginTransaction(); &#125; while(this.mSavedState.size() &lt;= position) &#123; this.mSavedState.add((Object)null); &#125; //Âà§Êñ≠ÊòØÂê¶add this.mSavedState.set(position, fragment.isAdded() ? this.mFragmentManager.saveFragmentInstanceState(fragment) : null); //Â∞ÜËØ•‰ΩçÁΩÆÁöÑfragment ËÆæÁΩÆ‰∏∫null this.mFragments.set(position, (Object)null); //ËøôÈáåËøõË°å‰∫ÜÁßªÈô§ÁöÑÊìç‰Ωú,ÈáäÊîæ fragment,ÂáèÂ∞ëÂÜÖÂ≠ò //ÊâÄ‰ª•ÂΩì fragment ÊØîËæÉÂ§öÁöÑÊó∂ÂÄô‰ΩøÁî®FragmentStatePagerAdapter this.mCurTransaction.remove(fragment); &#125;]]></content>
      <tags>
        <tag>fragment Áõ∏ÂÖ≥</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AnimationÂä®ÁîªÁõ∏ÂÖ≥Áü•ËØÜÁÇπ]]></title>
    <url>%2F2019%2F01%2F15%2FAnimation%E5%8A%A8%E7%94%BB%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%E7%82%B9%2F</url>
    <content type="text"><![CDATA[ÂÖ≥‰∫é Animation ÁöÑ‰∏Ä‰∫õÂõûÈ°æÂíåÊÄªÁªì ÂÖ≥‰∫éAnimation Âíå Animator Animation ÊòØÊàë‰ª¨ÁªèÂ∏∏Áî®Âà∞ÁöÑ‰∏Ä‰∫õÂä®ÁîªÔºåÂåÖÊã¨Â∏ßÂä®ÁîªÂíåË°•Èó¥Âä®ÁîªÔºåËÄå Animator ÊòØAndroid 3.0 ÁöÑÊó∂ÂÄôÊé®Âá∫ÁöÑÂä®ÁîªÊ°ÜÊû∂Ôºå‰πüÁß∞‰∏∫Â±ûÊÄßÂä®Áîª ÁâàÊú¨ÂÖºÂÆπ ÂÆûÁé∞ÊïàÁéá ÈÄÇÁî®ÊÄß ÊòØÂê¶‰∫ßÁîüÂÜÖÂ≠òÊ≥ÑÊºè ‰ΩøÁî®ÊïàÊûú Animation ÂèØÂÖºÂÆπAndroid3.0‰ª•‰∏ãÁöÑÁâàÊú¨ Áõ¥Êé•ÈÄöËøá‰ª£Á†ÅÂØπÁü©ÈòµËøõË°åÂ§ÑÁêÜ ‰ªÖÂØπViewÂØπË±°ÊúâÁî® ‰∏ç‰ºö ÂÅáÁöÑÁßªÂä® Animator Êó†Ê≥ïÂÖºÂÆπÔºå‰πüÊ≤°ÊúâÂêë‰∏ãÂÖºÂÆπÁöÑsupportÂåÖ ÈÄöËøáËÆæÁΩÆÂØπË±°ÁöÑsetter,getterÊñπÊ≥ïÔºåÊù•ËææÂà∞Âä®ÁîªÁõÆÁöÑÔºå‰ΩøÁî®‰∫ÜjavaÂèçÂ∞ÑÊú∫Âà∂ÔºåÂèØÁî®‰∫é‰ªªÊÑèÂØπË±°ÔºåÊïàÁéá‰Ωé‰∫éAnimation ‰ªªÊÑèÂØπË±°(‰ΩÜÊòØÈúÄË¶ÅÊúâget/setÊñπÊ≥ï) ÂèØËÉΩ‰ºöÔºåÂΩìËÆæÁΩÆ‰∏∫Êó†ÈôêÂæ™ÁéØÊó∂ÔºåÂ¶ÇÊûúÂú®ActivityÈÄÄÂá∫Êó∂Ê≤°ÊúâÂèäÊó∂Â∞ÜÂä®ÁîªÂÅúÊ≠¢ÔºåÂ±ûÊÄßÂä®Áîª‰ºöÂØºËá¥ActivityÊó†Ê≥ïÈáäÊîæËÄåÂØºËá¥ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ÁúüÁöÑ‰ΩçÁΩÆÂèòÊç¢ ÂÖ≥‰∫éÂä®ÁîªÁöÑÂü∫Êú¨‰ΩøÁî® Animation Áõ∏ÂÖ≥Âä®ÁîªÁöÑ‰ΩøÁî® Â∏ßÂä®Áîª ‰∏ÄËà¨Êàë‰ª¨‰ΩøÁî®Â∏ßÂä®ÁîªÈÉΩÊòØÈááÂèñxmlÂÆö‰πâÁöÑÊñπÂºè 12345678910111213141516171819202122232425// yun_anim.xml&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;animation-list xmlns:android="http://schemas.android.com/apk/res/android" android:oneshot="false"&gt; &lt;item android:drawable="@mipmap/app_loading0" android:duration="150" /&gt; &lt;item android:drawable="@mipmap/app_loading1" android:duration="150" /&gt; &lt;item android:drawable="@mipmap/app_loading2" android:duration="150" /&gt; &lt;item android:drawable="@mipmap/app_loading3" android:duration="150" /&gt;&lt;/animation-list&gt; //Â∞ÜÂÆÉÂÆö‰πâÊàê‰∏Ä‰∏™drawable,ËøôÊ†∑ÂºïÁî®&lt;ImageView android:id="@+id/img_progress" android:layout_width="wrap_content" android:layout_height="wrap_content" android:src="@drawable/yun_anim" /&gt; Ë°•Èó¥Âä®Áîª ÂåÖÊã¨‰∏Ä‰∫õÂπ≥Áßª(Translate)ÔºåÊóãËΩ¨(Rotate)ÔºåÈÄèÊòéÂ∫¶(Alpha)ÔºåÁº©ÊîæÂä®Áîª(Scale)Ôºå‰ΩøÁî®ÈÉΩÂ∑Æ‰∏çÂ§ö,ÂèØ‰ª•Âú®xml‰∏≠ÂàõÂª∫‰ΩøÁî®‰πüÂèØ‰ª•Âä®ÊÄÅÂàõÂª∫‰ΩøÁî®„ÄÇ xml ‰∏≠Á±ª‰ºº‰∫éËøôÊ†∑Ôºö 123456789101112//ËøôÊòØ‰∏Ä‰∏™Âä®ÁîªÈõÜÂêà&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;set xmlns:android="http://schemas.android.com/apk/res/android" &gt; &lt;translate android:duration="200" android:fromYDelta="100%p" android:toYDelta="0" /&gt;&lt;/set&gt;//‰ΩøÁî®xxÂ∏ÉÂ±ÄÊñá‰ª∂ÁöÑÂêçÁß∞Animation translateAnimation = AnimationUtils.loadAnimation(this, R.anim.xx);iv.startAnimation(translateAnimation); java ‰ª£Á†ÅËÆæÁΩÆÔºö 1234//‰ΩçÁßªÂä®ÁîªÔºåÁõ∏Â∫îËøòÊúâÊóãËΩ¨ÂÖ∂ÂÆÉÁ±ª‰ººAnimation animation = new TranslateAnimation(0,100,0,100)translateAnimation.setDuration(3000);iv.startAnimation(translateAnimation); Â±ûÊÄßÂä®Áîª ValueAnimator ÊòØÂ±ûÊÄßÂä®ÁîªÁöÑ‰∏Ä‰∏™Ê†∏ÂøÉÁ±ª 12345678910ValueAnimator anim = ValueAnimator.ofFloat(0f, 1f); anim.setDuration(300); anim.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; float currentValue = (float) animation.getAnimatedValue(); Log.d("TAG", "cuurent value is " + currentValue); &#125; &#125;); anim.start() ObjectAnimator 12345678//ÈÄèÊòéÂ∫¶ÁöÑÂèòÂåñÔºåËøòÂèØ‰ª•‰ΩçÁßªÂï•ÁöÑObjectAnimator animator = ObjectAnimator.ofFloat(iv, "alpha", 1f, 0f, 1f); animator.setDuration(5000); animator.start(); ------------------------------ObjectAnimator animator = ObjectAnimator.ofFloat(iv, "rotation", 0f, 180f); animator.setDuration(5000); animator.start(); ÂÆòÊñπ‰∏ÄÂº†ÂõæÔºö ValueAnimator ÊòØÂ±ûÊÄßÂä®ÁîªÂæàÈáçË¶ÅÁöÑ‰∏Ä‰∏™Á±ªÔºåÂÖ∂‰∏≠ ObjectAnimator ÁªßÊâø‰∫é ValueAnimator .. ÈóÆÈ¢òÔºöÈÇ£ ValueAnimator Âà∞Â∫ïÊòØÊÄéÊ†∑ÂÆûÁé∞ÂàùÂßãÂÄºÂπ≥ÊªëËøáÊ∏°Âà∞ÁªìÊùüÂÄºÁöÑÂë¢Ôºü Ëøô‰∏™ÊòØÁî± TypeEvaluator Âíå TimeInterpolator ÂÖ±ÂêåÂÜ≥ÂÆöÁöÑ„ÄÇ ÂÖ∑‰ΩìÊù•ËØ¥ÔºöTypeEvaluator ÂÜ≥ÂÆö‰∫Ü‰ªéÂàùÂßãÂÄºËøáÂ∫¶Âà∞ÁªìÊùüÂÄºËøáÂ∫¶ÁöÑÊñπÂºè„ÄÇTimeInterpolator ÂÜ≥ÂÆö‰∫ÜÂä®Áîª‰ªéÂàùÂßãÂÄºËøáÊ∏°Âà∞ÁªìÊùüÂÄºÁöÑËäÇÂ•è„ÄÇ Êúâ‰∏™‰æãÂ≠êÂæàÊÅ∞ÂΩìÔºö‰Ω†ÊØèÂ§©‰∏äÁè≠ÂéªÂÖ¨Âè∏ÔºåÊòØÈÄâÊã©Âú∞ÈìÅÂá∫Ë°åËøòÊòØÂÖ¨‰∫§ÔºåËøòÊòØÈ™ëË°åÔºåÈÄâÊã©‰ªéÂá∫ÂèëÂú∞Âà∞ÁõÆÁöÑÂú∞ÁöÑ‰∏ÄÁßçÊäµËææÊñπÂºèÔºåËøô‰∏™ÊòØ TypeEvaluator, ÂÅáÂ¶Ç‰Ω†ÈÄâÊã©È™ëË°åÔºåÊòØÂùáÈÄüÈ™ëË°åÂà∞ÁõÆÁöÑÂú∞ËøòÊòØÂÖàÂä†ÈÄüÂêéÂáèÈÄüÔºåËøòÊòØ‰∏ÄÂºÄÂßãÊÖ¢ÂêéÊù•Âø´ÔºåËøô‰∏™Â∞±ÊòØ TimeInterpolator ÂÜ≥ÂÆöÁöÑ„ÄÇ Áî®TypeEvaluator Á°ÆÂÆöËøêÂä®ËΩ®Ëøπ ‰∏ÄËà¨Êù•ËØ¥ÔºåË¶ÅÂÆö‰πâËøêÂä®ËΩ®ËøπÔºåÈúÄË¶ÅÂÆûÁé∞ TypeEvaluator 12345678910111213141516171819202122public class PointEvaluator implements TypeEvaluator &#123; /** * This function returns the result of linearly interpolating the start and end values, with * &lt;code&gt;fraction&lt;/code&gt; representing the proportion between the start and end values. The * calculation is a simple parametric calculation: &lt;code&gt;result = x0 + t * (x1 - x0)&lt;/code&gt;, * where &lt;code&gt;x0&lt;/code&gt; is &lt;code&gt;startValue&lt;/code&gt;, &lt;code&gt;x1&lt;/code&gt; is &lt;code&gt;endValue&lt;/code&gt;, * and &lt;code&gt;t&lt;/code&gt; is &lt;code&gt;fraction&lt;/code&gt;. * * @param fraction The fraction from the starting to the ending values Âä®ÁîªÂΩìÂâçËøõË°åÁöÑËøõÂ∫¶ * @param startValue The start value.ÂºÄÂßãÂÄº * @param endValue The end value.ÁªìÊùüÂÄº * @return A linear interpolation between the start and end values, given the * &lt;code&gt;fraction&lt;/code&gt; parameter.Á∫øÊÄß */ @Override public Point evaluate(float fraction, Point startValue, Point endValue) &#123; //Ëá™ÂÆö‰πâËΩ®ËøπË∑ØÁ∫øÔºåÂÅáÂ¶ÇÊàë‰ª¨ÂÅö‰∏Ä‰∏™Á∫øÊÄßËøêÂä® return new Point((int)(startValue.getX()+endValue.getX()*fraction), (int)(startValue.getY()+endValue.getY()*fraction)); &#125;&#125; ‰ΩøÁî®ÁöÑÊó∂ÂÄôÔºö 1234567891011121314151617181920Point startP = new Point(0,0); Point endP = new Point(500,500); ValueAnimator valueAnimator = ValueAnimator.ofObject(new PointEvaluator(), startP, endP); valueAnimator.setDuration(5000); valueAnimator.setRepeatCount(10); valueAnimator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() &#123; @Override public void onAnimationUpdate(ValueAnimator animation) &#123; Point currentPoint = (Point) animation.getAnimatedValue(); iv.setX(currentPoint.getX()); iv.setY(currentPoint.getY()); current.setX(130+currentPoint.getX()); current.setY(currentPoint.getY()); current.setText(""); current.setText("x="+currentPoint.getX()+" y="+currentPoint.getY()); &#125; &#125;); valueAnimator.start(); ËøôÊ†∑Êàë‰ª¨Â∞±ÂÆåÊàê‰∫ÜÂä®ÁîªËΩ®ËøπÁöÑÂÆö‰πâ„ÄÇ ‰æãÂ¶ÇÊàë‰ª¨Êù•‰∏Ä‰∏™ÊúÄÁÆÄÂçïÁöÑÁ∫øÊÄßËøêÂä®Ôºö TimeInterpolator ÂâçÈù¢ËØ¥ËøáÔºåËøô‰∏™ÊòØÁî®Êù•ÊéßÂà∂Âä®Áîª‰ªéÂºÄÂßãÂà∞ÁªìÊùüÁöÑËäÇÂ•èÁöÑ„ÄÇAndroid Ëá™Â∑±Êèê‰æõ‰∫ÜÂá†‰∏™Ëá™Â∏¶ÁöÑ Interpolator,ÂΩìÁÑ∂ÂêåÊó∂‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÂÆûÁé∞„ÄÇ]]></content>
      <tags>
        <tag>animation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êñ≠ÁÇπÁª≠‰º†‰∫ÜËß£]]></title>
    <url>%2F2019%2F01%2F14%2F%E6%96%AD%E7%82%B9%E7%BB%AD%E4%BC%A0%E4%BA%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ÊâÄË∞ìÊñ≠ÁÇπÁª≠‰º†Ôºå‰πüÂ∞±ÊòØË¶Å‰ªéÊñá‰ª∂Â∑≤Áªè‰∏ãËΩΩÁöÑÂú∞ÊñπÂºÄÂßãÁªßÁª≠‰∏ãËΩΩ„ÄÇÊâÄ‰ª•Âú®ÂÆ¢Êà∑Á´ØÊµèËßàÂô®‰º†Áªô wen ÊúçÂä°Âô®ÁöÑÊó∂ÂÄôË¶ÅÂ§öÂä†‰∏ÄÊù°‰ø°ÊÅØÂç≥Ôºö‰ªéÂì™ÈáåÂºÄÂßãÁöÑÈóÆÈ¢ò„ÄÇ ÂÅáËÆæÔºöÊàë‰ª¨‰ªéÊúçÂä°Âô®‰∏ãËΩΩ‰∏Ä‰∏™Êñá‰ª∂ÔºåÈúÄË¶Å‰ªé 2000070 Ëøô‰∏™Â≠óËäÇÂêéÂºÄÂßã‰∏ãËΩΩÔºå‰πãÂâçÂ∑≤Áªè‰∏ãËΩΩËøá‰∫ÜÔºåÊ≥®ÊÑèÊü•Áúã‰ª•‰∏ã‰ª£Á†ÅÔºö 1234567get /down.zip http/1.0user-agent: netfoxrange: bytes=2000070-//Êñ∞Â¢ûÂä†Â≠óÊÆµÔºårange,Ëøô‰∏ÄË°åÁöÑÊÑèÊÄùÂ∞±ÊòØÂëäËØâÊúçÂä°Âô®ÊàëËøô‰∏™Êñá‰ª∂‰ªé2000070Â≠óËäÇÂºÄÂßã‰º†ËæìÔºåÂâçÈù¢ÁöÑÂ≠óËäÇÂ∞±‰∏çÁî®‰º†‰∫Ü„ÄÇaccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2 ÊúçÂä°Âô®Êî∂Âà∞ËøôÊù°‰ø°ÊÅØÔºåÂ∞±ÂºÄÂßãËøîÂõû‰ø°ÊÅØÔºö 123456789101112131415206 //Ê≥®ÊÑèÊ≠§Êó∂ÊúçÂä°Âô®ÁöÑËøîÂõûÁ†Å‰∏çÂÜçÊòØ200ËÄåÊòØ206content-length=106786028content-range=bytes 2000070-106786027/106786028 //ËøôË°å‰πüÊòØÊúçÂä°Âô®Êñ∞Â¢ûÂä†Â≠óÊÆµÔºåËøîÂõûÁöÑÂ≠óËäÇÊòØ‰ªé2000070-106786027 ‰πãÈó¥ÁöÑÂ≠óËäÇÔºå‰πãÂâçÁöÑÂ≠óËäÇÂ∞±‰∏ç‰º†‰∫Ü„ÄÇdate=mon, 30 apr 2001 12:55:20 gmtetag=w/"02ca57e173c11:95b"content-type=application/octet-streamserver=microsoft-iis/5.0last-modified=mon, 30 apr 2001 12:55:20 gmt ‰ª•‰∏äÂ∑Æ‰∏çÂ§öÂ∞±ÊòØÊñ≠ÁÇπÁª≠‰º†ÈúÄË¶ÅÁü•ÈÅìÁöÑÁü•ËØÜÂíåÂ§ßËá¥ÁöÑÂéüÁêÜ„ÄÇ ÈóÆÈ¢ò Áî®‰ªÄ‰πàÊñπÊ≥ïÂÆûÁé∞Êèê‰∫§ range:bytes=2000070- Ôºü ‰ΩøÁî®ÊúÄÂéüÂßãÁöÑ socket ËÇØÂÆöÂèØ‰ª•ÂÆåÊàêÔºå‰∏çËøáÂæàË¥π‰∫ãÔºåÁî®javaÁöÑnetÂåÖ‰∏≠Êèê‰æõ‰∫ÜËÆæÁΩÆÁöÑÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÔºö 123456789101112131415try &#123; URL url = new URL("http://www.baidu.com"); try &#123; HttpURLConnection httpURLConnection = (HttpURLConnection) url.openConnection(); //ÈÄöËøáËÆæÁΩÆrequestProperty httpURLConnection.setRequestProperty("rande","bytes=2000070"); //ËøôÊ†∑Ëé∑ÂèñÁöÑËæìÂÖ•ÊµÅÂ∞±ÊòØ‰ªé2000070Ëøô‰∏™Â≠óËäÇÂêéÂºÄÂßãÁöÑ InputStream input = httpURLConnection.getInputStream(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; Êé•‰∏ãÊù•ÔºöËé∑ÂèñÂà∞ÊµÅ‰∫ÜÔºåÈÇ£‰πàÂ¶Ç‰Ωï‰ªéÊµÅ‰øùÂ≠òÂà∞Êñá‰ª∂‰∏≠ÂéªÂë¢Ôºü ‰øùÂ≠òÊñá‰ª∂ÁöÑÊñπÊ≥ïÔºåÈááÁî®ÁöÑÊòØ io ÂåÖ‰∏≠ÁöÑ randomacessfile Á±ª„ÄÇÂ¶Ç‰∏ã‰ª£Á†ÅÔºö 1234567//‰∏äÈù¢Êñá‰ª∂Â∑≤ÁªèËé∑ÂèñÂà∞ inputStream--inputRandomAccessFile saveFile = new RandomAccessFile("down.zip","rw");//down.zip‰∏ãËΩΩÊñá‰ª∂ÂêçÁß∞saveFile.seek(2000070);//ÂÆö‰ΩçÊñá‰ª∂ÊåáÈíàÂà∞Ëøô‰∏™ 2000070 ‰ΩçÁΩÆbyte[] b= new byte[1024];int read;while((read = input.read(b,0,1024))&gt;0)&#123;saveFile.write(b,0,read); Âü∫Êú¨Â§ßÊ¶ÇÂ∞±ÊòØËøôÊ†∑„ÄÇ]]></content>
      <tags>
        <tag>Êñ≠ÁÇπÁª≠‰º†</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Serializable‰∏é Parcelable ÁöÑÂå∫Âà´]]></title>
    <url>%2F2019%2F01%2F10%2FSerializable%E4%B8%8EParcable%E7%9A%84%E5%8C%BA%E5%88%AB%2F</url>
    <content type="text"><![CDATA[Â∫èÂàóÂåñÁöÑ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØ java Êèê‰æõÁöÑ Serilizable Âíå Android Ëá™Ë∫´Êèê‰æõÁöÑ Parcelable. Âü∫Êú¨‰ΩøÁî®12345678910111213141516171819202122232425262728293031323334 public class Person implements Serializable &#123; //ÈªòËÆ§ÊñπÂºèÊúÄÂ•ΩËÆæÁΩÆ‰∏∫1L,Âõ†‰∏∫ java sdk ‰ºöËá™Âä®ËøõË°åhashËÆ°ÁÆóÔºåÂπ∂ÁîüÊàêÂîØ‰∏ÄÁöÑ //UIDÂÄº„ÄÇÊâãÂä®ËÆæÁΩÆserialVersionUIDÁöÑÂ•ΩÂ§ÑÊòØÂΩìÂâçclassÂ¶ÇÊûúÊîπÂèò‰∫ÜÊàêÂëòÂèòÈáèÔºå //ÊØîÂ¶ÇÂ¢ûÂä†ÊàñÂà†Èô§‰πãÂêéÔºåËøô‰∏™UIDÊòØ‰∏çÊîπÂèòÁöÑÔºåÂèçÂ∫èÂàóÂåñ‰∏ç‰ºöÂ§±Êïà„ÄÇ private static final long serialVersionUID = 1L; .... &#125;//Parcable Á±ª‰ººpublic class UserInfo implements Parcelable &#123; private String name; private String lastName; ... public static final Creator&lt;UserInfo&gt; CREATOR = new Creator&lt;UserInfo&gt;() &#123; @Override public UserInfo createFromParcel(Parcel in) &#123; return new UserInfo(in); &#125; @Override public UserInfo[] newArray(int size) &#123; return new UserInfo[size]; &#125; &#125;; @Override public int describeContents() &#123; return 0; &#125; @Override public void writeToParcel(Parcel dest, int flags) &#123; dest.writeString(name); dest.writeString(lastName); &#125;&#125; Âå∫Âà´ Â≠òÂÇ®Â™í‰ªãÁöÑ‰∏çÂêå Â≠òÂÇ®Â™í‰ªã ÁâπÁÇπ Serializable ‰ΩøÁî®ÁöÑIOËØªÂÜôÂ≠òÂÇ®Âú®Á°¨Áõò‰∏äÔºåÂ∫èÂàóÂåñËøáÁ®ã‰ΩøÁî®‰∫ÜÂèçÂ∞ÑÊäÄÊúØÔºåÂπ∂‰∏îÊúüÈó¥‰∫ßÁîü‰∏¥Êó∂ÂØπË±°ÔºàÔºüÔºâ,‰ªéËÄåÂºïËµ∑È¢ëÁπÅÁöÑGC„ÄÇ ‰ª£Á†ÅÂ∞ë Parcelable ‰ΩøÁî®ÁöÑIOËØªÂÜôÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂÜÖÂ≠òÁöÑËØªÂÜôÈÄüÂ∫¶ËÇØÂÆö‰ºò‰∫éÁ°¨ÁõòËØªÂÜôÈÄüÂ∫¶ÔºåÊâÄ‰ª•ParcelableÁöÑÊÄßËÉΩ‰∏ä‰ºò‰∫éSerializable. ‰ª£Á†ÅÂÜôËµ∑Êù•ÊØîËæÉÂ§ö ÂÖ∑‰ΩìÂà∞ÂºÄÂèë‰∏≠Áî®Âì™‰∏™Ôºå‰∏™‰∫∫ËßâÁùÄË¶ÅËÄÉËôëË¶Å‰º†ÈÄíÂØπË±°ÁöÑÂ§ßÂ∞èÔºåÂ¶ÇÊûúÂØπË±°ÊØîËæÉÂ§ßÔºåÊâãÊú∫ÂÜÖÂ≠òÊØîËæÉÂ∞èÔºåÂèØËÉΩ‰ºöÊä•Âá∫ TransactionTooLargeException: The Binder transaction failed because it was too large . Ê≠§Êó∂Â∞±Ë¶ÅËÄÉËôë‰ΩøÁî® Parcelable ‰∫ÜÔºåÂ¶ÇÊûúÂØπË±°‰∏çÊòØÁâπÂà´Â§ßÔºå‰ΩøÁî® Serializable ËøòÊòØÊå∫ÂêàÈÄÇÁöÑÔºåÊØïÁ´üÂÆûÁé∞ÊØîËæÉÁÆÄÂçï„ÄÇ]]></content>
      <tags>
        <tag>Serializable</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IntentServiceÁêÜËß£ÊÄªÁªì]]></title>
    <url>%2F2019%2F01%2F09%2FIntentService%E7%90%86%E8%A7%A3%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[Âπ≥Â∏∏Áî®ÁöÑ‰∏çÊòØÁâπÂà´Â§öÔºå‰ΩÜÊòØË¶ÅÁü•ÈÅìÂÜÖÈÉ®ÂéüÁêÜÔºåÁúãÁúãÊ∫êÁ†ÅÊÄªÁªì‰∏Ä‰∏ã È¶ñÂÖà‰∏∫‰ªÄ‰πà‰ºöÊúâËøô‰∏™‰∏úË•øÔºü Êàë‰ª¨Áü•ÈÅìÊúçÂä°‰∏≠ service ‰∏≠ÁöÑ‰ª£Á†ÅÊòØËøêË°åÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÁöÑÔºå‰∏çËÉΩÂÅöËÄóÊó∂ÁöÑÊìç‰ΩúÔºå‰∫éÊòØÈÇ£Â¶ÇÊûúÊÉ≥ÂÅöËÄóÊó∂Êìç‰ΩúÊÄé‰πàÂÅöÂë¢ÔºüÂ∞±Âá∫Êù• IntentService Ëøô‰πà‰∏™‰∏úË•øÔºåÁî®Êù•Â§ÑÁêÜÂêéÂè∞ÊúçÂä°‰∏≠ÁöÑËÄóÊó∂Êìç‰ΩúÂπ∂‰∏îÂèØ‰ª•Âú®‰ªªÂä°ÂÆåÊàê‰πãÂêéÔºåËá™Âä®ÂÅúÊ≠¢ÊúçÂä°„ÄÇ Âü∫Êú¨‰ΩøÁî®12345678910111213141516171819202122public class MyIntentService extends IntentService &#123; public MyIntentService() &#123; super("MyIntentService"); &#125; //Â§ÑÁêÜÂºÇÊ≠•‰ªªÂä° @Override protected void onHandleIntent(Intent intent) &#123; // ÊâìÂç∞ÂΩìÂâçÁ∫øÁ®ãÁöÑid Log.d("MyIntentService", "Thread id is " + Thread.currentThread(). getId()); &#125; @Override public void onDestroy() &#123; super.onDestroy(); Log.d("MyIntentService", "onDestroy executed"); &#125;&#125;//ÂºÄÂêØÊúçÂä°Intent intentService = new Intent(this, MyIntentService.class);startService(intentService); ÈÄöËøáÊâìÂç∞ÂΩìÂâçÁ∫øÁ®ãÁöÑ id Êàë‰ª¨ÂèØ‰ª•Áü•ÈÅìÂΩìÂâçÁ∫øÁ®ã‰∏çÊòØÂú®‰∏ªÁ∫øÁ®ã‰∏≠ÔºåÊâßË°åÂÆåÊàêÂêéÔºå‰ºöËá™Âä®ÊâßË°å onDestroy() ÊñπÊ≥ï„ÄÇ‰ª•‰∏äÂ±û‰∫é IntentService ÁöÑÂü∫Êú¨Áî®Ê≥ï„ÄÇ Êúâ‰ªÄ‰πàÂ•ΩÂ§ÑÂë¢Ôºü ÁúÅÂéªÂú® Service ‰∏≠ÊâãÂä®ÂºÄÁ∫øÁ®ãÁöÑÈ∫ªÁÉ¶ ÂΩìÊìç‰Ωú‰ªªÂä°ÂÆåÊàêÂêéËá™Âä®ÂÅúÊ≠¢ÊúçÂä° Ê∫êÁ†Å123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153/** * IntentService is a base class for &#123;@link Service&#125;s that handle asynchronous * requests (expressed as &#123;@link Intent&#125;s) on demand. Clients send requests * through &#123;@link android.content.Context#startService(Intent)&#125; calls; the * service is started as needed, handles each Intent in turn using a worker * thread, and stops itself when it runs out of work. * * &lt;p&gt;This "work queue processor" pattern is commonly used to offload tasks * from an application's main thread. The IntentService class exists to * simplify this pattern and take care of the mechanics. To use it, extend * IntentService and implement &#123;@link #onHandleIntent(Intent)&#125;. IntentService * will receive the Intents, launch a worker thread, and stop the service as * appropriate. ‰ΩøÁî®ÂÆÉÔºåÈúÄË¶ÅÁªßÊâøIntentService,Âπ∂‰∏îÂÆûÁé∞ onHandleIntentÊñπÊ≥ïÔºåIntentService‰ºöÊî∂Âà∞Ëøô‰∫õIntent,ÂºÄÂêØ‰∏Ä‰∏™Â∑•‰ΩúÁ∫øÁ®ãÔºåÂú®ÂêàÈÄÇÁöÑÊó∂Èó¥‰ºöËá™Âä®ÂÅúÊ≠¢ÊúçÂä° * * &lt;p&gt;All requests are handled on a single worker thread -- they may take as * long as necessary (and will not block the application's main loop), but * only one request will be processed at a time. ÊâÄÊúâÁöÑËØ∑Ê±ÇË¢´Â§ÑÁêÜÂú®‰∏Ä‰∏™Âçï‰∏ÄÁöÑÂ∑•‰ΩúÁ∫øÁ®ã‰∏≠Ôºå‰∏ç‰ºöÈòªÂ°û‰∏ªÁ∫øÁ®ãÔºå‰ΩÜÊòØÂú®Âêå‰∏ÄÊó∂Èó¥ÊåáÊå•Â§ÑÁêÜ‰∏Ä‰∏™ËØ∑Ê±Ç * * &lt;div class="special reference"&gt; * &lt;h3&gt;Developer Guides&lt;/h3&gt; * &lt;p&gt;For a detailed discussion about how to create services, read the * &lt;a href="&#123;@docRoot&#125;guide/components/services.html"&gt;Services&lt;/a&gt; developer * guide.&lt;/p&gt; * &lt;/div&gt; *ÂÆòÁΩëÊñáÊ°£ÈìæÊé• * @see android.os.AsyncTask */public abstract class IntentService extends Service &#123; private volatile Looper mServiceLooper; private volatile ServiceHandler mServiceHandler; private String mName; private boolean mRedelivery; private final class ServiceHandler extends Handler &#123; public ServiceHandler(Looper looper) &#123; super(looper); &#125; @Override public void handleMessage(Message msg) &#123; //ÂºÇÊ≠•Â§ÑÁêÜ‰ªªÂä° onHandleIntent((Intent)msg.obj); //ÂÅúÊ≠¢Ëá™Ë∫´ÊúçÂä° //stopSelf()Ôºö ‰ºöÁ´ãÈ©¨ÁªìÊùüÊúçÂä° //stopSelf(int startId)Ôºö Á≠âÂæÖÊâÄÊúâÊ∂àÊÅØÈÉΩÂ§ÑÁêÜÂÆåÂêéÊâçÁªàÊ≠¢ÊúçÂä° stopSelf(msg.arg1); &#125; &#125; /** * Creates an IntentService. Invoked by your subclass's constructor. * * @param name Used to name the worker thread, important only for debugging. */ public IntentService(String name) &#123; super(); mName = name; &#125; /** * Sets intent redelivery preferences. Usually called from the constructor * with your preferred semantics. * * &lt;p&gt;If enabled is true, * &#123;@link #onStartCommand(Intent, int, int)&#125; will return * &#123;@link Service#START_REDELIVER_INTENT&#125;, so if this process dies before * &#123;@link #onHandleIntent(Intent)&#125; returns, the process will be restarted * and the intent redelivered. If multiple Intents have been sent, only * the most recent one is guaranteed to be redelivered. * * &lt;p&gt;If enabled is false (the default), * &#123;@link #onStartCommand(Intent, int, int)&#125; will return * &#123;@link Service#START_NOT_STICKY&#125;, and if the process dies, the Intent * dies along with it. */ public void setIntentRedelivery(boolean enabled) &#123; mRedelivery = enabled; &#125; @Override public void onCreate() &#123; // TODO: It would be nice to have an option to hold a partial wakelock // during processing, and to have a static startService(Context, Intent) // method that would launch the service &amp; hand off a wakelock. super.onCreate(); //ÂàõÂª∫‰∫Ü‰∏Ä‰∏™HandlerThread HandlerThread thread = new HandlerThread("IntentService[" + mName + "]"); thread.start(); //ÂèñÂá∫HandlerThreadÁ∫øÁ®ãÁöÑ looper ,Áî±‰∫é `HandlerThread` ÂèàÊòØ‰∏Ä‰∏™ÂºÇÊ≠•Á∫øÁ®ãÔºåÂΩìÊàë‰ª¨Êää //Looper ‰º†ÈÄíÁªô ServiceHandlerÊó∂Ôºå‰ΩøÂæó ServiceHandler‰πüÂèòÊàê‰∫Ü‰∏Ä‰∏™ÂºÇÊ≠•ÊâßË°åÁöÑÁ∫øÁ®ã mServiceLooper = thread.getLooper(); mServiceHandler = new ServiceHandler(mServiceLooper); &#125; @Override public void onStart(@Nullable Intent intent, int startId) &#123; Message msg = mServiceHandler.obtainMessage(); msg.arg1 = startId; msg.obj = intent; mServiceHandler.sendMessage(msg); &#125; /** * You should not override this method for your IntentService. Instead, * override &#123;@link #onHandleIntent&#125;, which the system calls when the IntentService * receives a start request. * @see android.app.Service#onStartCommand */ @Override public int onStartCommand(@Nullable Intent intent, int flags, int startId) &#123; onStart(intent, startId); return mRedelivery ? START_REDELIVER_INTENT : START_NOT_STICKY; &#125; @Override public void onDestroy() &#123; mServiceLooper.quit(); &#125; /** * Unless you provide binding for your service, you don't need to implement this * method, because the default implementation returns null. * @see android.app.Service#onBind */ @Override @Nullable public IBinder onBind(Intent intent) &#123; return null; &#125; /** * This method is invoked on the worker thread with a request to process. * Only one Intent is processed at a time, but the processing happens on a * worker thread that runs independently from other application logic. * So, if this code takes a long time, it will hold up other requests to * the same IntentService, but it will not hold up anything else. * When all requests have been handled, the IntentService stops itself, * so you should not call &#123;@link #stopSelf&#125;. * * @param intent The value passed to &#123;@link * android.content.Context#startService(Intent)&#125;. * This may be null if the service is being restarted after * its process has gone away; see * &#123;@link android.app.Service#onStartCommand&#125; * for details. */ @WorkerThread protected abstract void onHandleIntent(@Nullable Intent intent);&#125; ÊÄªÁªìIntentService.java ÊÄªÁªìÊù•ËØ¥Â∞±ÊòØÔºö‰∏Ä‰∏™ HandlerThread + ServiceHandler , ‰ª•ÈòüÂàóÁöÑÂΩ¢ÂºèÂ§ÑÁêÜÂºÇÊ≠•Êìç‰ΩúÁöÑÁ±ª„ÄÇ IntentService ÊòØÁªßÊâø‰∏é Service ÁöÑÔºåÂú® onCreate() Êó∂ÔºåÂàõÂª∫‰∫Ü HandlerThread ÂÆû‰æãÔºà HandlerThread ÂèàÊòØÂï•Âë¢ÔºåÂÆÉÊòØ Thread Â≠êÁ±ªÔºåÂÜÖÈÉ®ÊãøÂà∞‰∏Ä‰∏™ÂΩìÂâçÁ∫øÁ®ãÁöÑ Looper, Looper ‰∏ÄÁõ¥ËΩÆËØ¢Ê∂àÊÅØÔºåËé∑ÂæóÊ∂àÊÅØÔºåÂ§ÑÁêÜÊ∂àÊÅØÔºâÔºåËÄå IntentService ÂÜÖÈÉ®Êúâ‰∏Ä‰∏™ServiceHandler,ServiceHandler ÁöÑÂàõÂª∫ÁöÑ Looper ÊòØÊãøÁöÑÊòØ HandlerThread ÁöÑ Looper , IntentService Âú® onStart() ÈÄöËøáÂèëÈÄÅ Message, Âú®Â§ÑÁêÜ Message Ë∞ÉÁî®ÁöÑÊòØ onHandleIntent() ÊñπÊ≥ï„ÄÇ]]></content>
      <tags>
        <tag>IntentService</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[IOC]]></title>
    <url>%2F2019%2F01%2F04%2FIOC%2F</url>
    <content type="text"><![CDATA[‰ª•‰∏ãÂÜÖÂÆπÊòØÊàëÊúÄËøëÂú®Â≠¶‰π† Spring Boot Spring MVC ËøáÁ®ã‰∏≠ÔºåÈíàÂØπ ioc ÊéßÂà∂ÂèçËΩ¨ÊâÄ‰∫ÜËß£Âà∞ÁöÑÂÜÖÂÆπ„ÄÇ ÂÆûË∑µÊ≠•È™§ ‰ΩøÁî® Spring Boot, Spring Â¶Ç‰ΩïÂÆûÁé∞ IOC ‰ΩøÁî® maven java oop : ÊØèÊ¨°ÈÉΩÊòØËá™Â∑± new ÂØπË±°Ôºå‰∏çÂ§üÊñπ‰æøÔºåÊ†∏ÂøÉÂéüÂõ†ÊòØ‰∫ßÁîü‰∫Ü‰ª£Á†ÅÁöÑÂÅ∂Âêà„ÄÇ ÁõÆÊ†áÔºöÂ∏åÊúõÂÆπÂô®ÁªôÊàëÂØπË±°ÔºåÁõ¥Êé•Ëé∑ÂæóÂØπË±°Ôºõ IOC: ÊéßÂà∂ÂèçËΩ¨ÔºåË°®Á§∫ÊääÂØπË±°ÁöÑÊéßÂà∂ÊùÉ‰∫§ÁªôÂÆπÂô® Á§∫‰æãÔºö 123456789101112131415161718 @Bean public Student getStudent()&#123; Student stu = new Student(); stu.setName("Á≥ñËë´Ëä¶"); stu.setAge("18"); return stu; &#125;Âú®Âè¶Â§ñ‰∏Ä‰∏™Á±ª SpringBootIocApplicationTests.java ‰∏≠Ôºö@Autowired Student student; @Test public void contextLoads() &#123; //ËøôÈáåÂèØ‰ª•Áõ¥Êé•ÊãøÂà∞ System.out.println("student:"+student.getName()); //student:Á≥ñËë´Ëä¶ &#125; Maven È°πÁõÆÂ¶ÇÊûú‰∏çÁî® Spring Boot ,ÂàõÂª∫ Maven È°πÁõÆËøõË°åÂÆûÁé∞Ôºö ‰ΩøÁî® ide ÂàõÂª∫ maven È°πÁõÆ Ê≥®ÊÑèÂãæÈÄâ create from.. Ë¶ÅÂÆûÁé∞ÊéßÂà∂ÂèçËΩ¨ÔºåÈúÄË¶ÅÊàë‰ª¨ÂØºÂÖ• Spring Context ÈÖçÁΩÆÔºåÂú® maven ÂÆòÁΩëÔºö ÊêúÁ¥¢ Spring, Â∫ï‰∏ãÊúâÂæàÂ§öÁâàÊú¨ÔºåÂØºÂÖ•‰Ω†ÊÉ≥ÂØºÂÖ•ÁöÑÁâàÊú¨ÔºåÁÇπÂáªËøõÂéªÔºåÁúãÂà∞Ôºö Â∞ÜÁ∫¢Ëâ≤Ê°ÜÈÉ®ÂàÜÔºåÊã∑Ë¥ùÂà∞ È°πÁõÆÁöÑ pom.xml Êñá‰ª∂‰∏≠ÔºåÂ¶Ç‰∏ãÔºö 1234567891011121314&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;project ...... &lt;dependencies&gt; &lt;!-- https://mvnrepository.com/artifact/org.springframework/spring-context --&gt; &lt;dependency&gt; &lt;groupId&gt;org.springframework&lt;/groupId&gt; &lt;artifactId&gt;spring-context&lt;/artifactId&gt; &lt;version&gt;4.3.20.RELEASE&lt;/version&gt; &lt;/dependency&gt; &lt;/dependencies&gt;&lt;/project&gt; ÁÑ∂ÂêéÊàë‰ª¨ËøòÈúÄË¶ÅÊâãÂä®ËÆæÁΩÆÈÖçÁΩÆÊñá‰ª∂ÔºöÂú® resources Êñá‰ª∂Â§π‰∏ãÔºåÂàõÂª∫‰∏Ä‰∏™ xml ,Êàë‰ª¨ÂèØ‰ª•Ëøô‰πàÂàõÂª∫ xml,ÂèØ‰ª•Â∏ÆÂä©Êàë‰ª¨Ëá™Â∏¶‰∏Ä‰∫õÈÖçÁΩÆÔºåÂ¶Ç‰∏ãÔºö applicationContext.xml : 12345678910&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd"&gt; &lt;bean id="student" class="Student"&gt;&lt;!--Â∞ÜËøô‰∏™beanÂä†ÂÖ•Âà∞springÁöÑiocÂÆπÂô®--&gt; &lt;property name="name" value="Á≥ñËë´Ëä¶"&gt;&lt;/property&gt;&lt;!--ÁªôbeanÁöÑpnameÂ±ûÊÄßËµãÂÄº--&gt; &lt;property name="age" value="18"&gt;&lt;/property&gt; &lt;/bean&gt;&lt;/beans&gt; ÊúÄÂêéÔºåÂ¶Ç‰ΩïËé∑ÂèñÂë¢ÔºüÈÄöËøá ApplicationContext Ëé∑ÂèñÔºö 123456789public static void main(String[] args)&#123; ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml"); //‰º†ÂÖ•xml ‰∏≠ÂÆö‰πâÁöÑbean ÁöÑ id Student student = (Student) context.getBean("student"); System.out.println("student::"+student.getName()+ "::::age::"+student.getAge()); &#125; ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÊãøÂà∞Êàë‰ª¨Âú® xml ‰∏≠ÂÆö‰πâÁöÑ bean ÁöÑÂÜÖÂÆπ‰∫Ü„ÄÇ]]></content>
      <tags>
        <tag>IOC</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁªÑ‰ª∂ÂåñÈöèÁ¨î]]></title>
    <url>%2F2018%2F12%2F25%2F%E7%BB%84%E4%BB%B6%E5%8C%96%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[ÈöèÁùÄÊäÄÊúØË∂äÊù•Ë∂äÂèëÂ±ïÔºå‰ª£Á†ÅË∂äÊù•Ë∂äËáÉËÇøÔºåÁªèÂ∏∏‰ºöÁâµ‰∏ÄÂèëËÄåÂä®ÂÖ®Ë∫´ÔºåÂèëÁîübugÁöÑÊ¶ÇÁéá‰πüÊØîËæÉÈ´òÔºåÁªÑ‰ª∂Âåñ‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÊàê‰∫ÜÊàë‰ª¨ÂøÖ‰∏çÂèØÂ∞ëÁöÑ‰∏Ä‰∏™ÈÉ®ÂàÜÔºå‰ΩøÁî®ÁªÑ‰ª∂ÂåñËÉΩÂ§üÔºö ÊèêÈ´ò‰ª£Á†ÅÁöÑÂ§çÁî®ÊÄß Èôç‰ΩéÁªÑ‰ª∂‰πãÈó¥ÁöÑËÄ¶ÂêàÊÄßÔºå‰∏ÄÂÆöÁ®ãÂ∫¶‰∏äÂáèÂ∞ëbugÁöÑ‰∫ßÁîü ËÆæËÆ°ÁªÑ‰ª∂ÂåñÔºö ÂàÜÂ±ÇËÆæËÆ°ÔºåappÂ£≥Â∑•Á®ãÔºå‰∏öÂä°ÁªÑ‰ª∂ÔºåÂäüËÉΩÁªÑ‰ª∂ÔºåÂü∫Á°ÄÁªÑ‰ª∂„ÄÇ ‰∏öÂä°ÁªÑ‰ª∂‰∏∫‰∫ÜÈò≤Ê≠¢Áõ∏‰∫íÂºïÁî®Âá∫Áé∞Ê≠ªÂæ™ÁéØÔºåÊØè‰∏Ä‰∏™‰∏öÂä°ÁªÑ‰ª∂ËÆæËÆ°Êàê‰∏§‰∏™module, ‰∏Ä‰∏™ export module,‰∏Ä‰∏™ implement module. ‰∫íÁõ∏‰æùËµñ export modult Âç≥ÂèØ„ÄÇ]]></content>
      <tags>
        <tag>ÁªÑ‰ª∂Âåñ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Context]]></title>
    <url>%2F2018%2F12%2F25%2FContext%2F</url>
    <content type="text"><![CDATA[Context1public abstract class Context &#123; ‰πãÈó¥ÁöÑÁªßÊâøÂÖ≥Á≥ªÔºö Context ‰ΩúÁî®123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172//ÂèØ‰ª•ÁÇπÂáªstudioÊóÅËæπÁöÑ Structure ÁªìÊûÑÁ§∫ÊÑèÂõæ/*** Interface to global information about an application environment. This is* an abstract class whose implementation is provided by* the Android system. It* allows access to application-specific resources and classes, as well as* up-calls for application-level operations such as launching activities,* broadcasting and receiving intents, etc.*/public abstract class Context &#123; // ÂõõÂ§ßÁªÑ‰ª∂Áõ∏ÂÖ≥ public abstract void startActivity(@RequiresPermission Intent intent); public abstract void sendBroadcast(@RequiresPermission Intent intent); public abstract Intent registerReceiver(@Nullable BroadcastReceiver receiver, IntentFilter filter); public abstract void unregisterReceiver(BroadcastReceiver receiver); public abstract ComponentName startService(Intent service); public abstract boolean stopService(Intent service); public abstract boolean bindService(@RequiresPermission Intent service, @NonNull ServiceConnection conn, @BindServiceFlags int flags); public abstract void unbindService(@NonNull ServiceConnection conn); public abstract ContentResolver getContentResolver(); // Ëé∑ÂèñÁ≥ªÁªü/Â∫îÁî®ËµÑÊ∫ê public abstract AssetManager getAssets(); public abstract Resources getResources(); public abstract PackageManager getPackageManager(); public abstract Context getApplicationContext(); public abstract ClassLoader getClassLoader(); public final @Nullable &lt;T&gt; T getSystemService(@NonNull Class&lt;T&gt; serviceClass) &#123; ... &#125; public final String getString(@StringRes int resId) &#123; ... &#125; public final int getColor(@ColorRes int id) &#123; ... &#125; public final Drawable getDrawable(@DrawableRes int id) &#123; ... &#125; public abstract Resources.Theme getTheme(); public abstract void setTheme(@StyleRes int resid); public final TypedArray obtainStyledAttributes(@StyleableRes int[] attrs) &#123; ... &#125; // Ëé∑ÂèñÂ∫îÁî®Áõ∏ÂÖ≥‰ø°ÊÅØ public abstract ApplicationInfo getApplicationInfo(); public abstract String getPackageName(); public abstract Looper getMainLooper(); public abstract int checkPermission(@NonNull String permission, int pid, int uid); // Êñá‰ª∂Áõ∏ÂÖ≥ public abstract File getSharedPreferencesPath(String name); public abstract File getDataDir(); public abstract boolean deleteFile(String name); public abstract File getExternalFilesDir(@Nullable String type); public abstract File getCacheDir(); ... public abstract SharedPreferences getSharedPreferences(String name, @PreferencesMode int mode); public abstract boolean deleteSharedPreferences(String name); // Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥ public abstract SQLiteDatabase openOrCreateDatabase(...); public abstract boolean deleteDatabase(String name); public abstract File getDatabasePath(String name); ... // ÂÖ∂ÂÆÉ public void registerComponentCallbacks(ComponentCallbacks callback) &#123; ... &#125; public void unregisterComponentCallbacks(ComponentCallbacks callback) &#123; ... &#125; ...&#125;public interface ComponentCallbacks &#123; void onConfigurationChanged(Configuration newConfig); void onLowMemory();&#125; Context Â∞±Áõ∏ÂΩì‰∫é Application ÁöÑÂ§ßÁÆ°ÂÆ∂Ôºå‰∏ªË¶ÅË¥üË¥£Ôºö ÂõõÂ§ßÁªÑ‰ª∂ÔºåÂêØÂä® Activity , ÂπøÊí≠ÔºåÊúçÂä°Á≠â Ëé∑ÂèñÁ≥ªÁªüËµÑÊ∫ê Êñá‰ª∂Êìç‰ΩúÁõ∏ÂÖ≥ Êï∞ÊçÆÂ∫ìÊìç‰ΩúÁõ∏ÂÖ≥ ContextWrapper123456789101112131415161718192021222324252627282930313233/** * Proxying implementation of Context that simply delegates all of its calls to * another Context. Can be subclassed to modify behavior without changing * the original Context. */public class ContextWrapper extends Context &#123; Context mBase; public ContextWrapper(Context base) &#123; mBase = base; &#125; /** * Set the base context for this ContextWrapper. All calls will then be * delegated to the base context. Throws * IllegalStateException if a base context has already been set. * * @param base The new base context for this wrapper. */ protected void attachBaseContext(Context base) &#123; if (mBase != null) &#123; throw new IllegalStateException("Base context already set"); &#125; mBase = base; &#125; /** * @return the base context as set by the constructor or setBaseContext */ public Context getBaseContext() &#123; return mBase; &#125; &#125; ContextWrapper ÂÆûÈôÖ‰∏äÂ∞±ÊòØ Context ÁöÑ‰ª£ÁêÜÁ±ªÔºåÊâÄÊúâÁöÑÊìç‰ΩúÈÉΩÊòØ mBase ÂÆåÊàê„ÄÇÂè¶Â§ñÔºåActivity, Service ÁöÑ getBaseContext ËøîÂõûÁöÑÂ∞±ÊòØËøô‰∏™ mBase. ContextThemeWrapper123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175/** * A context wrapper that allows you to modify or replace the theme of the * wrapped context. */public class ContextThemeWrapper extends ContextWrapper &#123; private int mThemeResource; private Resources.Theme mTheme; private LayoutInflater mInflater; private Configuration mOverrideConfiguration; private Resources mResources; /** * Creates a new context wrapper with no theme and no base context. * &lt;p class="note"&gt; * &lt;strong&gt;Note:&lt;/strong&gt; A base context &lt;strong&gt;must&lt;/strong&gt; be attached * using &#123;@link #attachBaseContext(Context)&#125; before calling any other * method on the newly constructed context wrapper. */ public ContextThemeWrapper() &#123; super(null); &#125; /** * Creates a new context wrapper with the specified theme. * &lt;p&gt; * The specified theme will be applied on top of the base context's theme. * Any attributes not explicitly defined in the theme identified by * &lt;var&gt;themeResId&lt;/var&gt; will retain their original values. * * @param base the base context * @param themeResId the resource ID of the theme to be applied on top of * the base context's theme */ public ContextThemeWrapper(Context base, @StyleRes int themeResId) &#123; super(base); mThemeResource = themeResId; &#125; /** * Creates a new context wrapper with the specified theme. * &lt;p&gt; * Unlike &#123;@link #ContextThemeWrapper(Context, int)&#125;, the theme passed to * this constructor will completely replace the base context's theme. * * @param base the base context * @param theme the theme against which resources should be inflated */ public ContextThemeWrapper(Context base, Resources.Theme theme) &#123; super(base); mTheme = theme; &#125; @Override protected void attachBaseContext(Context newBase) &#123; super.attachBaseContext(newBase); &#125; /** * Call to set an "override configuration" on this context -- this is * a configuration that replies one or more values of the standard * configuration that is applied to the context. See * &#123;@link Context#createConfigurationContext(Configuration)&#125; for more * information. * * &lt;p&gt;This method can only be called once, and must be called before any * calls to &#123;@link #getResources()&#125; or &#123;@link #getAssets()&#125; are made. */ public void applyOverrideConfiguration(Configuration overrideConfiguration) &#123; if (mResources != null) &#123; throw new IllegalStateException( "getResources() or getAssets() has already been called"); &#125; if (mOverrideConfiguration != null) &#123; throw new IllegalStateException("Override configuration has already been set"); &#125; mOverrideConfiguration = new Configuration(overrideConfiguration); &#125; /** * Used by ActivityThread to apply the overridden configuration to onConfigurationChange * callbacks. * @hide */ public Configuration getOverrideConfiguration() &#123; return mOverrideConfiguration; &#125; @Override public AssetManager getAssets() &#123; // Ensure we're returning assets with the correct configuration. return getResourcesInternal().getAssets(); &#125; @Override public Resources getResources() &#123; return getResourcesInternal(); &#125; private Resources getResourcesInternal() &#123; if (mResources == null) &#123; if (mOverrideConfiguration == null) &#123; mResources = super.getResources(); &#125; else &#123; final Context resContext = createConfigurationContext(mOverrideConfiguration); mResources = resContext.getResources(); &#125; &#125; return mResources; &#125; @Override public void setTheme(int resid) &#123; if (mThemeResource != resid) &#123; mThemeResource = resid; initializeTheme(); &#125; &#125; /** @hide */ @Override public int getThemeResId() &#123; return mThemeResource; &#125; @Override public Resources.Theme getTheme() &#123; if (mTheme != null) &#123; return mTheme; &#125; mThemeResource = Resources.selectDefaultTheme(mThemeResource, getApplicationInfo().targetSdkVersion); initializeTheme(); return mTheme; &#125; @Override public Object getSystemService(String name) &#123; if (LAYOUT_INFLATER_SERVICE.equals(name)) &#123; if (mInflater == null) &#123; mInflater = LayoutInflater.from(getBaseContext()).cloneInContext(this); &#125; return mInflater; &#125; return getBaseContext().getSystemService(name); &#125; /** * Called by &#123;@link #setTheme&#125; and &#123;@link #getTheme&#125; to apply a theme * resource to the current Theme object. May be overridden to change the * default (simple) behavior. This method will not be called in multiple * threads simultaneously. * * @param theme the theme being modified * @param resId the style resource being applied to &lt;var&gt;theme&lt;/var&gt; * @param first &#123;@code true&#125; if this is the first time a style is being * applied to &lt;var&gt;theme&lt;/var&gt; */ protected void onApplyThemeResource(Resources.Theme theme, int resId, boolean first) &#123; theme.applyStyle(resId, true); &#125; private void initializeTheme() &#123; final boolean first = mTheme == null; if (first) &#123; mTheme = getResources().newTheme(); final Resources.Theme theme = getBaseContext().getTheme(); if (theme != null) &#123; mTheme.setTo(theme); &#125; &#125; onApplyThemeResource(mTheme, mThemeResource, first); &#125;&#125; ÁªìÂêàÊ≥®ÈáäÂèäÊ∫êÁ†ÅÔºåÂèØ‰ª•ÂèëÁé∞ÔºåÁõ∏ÊØî ContextWrapper, ContextThemeWrapper ÊúâËá™Â∑±ÁöÑÂè¶Â§ñÁöÑResource‰ª•Âèä Theme ÊàêÂëòÔºåÂπ∂‰∏îÂèØ‰ª•‰º†ÂÖ•ÈÖçÁΩÆ‰ø°ÊÅØ‰ª•ÂàùÂßãÂåñËá™Â∑±ÁöÑ Resource Âèä Theme. ContextThemeWrapper ÂíåÂÆÉÁöÑmBase ÊàêÂëòÂú® Resource ‰ª•Âèä Theme Áõ∏ÂÖ≥ÁöÑË°å‰∏∫‰∏äÊòØ‰∏çÂêåÁöÑ„ÄÇ ContextImplContextImpl Âíå ContextThemeWrapper ÊúÄÂ§ßÁöÑÂå∫Âà´Â∞±ÊòØÊ≤°Êúâ‰∏Ä‰∏™ Configuration. ÂÖ∂ÂÆÉÁöÑË°å‰∏∫Â§ßËá¥‰∏ÄÊ†∑„ÄÇ Âè¶Â§ñ ContextImpl ÂèØ‰ª•Áî®‰∫éÂàõÂª∫ Activity Service ÁöÑ mBase ÊàêÂëòÔºåËøô‰∏™ mBase context Èô§‰∫ÜÂèÇÊï∞‰∏çÂêåÔºåÂÆÉ‰ª¨ÁöÑ Resource ‰πü‰∏çÂêåÔºå ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºå createActivityContextÁ≠âÊñπÊ≥ï‰∏≠ setResource ÊòØ mBase Ëá™Â∑±Ë∞ÉÁî®ÁöÑÔºå Activity, service ‰ª•Âèä Application Êú¨Ë∫´Âπ∂Ê≤°ÊúâÊâßË°å setResource. ÊÄªÁªì ContextWrapper, ContextThemeWrapper ÈÉΩÊòØ Context ÁöÑ‰ª£ÁêÜÁ±ªÔºå‰∫åËÄÖÁöÑÂå∫Âà´Âú®‰∫é ContextThemeWrapper ÊúâËá™Â∑±ÁöÑ Theme ‰ª•Âèä Resource,Âπ∂‰∏î Resource ÂèØ‰ª•‰º†ÂÖ•Ëá™Â∑±ÈÖçÁΩÆÂàùÂßãÂåñ ContextImpl ÊòØ Context ‰∏ªË¶ÅÂÆûÁé∞Á±ªÔºå Activity, Service Âíå Application ÁöÑ Base contexÈÉΩÊòØÁî±‰ªñÂàõÂª∫ÁöÑÔºåÂç≥ ContextWrapper ‰ª£ÁêÜÁöÑÂ∞±ÊòØ ContextImpl ÂØπË±°Êú¨Ë∫´]]></content>
      <tags>
        <tag>context</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RecyclerViewÂà∑Êñ∞Êú∫Âà∂]]></title>
    <url>%2F2018%2F12%2F24%2FRecyclerView%E5%88%B7%E6%96%B0%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[ÊéòÈáëÂçöÂÆ¢ËÆ∞ÂΩï adapter.notifyDataSetChanaged() ÂºïËµ∑ÁöÑÂà∑Êñ∞ Êàë‰ª¨ÂÅáËÆæ recycleView ÁöÑÂàùÂßãÁä∂ÊÄÅÊòØÊ≤°ÊúâÊï∞ÊçÆÁöÑÔºåÁÑ∂ÂêéÂæÄÊï∞ÊçÆÊ∫ê‰∏≠Âä†ÂÖ•Êï∞ÊçÆÂêéÔºåË∞ÉÁî® adapter.notifyDataSetChanged() Êù•ÂºïËµ∑RecyclerView ÁöÑÂà∑Êñ∞Ôºö 12data.addAll(data)adapter.notifyDataSetChanged() adapter.notifyDataSetChanged() Êó∂Ôºå‰ºöÂºïËµ∑ recycleView ÈáçÊñ∞Â∏ÉÂ±ÄÔºàrequestLayoutÔºâ.Âõ†Ê≠§‰ªé onLayout() ÊñπÊ≥ïÂºÄÂßãÔºö 1234567@Override protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; TraceCompat.beginSection(TRACE_ON_LAYOUT_TAG); dispatchLayout(); TraceCompat.endSection(); mFirstLayoutComplete = true; &#125; Ëøô‰∏™ÊñπÊ≥ïÁõ¥Êé•Ë∞ÉÁî®‰∫Ü dispatchLayout(): 12345678910111213141516171819202122232425262728void dispatchLayout() &#123; if (mAdapter == null) &#123; Log.e(TAG, "No adapter attached; skipping layout"); // leave the state in START return; &#125; if (mLayout == null) &#123; Log.e(TAG, "No layout manager attached; skipping layout"); // leave the state in START return; &#125; mState.mIsMeasuring = false; if (mState.mLayoutStep == State.STEP_START) &#123; dispatchLayoutStep1(); mLayout.setExactMeasureSpecsFrom(this); dispatchLayoutStep2(); &#125; else if (mAdapterHelper.hasUpdates() || mLayout.getWidth() != getWidth() || mLayout.getHeight() != getHeight()) &#123; // First 2 steps are done in onMeasure but looks like we have to run again due to // changed size. mLayout.setExactMeasureSpecsFrom(this); dispatchLayoutStep2(); &#125; else &#123; // always make sure we sync them (to ensure mode is exact) mLayout.setExactMeasureSpecsFrom(this); &#125; dispatchLayoutStep3(); &#125; Áº©ÂÜô‰∏∫Ôºö 12345678910void dispatchLayout() &#123; ... if (mState.mLayoutStep == State.STEP_START) &#123; dispatchLayoutStep1(); dispatchLayoutStep2(); &#125; else if (Êï∞ÊçÆÂèòÂåñ || Â∏ÉÂ±ÄÂèòÂåñ) &#123; dispatchLayoutStep2(); &#125; dispatchLayoutStep3();&#125; ‰∏äÈù¢ÊòØË£ÅÊéâ‰∫Ü‰∏Ä‰∫õ‰ª£Á†ÅÔºåÂèØ‰ª•ÁúãÂà∞Êï¥‰∏™Â∏ÉÂ±ÄËøáÁ®ãÊÄªÂÖ±ÂàÜ‰∏∫3Ê≠•Ôºå‰∏ãÈù¢3Ê≠•ÂØπÂ∫îÁöÑÊñπÊ≥ïÔºö 123STEP_START----&gt;dispatchLayoutStep1()STEP_LAYOUT----&gt;dispatchLayoutStep2()STEP_ANIMATIONS----&gt;dispatchLayoutStep2(),dispatchLayoutStep3() Á¨¨‰∏ÄÊ≠•ÔºöSTEP_START 12345678910/** * The first step of a layout where we; * - process adapter updates Êõ¥Êñ∞adapter * - decide which animation should run Á°ÆÂÆöÂì™‰∏™Âä®ÁîªÂ∫îËØ•ËøêË°å * - save information about current views ‰øùÂ≠òÂΩìÂâçviewsÁöÑ‰ø°ÊÅØ * - If necessary, run predictive layout and save its information */ private void dispatchLayoutStep1() &#123; ..... &#125; Á¨¨‰∫åÊ≠•Ôºö 12345678910111213141516171819202122232425262728/**Á°ÆÂÆöviewÁöÑÁúüÊ≠£Áä∂ÊÄÅ * The second layout step where we do the actual layout of the views for the final state. ËøôÊ≠•ÂèØËÉΩ‰ºöÊâßË°åÂ§öÊ¨°Â¶ÇÊûúnecessary * This step might be run multiple times if necessary (e.g. measure). */ private void dispatchLayoutStep2() &#123; startInterceptRequestLayout(); onEnterLayoutOrScroll(); mState.assertLayoutStep(State.STEP_LAYOUT | State.STEP_ANIMATIONS); mAdapterHelper.consumeUpdatesInOnePass(); //ËÆæÁΩÆÂ•ΩÂàùÂßãÁä∂ÊÄÅ mState.mItemCount = mAdapter.getItemCount(); mState.mDeletedInvisibleItemCountSincePreviousLayout = 0; // Step 2: Run layout Ë∞ÉÁî®Â∏ÉÂ±ÄÁÆ°ÁêÜÂô®Â∏ÉÂ±Ä mState.mInPreLayout = false; mLayout.onLayoutChildren(mRecycler, mState); mState.mStructureChanged = false; mPendingSavedState = null; // onLayoutChildren may have caused client code to disable item animations; re-check mState.mRunSimpleAnimations = mState.mRunSimpleAnimations &amp;&amp; mItemAnimator != null; mState.mLayoutStep = State.STEP_ANIMATIONS;//Êé•‰∏ãÊù•ÊâßË°åÂ∏ÉÂ±ÄÁöÑÁ¨¨‰∏âÊ≠• onExitLayoutOrScroll(); stopInterceptRequestLayout(false); &#125; ËøôÈáåÊúâ‰∏Ä‰∏™ mState, ÂÆÉÊòØ ‰∏Ä‰∏™ RecyclerView.State ÂØπË±°„ÄÇÈ°æÂêçÊÄù‰πâÂÆÉÊòØÁî®Êù•‰øùÂ≠ò RecyclerView Áä∂ÊÄÅÁöÑ‰∏Ä‰∏™ÂØπË±°Ôºå‰∏ªË¶ÅÊòØÁî®Âú® LayoutManager Adapter ÁªÑ‰ª∂‰πãÈó¥ÂÖ±‰∫´ recyclerView Áä∂ÊÄÅÁöÑ„ÄÇÂèØ‰ª•ÁúãÂà∞Ëøô‰∏™ÊñπÊ≥ïÂ∞ÜÂ∏ÉÂ±Ä‰∫§Áªô‰∫Ü mLayout. Â∞±ÊòØÊåáÁöÑÊòØ LineaLayoutManager. Âõ†Ê≠§Êé•‰∏ãÊù•Áúã‰∏ãÔºöLinearLayoutManager.onLayoutChildren(): LinearLayoutManager.onLayoutChildren() Ëøô‰∏™ÊñπÊ≥ïÊØîËæÉÈïøÔºåÂ∞±‰∏çÂ±ïÁ§∫ÂÖ∑‰ΩìÊ∫êÁ†Å„ÄÇ 12345678910111213@Override public void onLayoutChildren(RecyclerView.Recycler recycler, RecyclerView.State state) &#123; // layout algorithm: Â∏ÉÂ±ÄÁÆóÊ≥ï 1.Ê£ÄÊü•children ÂíåÂÖ∂ÂÆÉÂèòÈáèÔºåÊâæÂà∞ÈîöÂùêÊ†áÂíåÈîö // 1) by checking children and other variables, find an anchor coordinate and an anchor // item position. item‰ΩçÁΩÆ 2.ÂºÄÂßãÂ°´ÂÖÖÔºå‰ªéÂ∫ïÈÉ®ÂºÄÂßã // 2) fill towards start, stacking from bottom 3.Â°´ÂÖÖ // 3) fill towards end, stacking from top 4.ÊªöÂä®Êª°Ë∂≥Ë¶ÅÊ±ÇÂÉè‰ªéÂ∫ïÈÉ®Â°´ÂÖÖ‰∏ÄÊ†∑ // 4) scroll to fulfill requirements like stack from bottom. // create layout state Á°ÆÂÆöÈîöÁÇπView ÈîöÁÇπViewÁöÑÁ°ÆÂÆöÈÄöËøáÔºö updateAnchorInfoForLayout 123456789101112// calculate anchor position and coordinate updateAnchorInfoForLayout(recycler, state, mAnchorInfo);private boolean updateAnchorFromChildren(RecyclerView.Recycler recycler, RecyclerView.State state, AnchorInfo anchorInfo) &#123; .... View referenceChild = anchorInfo.mLayoutFromEnd //Â¶ÇÊûúÊòØ‰ªéend(Â∞æÈÉ®)‰ΩçÁΩÆÂºÄÂßãÂ∏ÉÂ±ÄÔºåÈÇ£Â∞±ÊâæÊúÄÊé•ËøëendÁöÑÈÇ£‰∏™‰ΩçÁΩÆÁöÑview‰Ωú‰∏∫ÈîöÁÇπView ? findReferenceChildClosestToEnd(recycler, state) ////Â¶ÇÊûúÊòØ‰ªéstart(Â∞æÈÉ®)‰ΩçÁΩÆÂºÄÂßãÂ∏ÉÂ±ÄÔºåÈÇ£Â∞±ÊâæÊúÄÊé•ËøëstartÁöÑÈÇ£‰∏™‰ΩçÁΩÆÁöÑview‰Ωú‰∏∫ÈîöÁÇπView : findReferenceChildClosestToStart(recycler, state);&#125; AnchorInfo ÊúÄÈáçË¶ÅÁöÑ‰∏§‰∏™Â±ûÊÄßÊòØ; mCoordinate Âíå mPosition. ÊâæÂà∞ÈîöÁÇπ View ÂêéÂ∞±‰ºöÈÄöËøáanchorInfo.assignFromView() ÊñπÊ≥ïÊù•ËÆæÁΩÆËøô‰∏§‰∏™Â±ûÊÄßÔºö 12345678910public void assignFromView(View child, int position) &#123; if (mLayoutFromEnd) &#123; mCoordinate = mOrientationHelper.getDecoratedEnd(child) + mOrientationHelper.getTotalSpaceChange(); &#125; else &#123; mCoordinate = mOrientationHelper.getDecoratedStart(child); &#125; mPosition = position; &#125; 12mCoordinate: Â∞±ÊòØÈîöÁÇπViewÁöÑ Y(x) ÂùêÊ†áÂéªÊéâ RecycleView ÁöÑ padding.mPosition: ÂÖ∂ÂÆûÂ∞±ÊòØ ÈîöÁÇπViewÁöÑ‰ΩçÁΩÆ ÂΩìÁ°ÆÂÆöÂ•Ω AnchorInfo ÂêéÔºåÈúÄË¶ÅÊ†πÊçÆ AnchorInfo Êù•Á°ÆÂÆö RecycleView ÂΩìÂâçÂèØÁî®‰∫éÂ∏ÉÂ±ÄÁöÑÁ©∫Èó¥ÔºåÁÑ∂ÂêéÊù•ÊëÜÊîæÂ≠êView„ÄÇ‰ª•Â∏ÉÂ±ÄÊñπÂêë‰∏∫ start to end Ê≠£Â∏∏ÊñπÂêë‰∏∫‰æãÔºåËøôÈáåÁöÑÈîöÁÇπViewÂÖ∂ÂÆûÂ∞±ÊòØ RecyclerViewÊúÄÈ°∂ÈÉ®ÁöÑ ViewÔºö 12345678910// fill towards end (1) updateLayoutStateToFillEnd(mAnchorInfo); //Á°ÆÂÆöAnchorViewÂà∞RecyclerViewÁöÑÂ∫ïÈÉ®ÁöÑÂ∏ÉÂ±ÄÂèØÁî®Á©∫Èó¥ ... fill(recycler, mLayoutState, state, false); //Â°´ÂÖÖview, ‰ªé AnchorView Âà∞RecyclerViewÁöÑÂ∫ïÈÉ® endOffset = mLayoutState.mOffset; // fill towards start (2) updateLayoutStateToFillStart(mAnchorInfo); //Á°ÆÂÆöAnchorViewÂà∞RecyclerViewÁöÑÈ°∂ÈÉ®ÁöÑÂ∏ÉÂ±ÄÂèØÁî®Á©∫Èó¥ ... fill(recycler, mLayoutState, state, false); //Â°´ÂÖÖview,‰ªé AnchorView Âà∞RecyclerViewÁöÑÈ°∂ÈÉ® ‰∏äÈù¢ÊàëÊ†áÊ≥®‰∫ÜÔºà1ÔºâÔºà2ÔºâÔºå1Ê¨°Â∏ÉÂ±ÄÊòØÁî±Ëøô‰∏§ÈÉ®ÂàÜÁªÑÊàêÁöÑÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÂõæÔºö fill towards end Á°ÆÂÆöÂèØÁî®Â∏ÉÂ±ÄÁ©∫Èó¥ Âú® fill ‰πãÂâçÔºåÈúÄË¶ÅÂÖàÁ°ÆÂÆö ‰ªéÈîöÁÇπView Âà∞ RecyclerView Â∫ïÈÉ®ÊúâÂ§öÂ∞ëÂèØÁî®Á©∫Èó¥„ÄÇÊòØÈÄöËøá updateLayoutStateToFillEnd ÊñπÊ≥ïÔºö 12345678910updateLayoutStateToFillEnd(anchorInfo.mPosition, anchorInfo.mCoordinate);void updateLayoutStateToFillEnd(int itemPosition, int offset) &#123; mLayoutState.mAvailable = mOrientationHelper.getEndAfterPadding() - offset; ... mLayoutState.mCurrentPosition = itemPosition; mLayoutState.mLayoutDirection = LayoutState.LAYOUT_END; mLayoutState.mOffset = offset; mLayoutState.mScrollingOffset = LayoutState.SCROLLING_OFFSET_NaN;&#125; mLayoutState ÊòØ LinearLayoutmanager Áî®Êù•‰øùÂ≠òÂ∏ÉÂ±ÄÁä∂ÊÄÅÁöÑ‰∏Ä‰∏™ÂØπË±°„ÄÇ mLayoutState.mAvailable Â∞±ÊòØÁî®Êù•Ë°®Á§∫ ÊúâÂ§öÂ∞ëÁ©∫Èó¥ÂèØÁî®Â∏ÉÂ±Ä„ÄÇmOrientationHelper.getEndAfterPadding() - offset ÂÖ∂ÂÆûÂ§ßËá¥ÂèØ‰ª•ÁêÜËß£‰∏∫RecycleView ÁöÑÈ´òÂ∫¶„ÄÇÊâÄ‰ª•ËøôÈáåÂèØÁî®Â∏ÉÂ±ÄÁ©∫Èó¥ mLayoutState.mAvailable Â∞±ÊòØ ReycleView ÁöÑÈ´òÂ∫¶„ÄÇ ÊëÜÊîæÂ≠êView Êé•‰∏ãÊù•ÁªßÁª≠Áúã LinearLayoutManager.fill() ÊñπÊ≥ïÔºåËøô‰∏™ÊñπÊ≥ïÊòØÂ∏ÉÂ±ÄÁöÑÊ†∏ÂøÉÊñπÊ≥ïÔºåÊòØÁî®Êù•Âêë RecycleView ‰∏≠Ê∑ªÂä†Â≠êViewÁöÑÊñπÊ≥ïÔºö 12345678910111213141516171819202122232425262728293031323334353637383940int fill(RecyclerView.Recycler recycler, LayoutState layoutState, RecyclerView.State state, boolean stopOnFocusable) &#123; // max offset we should set is mFastScroll + available final int start = layoutState.mAvailable;//ÂèØÁî®È´òÂ∫¶Â∞±ÊòØRecyclerViewÁöÑÈ´òÂ∫¶ if (layoutState.mScrollingOffset != LayoutState.SCROLLING_OFFSET_NaN) &#123; // TODO ugly bug fix. should not happen if (layoutState.mAvailable &lt; 0) &#123; layoutState.mScrollingOffset += layoutState.mAvailable; &#125; recycleByLayoutState(recycler, layoutState); &#125; int remainingSpace = layoutState.mAvailable + layoutState.mExtra; //‰øùÂ≠òÂ∏ÉÂ±Ä‰∏Ä‰∏™child viewÂêéÁöÑÁªìÊûú LayoutChunkResult layoutChunkResult = mLayoutChunkResult; while ((layoutState.mInfinite || remainingSpace &gt; 0) &amp;&amp; layoutState.hasMore(state)) &#123; //ÊúâÂâ©‰ΩôÁ©∫Èó¥ÁöÑËØùÔºåÂ∞±‰∏ÄÁõ¥Ê∑ªÂä† childView layoutChunkResult.resetInternal(); if (VERBOSE_TRACING) &#123; TraceCompat.beginSection("LLM LayoutChunk"); &#125; //Â∏ÉÂ±ÄÂ≠êViewÁöÑÊ†∏ÂøÉÊñπÊ≥ï layoutChunk(recycler, state, layoutState, layoutChunkResult); if (VERBOSE_TRACING) &#123; TraceCompat.endSection(); &#125; if (layoutChunkResult.mFinished) &#123; break; &#125; //‰∏ÄÊ¨°layoutchunk Ê∂àËÄó‰∫ÜÂ§öÂ∞ëÁ©∫Èó¥ layoutState.mOffset += layoutChunkResult.mConsumed * layoutState.mLayoutDirection; /** * Consume the available space if: * * layoutChunk did not request to be ignored * * OR we are laying out scrap children * * OR we are not doing pre-layout */ ÂõûÊî∂ÂèØÁî®Á©∫Èó¥.... return start - layoutState.mAvailable; &#125; Ëøô‰∏™ÊñπÊ≥ïÁöÑÊ†∏ÂøÉÂ∞±ÊòØË∞ÉÁî® layoutChunk() Êù•‰∏çÊñ≠Ê∂àËÄólayoutState.mAvailable Áõ¥Âà∞Ê∂àËÄóÂÆåÊØïÔºåÁªßÁª≠Áúã‰∏ã layoutChunk() ÊñπÊ≥ïÔºö 123456789101112131415void layoutChunk(RecyclerView.Recycler recycler, RecyclerView.State state,LayoutState layoutState, LayoutChunkResult result) &#123; View view = layoutState.next(recycler); //Ëøô‰∏™ÊñπÊ≥ï‰ºöÂêë recycler view Ë¶Å‰∏Ä‰∏™holder ... if (mShouldReverseLayout == (layoutState.mLayoutDirection == LayoutState.LAYOUT_START)) &#123; //Ê†πÊçÆÂ∏ÉÂ±ÄÊñπÂêëÔºåÊ∑ªÂä†Âà∞‰∏çÂêåÁöÑ‰ΩçÁΩÆ addView(view); //Ê∑ªÂä†Âà∞ RecyclerView ‰∏≠ &#125; else &#123; addView(view, 0); &#125; measureChildWithMargins(view, 0, 0); //Ë∞ÉÁî®viewÁöÑmeasure ...measureÂêéÁ°ÆÂÆöÂ∏ÉÂ±ÄÂèÇÊï∞ left/top/right/bottom layoutDecoratedWithMargins(view, left, top, right, bottom); //Ë∞ÉÁî®viewÁöÑlayout ... &#125; Âà∞ËøôÈáåÂÖ∂ÂÆûÂ∞±ÂÆåÊàê‰∫Ü‰∏äÈù¢ÁöÑ fill towards end: 123updateLayoutStateToFillEnd(mAnchorInfo)// Á°ÆÂÆöÂ∏ÉÂ±ÄÂèØÁî®Á©∫Èó¥fill(recycler,mLayoutState,state,false)// Â°´ÂÖÖView fill towards start Â∞±ÊòØ‰ªé ÈîöÁÇπView Âêë RecycleView È°∂ÈÉ®Êù•ÊëÜÊîæÂ≠êViewÔºåÂÖ∑‰ΩìÈÄªËæëÁ±ª‰ºº fill towards end. RecyclerView ÊªëÂä®Êó∂ÁöÑÂà∑Êñ∞ÈÄªËæë Âú®‰∏çÂä†ËΩΩÊñ∞ÁöÑÊï∞ÊçÆÊÉÖÂÜµ‰∏ãÔºå RecycleView Âú®ÊªëÂä®Êó∂ÊòØÂ¶Ç‰ΩïÂ±ïÁ§∫ Â≠êViewÁöÑÔºåÂç≥‰∏ãÈù¢ËøôÁßçÁä∂ÊÄÅÔºö ‰∏ãÈù¢Â∞±Êù•ÂàÜÊûê‰∏Ä‰∏™ 3Ôºå4 Âíå 12Ôºå13ÊòØÂ¶Ç‰ΩïÂ±ïÁ§∫ÁöÑ„ÄÇ RecycleView Âú® OnTouchEvent ÂØπÊªëÂä®‰∫ã‰ª∂ÂÅö‰∫ÜÁõëÂê¨ÔºåÁÑ∂ÂêéÊ¥æÂèëÂà∞ scrollStep() ÊñπÊ≥ïÔºö]]></content>
      <tags>
        <tag>RecyclerView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HandlerThreadÊ∫êÁ†Å]]></title>
    <url>%2F2018%2F12%2F20%2FHandlerThread%E6%BA%90%E7%A0%81%2F</url>
    <content type="text"><![CDATA[12345678910111213141516171819202122232425/** * Handy class for starting a new thread that has a looper. The looper can then be * used to create handler classes. Note that start() must still be called. */ÂºÄÂêØ‰∏Ä‰∏™Á∫øÁ®ãÂÜÖÈÉ®Êúâ‰∏Ä‰∏™looper, Ëøô‰∏™looperÂèØ‰ª•Áî®Êù•ÂàõÂª∫handler. ÂàáËÆ∞‰∏ÄÂÆöË¶ÅË∞ÉÁî®startÊñπÊ≥ï.public class HandlerThread extends Thread &#123; .....&#125;public HandlerThread(String name) &#123; super(name); mPriority = Process.THREAD_PRIORITY_DEFAULT; &#125;@Overridepublic void run() &#123; mTid = Process.myTid(); Looper.prepare(); synchronized (this) &#123; mLooper = Looper.myLooper(); notifyAll(); &#125; Process.setThreadPriority(mPriority); onLooperPrepared(); Looper.loop(); mTid = -1;&#125; ÂÖ∂ÂÆûÊàë‰ª¨ÂàùÂßãÂåñÂíåÂêØÂä®‰∫Ü‰∏Ä‰∏™Á∫øÁ®ãÔºåÊó¢ÁÑ∂ÊòØÁ∫øÁ®ãÈÇ£Â∞±Áúã run ÊñπÊ≥ïÔºå run ÊñπÊ≥ï‰∏≠ÂàõÂª∫‰∫Ü Looper ÂØπË±°ÔºåÁÑ∂ÂêéËÆæÁΩÆÁ∫øÁ®ãÁ≠âÁ∫ßÔºåÂºÄÂêØÂæ™ÁéØ loop() .]]></content>
      <tags>
        <tag>handlerThread</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ËøõÁ®ã‰øùÊ¥ªÂ§ßÊ≥ï]]></title>
    <url>%2F2018%2F12%2F19%2F%E8%BF%9B%E7%A8%8B%E4%BF%9D%E6%B4%BB%E5%A4%A7%E6%B3%95%2F</url>
    <content type="text"><![CDATA[Êî∂ÈõÜÊï¥ÁêÜandroid ËøõÁ®ã‰øùÊ¥ªÊñπÊ≥ï 1ÂÉèÁ¥†Activity Ê≥®ÂÜåÁõëÂê¨Â±èÂπïÂºÄÂêØÂíåÂ±èÂπïÂÖ≥Èó≠Êó∂ÁöÑÂπøÊí≠ÔºåÂΩìÂ±èÂπïÂÖ≥Èó≠Êó∂ÔºåÂºÄÂêØ1ÂÉèÁ¥†ÁöÑ Activity, ÂΩìÂ±èÂπïÂºÄÂêØÊó∂ÔºåÂÖ≥Èó≠1ÂÉèÁ¥†ÁöÑ Activity. Êü•ÁúãËøõÁ®ãÁ≠âÁ∫ß ÂèØ‰ª•Âú®studio ÁªàÁ´ØËøõË°åÂëΩ‰ª§Ë°å, pid ËøõÁ®ãid 123adb shellsucat proc/&#123;pid&#125;/oom_adj OnePxActivity 1234567891011121314151617181920212223242526272829303132public class OnePxActivity extends AppCompatActivity &#123; public static void launch(Context context)&#123; Intent intent = new Intent(context,OnePxActivity.class); intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK); context.startActivity(intent); &#125; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); Log.i("qq","OnPxActivity onCreate........."); Window window = getWindow(); window.setGravity(Gravity.START | Gravity.TOP); WindowManager.LayoutParams params = window.getAttributes(); params.x = 0; params.y = 0; params.width = 1; params.height = 1; window.setAttributes(params); KeepAliveManager.getInstance().setKeepAliveManager(this); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); Log.i("qq","OnPxActivity onDestroy........."); &#125;&#125; ÂπøÊí≠ Ôºö ÁõëÂê¨ÂºÄÂêØ/ÂÖ≥Èó≠ÁöÑÂπøÊí≠ 1234567891011121314151617public class KeepAliveReceiver extends BroadcastReceiver &#123; @Override public void onReceive(Context context, Intent intent) &#123; if(intent.getAction().equals(Intent.ACTION_SCREEN_ON))&#123; //Â±èÂπïÁÇπ‰∫Æ Log.i("qq","Êî∂Âà∞Â±èÂπïÂºÄÂêØÂπøÊí≠"); KeepAliveManager.getInstance().finishOnePxActivity(context); &#125;else if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF))&#123; //Â±èÂπïÁÜÑÁÅ≠, ÂêØÂä®activity Log.i("qq","Êî∂Âà∞Â±èÂπïÂÖ≥Èó≠ÂπøÊí≠"); KeepAliveManager.getInstance().startOnePxActivity(context); &#125; &#125;&#125; ËæÖÂä©Á±ªÔºöKeepAliveManager 1234567891011121314151617181920212223242526272829303132333435363738public class KeepAliveManager &#123; private KeepAliveManager()&#123;&#125; private static KeepAliveManager mInstance = new KeepAliveManager(); private WeakReference&lt;OnePxActivity&gt; mReference; public void setKeepAliveManager(OnePxActivity activity)&#123; this.mReference = new WeakReference&lt;&gt;(activity); &#125; public static KeepAliveManager getInstance()&#123; return mInstance; &#125; public void startOnePxActivity(Context context)&#123; OnePxActivity.launch(context); &#125; public void finishOnePxActivity(Context context)&#123; if(null != mReference &amp;&amp; mReference.get() != null)&#123; mReference.get().finish(); &#125; &#125; private KeepAliveReceiver mReceiver; public void registerReceiver(Context context)&#123; this.mReceiver = new KeepAliveReceiver(); IntentFilter filter = new IntentFilter(); filter.addAction(Intent.ACTION_SCREEN_OFF); filter.addAction(Intent.ACTION_SCREEN_ON); context.registerReceiver(mReceiver,filter); &#125; public void unregisterReceiver(Context context)&#123; if(null != mReceiver)&#123; context.unregisterReceiver(mReceiver); &#125; &#125;&#125; MainActivity ‰ΩøÁî®Ôºö 123456789101112131415161718public class MainActivity extends AppCompatActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); //Á¨¨‰∏ÄÁßçÊñπÂºè KeepAliveManager.getInstance().registerReceiver(this); &#125; @Override protected void onDestroy() &#123; super.onDestroy(); KeepAliveManager.getInstance().unregisterReceiver(this); &#125;&#125; ‰∫≤Ë∫´ÂÆûË∑µ‰∫ÜÔºåÂèëÁé∞Á°ÆÂÆûoom_adj ÂèòÂ∞èÔºåË¢´ÊùÄÊ≠ªÁöÑÊ¶ÇÁéáÊØîËæÉ‰Ωé‰∫ÜÔºåÂΩìÂ±èÂπïÂèòÊöóÁöÑÊó∂ÂÄô„ÄÇ ÂâçÂè∞ÊúçÂä°ForegroundService.java : 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class ForgroundService extends Service &#123; private final int SERVICE_ID = 1; @Override public IBinder onBind(Intent intent) &#123; return null; &#125; @Override public int onStartCommand(Intent intent, int flags, int startId) &#123; if(Build.VERSION.SDK_INT &lt; 18)&#123; //ËÆæÁΩÆÊàêÂâçÂè∞ÊúçÂä°ÔºåÂπ∂‰∏î‰∏çÊòæÁ§∫ÈÄöÁü•Ê†èÊ∂àÊÅØ startForeground(SERVICE_ID,new Notification()); &#125;else if(Build.VERSION.SDK_INT &lt; 26)&#123; startForeground(SERVICE_ID,new Notification()); startService(new Intent(this,InnerService.class)); &#125;else&#123;//android 8.0 NotificationManager manager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE); if(manager != null)&#123; NotificationChannel channel = new NotificationChannel("channel","name",NotificationManager.IMPORTANCE_NONE); manager.createNotificationChannel(channel); NotificationCompat.Builder builder = new NotificationCompat.Builder(this,"channel"); //ËÆæÁΩÆÊàêÂâçÂè∞ÊúçÂä°ÔºåAndroid9.0 ‰ºöÊúâÈÄöÁü•Ê†èÊ∂àÊÅØÔºåÈúÄË¶ÅÊ∑ªÂä†Êñ∞ÁöÑÊùÉÈôê //&lt;uses-permission android:name="android.permission.FOREGROUND_SERVICE"/&gt; startForeground(SERVICE_ID,builder.build()); &#125; &#125; return super.onStartCommand(intent, flags, startId); &#125; class InnerService extends Service&#123; @Override public IBinder onBind(Intent intent) &#123; return null; &#125; @Override public int onStartCommand(Intent intent, int flags, int startId) &#123; startForeground(SERVICE_ID,new Notification()); stopForeground(true); stopSelf(); return super.onStartCommand(intent, flags, startId); &#125; &#125;&#125; ÂèåËøõÁ®ãÂÆàÊä§ ÂêéÁª≠Ë°•‰∏ä‚Ä¶]]></content>
      <tags>
        <tag>ËøõÁ®ã‰øùÊ¥ª</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[INSTALL_FAILED_TEST_ONLY]]></title>
    <url>%2F2018%2F12%2F17%2FINSTALL-FAILED-TEST-ONLY%2F</url>
    <content type="text"><![CDATA[Ëé´ÂêçÂÖ∂Â¶ôÊõ¥Êñ∞‰∫Ü studioÁöÑÈÖçÁΩÆÔºåÁÑ∂ÂêéÊâìÂåÖÁ≠æÂêçÔºåÂà©Áî®adb install xx.apk ÂÆâË£ÖÂ∞±Âá∫Áé∞‰∫Ü INSTALL_FAILED_TEST_ONLY,ÂÆâË£ÖÂ§±Ë¥•„ÄÇÂøÉÊÉ≥‰πüÊ≤°Âπ≤‰ªÄ‰πàÂïäÔºåÊü•ÈòÖÁõ∏ÂÖ≥ËµÑÊñôÂêéÔºåÂéüÂõ†ÊòØÔºöAndroid Studio 3.0‰ºöÂú®debug apkÁöÑmanifestÊñá‰ª∂applicationÊ†áÁ≠æÈáåËá™Âä®Ê∑ªÂä† android:testOnly=&quot;true&quot;Â±ûÊÄß ÁΩë‰∏äÊúâËØ¥ÔºöÂ∞ÜËøô‰∏™android:testOnly=&quot;false&quot; Ê∑ªÂä†Âà∞ Application Ê†áÁ≠æ‰∏≠Ôºå‰ΩÜÊòØËøòÊòØÊ≤°ÊúâÊàêÂäü„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï‰∏ÄÔºö 1adb install -t xx.apk ÈúÄË¶ÅÂä†‰∏ä-t. ÈóÆÈ¢òÊòØËß£ÂÜ≥‰∫ÜÔºåÂèØ‰ª•ÂÆâË£ÖÊàêÂäü‰∫ÜÔºå‰ΩÜÊòØÂØπ‰∫é‰ª•Ââçqq ÂèëÈÄÅÊñá‰ª∂ËøòÊòØ‰∏çËÉΩÂÆâË£ÖÊàêÂäü„ÄÇ Ëß£ÂÜ≥ÂäûÊ≥ï‰∫åÔºöËøòÊòØÁÇπÂáªÊôÆÈÄöÁöÑÁªøËâ≤ÊåâÈíÆÂÆâË£ÖÔºåÊ≠§Êó∂ÁîüÊàê‰∏Ä‰∏™apk,Êàë‰ª¨ÂÜçÁÇπÂáª Build---&gt; Build Apk Ê≠§Êó∂ÊãøÂá∫ output--&gt;apk--&gt;xx.apk ÂèØ‰ª•Ê≠£Â∏∏ÂÆâË£Ö‰∫Ü„ÄÇ]]></content>
      <tags>
        <tag>studio</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Moved Permanently]]></title>
    <url>%2F2018%2F12%2F14%2FMoved-Permanently%2F</url>
    <content type="text"><![CDATA[ÂÖ≥‰∫é‰∏ãËΩΩÊñá‰ª∂‰∏≠ÂåÖÂê´ÈáçÂÆöÂêëÈóÆÈ¢òÁöÑËß£ÂÜ≥ÊñπÊ°à„ÄÇ‰πãÂâç‰∏ãËΩΩÊñá‰ª∂Ê≤°ÈóÆÈ¢òÔºå‰ΩÜÊòØ‰ªäÂ§©ÈÅáÂà∞‰∏Ä‰∏™‰∏ãËΩΩÊñá‰ª∂ÈáåÂåÖÂê´ÈáçÂÆöÂêëÔºåËøòÊòØÁî®‰πãÂâçÁöÑ‰∏ãËΩΩÊñá‰ª∂ÁöÑÊñπÊ≥ïÂ∞±‰∏çË°å‰∫ÜÔºåÈªòËÆ§ÊµèËßàÂô®ÊâìÂºÄ‰∏ãËΩΩÔºåÊòØËá™Âä®ÈáçÂÆöÂêëÁöÑ„ÄÇ ËøôÊòØÊàë‰ª•ÂâçÁöÑ‰∏ãËΩΩÊñá‰ª∂ÁöÑ‰ª£Á†ÅÔºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061class DownloadTask extends AsyncTask&lt;String, Integer, String&gt; &#123; @Override protected String doInBackground(String... params) &#123; String result = ""; OutputStream output = null; try &#123; URL url = new URL(params[0]); // ÂàõÂª∫‰∏Ä‰∏™HttpURLConnectionËøûÊé• URLConnection urlConn = (URLConnection ) url .openConnection(); InputStream input = urlConn.getInputStream(); // Êñá‰ª∂Â§π File dir = new File(Constant.K0_VOICE_DIR); if (!dir.exists()) &#123; dir.mkdirs(); &#125; // Êú¨Âú∞Êñá‰ª∂ File file = new File(Constant.K0_VOICE_DIR + params[1]); if (!file.exists()) &#123; file.createNewFile(); // ÂÜôÂÖ•Êú¨Âú∞ output = new FileOutputStream(file); result = file.getAbsolutePath(); byte buffer[] = new byte[4*1024]; int inputSize = -1; while ((inputSize = input.read(buffer)) != -1) &#123; output.write(buffer, 0, inputSize); &#125; output.flush(); &#125; &#125; catch (MalformedURLException e) &#123; e.printStackTrace(); &#125; catch (IOException e) &#123; e.printStackTrace(); &#125; finally &#123; try &#123; output.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; return result; &#125; @Override protected void onPreExecute() &#123; super.onPreExecute(); &#125; @Override protected void onPostExecute(String result) &#123; //‰∏ãËΩΩÂÆåÊàê..... super.onPostExecute(result); &#125; &#125; ÊåâÁÖßËøô‰∏™‰∏ãËΩΩÔºå‰Ω†‰ºöÂèëÁé∞‰∏ãËΩΩÁöÑ‰æãÂ¶Çmp3 ‰ºöÊó†Ê≥ïÊí≠ÊîæÔºåÁÇπÂºÄÊü•ÁúãÔºö1&lt; a href=&quot;https:xxxx&quot;&gt;Moved Permanently&lt;/ a&gt;. href ÈáåÂåÖÂê´‰∏Ä‰∏™Êñ∞ÁöÑÈìæÊé•„ÄÇÈúÄË¶ÅÊ∑ªÂä†Â¶Ç‰∏ã‰ª£Á†ÅÔºåËé∑ÂèñÊñ∞ÁöÑÈìæÊé•Âú∞ÂùÄ‰∏ãËΩΩÔºö1234567 URLConnection urlConn = (URLConnection ) url .openConnection();//‰∏ãËΩΩÁöÑÊñá‰ª∂‰∏≠Âê´ÊúâÈáçÂÆöÂêëÈìæÊé• String redirect = urlConn.getHeaderField(&quot;Location&quot;); if (redirect != null)&#123; urlConn = new URL(redirect).openConnection(); &#125; Â•â‰∏äÊàëÂú® stackoverflow ‰∏äÊâæÂà∞ÁöÑÁ≠îÊ°àÔºö]]></content>
      <tags>
        <tag>Moved Permanently</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[okhttpÂàùÊé¢]]></title>
    <url>%2F2018%2F12%2F12%2Fokhttp%E5%88%9D%E6%8E%A2%2F</url>
    <content type="text"><![CDATA[‰ΩøÁî®‰æùËµñÊúÄÊñ∞ÁöÑÁâàÊú¨ implementation(&quot;com.squareup.okhttp3:okhttp:3.12.0&quot;) ÁΩëÁ´ôÔºöhttps://square.github.io/okhttp/ get ËØ∑Ê±Ç1234567891011public String getRequests() throws IOException &#123; OkHttpClient client = new OkHttpClient(); String url = "http://www.baidu.com"; Request request = new Request.Builder() .url(url) .build(); Response response = client.newCall(request).execute(); return response.body().string(); &#125; put ËØ∑Ê±Ç123456789101112131415final MediaType JSON = MediaType.parse("application/json; charset=utf-8"); String json = "http://www.roundsapp.com/post"; String url = bowlingJson("Jesse","Jake");//jsonÂ≠óÁ¨¶‰∏≤ OkHttpClient client = new OkHttpClient(); RequestBody body = RequestBody.create(JSON,json); Request request = new Request.Builder() .url(url) .post(body) .build(); Response response = client.newCall(request).execute(); return response.body().string(); ÊÄªÁªì 1.ÂàõÂª∫ OkHttpClient ÂØπË±° 2.ÂàõÂª∫ Request 3.ÂêåÊ≠•ÊàñËÄÖÂºÇÊ≠•ÂèëÂá∫ËØ∑Ê±Ç 4.ÂæóÂà∞ Response ÂêåÊ≠•ÊâßË°åÔºö 12345678910111213141516171819202122232425@Override public Response execute() throws IOException &#123; //1.Âà§Êñ≠ÊòØÂê¶ÊâßË°åËøáÔºåÊØè‰∏™CallËØ∑Ê±ÇÂè™ËÉΩËØ∑Ê±Ç‰∏ÄÊ¨°ÔºåÂ¶ÇÊûúÈúÄË¶ÅÈáçÂ§çÊâßË°åÂèØ‰ª•‰ΩøÁî®clone ÊñπÊ≥ï synchronized (this) &#123; if (executed) throw new IllegalStateException("Already Executed"); executed = true; &#125; captureCallStackTrace(); timeout.enter(); eventListener.callStart(this); try &#123; //2.Ëé∑ÂèñÂàÜÂèëÂô® dispatcher, ÊâßË°å execute client.dispatcher().executed(this); //3.Ëé∑ÂèñÁΩëÁªúËØ∑Ê±ÇÁöÑÁªìÊûú Response result = getResponseWithInterceptorChain(); if (result == null) throw new IOException("Canceled"); return result; &#125; catch (IOException e) &#123; e = timeoutExit(e); eventListener.callFailed(this, e); throw e; &#125; finally &#123; //4.ÊúÄÂêéÈÄöÁü• dispatcher ÊâßË°åÂÆåÊØï client.dispatcher().finished(this); &#125; &#125; clone ÊñπÊ≥ïÔºö 123@Override public RealCall clone() &#123; return RealCall.newRealCall(client, originalRequest, forWebSocket); &#125; Dispatcher.java 12//ÂΩìÂºÇÊ≠•Á∫øÁ®ãÊâßË°åÊó∂Ôºå‰ºö‰æùÁÖß‰∏çÂêåÁöÑÁ≠ñÁï•ÊâßË°å* Policy on when async requests are executed. Êã¶Êà™Âô®OkHttpClinet ÊãøÂà∞ËøîÂõûÁªìÊûúÔºåÊòØÈÄöËøá getResponseWithInterceptorChain() ÊñπÊ≥ïÔºå‰ªéÂêçÂ≠ó‰∏äÊàë‰ª¨ÂèØ‰ª•Â§ßÊ¶ÇÁåúÊµãÊñπÊ≥ïÁöÑËØ≠‰πâÔºåÈÄöËøá‰∏ÄÁ≥ªÂàóÁöÑÊã¶Êà™Âô®ÈìæÂæóÂà∞ÁªìÊûúÔºåÊàë‰ª¨ÂèØ‰ª•Áúã‰∏ãËøô‰∏™ÊñπÊ≥ïÔºö 1234567891011121314151617181920212223242526Response getResponseWithInterceptorChain() throws IOException &#123; // Build a full stack of interceptors.‰∏Ä‰∏™ÈõÜÂêàÂ≠òÂÇ®ÊâÄÊúâÁöÑÊã¶Êà™Âô®Âïä List&lt;Interceptor&gt; interceptors = new ArrayList&lt;&gt;(); //Áî®Êà∑Ëá™ÂÆö‰πâÁöÑÊã¶Êà™Âô®ÔºåËÉΩÊã¶Êà™ÊâÄÊúâÁöÑËØ∑Ê±Ç interceptors.addAll(client.interceptors()); //ÁåúÊµãÊòØÈáçËØïÊú∫Âà∂ interceptors.add(retryAndFollowUpInterceptor); //ËØ∑Ê±ÇÁöÑÂ§¥‰ø°ÊÅØÔºåcookie,gzip interceptors.add(new BridgeInterceptor(client.cookieJar())); //ÁåúÊµãÊòØÁºìÂ≠ò interceptors.add(new CacheInterceptor(client.internalCache())); //ÂºÄÂßã‰∏éÁõÆÊ†áÊúçÂä°Âô®Âª∫Á´ãËøûÊé•ÔºåËé∑ÂæóRealConnection interceptors.add(new ConnectInterceptor(client)); if (!forWebSocket) &#123; //Áî®Êà∑Ëá™ÂÆö‰πâÁöÑ interceptor, ‰ªÖÂú®Áîü‰∫ßÁΩëÁªúËØ∑Ê±ÇÊó∂ÁîüÊïà interceptors.addAll(client.networkInterceptors());//ÁåúÊµãÊòØÁΩëÁªúËØ∑Ê±Ç &#125; //ÂêëÊúçÂä°Âô®ÂèëÂá∫‰∏ÄÊ¨°ÁΩëÁªúËØ∑Ê±ÇÁöÑÂú∞Êñπ interceptors.add(new CallServerInterceptor(forWebSocket)); Interceptor.Chain chain = new RealInterceptorChain(interceptors, null, null, null, 0, originalRequest, this, eventListener, client.connectTimeoutMillis(), client.readTimeoutMillis(), client.writeTimeoutMillis()); return chain.proceed(originalRequest); &#125; Interceptor ÊòØ OkHttp ÊúÄÊ†∏ÂøÉÁöÑ‰∏Ä‰∏™‰∏úË•øÔºåÈááÁî®‰∫ÜË¥£‰ªªÈìæÁöÑËÆæËÆ°Ê®°ÂºèÔºåÈô§‰∫ÜÊó•Â∏∏Ë¥üË¥£Êã¶Êà™ËØ∑Ê±ÇËøõË°å‰∏Ä‰∫õÈ¢ùÂ§ñÂ§ÑÁêÜÔºå‰æãÂ¶Ç cookie, ÂÆûÈôÖ‰∏äÂÆÉÊääÁΩëÁªúËØ∑Ê±ÇÔºåÁºìÂ≠òÔºåÈÄèÊòéÂéãÁº©Á≠âÂäüËÉΩÈÉΩÁªü‰∏ÄÂú®‰∏ÄËµ∑ÔºåÊØè‰∏™ÂäüËÉΩÈÉΩÊòØ‰∏Ä‰∏™ Interceptor , ÂÆÉ‰ª¨ÂÜçËøûÊé•Áß∞‰∏∫ Intercepteor.Chain Êã¶Êà™ÈìæÊù°ÔºåÁéØÁéØÁõ∏Êâ£ÔºåÊúÄÁªàÂÆåÊàê‰∏ÄÊ¨°ÁΩëÁªúËØ∑Ê±Ç„ÄÇ RealInterceptorChain.java: 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136/** * A concrete interceptor chain that carries the entire interceptor chain: all application * interceptors, the OkHttp core, all network interceptors, and finally the network caller. */public final class RealInterceptorChain implements Interceptor.Chain &#123; private final List&lt;Interceptor&gt; interceptors;//ÊâÄÊúâÁöÑÊã¶Êà™Âô®ÈõÜÂêà private final StreamAllocation streamAllocation; private final HttpCodec httpCodec; private final RealConnection connection; private final int index; private final Request request; private final Call call; private final EventListener eventListener; private final int connectTimeout; private final int readTimeout; private final int writeTimeout; private int calls; public RealInterceptorChain(List&lt;Interceptor&gt; interceptors, StreamAllocation streamAllocation, HttpCodec httpCodec, RealConnection connection, int index, Request request, Call call, EventListener eventListener, int connectTimeout, int readTimeout, int writeTimeout) &#123; this.interceptors = interceptors; this.connection = connection; this.streamAllocation = streamAllocation; this.httpCodec = httpCodec; this.index = index; this.request = request; this.call = call; this.eventListener = eventListener; this.connectTimeout = connectTimeout; this.readTimeout = readTimeout; this.writeTimeout = writeTimeout; &#125; @Override public Connection connection() &#123; return connection; &#125; @Override public int connectTimeoutMillis() &#123; return connectTimeout; &#125; @Override public Interceptor.Chain withConnectTimeout(int timeout, TimeUnit unit) &#123; int millis = checkDuration("timeout", timeout, unit); return new RealInterceptorChain(interceptors, streamAllocation, httpCodec, connection, index, request, call, eventListener, millis, readTimeout, writeTimeout); &#125; @Override public int readTimeoutMillis() &#123; return readTimeout; &#125; @Override public Interceptor.Chain withReadTimeout(int timeout, TimeUnit unit) &#123; int millis = checkDuration("timeout", timeout, unit); return new RealInterceptorChain(interceptors, streamAllocation, httpCodec, connection, index, request, call, eventListener, connectTimeout, millis, writeTimeout); &#125; @Override public int writeTimeoutMillis() &#123; return writeTimeout; &#125; @Override public Interceptor.Chain withWriteTimeout(int timeout, TimeUnit unit) &#123; int millis = checkDuration("timeout", timeout, unit); return new RealInterceptorChain(interceptors, streamAllocation, httpCodec, connection, index, request, call, eventListener, connectTimeout, readTimeout, millis); &#125; public StreamAllocation streamAllocation() &#123; return streamAllocation; &#125; public HttpCodec httpStream() &#123; return httpCodec; &#125; @Override public Call call() &#123; return call; &#125; public EventListener eventListener() &#123; return eventListener; &#125; @Override public Request request() &#123; return request; &#125; @Override public Response proceed(Request request) throws IOException &#123; return proceed(request, streamAllocation, httpCodec, connection); &#125; public Response proceed(Request request, StreamAllocation streamAllocation, HttpCodec httpCodec, RealConnection connection) throws IOException &#123; if (index &gt;= interceptors.size()) throw new AssertionError(); calls++; // If we already have a stream, confirm that the incoming request will use it. if (this.httpCodec != null &amp;&amp; !this.connection.supportsUrl(request.url())) &#123; throw new IllegalStateException("network interceptor " + interceptors.get(index - 1) + " must retain the same host and port"); &#125; // If we already have a stream, confirm that this is the only call to chain.proceed(). if (this.httpCodec != null &amp;&amp; calls &gt; 1) &#123; throw new IllegalStateException("network interceptor " + interceptors.get(index - 1) + " must call proceed() exactly once"); &#125; // Call the next interceptor in the chain. RealInterceptorChain next = new RealInterceptorChain(interceptors, streamAllocation, httpCodec, connection, index + 1, request, call, eventListener, connectTimeout, readTimeout, writeTimeout); Interceptor interceptor = interceptors.get(index); Response response = interceptor.intercept(next); // Confirm that the next interceptor made its required call to chain.proceed(). if (httpCodec != null &amp;&amp; index + 1 &lt; interceptors.size() &amp;&amp; next.calls != 1) &#123; throw new IllegalStateException("network interceptor " + interceptor + " must call proceed() exactly once"); &#125; // Confirm that the intercepted response isn't null. if (response == null) &#123; throw new NullPointerException("interceptor " + interceptor + " returned null"); &#125; if (response.body() == null) &#123; throw new IllegalStateException( "interceptor " + interceptor + " returned a response with no body"); &#125; return response; &#125;&#125; Ëøô‰∏™ÊñπÊ≥ïÊàëÊ≤°ÁúãÊáÇÔºåÁΩë‰∏äËØ¥ÊòØ‰º†ÈÄíÂèÇÊï∞ÂíåÊâßË°åÊã¶Êà™Âô®ÔºåÂπ∂‰∏îËÆæÂÆöÊù°‰ª∂ÔºåÊØè‰∏™Êã¶Êà™Âô®ÈÉΩ‰ºöÊâßË°å proceed ÊñπÊ≥ï„ÄÇ Êã¶Êà™Âô®ÔºöRetryAndFollowUpInterceptor.java 1234567891011121314151617181920212223242526/** * This interceptor recovers from failures and follows redirects as necessary. It may throw an * &#123;@link IOException&#125; if the call was canceled. Ëøô‰∏™Êã¶Êà™Âô®ÂøÖË¶ÅÊó∂‰ºöÈáçËØïÂíåÈáçÂÆöÂêëÔºåÂèØËÉΩ‰ºöÊäõÂá∫ÂºÇÂ∏∏Âú®callË¢´ÂèñÊ∂àÁöÑÊó∂ÂÄô */public final class RetryAndFollowUpInterceptor implements Interceptor &#123;.... @Override public Response intercept(Chain chain) throws IOException &#123; Request request = chain.request(); RealInterceptorChain realChain = (RealInterceptorChain) chain; Call call = realChain.call(); EventListener eventListener = realChain.eventListener(); StreamAllocation streamAllocation = new StreamAllocation(client.connectionPool(), createAddress(request.url()), call, eventListener, callStackTrace); this.streamAllocation = streamAllocation; int followUpCount = 0; Response priorResponse = null; while (true) &#123; if (canceled) &#123;//Ë¢´ÂèñÊ∂à streamAllocation.release(); throw new IOException("Canceled"); &#125;&#125; BridgeInterceptor.java Âü∫Êú¨‰∏äËØ∑Ê±ÇÁöÑÂ§¥‰ø°ÊÅØÔºåCookie ÂéãÁº©: gzip 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475/** * Bridges from application code to network code. First it builds a network request from a user * request. Then it proceeds to call the network. Finally it builds a user response from the network * response. */public final class BridgeInterceptor implements Interceptor &#123; private final CookieJar cookieJar; @Override public Response intercept(Chain chain) throws IOException &#123; Request userRequest = chain.request(); Request.Builder requestBuilder = userRequest.newBuilder(); RequestBody body = userRequest.body(); if (body != null) &#123; MediaType contentType = body.contentType(); if (contentType != null) &#123; requestBuilder.header("Content-Type", contentType.toString()); &#125; long contentLength = body.contentLength(); if (contentLength != -1) &#123; requestBuilder.header("Content-Length", Long.toString(contentLength)); requestBuilder.removeHeader("Transfer-Encoding"); &#125; else &#123; requestBuilder.header("Transfer-Encoding", "chunked"); requestBuilder.removeHeader("Content-Length"); &#125; &#125; if (userRequest.header("Host") == null) &#123; requestBuilder.header("Host", hostHeader(userRequest.url(), false)); &#125; if (userRequest.header("Connection") == null) &#123; requestBuilder.header("Connection", "Keep-Alive"); &#125; // If we add an "Accept-Encoding: gzip" header field we're responsible for also decompressing // the transfer stream. boolean transparentGzip = false; if (userRequest.header("Accept-Encoding") == null &amp;&amp; userRequest.header("Range") == null) &#123; transparentGzip = true; requestBuilder.header("Accept-Encoding", "gzip"); &#125; List&lt;Cookie&gt; cookies = cookieJar.loadForRequest(userRequest.url()); if (!cookies.isEmpty()) &#123; requestBuilder.header("Cookie", cookieHeader(cookies)); &#125; if (userRequest.header("User-Agent") == null) &#123; requestBuilder.header("User-Agent", Version.userAgent()); &#125; Response networkResponse = chain.proceed(requestBuilder.build()); HttpHeaders.receiveHeaders(cookieJar, userRequest.url(), networkResponse.headers()); Response.Builder responseBuilder = networkResponse.newBuilder() .request(userRequest); if (transparentGzip &amp;&amp; "gzip".equalsIgnoreCase(networkResponse.header("Content-Encoding")) &amp;&amp; HttpHeaders.hasBody(networkResponse)) &#123; GzipSource responseBody = new GzipSource(networkResponse.body().source()); Headers strippedHeaders = networkResponse.headers().newBuilder() .removeAll("Content-Encoding") .removeAll("Content-Length") .build(); responseBuilder.headers(strippedHeaders); String contentType = networkResponse.header("Content-Type"); responseBuilder.body(new RealResponseBody(contentType, -1L, Okio.buffer(responseBody))); &#125; return responseBuilder.build(); &#125; CacheInterceptor.java ÁºìÂ≠ò‰ø°ÊÅØ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104/** Serves requests from the cache and writes responses to the cache. */public final class CacheInterceptor implements Interceptor &#123; final InternalCache cache; public CacheInterceptor(InternalCache cache) &#123; this.cache = cache; &#125; @Override public Response intercept(Chain chain) throws IOException &#123; Response cacheCandidate = cache != null ? cache.get(chain.request()) : null; long now = System.currentTimeMillis(); CacheStrategy strategy = new CacheStrategy.Factory(now, chain.request(), cacheCandidate).get(); Request networkRequest = strategy.networkRequest; //‰ªéÁºìÂ≠ò‰∏≠Ëé∑Âèñ response Response cacheResponse = strategy.cacheResponse; if (cache != null) &#123; cache.trackResponse(strategy); &#125; if (cacheCandidate != null &amp;&amp; cacheResponse == null) &#123; closeQuietly(cacheCandidate.body()); // The cache candidate wasn't applicable. Close it. &#125; // If we're forbidden from using the network and the cache is insufficient, fail. if (networkRequest == null &amp;&amp; cacheResponse == null) &#123; return new Response.Builder() .request(chain.request()) .protocol(Protocol.HTTP_1_1) .code(504) .message("Unsatisfiable Request (only-if-cached)") .body(Util.EMPTY_RESPONSE) .sentRequestAtMillis(-1L) .receivedResponseAtMillis(System.currentTimeMillis()) .build(); &#125; // If we don't need the network, we're done. if (networkRequest == null) &#123; return cacheResponse.newBuilder() .cacheResponse(stripBody(cacheResponse)) .build(); &#125; Response networkResponse = null; try &#123; networkResponse = chain.proceed(networkRequest); &#125; finally &#123; // If we're crashing on I/O or otherwise, don't leak the cache body. if (networkResponse == null &amp;&amp; cacheCandidate != null) &#123; closeQuietly(cacheCandidate.body()); &#125; &#125; // If we have a cache response too, then we're doing a conditional get. if (cacheResponse != null) &#123; if (networkResponse.code() == HTTP_NOT_MODIFIED) &#123; Response response = cacheResponse.newBuilder() .headers(combine(cacheResponse.headers(), networkResponse.headers())) .sentRequestAtMillis(networkResponse.sentRequestAtMillis()) .receivedResponseAtMillis(networkResponse.receivedResponseAtMillis()) .cacheResponse(stripBody(cacheResponse)) .networkResponse(stripBody(networkResponse)) .build(); networkResponse.body().close(); // Update the cache after combining headers but before stripping the // Content-Encoding header (as performed by initContentStream()). cache.trackConditionalCacheHit(); cache.update(cacheResponse, response); return response; &#125; else &#123; closeQuietly(cacheResponse.body()); &#125; &#125; Response response = networkResponse.newBuilder() .cacheResponse(stripBody(cacheResponse)) .networkResponse(stripBody(networkResponse)) .build(); if (cache != null) &#123; if (HttpHeaders.hasBody(response) &amp;&amp; CacheStrategy.isCacheable(response, networkRequest)) &#123; // Offer this request to the cache. CacheRequest cacheRequest = cache.put(response); return cacheWritingResponse(cacheRequest, response); &#125; if (HttpMethod.invalidatesCache(networkRequest.method())) &#123; try &#123; cache.remove(networkRequest); &#125; catch (IOException ignored) &#123; // The cache cannot be written. &#125; &#125; &#125; return response; &#125; ..... ËøûÊé•Ê±† okHttp Âà©Áî®ËøûÊé•Ê±†Êù•Â§çÁî®ËøûÊé•ÔºåÈÅøÂÖçÂèçÂ§çÊè°ÊâãÂª∫Á´ãËøûÊé•ÔºåÂπ∂‰∏îÂÖ∑Â§áÂú®ÂêàÈÄÇÁöÑÊó∂ÂÄôÊå•ÊâãËøûÊé•ÁöÑËÉΩÂäõ„ÄÇ]]></content>
      <tags>
        <tag>okhttp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[CASÊú∫Âà∂]]></title>
    <url>%2F2018%2F12%2F11%2FCAS%E6%9C%BA%E5%88%B6%2F</url>
    <content type="text"><![CDATA[ËÉåÊôØ‰ªãÁªçÔºöCAS ÂÆåÊï¥ÂêçÁß∞‰∏∫ Ôºö ‚ÄúCompare and Swap‚Äù ÊØîËæÉÂπ∂ÊõøÊç¢„ÄÇ ÈáåÈù¢Ê∂âÂèä‰∏â‰∏™Âü∫Êú¨Êìç‰ΩúÊï∞ÔºåÂÜÖÂ≠òÂú∞ÂùÄÂÄºÔºöVÔºõÊóßÁöÑÈ¢ÑÊúüÂÄºÔºöAÔºõÊñ∞ÁöÑÈ¢ÑÊúüÂÄºÔºöB„ÄÇ ËßÑÂàôÔºöÂΩìÊõ¥Êñ∞ÂèòÈáèÊó∂ÔºåÂè™ÊúâÂΩìÂÜÖÂ≠òÂú∞ÂùÄÈáåÁöÑÂÄºV = ÊóßÁöÑÈ¢ÑÊúüÂÄºAÔºåÊâçËÉΩË¢´ÊàêÂäüÁöÑÊõ¥Êñ∞‰∏∫B„ÄÇ ‰∏æ‰∏™‰æãÂ≠ê: Âú®ÂÜÖÂ≠òÂú∞ÂùÄV‰∏≠ÔºåÂ≠òÂú®‰∏Ä‰∏™ÂèòÈáèÂÄº‰∏∫10ÁöÑÂÄºÔºö Ê≠§Êó∂Á∫øÁ®ã‰∏ÄÔºåÁ∫øÁ®ã‰∫å ÔºåÂêåÊó∂ÂéªÊìç‰ΩúËøô‰∏™ÂèòÈáèÔºå‰æãÂ¶ÇÈÉΩÊÉ≥+1Ôºõ ÂØπ‰∫éÁ∫øÁ®ã‰∏ÄÊù•ËØ¥Ôºö AÔºö10Ôºõ B: 11Ôºõ V: 10 ‰ΩÜÊòØÁî±‰∫éÁ∫øÁ®ã‰∫åÊØîÁ∫øÁ®ã‰∏ÄÊâßË°åÁöÑÊõ¥Âø´ÔºåÊ≠§Êó∂Á∫øÁ®ã‰∫åÂ∑≤ÁªèÊääÂÜÖÂ≠òÂú∞ÂùÄV‰∏≠ÁöÑ10Êõ¥Êñ∞‰∏∫11. ‚Äã ÈÇ£‰πàÂΩìÁ∫øÁ®ã‰∏ÄÂÜçÊ¨°ÊâßË°åÊõ¥Êñ∞Êìç‰ΩúÔºåÂèëÁé∞ V = 11,A = 10, V‚â†AÔºåÊõ¥Êñ∞Â§±Ë¥•„ÄÇ ‚Äã Ê≠§Êó∂Á∫øÁ®ã‰∏ÄÈúÄË¶ÅÈáçÊñ∞ËØªÂèñÂÜÖÂ≠ò‰∏≠ÁöÑÂÄºÔºåÂπ∂ÈáçÊñ∞ËÆ°ÁÆóË¶ÅÊõ¥Êñ∞ÁöÑÊñ∞ÂÄºÔºåËÆ°ÁÆóÂêéÂæóÂá∫Ôºö ‚Äã A= 11ÔºåB= 12. ÈáçÊñ∞Êèê‰∫§ËØ∑Ê±ÇÔºåËøô‰∏™ËøáÁ®ãÁß∞‰∏∫Ëá™Êóã„ÄÇ ‚Äã È¶ñÂÖàCompare V== AÔºå ÁÑ∂ÂêéËøõË°åswap , V = 12ÔºåË¢´Êõ¥Êñ∞‰∏∫12. ‰ªéÊÄùÊÉ≥‰∏äÊù•ËØ¥Ôºåsyncronized Â±û‰∫éÊÇ≤ËßÇÈîÅÔºåËÆ§‰∏∫Âπ∂ÂèëÊÉÖÂÜµÈùûÂ∏∏‰∏•ÈáçÔºåCAS Êú∫Âà∂Â±û‰∫é‰πêËßÇÈîÅÔºåËÆ§‰∏∫Âπ∂ÂèëÊÉÖÂÜµÂπ∂‰∏çÊòØ‰∏ÄÁßçÁâπÂà´‰∏•ÈáçÁöÑÊÉÖÂÜµÔºåÂèëÁîüÈóÆÈ¢òÔºå‰∏çÊñ≠Â∞ùËØïÊõ¥Êñ∞Âç≥ÂèØ„ÄÇ ‰ΩøÁî®Âú∫ÊôØÔºöAtomicÁ≥ªÂàóÁ±ªÔºå‰ª•ÂèäLockÁ≥ªÂàóÁ±ªÁöÑÂ∫ïÂ±ÇÂÆûÁé∞Ôºõ‰∏çÈÄÇÂêàÈ´òÂπ∂ÂèëÁöÑÂú∫ÊôØÔºåÈ´òÂπ∂ÂèëËøòÊòØ syncronized Áº∫ÁÇπ CPUÊ∂àËÄóÂ§ß Â¶ÇÊûúÂú®Â§ö‰∏™Á∫øÁ®ãÂπ∂ÂèëÂéªÊõ¥Êñ∞‰∏Ä‰∏™ÂèòÈáèÔºåÂ§ö‰∏™Á∫øÁ®ãÂêåÊó∂ÂéªÈáçÂ§çÂ∞ùËØïÊõ¥Êñ∞Êüê‰∏Ä‰∏™ÂèòÈáèÔºåÂç¥Âèà‰∏ÄÁõ¥‰∏çÊàêÂäüÔºåÂæ™ÁéØÂæÄÂ§çÂ∞±‰ºöÁªôCPUÈÄ†ÊàêÂæàÂ§ßÁöÑÂéãÂäõ„ÄÇ ‰∏çËÉΩ‰øùËØÅ‰ª£Á†ÅÂùóÁöÑÂéüÂ≠êÊÄß CAS ÂèØ‰ª•‰øùËØÅ‰∏Ä‰∏™ÂèòÈáèÁöÑÂéüÂ≠êÊÄßÔºåÂç¥Êó†Ê≥ï‰øùËØÅÊï¥‰∏™‰ª£Á†ÅÂùóÁöÑÂéüÂ≠êÊÄß„ÄÇ ABAÈóÆÈ¢ò‚Äî‚ÄìÊúÄÂ§ßÁöÑÈóÆÈ¢ò ABA ÈóÆÈ¢ò‰∏æ‰æãËØ¥ÊòéÔºö ÂÅáËÆæÊúâ‰∏â‰∏™Á∫øÁ®ãÈÉΩË¶ÅÂØπÂÜÖÂ≠òÂú∞ÂùÄV ‰∏≠ÁöÑ A ËøõË°åÊìç‰ΩúÔºå Á∫øÁ®ã‰∏ÄÔºöÊóßÁöÑÈ¢ÑÊúüÂÄºÔºöAÔºõÊñ∞ÁöÑÈ¢ÑÊúüÂÄºÔºöB Á∫øÁ®ã‰∫åÔºöÊóßÁöÑÈ¢ÑÊúüÂÄºÔºöAÔºõÊñ∞ÁöÑÈ¢ÑÊúüÂÄºÔºöB Á∫øÁ®ã‰∏âÔºöËøòÊú™ÂºÄÂßãÂ∑•‰Ωú Á∫øÁ®ã‰∏ÄÈ¶ñÂÖàËøõË°å‰∫ÜÊìç‰ΩúÔºåÈ°∫Âà©Â∞ÜAÊõ¥Êñ∞‰∏∫BÔºö Ê≠§Êó∂Á∫øÁ®ã‰∏â‰∏äÊù•‰∫ÜÔºåÂÆÉÊòØÔºöÊóßÁöÑÈ¢ÑÊúüÂÄºÔºöBÔºõÊñ∞ÁöÑÈ¢ÑÊúüÂÄºÔºöAÔºåÊ≠§Êó∂ÂèëÁé∞Ôºö ‚Äã V(B) == B(B)ÔºåÊõ¥Êñ∞ÊàêÂäüÔºåÂèò‰∏∫Âõæ‰∏ãÔºö Ê≠§Êó∂Á∫øÁ®ã‰∫åÂºÄÂßãÂ∑•‰ΩúÔºåÁ∫øÁ®ã‰∫åÁöÑÁõÆÊ†áÊòØÔºöÊóßÁöÑÈ¢ÑÊúüÂÄºÔºöAÔºõÊñ∞ÁöÑÈ¢ÑÊúüÂÄºÔºöBÔºåÂêåÊ†∑‰∏ÄÊØîÂØπÔºåÁõ∏ÂêåÔºå‰∫éÊòØ‰πüÊõ¥Êñ∞ÊàêÂäüÔºåÂèò‰∏∫Â¶Ç‰∏ãÔºö ËôΩÁÑ∂‰ªéÁªìÊûú‰∏äÊù•ÁúãÔºåA ÊàêÂäüÁöÑÂèò‰∏∫ BÔºåÁÑ∂ÂêéÂú®ÂÆûÈôÖÊ∂âÂèäÈí±ÁöÑÊó∂ÂÄôÔºåÈóÆÈ¢òÂ∞±Â§ß‰∫Ü„ÄÇ ÂÜçÊ¨°‰∏æ‰æãÔºö Â∞èÊòéÈì∂Ë°åÂç°ÈáåÊúâ200ÂùóÈí±ÔºåÊÉ≥ÂèñÂá∫100ÂùóÈí±Ôºå‰ΩÜÊòØÁî±‰∫éËÆæÂ§áÊïÖÈöúÔºåÊèê‰∫§‰∫Ü‰∏§Ê¨°Êâ£Ê¨æÁî≥ËØ∑„ÄÇ Êâ£Ê¨æÁî≥ËØ∑1ÔºöÊóßÁöÑÈ¢Ñ‰º∞ÂÄºÔºö200ÔºåÊñ∞ÁöÑÈ¢Ñ‰º∞ÂÄºÔºö100 Êâ£Ê¨æÁî≥ËØ∑2ÔºöÊóßÁöÑÈ¢Ñ‰º∞ÂÄºÔºö200ÔºåÊñ∞ÁöÑÈ¢Ñ‰º∞ÂÄºÔºö100 Ê≠§Êó∂ÔºåÊâ£Ê¨æÁî≥ËØ∑1ÊèêÂâçËøõË°å‰∫ÜÊìç‰ΩúÔºåÊâ£Ê¨æÊàêÂäüÔºåÂ∞èÊòéÈì∂Ë°åÂç°Èáå‰∏∫100ÂùóÈí±Ôºõ Êâ£Ê¨æÁî≥ËØ∑2ÂÅáËÆæËøòÂú®Á≠âÂæÖ„ÄÇ//block Ê≠§Êó∂Â∞èÊòéÁöÑÂ¶àÂ¶àÁªôÂ∞èÊòéÂ≠òÂÇ®100ÂÖÉÔºåok, Áé∞Âú®Â∞èÊòéÈì∂Ë°åÂç°ÈáåÂ∞±ÊòØ200ÂùóÈí±„ÄÇ Êâ£Ê¨æÁî≥ËØ∑2ÊÅ¢Â§çÊ≠£Â∏∏ÔºåÂºÄÂßãÂøÖÂØπÔºåÊóßÁöÑÈ¢Ñ‰º∞ÂÄºÔºö200ÔºåÂç°Èáå‰ΩôÈ¢ù200ÔºåÊàêÂäüÔºåÊõøÊç¢Êõ¥Êñ∞‰∏∫100. Êõ¥Êñ∞ÊàêÂäüÔºåÈÇ£‰πàÊ≠§Êó∂Â∞èÊòéÈì∂Ë°åÂç°ÈáåÂâ©‰ΩôÈáëÈ¢ùÔºö100Âùó„ÄÇ ÂìàÂìàÔºÅÔºÅÔºÅËøôÊòæÁÑ∂ÊòØ‰∏çÂØπÁöÑÔºåËôΩÁÑ∂ÂÄºÁõ∏ÂêåÔºå‰ΩÜÊòØ‰∏≠Èó¥Êìç‰ΩúÊîπÂèò‰∫ÜÊúÄÁªàÁöÑÁªìÊûú„ÄÇÈÇ£Â¶Ç‰ΩïËß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÂë¢ÔºüÂèØ‰ª•Âà©Áî®ÁâàÊú¨Âè∑ÔºåÊØè‰øÆÊîπÊàêÂäü‰∏ÄÊ¨°VÔºåÈÉΩË¶ÅËÆæÁΩÆ‰∏Ä‰∏™ÁâàÊú¨Âè∑„ÄÇÊØèÊ¨°Êõ¥Êñ∞ÁöÑÊó∂ÂÄôÔºå‰∏ç‰ΩÜË¶ÅÊØîÂØπÂÄºËøòË¶ÅÊØîÂØπÁâàÊú¨Âè∑ÔºåÂ∞±ÂèØ‰ª•ÈÅøÂÖçËøôÁßçÈîôËØØ„ÄÇ Â•ΩÔºåÂ∞±‰∏äÈù¢ÁöÑ‰æãÂ≠êËØ¥Êòé‰∏ãÔºö ÂΩìÊâ£Ê¨æÁî≥ËØ∑1ÂÆåÊàêÊõ¥Êñ∞Êìç‰ΩúÊó∂ÔºåÊàë‰ª¨ËÆæÁΩÆÂÜÖÂ≠òÂú∞ÂùÄV‰∏≠ÁöÑÂÄºÁöÑÁâàÊú¨Âè∑‰∏∫ÔºöÔºö01 Á¨¨‰∫åÊ¨°Êìç‰ΩúÔºöÂ¶àÂ¶àÊàêÂäüÂêëÂç°ÈáåÂ≠òÂÖ•‰∫Ü100Âùó Êâ£Ê¨æÁî≥ËØ∑2ÂºÄÂßãÂ∑•‰ΩúÔºö ÊóßÁöÑÈ¢Ñ‰º∞ÂÄºÔºö200ÔºåÊñ∞ÁöÑÈ¢Ñ‰º∞ÂÄºÔºö100ÔºõÁâàÊú¨Âè∑‰∏∫00 ËÄåÊ≠§Êó∂ÔºöVÔºà200Ôºâ= ÊóßÁöÑÈ¢Ñ‰º∞ÂÄºÔºà200ÔºâÊàêÁ´ã ‚Äã ÁâàÊú¨Âè∑Ôºà00Ôºâ ‚â† versionÔºà02Ôºâ ‰∏çÊàêÁ´ã]]></content>
      <tags>
        <tag>CAS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMap È´òÂπ∂ÂèëÂØºËá¥ÁöÑÊ≠ªÂæ™ÁéØ]]></title>
    <url>%2F2018%2F12%2F07%2FHashMap-%E9%AB%98%E5%B9%B6%E5%8F%91%E5%AF%BC%E8%87%B4%E7%9A%84%E6%AD%BB%E5%BE%AA%E7%8E%AF%2F</url>
    <content type="text"><![CDATA[1234567891011121314151617for (int j = 0; j &lt; src.length; ++j) &#123; Entry&lt;K,V&gt; e = src[j];//src Ë°®Á§∫Âéütable while(null != e) &#123; //Ê≠§Â§ÑË°®Á§∫ÂèñÂá∫‰∏ã‰∏Ä‰∏™‰ΩçÁΩÆÁöÑEntry(ÈîÆÂÄºÂØπ) Entry&lt;K&lt;V&gt; next = e.next; //ËÆ°ÁÆóÂæóÂá∫Âú®Êâ©ÂÆπÂêéÊñ∞Êï∞ÁªÑtable‰∏≠ÁöÑ‰∏ãÊ†áÔºåÂõ†‰∏∫Êâ©ÂÆπÂêéË¶ÅÈáçÊñ∞ËÆ°ÁÆó‰∏ãÊ†á //Êú™Êâ©ÂÆπÂâç‰∏ãÊ†á:index = hash(key) &amp; (length-1) int i= indexFor(e.hash,newCapacity); //Ê†πÊçÆ‰∏ãÊ†áÂèñÂá∫Âú®Êñ∞Ë°®newTable‰∏≠ÁöÑEntry&lt;K,V&gt; e.next = newTable[i]; //Â∞ÜÂΩìÂâçe ËµãÂÄºÁªônewTable[i](Entry&lt;K,V&gt;) newTable[i] = e; //Â∞Ü‰∏ã‰∏Ä‰∏™next.Entry ËµãÂÄºÁªôÂΩìÂâçÁöÑe e = next; &#125;&#125; ‰∏æ‰æãËØ¥Êòé‰∏ãÔºö Âéü tableÁöÑ‰ø°ÊÅØÊéíÂàóÊòØÔºö ÂÜçÊ¨°Ê∑ªÂä†Êñ∞ÂÖÉÁ¥†ÁöÑÊó∂ÂÄôÂ∞±ÈúÄË¶ÅÊâ©ÂÆπ‰∫ÜÔºåÊ≠§Êó∂Êàë‰ª¨Êù•Á±ªÊØî‰∏ã‰∏äËø∞ÁöÑ‰ª£Á†ÅÔºö 12345678910111213141516171819for (int j = 0; j &lt; src.length; ++j) &#123; Entry&lt;K,V&gt; e = src[j];//src Ë°®Á§∫Âéütable while(null != e) &#123; //next = Entry2 Entry&lt;K&lt;V&gt; next = e.next; //ÂÅáËÆæËÆ°ÁÆóÁªìÊûú‰∏∫3ÔºõÂæ™ÁéØÁ¨¨‰∫åÊ¨°ÔºöÂÅáËÆæEntry2ËÆ°ÁÆóÁöÑ‰ΩçÁΩÆ‰πüÊòØ3 int i= indexFor(e.hash,newCapacity); //Á¨¨‰∏ÄÊ¨°Entry1.next = newTable[3]ÔºåÊ≠§Êó∂newTable[3]Ëøò‰∏∫nullÔºõÊâÄ‰ª•ÊòØEntry1.nextÂú∞ÂùÄÊåáÂêënull //Âæ™ÁéØÁ¨¨‰∫åÊ¨°ÔºöEntry2.next = Entry1 e.next = newTable[i]; //newTable[3] = Entry1, Ê≠§Êó∂eÊòØ Entry1; //Âæ™ÁéØÁ¨¨‰∫åÊ¨°Ôºö newTable[3] = Entry2 newTable[i] = e; //Entry1 = Entry2,e ÊåáÂêë‰∫ÜEntry2,Â•ΩÂÜçÊ¨°Âæ™ÁéØ; //Âæ™ÁéØÁ¨¨‰∫åÊ¨°Ôºöe = null,Ë∑≥Âá∫Âæ™ÁéØ e = next; &#125;&#125; ÂèòÊàêÂ¶Ç‰∏ãÔºö ‰∏äËø∞ÊòØÂ±û‰∫éÊ≠£Â∏∏ÊÉÖÂÜµÁöÑÈÇ£ÁßçÔºåÂÅáËÆæÊàë‰ª¨Áé∞Âú®Êúâ‰∏§‰∏™Á∫øÁ®ãÂêåÊó∂Âéª put ÂÖÉÁ¥†Ôºå‰∫åËÄÖÂùáÂèëÁé∞ÈúÄË¶ÅÂÅöÊâ©ÂÆπÂ§ÑÁêÜÔºåÈÇ£‰πàÂèà‰ºöÂá∫Áé∞‰ªÄ‰πàÊÉÖÂÜµÂë¢Ôºü ÂèÇËÄÉÈòÖËØªÁΩë‰∏äÁöÑÂçöÂÆ¢+Ëá™Â∑±ÁêÜËß£ËÆ∞ÂΩï ÂΩìÁ∫øÁ®ã‰∏Ä Âíå Á∫øÁ®ã‰∫å ÂêåÊó∂ËøõË°åÊèíÂÖ•ÁöÑÊó∂ÂÄôÂàöÂ•ΩËææÂà∞Êâ©ÂÆπÁöÑÊù°‰ª∂ÔºåÁÑ∂ÂêéÂêåÊó∂ÂºÄÂßãËøõË°å Resize Êìç‰Ωú„ÄÇ 1234567891011for (int j = 0; j &lt; src.length; ++j) &#123; //src Ë°®Á§∫Âéütable Entry&lt;K,V&gt; e = src[j]; while(null != e) &#123; Entry&lt;K&lt;V&gt; next = e.next;//ÂÅáËÆæÁ∫øÁ®ã‰∏ÄÊâßË°åÂà∞ËøôÈáåÂ∞±Ë¢´Ë∞ÉÂ∫¶ÊåÇËµ∑‰∫Ü int i= indexFor(e.hash,newCapacity); e.next = newTable[i]; newTable[i] = e; e = next; &#125;&#125; Á∫øÁ®ã‰∏ÄÊåÇËµ∑ÔºåÁ∫øÁ®ã‰∫åÁªßÁª≠Êìç‰ΩúÔºåÂèòÊàêÂ¶Ç‰∏ãÔºö Á∫øÁ®ã‰∫åÊòØ rehash ‰πãÂêéÁöÑÊ†∑Â≠êÔºåÂ¶Ç‰∏äÂõæÔºö ÂΩìÂâçÁ∫øÁ®ã‰∏ÄÊù•ËØ¥Ôºö e ÊòØ: key(3) next ÊòØÔºö key(7) Á∫øÁ®ã‰∏ÄÊù•‰∫ÜÔºåË¢´Ë∞ÉÂ∫¶ÂõûÊù•‰∫ÜÔºåËØ•‰∫∫ÂÆ∂ÊâßË°å‰∫ÜÔºö 123456789101112131415161718while(null != e) &#123;//ÂÜçÊ¨°Âæ™ÁéØÔºåe:key(7) next:key(3) //ÂÅáËÆæÁ∫øÁ®ã‰∏ÄÊâßË°åÂà∞ËøôÈáåÂ∞±Ë¢´Ë∞ÉÂ∫¶ÊåÇËµ∑‰∫Ü,ÂºÄÂßãÁªßÁª≠ÊâßË°å //Á¨¨‰∫åÊ¨°Âæ™ÁéØÔºönext = key(3),next ÊåáÂêëkey(3) //e:key(3) next:null Entry&lt;K&lt;V&gt; next = e.next; int i= indexFor(e.hash,newCapacity);//Ê†πÊçÆÁ∫øÁ®ã‰∫åÁöÑËÆ°ÁÆó‰∏çÈöæÊé®Âá∫Á∫øÁ®ã‰∏ÄËÆ°ÁÆóÁöÑi = 3 //key(7).next ÊåáÂêë key(3) //key(3).next ÊåáÂêë key(7) e.next = newTable[i]; //first : newTable[3] = key(3) //second Ôºö newTable[3] = key(7) //third : newTable[3] = key(3) newTable[i] = e; //e ÊåáÂêëkey(7) //e = key(3) //e = null//ÈÄÄÂá∫Âæ™ÁéØ e = next ËøôÊ†∑Â∞±‰∫ßÁîüÊ≠ªÂæ™ÁéØ‰∫Ü„ÄÇ 12key(7).next ÊåáÂêë key(3)key(3).next ÊåáÂêë key(7) ÂΩìÊàë‰ª¨ÂèñÂá∫‰∏Ä‰∏™key(5) ÁöÑ‰∏Ä‰∏™ÂÄºÊó∂ÔºåÊÅ∞Â∑ß‰πüÊòØ int i = 3 , ËøôÊ†∑ÂéªÂèñÔºåÂ∞±Èô∑ÂÖ•key(3),key(7) ÁöÑÊ≠ªÂæ™ÁéØ‰∏≠Âéª‰∫Ü„ÄÇ ‰∏∫‰∫ÜÊõ¥Ê∏ÖÊô∞ÁöÑÂ±ïÁ§∫ÊØè‰∏ÄÊ¨°Âæ™ÁéØÔºåÊàëÂÜ≥ÂÆöÂàÜÂºÄÊù•Â±ïÁ§∫Ôºö Á¨¨‰∏ÄÊ¨°ÔºöË¶Å‰ªéËøô‰∏™Á∫øÁ®ã‰∏ÄÊÅ¢Â§çËøêË°åÂºÄÂßãËØ¥Ëµ∑ÂêßÔºö e: key(3) ; next: key(7) 123456789101112while(null != e) &#123; Entry&lt;K&lt;V&gt; next = e.next;//Á¨¨‰∏ÄÊ¨°ÁöÑÊó∂ÂÄôÔºåÁ∫øÁ®ã‰∏ÄË¢´Âç°‰ΩèÂú®ËøôÈáåÔºåÂΩìÊó∂Áä∂ÊÄÅÊòØÔºöe:key(3),next:key(7) ËøôÂ∫îËØ•ÈÉΩÊ≤°‰ªÄ‰πàÈóÆÈ¢ò //Ê†πÊçÆÁ∫øÁ®ã‰∫åÁöÑËÆ°ÁÆóÔºåËøô‰∏™ÂÄº‰πüÂ∫îËØ•ÊòØint i = 3 int i= indexFor(e.hash,newCapacity); //key(3).next = newTable[3], Ê≠§Êó∂newTable[3]‰∏∫null, key(3).nextÊåáÂêënull e.next = newTable[i]; //newTable[3] = key(3) newTable[i] = e; //e = key(7),eÊåáÂêëkey(7) e = next&#125; OK, Áî±‰∫ée = key(7) ‰∏ç‰∏∫null ,Âæ™ÁéØÁªßÁª≠Ôºö Á¨¨‰∫åÊ¨°Âæ™ÁéØÔºöÁªèËøá‰∏äËø∞Âæ™ÁéØÔºåÊ≠§Êó∂ e: key(7),next: key(3) Áî±‰∫éÁ∫øÁ®ã‰∫åÂ∑≤ÁªèÊîπÂèò‰∫ÜËøô‰∏™Êï¥‰Ωìtable ÁöÑÁªìÊûÑÔºåÂΩìÈÅçÂéÜÂà∞key(7) Êó∂Ôºå next: key(3) 123456789101112while(null != e) &#123;//e:key(7) //next = key(3) Entry&lt;K&lt;V&gt; next = e.next; //int i = 3 int i= indexFor(e.hash,newCapacity); //key(7).next = key(3) , key(7).nextÊåáÂêëkey(3) e.next = newTable[i]; //newTable[3] = key(7) newTable[i] = e; //e = key(3) eÊåáÂêëkey(3),‰∏ç‰∏∫null,Âæ™ÁéØÁªßÁª≠ e = next&#125; Á¨¨‰∏âÊ¨°Âæ™ÁéØÔºöe : key(3) next:null 123456789101112while(null != e) &#123;//e:key(3) //next = null nextÊåáÂêënull Entry&lt;K&lt;V&gt; next = e.next; //int i = 3 int i= indexFor(e.hash,newCapacity); //key(3).next = key(7) key(3).nextÊåáÂêëkey(7) e.next = newTable[i]; //newTable[3] = key(3) newTable[i] = e; //e = null, Âæ™ÁéØÁªìÊùü e = next&#125; Ê≠§Êó∂ e : null, next:null. 12//key(7).nextÊåáÂêëkey(3)//key(3).nextÊåáÂêëkey(7) ËøôÈáå‰∫ßÁîüÊ≠ªÂæ™ÁéØ ÂõæÂ∞±ÊòØËøôÊ†∑ÁöÑÔºöÊúÄÂêénewTable[3] = key(3) over.]]></content>
      <tags>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[HashMapÂü∫Êú¨Áü•ËØÜ]]></title>
    <url>%2F2018%2F12%2F06%2FHashMap%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[Ëá™ÊàëÊÄªÁªì ‰ªÄ‰πàÊòØ HashMap?È¶ñÂÖàÁúã‰∏ãÁ±ªÁªßÊâøÂÖ≥Á≥ªÔºö HashMap ÊòØÂ≠òÂÇ®ÈîÆÂÄºÂØπÁöÑÈõÜÂêàÔºå‰∏Ä‰∏™ key‚Äìvalue , ËøôÊ†∑ÁöÑÈîÆÂÄºÂØπ‰πüÁß∞‰∏∫ Entry ÔºåËøô‰∫õÈîÆÂÄºÂØπÂàÜÊï£Â≠òÂÇ®‰∫éÊï∞ÁªÑÂΩì‰∏≠ÔºåÁªÑÊàê HashMap ÁöÑ‰∏ªÂπ≤„ÄÇ ÁâπÁÇπ ÂÖ∂‰∏≠ key ÂèØ‰∏∫ null ÔºõÈùûÁ∫øÁ®ãÂÆâÂÖ®Ôºõ ÂÖ∂‰∏≠ put ÊñπÊ≥ï Âíå get ÊñπÊ≥ïÊØîËæÉÈáçË¶Å„ÄÇ put ÊñπÊ≥ï 12345678910111213public V put(K key, V value) &#123; return putVal(hash(key), key, value, false, true);&#125; final V putVal(int hash, K key, V value, boolean onlyIfAbsent, boolean evict) &#123; Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; int n, i; if ((tab = table) == null || (n = tab.length) == 0) n = (tab = resize()).length; if ((p = tab[i = (n - 1) &amp; hash]) == null) tab[i] = newNode(hash, key, value, null); ..... &#125; È¶ñÂÖàÊ†πÊçÆ key ËÆ°ÁÆó hash ÂÄº , Â¶Ç‰ΩïÁÆóÂá∫Âú® Node Êï∞ÁªÑ‰∏≠ÂÖ∑‰ΩìÁöÑ‰∏ãÊ†áÂë¢Ôºü‰ªé‰∏äÈù¢‰ª£Á†ÅÊàë‰ª¨ÂèØ‰ª•Â§ßÊ¶ÇÁúãÂá∫Ôºö 1i = (n-1) &amp; hash Â∞±ÊòØÊï∞ÁªÑÁöÑÈïøÂ∫¶ -1 &amp; key ÁöÑhash ÂÄº„ÄÇ ÂæóÂà∞Êï∞ÁªÑ‰∏ãÊ†áÂêéÔºåÂÜçÊääËøô‰∏™ÈîÆÂÄºÂØπÊîæÂÖ•ËøõÂéªÔºåÂÆåÊàê‰∫Ü put Êìç‰Ωú„ÄÇ ÂÅáËÆæÊàë‰ª¨Ôºö put(‚Äúqq‚Äù,‚ÄùÁ≥ñËë´Ëä¶‚Äù) hash(&quot;qq&quot;) = 2, ‰∏ãÊ†á‰∏∫2ÔºåÈÇ£‰πàÁªìÊûúÂ¶Ç‰∏ãÔºö Entry1====&gt; [key = &quot;qq&quot;, value= &quot;Á≥ñËë´Ëä¶&quot;] ‰ΩÜÊòØÊÄª‰ºöÊúâÈÇ£‰πà‰∏ÄÁßçÊÉÖÂÜµÔºåÂ∞±ÊòØ‰∏çÂêå key ËÆ°ÁÆóÁöÑ hash ‰πãÂêéÊòØÁõ∏ÂêåÁöÑÔºåÂÅáÂ¶ÇÊàë‰ª¨Êñ∞ put(&quot;mi&quot;,value=&quot;milo&quot;) index = hash(&quot;mi&quot;) = 2 ‰πüÊòØÊï∞ÁªÑ‰∏ãÊ†á‰∏∫2ÔºåÈÇ£‰πàÊ≠§Êó∂Âú®‰∏ãÊ†á‰∏∫2ÁöÑ‰ΩçÁΩÆÂ∞±‰ºöÈÄöËøá ÈìæË°® ÁöÑÂΩ¢ÂºèÂ≠òÂÇ®Áõ∏Â∫îÁöÑÈîÆÂÄºÂØπ„ÄÇ HashMap Êï∞ÁªÑÁöÑÊØè‰∏Ä‰∏™ÂÖÉÁ¥†‰∏çÊ≠¢ÊòØ‰∏Ä‰∏™Entry ÂØπË±°Ôºå‰πüÊòØ‰∏Ä‰∏™ÈìæË°®ÁöÑÂ§¥ËäÇÁÇπ„ÄÇÊØè‰∏Ä‰∏™EntryÂØπË±°ÈÄöËøá Next ÊåáÈíàÊåáÂêëÂÆÉÁöÑ‰∏ã‰∏™ Entry ËäÇÁÇπ„ÄÇÂΩìÂÜçÊúâÊñ∞ÁöÑ Entry Êò†Â∞ÑÂà∞Ëøô‰∏™ÂÜ≤Á™Å‰ΩçÁΩÆÊó∂Ôºå‰πüÂ∞±ÊòØËÆ°ÁÆóÂá∫ hash ÂÄº‰πüÊòØ2ÔºåÂè™ÈúÄË¶ÅÊèíÂÖ•Âà∞ÂØπÂ∫îÁöÑÈìæË°®ÂΩì‰∏≠ÂéªÂç≥ÂèØÔºåÊ≥®ÊÑèÔºöÊñ∞ÊèíÂÖ•ÁöÑ‰ºöÂú®‰πãÂâçÁöÑÂâçÈù¢ÔºåÁß∞‰∏∫ Â§¥ÊèíÂÖ•Ôºå Ë¢´Êñ∞ put ËøõÂÖ•ÁöÑÊñ∞ÂÖÉÁ¥†ÂèØËÉΩË¢´Áî®Âà∞ÁöÑÊ¶ÇÁéáÂ§ß‰∏Ä‰∫õ„ÄÇ get ÊñπÊ≥ï ‰∫ÜËß£‰∫Ü put ÊñπÊ≥ïÔºåget Â•ΩÁêÜËß£‰∫õ 1234public V get(Object key) &#123; Node&lt;K,V&gt; e; return (e = getNode(hash(key), key)) == null ? null : e.value; &#125; Á¨¨‰∏ÄÊ≠•ÔºöÂêåÊ†∑ Ê†πÊçÆ key ÁÆóÂá∫ hash ÂÄºÔºõ Á¨¨‰∫åÊ≠•ÔºöÊ†πÊçÆ hashÂÄºÂíåÊï∞ÁªÑÁöÑÈïøÂ∫¶ ËÆ°ÁÆóÊï∞ÁªÑÁöÑ‰∏ãÊ†á index Á¨¨‰∏âÊ≠•ÔºöÂÅáËÆæÊàë‰ª¨ÂèñÂá∫Êàë‰ª¨ get(&quot;qq&quot;) ÂØπÂ∫îÁöÑÂÄºÔºåÊàë‰ª¨Áü•ÈÅì‰∏ãÊ†áÊòØ2Ôºå‰∏îÊòØ‰∏Ä‰∏™ÈìæË°®ÔºåÊàë‰ª¨ÈúÄË¶ÅÂæ™ÁéØÈÅçÂéÜÊï¥‰∏™ÈìæË°®ÔºåÊâæÂà∞ key = &quot;qq&quot; ÁöÑEntry„ÄÇ HashMapÁöÑÈªòËÆ§ÈïøÂ∫¶ÊòØÂ§öÂ∞ëÔºü‰∏∫‰ªÄ‰πàË¶ÅÈÇ£‰πàÂÆö‰πâÔºü HashMap ÈªòËÆ§ÈïøÂ∫¶ÊòØ16Ôºå‰πüÂèØ‰ª•Ëá™ÂÆö‰πâÈïøÂ∫¶ÂøÖÈ°ªÊòØ2ÂπÇÊ¨°Êñπ„ÄÇ‰πãÊâÄ‰ª•ÈÄâÊã©16ÔºåÊòØ‰∏∫‰∫ÜÊñπ‰æø‰∫é key Êò†Â∞Ñ index ÁöÑÁÆóÊ≥ï„ÄÇ ‰∏∫‰∫ÜÂÆûÁé∞‰∏Ä‰∏™ÂùáÂåÄÁöÑ HashMap ,Êï∞ÁªÑÁöÑÈïøÂ∫¶ÂøÖÈ°ªÊòØ 2 ÁöÑÂπÇÊ¨°ÊñπÔºåÂ∞Ü index = hash(key) &amp; (length-1) ËøôÊ†∑ÂÅöÁöÑÊïàÁéá‰πüÊõ¥È´òÔºåÈÄöËøá‰ΩçËøêÁÆóÁöÑÊñπÂºè„ÄÇ ‰∏æ‰æãÔºöbook ÁöÑ hashcode,ÁªìÊûú‰∏∫ÂçÅËøõÂà∂ÁöÑ 3029737Ôºå‰∫åËøõÂà∂Ôºö1011100011101011101001ÔºõÂÅáÂÆö HashMap ÈïøÂ∫¶ÊòØÈªòËÆ§ÁöÑ16Ôºå length-1 = 15,‰∫åËøõÂà∂Ôºö 1111Ôºõ index = hash(key) &amp; (length-1) ËÆ°ÁÆóÁªìÊûúÂ¶Ç‰∏ãÂõæÔºö ‰∫åËøõÂà∂Ôºö1001ÔºõÂçÅËøõÂà∂ÔºöÂ∞±ÊòØindex= 9„ÄÇ ÈÇ£‰πàÂÅáËÆæÊàë‰ª¨Ëá™ÂÆö‰πâÈïøÂ∫¶ËÆæÁΩÆ‰∏∫Ôºö10. ÈÇ£length-1=9, ‰∫åËøõÂà∂Â∞±ÊòØÔºö1001ÔºåÊàë‰ª¨ÈáçÊñ∞ËÆ°ÁÆó‰∏ãindex`, Â¶Ç‰∏ãÂõæÔºö ‰∫åËøõÂà∂‰∏∫Ôºö1001 ÔºõÂçÅËøõÂà∂Â∞±ÊòØÔºö index = 9 ÁÑ∂ÂêéÊàë‰ª¨ÂÜçÂ∞ùËØï‰∏Ä‰∏™Êñ∞ÁöÑ HashCode: ÁªìÊûúËøòÊòØÔºö1001Ôºõ ÁÑ∂ÂêéÊàë‰ª¨ÁªßÁª≠Êù•‰∏Ä‰∏™Êñ∞ÁöÑ HashCode: ÁªìÊûúËøòÊòØÔºö1001Ôºåindex= 9. ‰πüÂ∞±ÊòØËØ¥ÔºåÂΩì HashMap ÈïøÂ∫¶‰∏∫ 10 ÁöÑÊó∂ÂÄôÔºåÂ§ö‰∏™ ‰∏çÂêåÁöÑkeyÁîüÊàêÁöÑ index ÂèØËÉΩÊòØÁõ∏ÂêåÁöÑÔºåÁõ∏ÂêåÁöÑÊ¶ÇÁéáÊØîËæÉÂ§ßÔºåËøôÊ†∑ÔºåÊòæÁÑ∂‰∏çÁ¨¶Âêà Hash ÁÆóÊ≥ïÂùáÂåÄÂàÜÂ∏ÉÁöÑÂéüÂàô„ÄÇ ÂèçËßÇÈïøÂ∫¶‰∏∫16ÊàñËÄÖ2ÁöÑÂπÇÊ¨°ÊñπÔºålength-1 ÁöÑÂÄºÊòØÊâÄÊúâ‰∫åËøõÂà∂ÂÖ®‰∏∫1ÔºåËøôÁßçÊÉÖÂÜµ‰∏ãÔºåindex ÁöÑÁªìÊûúÁ≠âÂêå‰∫éHashCode ÁöÑÂêéÂá†‰ΩçÂÄºÔºåÂè™ÊúâËæìÂÖ•ÁöÑ HashCode Êú¨Ë∫´ÂàÜÂ∏ÉÂùáÂåÄÔºåHash ÁÆóÊ≥ïÁöÑÁªìÊûú‰πüÊòØÂùáÂåÄÁöÑ„ÄÇ]]></content>
      <tags>
        <tag>HashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RecycleViewÊõ¥Ê∏ÖÊô∞Âú∞ËßÇÂØüÁºìÂ≠ò]]></title>
    <url>%2F2018%2F11%2F28%2FRecycleView%E6%9B%B4%E6%B8%85%E6%99%B0%E5%9C%B0%E8%A7%82%E5%AF%9F%E7%BC%93%E5%AD%98%2F</url>
    <content type="text"><![CDATA[‰∏∫‰∫ÜÊõ¥Ê∏ÖÊô∞ÁöÑËßÇÂØü recycleView ÁºìÂ≠òÂ§çÁî®ÔºåÂú®ÁúãÂà∞Êúâ‰∏ÄÁØáÊñáÁ´†ÊòØÊâìÂç∞ÁºìÂ≠òÁõ∏ÂÖ≥‰ø°ÊÅØÂêéÔºåËßâÁùÄÁ°ÆÂÆûÊòØ‰∏ÄÁßçÂäûÊ≥ïÔºåÊØîÊâìÊñ≠ÁÇπÊõ¥ÂêàÈÄÇÊü•ÁúãÁºìÂ≠òÁöÑÂèòÂåñÊÉÖÂÜµÔºåÂ∞±Â∞ùËØïËá™Â∑±ÂÜô‰∫ÜÂÜô„ÄÇ ËøôÈáåÊàë‰∏ªË¶ÅÂà©Áî®ÂèçÂ∞ÑËßÇÂØüÁöÑÊòØÔºömCachedViews Âíå recycleViewPool ÈáåÈù¢ÁöÑÂèòÂåñÊÉÖÂÜµ„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 1234567891011121314151617181920212223242526272829303132333435363738public void getInfo()&#123; try&#123; Class&lt;?&gt; class1 = Class.forName("android.support.v7.widget.RecyclerView"); Field field = class1.getDeclaredField("mRecycler"); field.setAccessible(true); RecyclerView.Recycler recycler = (RecyclerView.Recycler) field.get(recyclerView); Field field1 = recycler.getClass().getDeclaredField("mCachedViews"); field1.setAccessible(true); ArrayList&lt;RecyclerView.ViewHolder&gt; mCachedViews = (ArrayList&lt;RecyclerView.ViewHolder&gt;) field1.get(recycler); for(int i=0;i&lt;mCachedViews.size();i++)&#123; Log.i("xx","mCachedViews::"+mCachedViews.get(i)); &#125; RecyclerView.RecycledViewPool viewPool = recyclerView.getRecycledViewPool(); //ËøôÈáå‰πãÊâÄ‰ª•ËÉΩËé∑ÂèñÂà∞ RecycledViewPool‰∏≠ÁöÑmScrpaÔºåÈúÄË¶ÅÊñ∞Âª∫‰∏Ä‰∏™android.support.v7.widgetÂåÖÔºåÂ∞ÜËØ•Á±ªÊîæÂÖ•ËØ•ÂåÖ‰∏ãÂç≥ÂèØËÆøÈóÆÂà∞„ÄÇ SparseArray&lt;RecyclerView.RecycledViewPool.ScrapData&gt; list = viewPool.mScrap; //ËøôÈáå‰º†ÂÖ•ÁöÑÁ±ªÂûãtype ÊòØÊàëÂú®adapter‰∏≠ÂÆö‰πâÁöÑÔºåÂ¶Ç‰∏ãÔºö //@Override //public int getItemViewType(int position) &#123; //return 666; //&#125; RecyclerView.RecycledViewPool.ScrapData spra = list.get(666); Field field2 = spra.getClass().getDeclaredField("mScrapHeap"); ArrayList&lt;RecyclerView.ViewHolder&gt; mScrapHeap= (ArrayList&lt;RecyclerView.ViewHolder&gt;) field2.get(spra); for(int i=0;i&lt;mScrapHeap.size();i++)&#123; Log.i("xx","mScrapHeapInfo::"+mScrapHeap.get(i)); &#125; Log.i("xx","================================================="); &#125;catch (Exception e) &#123; Log.i("xx", "error"); e.printStackTrace(); &#125; &#125; ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöÂèçÂ∞ÑËé∑Âèñ ÁÑ∂ÂêéÂú® recycleView ÊªöÂä®ÁöÑÊó∂ÂÄôÔºåÊòæÁ§∫‰ø°ÊÅØÔºö 12345678910recyclerView.addOnScrollListener(new RecyclerView.OnScrollListener() &#123; @Override public void onScrolled(RecyclerView recyclerView, int dx, int dy) &#123; super.onScrolled(recyclerView, dx, dy);// int recycleCount = recyclerView.getRecycledViewPool().getRecycledViewCount(666);// Log.i("xx","recyclePoolCount::"+recycleCount); getInfo(); &#125; &#125;); ËøòÊúâÂèØ‰ª•Âú® adapter ÈáçÂÜôÊñπÊ≥ïÔºö onViewRecycled(ViewHOlder holder) ÊñπÊ≥ïÔºåÂèØ‰ª•Êü•ÁúãÊúÄÊñ∞Ë¢´ÂõûÊî∂ÁöÑ‰ΩçÁΩÆViewHolder Ôºö 12345@Override public void onViewRecycled(ViewHolder holder) &#123; Log.i("xx","holderË¢´ÂõûÊî∂‰∫Ü"+holder);//ÂèØ‰ª•ÊãøÂà∞Ë¢´ÂõûÊî∂holderÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ super.onViewRecycled(holder); &#125; ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÈÄöËøáÊó•ÂøóÁöÑÊñπÂºèÊù•ËøëË∑ùÁ¶ªÊü•Áúã recyclerView Â§çÁî®ÂõûÊî∂„ÄÇ Êàë‰ª¨ÂÅáËÆæËøôÊ†∑‰∏Ä‰∏™Âú∫ÊôØÔºöÊÄªÂÖ±ÂÅáËÆæÊúâ20‰∏™item ,‰ΩøÁî® GrideLayoutManager ÊØèË°åÊòæÁ§∫5‰∏™Ôºå‰∏Ä‰∏™Â±èÂπïÂ∑Æ‰∏çÂ§öÊòæÁ§∫‰∏§Ë°åÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö Êàë‰ª¨Âú® adapter ÁöÑ onCreateViewHolder Âíå onBindViewHolder ÊñπÊ≥ïÁöÑÂú∞ÊñπÈÉΩÊâìÂç∞Êó•ÂøóÔºåÂπ∂‰∏îÈáçÂÜô onViewRecycled ÊñπÊ≥ïÔºåÊü•Áúã View ÁöÑÂõûÊî∂ÊÉÖÂÜµ„ÄÇ ÂΩìÊàë‰ª¨Âêë‰∏ãÊªëÂä®ÔºåÂ∞ÜÁ¨¨‰∏ÄË°åÁöÑÊï∞ÊçÆÊªëÂá∫Â±èÂπïÂêéÔºåÊàë‰ª¨ÂèëÁé∞ÊâìÂç∞Êó•ÂøóÂ¶Ç‰∏ãÔºö Êàë‰ª¨ÂèëÁé∞ 2Ôºå3Ôºå4Âç°‰ΩçÁöÑ ViewHolder Ë¢´ÂõûÊî∂‰∫Ü„ÄÇËøôÈáåÁöÑË¢´ÂõûÊî∂ÊòØÊåáÊ∑ªÂä†Âà∞ RecycleViewPool ÂΩì‰∏≠‰∫Ü„ÄÇÊ≠§Êó∂ mCachedViews ‰∏≠ÁöÑÁºìÂ≠ò‰ø°ÊÅØÂ¶Ç‰∏ãÔºö ‰ªéÊó•Âøó‰∏äÊù•ÁúãÔºåÂÆÉÁºìÂ≠ò‰∫ÜÔºö1Ôºå0Ôºå15Ôºå16Ôºå17Ôºå18Ôºå19ÂÖ±7‰∏™Âç°‰ΩçÁöÑÊï∞ÊçÆ„ÄÇ ËøôÈáåË°•ÂÖÖ‰∏Ä‰∏ãÔºömCachedViews ÁöÑÂ§ßÂ∞èÂú®Ê∫êÁ†ÅÂÆö‰πâ‰∏≠ÈªòËÆ§ÊòØ:static final int DEFAULT_CACHE_SIZE = 2;ÔºàÂΩìÁÑ∂‰πüÂèØ‰ª•Ëá™Â∑±ËÆæÁΩÆÔºåÈÄöËøá RecyclerView #setItemViewCacheSizeÔºå‰∏ÄËà¨‰∏çËÆæÁΩÆÔºâÁªèËøáÊàëÁöÑÂ§öÊ¨°ÂÆûÈ™åËßÇÂØüÔºåÂΩìÊØèË°åËÆæÁΩÆ‰∏∫5ÂàóÊó∂ÔºåmCachedViews.size == 2+ 5 = 7,ÂΩìÊØèË°åÊòØ4Êó∂ÔºåmCachedViews.size == 2+ 4 = 6ÔºåÊâÄ‰ª•Ê≠§Êó∂Â∞±ÊòØmCachedView.size ÊòØ7„ÄÇ ÈóÆÈ¢ò1Ôºö‰∏∫‰ªÄ‰πàmCachedViews ÁºìÂ≠òÁöÑÂç°‰ΩçÊòØ1Ôºå0Ôºå15Ôºå16Ôºå17Ôºå18Ôºå19ÔºüË¶ÅÂõûÁ≠îËøô‰∏™ÈóÆÈ¢òÔºåÈ¶ñÂÖàÂ∫îËØ•ÊòéÁôΩÂΩìÊàë‰ª¨Âú®ÊªëÂä®Á¨¨‰∏âË°åÂ±ïÁ§∫ÁöÑÊó∂ÂÄôÔºåÊ≠§Êó∂ RecyclerView ÂàõÂª∫‰∫ÜÁ¨¨ÂõõË°åÁöÑ ViewHolder,Âç≥ 15Ôºå16Ôºå17Ôºå18Ôºå19Âõ†‰∏∫ÂÆÉ‰ª¨Êú™ÊõæÂ±ïÁ§∫Âà∞Â±èÂπï‰∏äÔºåÊâÄ‰ª•Ë¢´ mCachedViews ÁºìÂ≠òÔºåÁªßÁª≠ÊªëÂä®ÔºåÁ¨¨‰∏ÄË°åÊï∞ÊçÆÁßªÂá∫Â±èÂπï‰πãÂ§ñÔºå‰πüË¶ÅÂõûÊî∂‰∫ÜÔºå0Ôºå1Ôºå2Ôºå3Ôºå4Ôºå5 Ëøô5‰∏™ÊòØÂ∞ÜË¶ÅË¢´ÁºìÂ≠òÔºå‰ΩÜÊòØmCachedVIews Â∑≤ÁªèÁºìÂ≠ò‰∫Ü5‰∏™ÔºåÂäøÂøÖÂè™ËÉΩÂÜçÊ∑ªÂä†‰∏§‰∏™Ôºå‰∏§Â§ñ‰∏â‰∏™Âç°‰ΩçÁöÑ ViewHolder Â∞ÜË¶ÅË¢´ÂõûÊî∂ÔºåGrideLayoutManager ÈªòËÆ§‰ªéÂè≥ÂæÄÂ∑¶ÂõûÊî∂Ôºö Á¨¨‰∏ÄÊ¨°ÂõûÊî∂4Ôºå3Âç°‰ΩçÂ¶ÇÂõæÔºö Á¨¨‰∫åÊ¨°ÂõûÊî∂2Âç°‰ΩçÂ¶ÇÂõæÔºö Âõ†‰∏∫Ê≠§Êó∂ÁºìÂ≠òÊï∞ÈáèÂ∑≤Âà∞ÊúÄÂ§ßÂÄº7‰∫ÜÔºåÊâÄ‰ª•ÂÜçÊ¨°Ê∑ªÂä†Êó∂Ôºå‰ºöÁßªÈô§Á¨¨‰∏Ä‰∏™„ÄÇ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345int cachedViewSize = mCachedViews.size(); if (cachedViewSize &gt;= mViewCacheMax &amp;&amp; cachedViewSize &gt; 0) &#123; recycleCachedViewAt(0); cachedViewSize--; &#125; Êó•ÂøóÔºö Êñ∞ÁºìÂ≠òÁöÑ2Âç°‰ΩçË¢´ÊèíÂÖ•index = 1 ÁöÑ‰ΩçÁΩÆ„ÄÇÂ¶ÇÊ≠§ÔºåÊàë‰ª¨Â∞±ÂèØ‰ª•Áü•ÈÅìÂΩì1Âç°‰Ωç‰ºöÂõûÊî∂Êó∂ÔºåmCachedViews ‰∏≠ÁºìÂ≠òÁöÑ‰ø°ÊÅØÂ∫îËØ•ÊòØÔºåÂÖàÁßªÈô§Á¨¨0‰∏™Ôºå‰πüÂ∞±ÊòØposition= 3 ÁöÑ ViewHolder,ÊèíÂÖ•Âà∞ index = 1 ÁöÑ‰ΩçÁΩÆÔºåÈ°∫Â∫èÂ∫îËØ•ÊòØÔºö2Ôºå1Ôºå15Ôºå16Ôºå17Ôºå18Ôºå19ÔºåÂ•ΩÊàë‰ª¨Áúã‰∏ãÊó•ÂøóÔºö ÊòØÁöÑÔºå‰∏çÂá∫Êàë‰ª¨ÊâÄÊñôÔºåËá≥Ê≠§Âà∞ÊúÄÂêéÊàë‰ª¨Â∞±Áü•ÈÅì‰∫ÜÔºåÂΩì0Âç°‰ΩçË¢´ÂõûÊî∂Êó∂ÔºåmCachedViews ÁöÑÁºìÂ≠ò‰ø°ÊÅØÂ∞±ÊòØÔºö1Ôºå0Ôºå15Ôºå16Ôºå17Ôºå18Ôºå19. Ë¢´ÁßªÈô§ÁöÑViewHolder Ë¢´Ê∑ªÂä†Âà∞‰∫Ü RecycleViewPool ÂΩì‰∏≠‰∫ÜÔºå‰ªé RecycleViewPool ÂΩì‰∏≠ÂèñÂá∫ÁöÑ ViewHolder Á±ª‰ºº‰∫éÂÖ®Êñ∞ÁöÑÔºå‰ΩÜÊòØ‰∏ç‰ºöÈáçÊñ∞Ë∞ÉÁî® onCreateViewHolder,‰ºöÈáçÊñ∞Ë∞ÉÁî® onBindViewHolder ÈáçÊñ∞ÁªëÂÆöÊï∞ÊçÆ„ÄÇ]]></content>
      <tags>
        <tag>recycleView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConcurrentHashMap ÂéüÁêÜ]]></title>
    <url>%2F2018%2F11%2F22%2FConcurrentHashMap-%E5%8E%9F%E7%90%86%2F</url>
    <content type="text"><![CDATA[ËÉåÊôØÁü•ËØÜÔºöÊàë‰ª¨Áü•ÈÅì HashMap ÊòØÁ∫øÁ®ã‰∏çÂÆâÂÖ®ÁöÑÔºåÂ§öÁ∫øÁ®ãÊÉÖÂÜµ‰∏ãÔºåËøõË°åput Êìç‰Ωú‰ºöÂºïËµ∑Ê≠ªÂæ™ÁéØÔºåÂØºËá¥CPU Âà©Áî®ÁéáÊØîËæÉÈ´òÔºåÊâÄ‰ª•Âú®Âπ∂ÂèëÊÉÖÂÜµ‰∏ã‰∏çËÉΩ‰ΩøÁî® HashMap ; ËÄå Hashtable ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑÔºåÂÖ∂ÂÆûÂ∞±ÊòØÂú® put Êìç‰ΩúÁöÑÊó∂ÂÄôÂä†‰∫Ü syncronized, ‰ΩÜÊòØÂΩì‰∏Ä‰∏™Á∫øÁ®ãÂú®ËøõË°åput Êìç‰ΩúÊó∂ÔºåÂÖ∂ÂÆÉÁöÑÁ∫øÁ®ãËøû get Êìç‰Ωú‰πü‰∏çËÉΩËøõË°åÔºåÂØºËá¥ÈòªÂ°ûÊàñËÄÖËΩÆËØ¢Áä∂ÊÄÅÔºåÊâÄ‰ª•Á´û‰∫âË∂äÊù•Ë∂äÊøÄÁÉàÔºåÊïàÁéá‰Ωé‰∏ã„ÄÇ ÁõÆÂΩïÁªìÊûÑÔºö 1234public class ConcurrentHashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements ConcurrentMap&lt;K,V&gt;, Serializable &#123; ..... &#125; ÈîÅÂàÜÊÆµÊäÄÊúØ Hashtable Âú®Â§öÂπ∂ÂèëÁöÑÊÉÖÂÜµ‰∏ãÊïàÁéá‰Ωé‰∏ãÔºåÊòØÂõ†‰∏∫ÂæàÂ§öÁ∫øÁ®ã‰∫âÂ§∫Âêå‰∏ÄÊääÈîÅÔºåËÄåÂÅáÂ¶ÇÂÆπÂô®ÂÜÖÊúâÂ§öÊääÈîÅÔºåÊØè‰∏ÄÊääÈîÅÁî®‰∫éÈîÅÂÆπÂô®ÂÜÖÁöÑ‰∏ÄÈÉ®ÂàÜÊï∞ÊçÆÔºåÂΩìÂ§öÁ∫øÁ®ãËÆøÈóÆÂÆπÂô®ÂÜÖ‰∏çÂêåÊÆµÁöÑÊï∞ÊçÆÊó∂ÔºåÁ∫øÁ®ãÈó¥Â∞±‰∏ç‰ºöÂ≠òÂú®ÈîÅÁ´û‰∫âÔºå‰ªéËÄåÊúâÊïàÁöÑÊèêÈ´òÂπ∂ÂèëËÆøÈóÆÊïàÁéá„ÄÇ Segment Ëã±ÊñáÁøªËØëÔºö‚Äù ÊÆµ‚Äú ÂÜÖÈÉ®ÁªìÊûÑÊòØÔºö‰∫åÁ∫ßÁöÑÂìàÂ∏åË°®ÔºåÂ¶Ç‰∏ãÂõæÔºö Â§ö‰∏™Segment ‰øùÂ≠òÂú®‰∏Ä‰∏™Âêç‰∏∫segments Êï∞ÁªÑÂΩì‰∏≠ÔºåÊØè‰∏™ Segment È´òÂ∫¶Ëá™Ê≤ªÔºåÂêÑ‰∏™ Segment ‰πãÂâçËØªÂÜô‰∫í‰∏çÂΩ±Âìç„ÄÇ ËØªÂÜôÊìç‰Ωú get ÊÉ≥Ë¶ÅËé∑ÂèñÈáåÈù¢ÁöÑÂÖÉÁ¥†ÔºåÊåâÁÖßÁªìÊûÑÔºåÊàë‰ª¨Â§ßÊ¶Ç‰πüËÉΩÁåúÊµãÂá∫Â¶Ç‰ΩïËé∑Âèñ„ÄÇ È¶ñÂÖàÊ†πÊçÆ key ËÆ°ÁÆóÁöÑ hash ÂÄºÔºõ ËÆ°ÁÆóÂæóÂá∫ Âú® segments Êï∞ÁªÑ‰∏≠ÁöÑ‰∏ãÊ†áÔºåÊ†πÊçÆ‰∏ãÊ†áÂæóÂá∫Áõ∏ÂØπÂ∫îÁöÑ SegmentÔºõ ÂÜçÊ†πÊçÆkey ÁöÑ hash ÂÄºÔºåÊâæÂà∞Segment Êï∞ÁªÑ‰∏≠ÁöÑ‰ΩçÁΩÆ put put ÂÖÉÁ¥† 1.È¶ñÂÖàÊ†πÊçÆ key ËÆ°ÁÆóhash ÂÄº 2.ÈÄöËøá hash ÂÄºÔºåÂÆö‰ΩçÂà∞ÂÖ∑‰ΩìÁöÑ Segment ÂØπË±° 3.Ëé∑ÂèñÂèØÈáçÂÖ•ÈîÅ 4.ÂÜçÊ¨°ÈÄöËøá hash ÂÄºÔºåÂÆö‰ΩçÂà∞ Segment Êï∞ÁªÑ‰∏≠ÁöÑÂÖ∑‰Ωì‰ΩçÁΩÆ 5.ÊèíÂÖ•ÊàñË¶ÜÁõñÂéü HashEntry ÂØπË±° 6.ÈáäÊîæÈîÅ ÁªüËÆ°SizeÂ§ßÂ∞èjdk 1.7: 123456789101112131415161718192021222324252627282930313233343536373839public int size() &#123; // Try a few times to get accurate count. On failure due to // continuous async changes in table, resort to locking. final Segment&lt;K,V&gt;[] segments = this.segments; int size; boolean overflow; // true if size overflows 32 bits long sum; // sum of modCounts long last = 0L; // previous sum int retries = -1; // first iteration isn't retry try &#123; for (;;) &#123; if (retries++ == RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) ensureSegment(j).lock(); // force creation &#125; sum = 0L; size = 0; overflow = false; for (int j = 0; j &lt; segments.length; ++j) &#123; Segment&lt;K,V&gt; seg = segmentAt(segments, j); if (seg != null) &#123; sum += seg.modCount; int c = seg.count; if (c &lt; 0 || (size += c) &lt; 0) overflow = true; &#125; &#125; if (sum == last) break; last = sum; &#125; &#125; finally &#123; if (retries &gt; RETRIES_BEFORE_LOCK) &#123; for (int j = 0; j &lt; segments.length; ++j) segmentAt(segments, j).unlock(); &#125; &#125; return overflow ? Integer.MAX_VALUE : size;&#125; ÈÅçÂéÜÊâÄÊúâÁöÑ Segment Êää Segment ÂÖÉÁ¥†Êï∞ÈáèÁ¥ØÂä†Ëµ∑Êù• Êää Segment ‰øÆÊîπÊ¨°Êï∞Á¥ØÂä†Ëµ∑Êù• Âà§Êñ≠ÊâÄÊúâÁöÑSegment ÁöÑÊÄª‰øÆÊîπÊ¨°Êï∞ÊòØÂê¶Â§ß‰∫é‰∏ä‰∏ÄÊ¨°ÁöÑÊÄª‰øÆÊîπÊ¨°Êï∞„ÄÇÂ¶ÇÊûúÂ§ß‰∫éÔºåËØ¥ÊòéÁªüËÆ°ËøáÁ®ãÊúâ‰øÆÊîπÔºåÂ∞ùËØïÁªüËÆ°ÔºåÁªüËÆ°Ê¨°Êï∞+1ÔºõÂèç‰πãÔºåÁªüËÆ°ÁªìÊùü„ÄÇ Â¶ÇÊûúÁªüËÆ°Ê¨°Êï∞Ë∂ÖËøáÈòÄÂÄºÔºåÂàôÂØπÊØè‰∏™ Segment Âä†ÈîÅÔºåÈáçÊñ∞ÁªüËÆ° ÂÜçÊ¨°Âà§Êñ≠ÊÄª‰øÆÊîπÊ¨°Êï∞ÊòØÂê¶Â§ß‰∫é‰∏ä‰∏ÄÊ¨°ÁöÑÊÄª‰øÆÊîπÊ¨°Êï∞Ôºå ÈáäÊîæÈîÅÔºåÁªüËÆ°ÁªìÊùü„ÄÇ]]></content>
      <tags>
        <tag>concurrentHashMap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈõÜÂêàÈöèÁ¨î]]></title>
    <url>%2F2018%2F11%2F21%2F%E9%9B%86%E5%90%88%E9%9A%8F%E7%AC%94%2F</url>
    <content type="text"><![CDATA[1. ArrayList Âíå HashMap ÊòØÂê¶Á∫øÁ®ãÂÆâÂÖ®Ôºü Collection ArrayList HashMap HashSet ÈÉΩÊòØÈùûÂêåÊ≠•ÁöÑÔºåÁ∫øÁ®ãÊòØ‰∏çÂÆâÂÖ®ÁöÑ ÈõÜÂêà‰∏≠ÔºöVector Âíå HashTable ÊòØÁ∫øÁ®ãÂÆâÂÖ®ÁöÑ Collection ‚Äî-&gt; Á∫øÁ®ãÂÆâÂÖ®ÔºöCollections.synchronizedCollection() ArrayList ‚Äî‚Äì&gt; Collections.synchronizedList() HashMap ‚Äî‚Äî&gt; Collections.synchronizedMap() HashSet ‚Äî‚Äî-&gt; Collections.synchronizedSet()]]></content>
      <tags>
        <tag>ÈõÜÂêà</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Handler Áõ∏ÂÖ≥ÊÄªÁªì]]></title>
    <url>%2F2018%2F11%2F21%2FHandler-%E7%9B%B8%E5%85%B3%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[È¶ñÂÖà‰∏Ä‰∏™Á∫øÁ®ã‰∏≠ÊòØÂèØ‰ª•ÂàõÂª∫Â§ö‰∏™ Handler ÁöÑÔºå‰∫í‰∏çÂΩ±ÂìçÔºåÈªòËÆ§Âú® ActivityThread ÂΩì‰∏≠‰πüÂàõÂª∫‰∫Ü‰∏Ä‰∏™ Handler H ,Êàë‰ª¨ËøòÊòØÂèØ‰ª•Âú® MainActivity ‰∏≠ÂàõÂª∫Êàë‰ª¨Ëá™Â∑±ÁöÑ Handler, ‰∫í‰∏çÂΩ±ÂìçÔºõ ‰∏Ä‰∏™Á∫øÁ®ã ÂØπÂ∫î‰∏Ä‰∏™ Looper ,‰∏Ä‰∏™ Looper ÂØπÂ∫î‰∏Ä‰∏™ MessageQueue ;]]></content>
      <tags>
        <tag>handler</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÊÄßËÉΩ‰ºòÂåñ]]></title>
    <url>%2F2018%2F11%2F21%2F%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%2F</url>
    <content type="text"><![CDATA[Â∏ÉÂ±Ä‰ºòÂåñ ÂáèÂ∞ëÂ∏ÉÂ±ÄÂ±ÇÊ¨°ÔºåÂçï‰∏ÄÂèØ‰ª•Áî®LinearLayout Ëß£ÂÜ≥ÁöÑÈ°µÈù¢‰∏çÁî® RelativeLayout,Â¶ÇÊûúÂ∏ÉÂ±ÄÂ§çÊùÇÔºåÂàôÁî®RelativeLayout Êõ¥Â•ΩÔºåÊØïÁ´üÊØîËµ∑Â∏ÉÂ±ÄÂµåÂ•óÔºåËøôÁßç‰ºöÂ•Ω‰∫õ &lt;include&gt; Ê†áÁ≠æ‰ΩøÁî®Ôºå‰∏ªË¶ÅÁî®‰∫éÂ∏ÉÂ±ÄÈáçÁî® ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºöÊ≠§Ê†áÁ≠æÂÜÖÔºåÂ¶ÇÊûúÂ§ñÈù¢ÊåáÂÆö‰∫Ü id ÈáåÈù¢Ë∑üÂ∏ÉÂ±Ä‰πüÂÆö‰πâid ‰ª•Â§ñÈÉ®ÂÆö‰πâ‰∏∫ÂáÜ„ÄÇÂêåÊó∂Â¶ÇÊûúÈáåÈù¢ÂÆö‰πâ‰∫Ü Á±ª‰ºº‰∫é android:layout_width=&quot;wrap_content&quot; ÁöÑÂ±ûÊÄßÔºåÈúÄÈÖçÂ•ó android:layout_height=&quot;wrap_content&quot; ÂêåÊó∂‰ΩøÁî®„ÄÇ &lt;merge&gt; Ê†áÁ≠æ‰∏ÄËà¨Âíå &lt;include&gt; Ê†áÁ≠æÈÖçÂêà‰ΩøÁî®„ÄÇ‰∏ÄËà¨Â¶ÇÊûúÂΩìÂâçÊ†πÂ∏ÉÂ±Ä‰æãÂ¶ÇÊòØÔºöLinearLayout ,include ÁöÑÂ∏ÉÂ±Ä‰πüÊòØ LinearLayout ,ÈÇ£‰πà include ÁöÑÊ†πÂ∏ÉÂ±ÄÂ∞±ÂèØ‰ª•‰ΩøÁî® &lt;merge&gt; Ê†áÁ≠æ‰ª£ÊõøLinearLayout. &lt;ViewStub&gt; Ê†áÁ≠æÔºåÊÑè‰πâ‰∏∫ÊåâÈúÄÂä†ËΩΩÔºåËΩªÈáèÁ∫ßÔºåÂÆΩÂíåÈ´òÈÉΩÊòØ0ÔºåÂú®ÂÆûÈôÖÂºÄÂèë‰∏≠ÔºåÊúâÂæàÂ§öÂ∏ÉÂ±ÄÂú®Ê≠£Â∏∏ÊÉÖÂÜµ‰∏ã‰∏ç‰ºöÊòæÁ§∫ÔºåÊØîÂ¶ÇÁΩëÁªúÂºÇÂ∏∏ÁöÑÂ∏ÉÂ±ÄÔºåËøô‰∏™Êó∂ÂÄôÊ≤°ÊúâÂøÖË¶ÅÂú®Â∏ÉÂ±ÄÂä†ËΩΩÊó∂Â∞±Âä†ËΩΩËøõÊù•ÔºåÈÄöËøá&lt;ViewStub&gt; Â∞±ÂèØ‰ª•Âú®ÈúÄË¶ÅÁî®Âà∞ÁöÑÊó∂ÂÄôÂÜçÂä†ËΩΩÔºåÊèêÈ´òÁ®ãÂ∫èÂàùÂßãÂåñÁöÑÊÄßËÉΩ„ÄÇ ÁªòÂà∂‰ºòÂåñ Âú® onDraw() ‰∏≠‰∏çË¶ÅÂàõÂª∫Êñ∞ÁöÑÂ±ÄÈÉ®ÂØπË±°ÔºåËøôÊòØÂõ†‰∏∫ onDraw() ÂèØËÉΩ‰ºöÈ¢ëÁπÅÁöÑË∞ÉÁî®ÔºåËøôÊ†∑Â∞±‰ºöÂú®‰∏ÄÁû¨Èó¥‰∫ßÁîüÂ§ßÈáèÁöÑ‰∏¥Êó∂ÂØπË±°ÔºåËøô‰∏ç‰ªÖÂç†Áî®ËøáÂ§öÁöÑÂÜÖÂ≠òËÄå‰∏î‰ºöÂØºËá¥Á≥ªÁªüÈ¢ëÁπÅÁöÑgc, Èôç‰ΩéÁ®ãÂ∫èÁöÑÊâßË°åÊïàÁéá; Âè¶Â§ñ‰πü‰∏çËÉΩÂÅö‰∏Ä‰∫õËÄóÊó∂ÁöÑ‰ªªÂä°„ÄÇ ÂÜÖÂ≠òÊ≥ÑÊºè‰ºòÂåñ ÈùôÊÄÅÂèòÈáèÂØºËá¥ÁöÑÂÜÖÂ≠òÊ≥ÑÊºè ‰æãÂ¶ÇÔºö 123456789private static Context mContext; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.layout_combine); mContext = this; &#125; Âçï‰æãÊ®°ÂºèÂØºËá¥ÁöÑÂÜÖÂ≠òÊ≥ÑÊºè Â±ûÊÄßÂä®ÁîªÂØºËá¥ÁöÑÂÜÖÂ≠òÊ≥ÑÊºè Android 3.0 ‰πãÂêéÔºåÊèê‰æõ‰∫ÜÂ±ûÊÄßÂä®ÁîªÔºåÂ¶ÇÊûúÂºÄÂêØÊó†ÈôêÂæ™ÁéØÂä®ÁîªÔºåÈöêËóèÂêéÔºåÊú™Ë∞ÉÁî® animator,cancel() Êù•ÂÅúÊ≠¢Âä®ÁîªÔºå‰πü‰ºöÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºèÔºåÂõ†‰∏∫Ëøô‰∏™Êó∂ÂÄô Activity ÁöÑ View Ë¢´Âä®ÁîªÊâÄÊåÅÊúâÔºåËÄå View ÂèàÊåÅÊúâ Activity, ÊúÄÁªàActivity Êó†Ê≥ïÈáäÊîæ„ÄÇ0- ÂìçÂ∫îÈÄüÂ∫¶‰ºòÂåñÂíåANRÊó•Âøó ÂìçÂ∫îÈÄüÂ∫¶‰ºòÂåñÁöÑÊ†∏ÂøÉÊòØÈÅøÂÖçÂú®‰∏ªÁ∫øÁ®ãÂÅöËÄóÊó∂Êìç‰ΩúÔºå Activity 5s Êú™ÂÅöÂá∫ÂìçÂ∫îÔºå Service 10sÊú™ÂÅöÂá∫ÂìçÂ∫îÔºåÂ∞±‰ºöÂá∫Áé∞ ANR ,Êü•Áúã \data\anr ÁõÆÂΩï‰∏ãÁöÑ trace,txt Êñá‰ª∂ÂàÜÊûê‰∫ßÁîü ANR ÁöÑÂéüÂõ† Á∫øÁ®ã‰ºòÂåñ Á∫øÁ®ã‰ºòÂåñ‰∏ÄËà¨ÈÉΩÊòØÈááÁî®Á∫øÁ®ãÊ±†ÔºåÈÅøÂÖçÁ®ãÂ∫è‰∏≠Â≠òÂú®Â§ßÈáèÁöÑ Thread, Á∫øÁ®ãÊ±†ÂèØÈáçÁî®ÂÜÖÈÉ®ÁöÑÁ∫øÁ®ãÔºå‰ªéËÄåÈÅøÂÖçÁ∫øÁ®ãÁöÑÂàõÂª∫ÂíåÈîÄÊØÅÊâÄÂ∏¶Êù•ÁöÑÊÄßËÉΩÂºÄÈîÄ„ÄÇ]]></content>
      <tags>
        <tag>ÊÄßËÉΩ‰ºòÂåñ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[È´òÊïà‰ΩøÁî®RxJava]]></title>
    <url>%2F2018%2F11%2F20%2F%E9%AB%98%E6%95%88%E4%BD%BF%E7%94%A8RxJava%2F</url>
    <content type="text"><![CDATA[Question Âú∫ÊôØ‰∏ÄÔºöÂú®È°µÈù¢‰øùÂ≠òÊó∂ÔºåÈúÄË¶ÅÂØπÈ°µÈù¢ÊâÄÂ°´ÂÜôÁöÑ‰∏Ä‰∫õÂàó‰ø°ÊÅØËøõË°åÂà§Êñ≠ÔºåÁ°ÆÂÆöÊ≠£Á°ÆÊó†ËØØÂêéÊñπÂèØ‰øùÂ≠ò„ÄÇ ‰æãÂ¶ÇÔºöÈ°µÈù¢‰∏ä‰∏≠ÈúÄË¶ÅÂ°´ÂÜôÔºöÂßìÂêçÔºåÊÄßÂà´ÔºåËÅå‰∏öÔºåÂπ¥Ëñ™Ôºå‰ΩèÂùÄÁ≠â‰ø°ÊÅØ„ÄÇ ÊåâÁÖßÂ∏∏ËßÑÂÅöÊ≥ï,Êàë‰ª¨ÊúâÂèØËÉΩ‰ºöËøô‰πàÂÜôÔºö 12345678910if(Util.checkempty(mUserName))&#123;//Âà§Êñ≠Áî®Êà∑ÂêçÊòØÂê¶‰∏∫Á©∫ return;&#125;if(Util.checkempty(mSex))&#123;//Âà§Êñ≠ÊÄßÂà´ÊòØÂê¶‰∏∫Á©∫ return;&#125;.....if(Util.checkempty(mAddress))&#123;//Âà§Êñ≠‰ΩèÂùÄÊòØÂê¶‰∏∫Á©∫ return;&#125; ËÄåÁî® Rxjava.combineLatest 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263//ÊûÑÂª∫Ë¢´ËßÇÂØüËÄÖObservable userNameObservable = Observable.create(new Observable.OnSubscribe&lt;String&gt;() &#123; @Override public void call(final Subscriber&lt;? super String&gt; subscriber) &#123; tv.addTextChangedListener(new TextWatcher() &#123; @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) &#123; &#125; @Override public void onTextChanged(CharSequence s, int start, int before, int count) &#123; subscriber.onNext(s.toString()); &#125; @Override public void afterTextChanged(Editable s) &#123; &#125; &#125;); &#125; &#125;); Observable sexObservable = Observable.create(new Observable.OnSubscribe&lt;String&gt;() &#123; @Override public void call(final Subscriber&lt;? super String&gt; subscriber) &#123; sex.addTextChangedListener(new TextWatcher() &#123; @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) &#123; &#125; @Override public void onTextChanged(CharSequence s, int start, int before, int count) &#123; subscriber.onNext(s.toString()); &#125; @Override public void afterTextChanged(Editable s) &#123; &#125; &#125;); &#125; &#125;); Observable.combineLatest(userNameObservable, sexObservable, new Func2&lt;String,String,Boolean&gt;() &#123; @Override public Boolean call(String userName, String sex) &#123; //Âà§Êñ≠Áî®Êà∑Âêç boolean isUserInvalid = !TextUtils.isEmpty(userName); //Âà§Êñ≠ÊÄßÂà´ boolean isSexInvalid = !TextUtils.isEmpty(sex); return isUserInvalid &amp;&amp; isSexInvalid; &#125; &#125;).subscribe(new Action1() &#123; @Override public void call(Object o) &#123;//Âè™ÊúâÈÉΩÊª°Ë∂≥Êù°‰ª∂ÂêéÊâç‰ºöÊâßË°åÂà∞ËøôÈáå Log.i("xx","‰ø°ÊÅØÔºö"+o);//ÂèØ‰ª•‰øùÂ≠ò‰ø°ÊÅØ‰∫Ü &#125; &#125;); Âú∫ÊôØ‰∫åÔºöÊêúÁ¥¢ËæìÂÖ•ÔºåÈÅøÂÖçÂ§öÊ¨°Ë∞ÉÁî®ÊêúÁ¥¢Êé•Âè£ÔºåÊêúÁ¥¢‰ºòÂåñ 12345678910111213141516171819202122232425262728293031323334353637383940414243Observable.create(new Observable.OnSubscribe&lt;String&gt;() &#123; @Override public void call(final Subscriber&lt;? super String&gt; subscriber) &#123; tv.addTextChangedListener(new TextWatcher() &#123; @Override public void beforeTextChanged(CharSequence s, int start, int count, int after) &#123; &#125; @Override public void onTextChanged(CharSequence s, int start, int before, int count) &#123; subscriber.onNext(s.toString()); &#125; @Override public void afterTextChanged(Editable s) &#123; &#125; &#125;); &#125; &#125;).filter(new Func1&lt;String, Boolean&gt;() &#123; @Override public Boolean call(String s) &#123; return !TextUtils.isEmpty(s);//ËøáÊª§‰∏∫Á©∫ÁöÑ &#125; &#125;).debounce(1,TimeUnit.SECONDS) .subscribe(new Subscriber&lt;String&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(String s) &#123; Log.i("xx","ÊêúÁ¥¢Â≠óÁ¨¶‰∏≤ÔºöÔºö"+s); &#125; &#125;);]]></content>
      <tags>
        <tag>rxjava</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RxJava]]></title>
    <url>%2F2018%2F11%2F19%2FRxJava%2F</url>
    <content type="text"><![CDATA[1. ÂèòÊç¢ map() ÂÆÉÊòØ‰∏ÄÂØπ‰∏ÄÁöÑ 123456789101112Observable.just("image/logo.png")//ËæìÂÖ•Á±ªÂûãString,ÂõæÁâáÂú∞ÂùÄ .map(new Func1&lt;String, Bitmap&gt;() &#123; @Override public Bitmap call(String filePath) &#123; return getBitmap(filePath);//ËΩ¨Êç¢‰∏∫bitmap &#125; &#125;).subscribe(new Action1&lt;Bitmap&gt;() &#123; @Override public void call(Bitmap bitmap) &#123; showBitmap(bitmap);//ÊòæÁ§∫bitmap &#125; &#125;); flatMap() Â§öÂØπÂ§öËΩ¨Êç¢ ÂÅáÂ¶ÇÊúâËøôÊ†∑‰∏Ä‰∏™Âú∫ÊôØÔºåÊàë‰ª¨ÈúÄË¶ÅÊâìÂç∞ÊØè‰∏™Â≠¶ÁîüÊâÄ‰øÆÁöÑËØæÁ®ãÔºåÂ≠¶ÁîüÊòØ‰∏Ä‰∏™ÈõÜÂêàÔºåËØæÁ®ã‰πüÊòØ‰∏Ä‰∏™ÈõÜÂêàÔºåÂ¶ÇÊûúÊåâÁÖßmap() ÁöÑÂÅöÊ≥ïÂ¶Ç‰∏ãÔºö ËøôÈáåÊàëÈÄâÁî®ÊàëÈ°πÁõÆÈáåÈöèÊÑè‰∏Ä‰∏™bean ÂØπË±°ÔºåÊÑèÊÄù‰∏çÂèò 12345678910111213141516UserInfo[] userInfos = new UserInfo[3];Observable.from(userInfos) .map(new Func1&lt;UserInfo, List&lt;AppInfo&gt;&gt;() &#123; @Override public List&lt;AppInfo&gt; call(UserInfo userInfo) &#123; return userInfo.getAppInfos(); &#125; &#125;).subscribe(new Action1&lt;List&lt;AppInfo&gt;&gt;() &#123; @Override public void call(List&lt;AppInfo&gt; appInfos) &#123; for(AppInfo info : appInfos)&#123; Log.i("xx",info.getAppName()); &#125; &#125; &#125;); ÊúâÁßçÊÉÖÂÜµÂ∞±ÊòØÂÅáÂ¶ÇÊàë‰∏çÊÉ≥Ë¶ÅÂæ™ÁéØÈÅçÂéÜÂë¢ÔºåËÄåÊòØÁõ¥Êé•ÊãøÂà∞ AppInfo ÂØπË±°ÔºåÊòæÁÑ∂ map() ÊòØÊó†Ê≥ïÂÆûÁé∞ÁöÑÔºåmap() Êàë‰ª¨ÂâçÈù¢‰πüËØ¥ËøáÊòØ ‰∏ÄÂØπ‰∏ÄÁöÑËΩ¨Êç¢ÔºåËÄåÁé∞Âú®ÊòØ‰∏ÄÂØπÂ§öÔºåÈÇ£Ê≠§Êó∂Â∞±Â∫îËØ•Áî® flatMap(). ‰ΩøÁî®flatMap() ÁöÑËØùÔºåÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122Observable.from(userInfos) .flatMap(new Func1&lt;UserInfo, Observable&lt;AppInfo&gt;&gt;() &#123; @Override public Observable&lt;AppInfo&gt; call(UserInfo userInfo) &#123; return Observable.from(userInfo.getAppInfos()); &#125; &#125;).subscribe(new Subscriber&lt;AppInfo&gt;() &#123; @Override public void onCompleted() &#123; &#125; @Override public void onError(Throwable e) &#123; &#125; @Override public void onNext(AppInfo appInfo) &#123; Log.i("xx","appInfo.name::"+appInfo.getAppName()); &#125; &#125;); ‰∏äËø∞ÊòØÁî® flatMap() ÁºñÂÜôÁöÑÔºåÂéªÈô§‰∫Ü for Âæ™ÁéØÔºåflatMap() Âíå map() Êúâ‰∏Ä‰∏™Áõ∏ÂêåÁÇπÔºöÂÆÉ‰ª¨ÈÉΩÊòØÊää‰º†ÂÖ•ÁöÑÂèÇÊï∞ËΩ¨Âåñ‰πãÂêéËøîÂõûÂè¶‰∏Ä‰∏™ÂØπË±°„ÄÇ‰ΩÜÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºåÂíåmap() ‰∏çÂêåÁöÑÊòØÔºåflatMap() ‰∏≠ËøîÂõûÁöÑÊòØ Observable ÂØπË±°„ÄÇ flatMap() ÂéüÁêÜÂ¶Ç‰∏ãÔºö ‰ΩøÁî®‰º†ÂÖ•ÁöÑ‰∫ã‰ª∂ÂØπË±°ÂàõÂª∫‰∏Ä‰∏™ Observable ÂØπË±°Ôºõ Âπ∂‰∏çÂèëÈÄÅËøô‰∏™ Observable ÂØπË±°ÔºåËÄåÊòØÂ∞ÜÂÆÉÊøÄÊ¥ªÔºå‰∫éÊòØÂÆÉÂºÄÂßãÂèëÈÄÅ‰∫ã‰ª∂Ôºõ ÊØè‰∏Ä‰∏™ÂàõÂª∫Âá∫Êù•ÁöÑ Observable ÂèëÈÄÅÁöÑ‰∫ã‰ª∂ÔºåÈÉΩË¢´Ê±áÂÖ•Âêå‰∏Ä‰∏™ Observable,ËÄåËøô‰∏™ Observale Ë¥üË¥£Â∞ÜËøô‰∫õ‰∫ã‰ª∂Áªü‰∏Ä‰∫§Áªô Subscriber ÁöÑÂõûË∞ÉÊñπÊ≥ï„ÄÇ]]></content>
      <tags>
        <tag>Rxjava</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Êó∂Èó¥Â§çÊùÇÂ∫¶]]></title>
    <url>%2F2018%2F11%2F19%2F%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6%2F</url>
    <content type="text"><![CDATA[Ë°°Èáè‰ª£Á†ÅÁöÑÂ•ΩÂùèÔºåÂåÖÊã¨‰∏§‰∏™ÈùûÂ∏∏ÈáçË¶ÅÁöÑÊåáÊ†áÔºö ËøêË°åÊó∂Èó¥ Âç†Áî®Á©∫Èó¥ Áî±‰∫éËøêË°åÁéØÂ¢ÉÂíåËæìÂÖ•ËßÑÊ®°ÁöÑÂΩ±ÂìçÔºå‰ª£Á†ÅÁöÑÁªùÂØπÊâßË°åÊó∂Èó¥ÊòØÊó†Ê≥ï‰º∞ËÆ°ÁöÑÔºå‰ΩÜÊòØÊàë‰ª¨Âç¥ÂèØ‰ª•È¢Ñ‰º∞‰ª£Á†ÅÁöÑÂü∫Êú¨ÊâßË°åÊ¨°Êï∞„ÄÇÊàëÂèØ‰ª•ÈÄö‰øóÁöÑÁêÜËß£‰∏∫ÔºöÈÄöËøáÊâßË°åÊ¨°Êï∞ÂèØ‰ª•Â§ßÊ¶ÇÊé®ÁÆóËøô‰∏™Êó∂Èó¥Â§çÊùÇÂ∫¶„ÄÇ Á§∫‰æãÔºö ‰∏Ä‰∏™ÊúâÂ∫èÊéíÂàóÂ•ΩÁöÑÊï∞ÁªÑ 1int[] arry = &#123;-5,-1,0,5,9,11,13,15,22,35,46&#125;,ËæìÂÖ•‰∏Ä‰∏™xÔºåint x = 31 Âú®Êï∞ÁªÑ‰∏≠ÊâæÂá∫Âíå‰∏∫ x ÁöÑ‰∏§‰∏™Êï∞Ôºå‰æãÂ¶ÇÔºö 9 +22 = 31„ÄÇË¶ÅÊ±ÇÊó∂Èó¥Â§çÊùÇÂ∫¶‰∏∫O(n). Â•ΩÔºåÂΩìÊàë‰ª¨ÁúãÂà∞Ëøô‰∏™ÈóÆÈ¢òÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ËÆ§‰∏∫ËøôÂæàÂÆπÊòìÂòõ(ÂÖà‰∏çËÄÉËôëÊó∂Èó¥Â§çÊùÇÂ∫¶)Ôºå‰∫éÊòØÂÜô‰∫ÜÂ¶Ç‰∏ã‰ª£Á†ÅÔºö Á¨¨‰∏ÄÁßçÂÜôÊ≥ïÔºö 123456789101112131415161718192021int[] array = &#123;-5,-1,0,5,9,11,13,15,22,35,46&#125;; int sum = 31;public void getIndex(int[] array,int sum)&#123; //sum Âú®Êï∞ÊçÆ‰∏≠ÊâæÂá∫Âíå‰∏∫sumÁöÑ‰∏§‰∏™Êï∞ int x = 0; int y = 0; for(int i=0;i&lt;array.length;i++)&#123; for(int j=i+1;j&lt;array.length;j++)&#123; //Âà§Êñ≠ÊòØÂê¶Áõ∏Âä†=sum if(array[i] + array[j] == sum)&#123; x = i; y = j; break; &#125; &#125; &#125; System.out.println("Á¨¨‰∏Ä‰∏™Êï∞ÁöÑ‰∏∫Ôºö"+array[x]); System.out.println("Á¨¨‰∫å‰∏™Êï∞ÁöÑ‰∏∫Ôºö"+array[y]); &#125; Ê†πÊçÆÊàë‰ª¨‰∏äÈù¢ÂØπÊó∂Èó¥Â§çÊùÇÂ∫¶ÁöÑ‰∫ÜËß£ÔºåÊàë‰ª¨Áü•ÈÅìÊîπÁÆóÊ≥ïÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊòØ O(n^2)Ôºå ÊòØÊúÄ‰ΩéÁöÑ‰∏ÄÁßçÔºåÂèØ‰ª•ËØ¥ÔºåÈÇ£‰πàÊàë‰ª¨Â¶Ç‰ΩïÊääÊó∂Èó¥Â§çÊùÇÂ∫¶ËÆæÁΩÆ‰∏∫O(n) ,Á∫øÊÄßÂ§çÊùÇÂ∫¶ÔºåÂÖ∂ÂÆûÂ∞±ÊòØÈúÄË¶Å‰∏ÄÈÅçfor Âæ™ÁéØÔºõ Á¨¨‰∫åÁßçÁÆóÊ≥ïÔºö 1234567891011121314151617181920int[] array = &#123;-5,-1,0,5,9,11,13,15,22,35,46&#125;;int sum = 31;public void getSimpleIndex(int[] array,int target)&#123; int x = 0; int y = 0; HashMap&lt;Integer, Integer&gt; hm = new HashMap&lt;Integer, Integer&gt;(); for (int i = 0; i &lt; array.length; i++) &#123;//Á¨¨‰∏ÄÊ¨°ÈÅçÂéÜÊï∞ÁªÑÔºåÂ∞ÜÂÖÉÁ¥†Âíå‰∏ãÊ†á‰ª•K-VÊñπÂºèÂ≠òÂÖ•hm‰∏≠ hm.put(array[i], i);//key ‰∏∫Êï∞ÁªÑÈáåÈù¢ÁöÑÂÄºÔºåvalueÊòØ‰∏ãÊ†á &#125; for(int i=0;i&lt;array.length;i++) &#123;//Á¨¨‰∫åÊ¨°ÈÅçÂéÜÊï∞ÁªÑÔºåÊü•ÊâæÊòØÂê¶ÊúâÂíå‰∏∫targetÁöÑÂÖÉÁ¥†ÂØπ if (hm.containsKey(target - array[i]) &amp;&amp; (i != hm.get(target - array[i]))) &#123; //‰øùËØÅ‰∏§‰∏™ÂÖÉÁ¥†‰∏çÊòØÂêå‰∏Ä‰∏™ÔºåÂê¶ÂàôÂ¶ÇÊûútargetÊÅ∞Â•ΩÊòØÊüê‰∏™ÂÖÉÁ¥†ÁöÑ2ÂÄçÊó∂Â∞±‰∏çÁ¨¶ÂêàÈ¢òÊÑè x = i; y = hm.get(target - array[i]); break; &#125; &#125; System.out.print(array[x]+" "+array[y]); &#125; ËøôÊòØ‰∏ÄÁßçÂÖ∏Âûã‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥ÁöÑËß£Ê≥ï„ÄÇ ÊÄªÁªìÂ∏∏ËßÅÁöÑÊó∂Èó¥Â§çÊùÇÂ∫¶ÊúâÂ¶Ç‰∏ãÔºö T(n) = O(n) T(n) = O(logn) T(n) = O(1) T(n) = O(n¬≤) ËøôÂõõÁßçÊó∂Èó¥Â§çÊùÇÂ∫¶Ë∞ÅÁî®Êó∂Êõ¥ÈïøÔºåÊõ¥ËäÇÁúÅÊó∂Èó¥Âë¢Ôºü O(1) &lt; O(logn) &lt; O(n) &lt; O(n¬≤)]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÁîü‰∫ßËÄÖÊ∂àË¥πËÄÖÊ®°Âºè]]></title>
    <url>%2F2018%2F11%2F19%2Fjava%E7%94%9F%E4%BA%A7%E8%80%85%E6%B6%88%E8%B4%B9%E8%80%85%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[Producter.java Áîü‰∫ßËÄÖÔºö 12345678910111213141516171819202122232425262728293031323334353637383940414243/** * Áîü‰∫ßËÄÖ */public class Producter extends Thread &#123; private Queue&lt;Integer&gt; queue; String name; int maxSize; int i = 0; public Producter(String name,Queue&lt;Integer&gt; queue,int maxSize)&#123; super(name); this.name = name; this.queue = queue; this.maxSize = maxSize; &#125; @Override public void run() &#123; while (true)&#123; synchronized (queue)&#123; while(queue.size() == maxSize)&#123; try&#123; System.out.println("Queue is full,Productr["+name+" ]thread waiting for"); //Á≠âÂæÖ queue.wait(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; System.out.println("["+name+"] producting value:+"+i ); queue.offer(i++); queue.notifyAll(); try&#123; Thread.sleep(new Random().nextInt(1000)); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; Consumer.java 12345678910111213141516171819202122232425262728293031323334353637383940public class Consumer extends Thread &#123; private Queue&lt;Integer&gt; queue; String name; int maxSize; public Consumer(String name,Queue&lt;Integer&gt; queue,int maxSize)&#123; super(name); this.name = name; this.queue = queue; this.maxSize = maxSize; &#125; @Override public void run() &#123; while (true)&#123; synchronized (queue)&#123; while (queue.isEmpty())&#123; try&#123; System.out.println("Queue is empty,Consumer ["+name+"] thread is waiting for Producer"); //Â¶ÇÊûú‰∏∫Á©∫ÔºåÂ∞±Á≠âÂæÖ queue.wait(); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; int x = queue.poll(); System.out.println("["+name+" Consumer value : "+x); queue.notifyAll(); try&#123; Thread.sleep(new Random().nextInt(1000)); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; &#125; &#125; &#125;&#125; main.java: 123456789101112131415161718public static void main(String args[])&#123; Queue&lt;Integer&gt; queue = new LinkedList&lt;&gt;(); Thread product1 = new Producter("p-1",queue,5); Thread product2 = new Producter("p-2",queue,5); Thread consumer1 = new Consumer("C1",queue,5); Thread consumer2 = new Consumer("C2",queue,5); Thread consumer3 = new Consumer("C3",queue,5); product1.start(); product2.start(); consumer1.start(); consumer2.start(); consumer3.start(); &#125;]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidÁü•ËØÜÁÇπ‰∏â]]></title>
    <url>%2F2018%2F11%2F15%2FRecycleView%E7%9B%B8%E5%85%B3%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[1. RecycleView Â¶Ç‰ΩïËÆæÁΩÆÂàÜÂâ≤Á∫øÁöÑÔºü ÂÆÉÊòØËØªÂèñÁ≥ªÁªüËá™Â∏¶ÁöÑÂ±ûÊÄß R.attr.listDivider Â±ûÊÄßÔºåÊù•ËÆæÁΩÆÂàÜÂâ≤Á∫øÁöÑÔºåÊîØÊåÅÊ®™ÂêëÂíåÁ∫µÂêë„ÄÇ 2. RecycleView ÂàÜÂâ≤Á∫øÁöÑÊ†∑ÂºèÂ¶Ç‰Ωï‰øÆÊîπÔºü Á¨¨‰∏ÄÁßçÂäûÊ≥ïÔºöÂõ†‰∏∫ R.attr.listDivider ÂÆö‰πâÂú®Á≥ªÁªüÊ†∑Âºè‰∏≠ÔºåÈÇ£‰πàÊàë‰ª¨ÂèØ‰ª•ÈáçÂÜôËøô‰∏™Â±ûÊÄß‰øÆÊîπÔºåÂ¶Ç‰∏ãÔºö Âú®styles.xml ‰∏≠Ê∑ªÂä†ËØ•Â±ûÊÄßÔºö 12345&lt;style name="AppTheme" parent="Theme.AppCompat.Light.DarkActionBar"&gt; &lt;!-- Customize your theme here. --&gt; .... &lt;item name="android:listDivider"&gt;@drawable/drawable_bg&lt;/item&gt; &lt;/style&gt; ÂÖ∂‰∏≠ drawable_bg ‰∏∫Ëá™ÂÆö‰πâÂàÜÂâ≤Á∫øÁöÑdrawable. Á¨¨‰∫åÁßçÂäûÊ≥ïÔºöÂèØ‰ª•ÈÄöËøáËá™Â∏¶ÁöÑ setDrawable() ÊîπÂèòÔºåÂ¶Ç‰∏ãÔºö 1234DividerItemDecoration itemDecoration = new DividerItemDecoration(this,DividerItemDecoration.VERTICAL); Drawable drawable = getResources().getDrawable(R.drawable.drawable_bg); itemDecoration.setDrawable(drawable); recyclerView.addItemDecoration(itemDecoration); 3. RecycleView ÁºìÂ≠ò ÁºìÂ≠òÊ∂âÂèä‰∏â‰∏™Á±ªÔºåÂàÜÂà´ÊòØÔºö Recycler RecycledViewPool ViewCachedExtension Recycler : Áî®‰∫éÁÆ°ÁêÜÂ∑≤ÁªèÂ∫üÂºÉÊàñËÄÖ‰∏é RecyclerView ÂàÜÁ¶ªÁöÑ ViewHolder mChangedScrap : ‰∏é RecyclerView ÂàÜÁ¶ªÁöÑ ViewHolder ÂàóË°® mAttachedScrap : Êú™‰∏é RecyclerView ÂàÜÁ¶ªÁöÑ ViewHolder ÂàóË°® mCachedViews : ViewHolder ÁºìÂ≠òÂàóË°® RecycledViewPool : ViewHolder ÁºìÂ≠òÊ±† ViewCachedExtension : ÂºÄÂèëËÄÖÂèØ‰ª•ÊéßÂà∂ÁöÑ ViewHolder ÁºìÂ≠òÁöÑÂ∏ÆÂä©Á±ª Ëé∑ÂèñÁºìÂ≠òÈáåÁöÑ ViewHolder ÁöÑÂÖ≥ÈîÆÊñπÊ≥ïÊòØÔºö tryGetViewHolderForPositionByDeadline Â¶Ç‰∏ãÔºö 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108@Nullable ViewHolder tryGetViewHolderForPositionByDeadline(int position, boolean dryRun, long deadlineNs) &#123; if (position &lt; 0 || position &gt;= mState.getItemCount()) &#123; throw new IndexOutOfBoundsException("Invalid item position " + position + "(" + position + "). Item count:" + mState.getItemCount() + exceptionLabel()); &#125; boolean fromScrapOrHiddenOrCache = false; ViewHolder holder = null; // 0) If there is a changed scrap, try to find from there // 0) Â¶ÇÊûúÈúÄË¶ÅÊîπÂèòÂ∫üÂºÉÁöÑviewÔºå‰ªéËøôÈáåÊü•Êâæ if (mState.isPreLayout()) &#123; //ËøôÈáåÊòØ mChangedScrap ÈõÜÂêà‰∏≠ÂèñÂá∫ holder = getChangedScrapViewForPosition(position); fromScrapOrHiddenOrCache = holder != null; &#125; // 1) Find by position from scrap/hidden list/cache // 1Ôºâ ËøôÊòØ‰ªé mAttachedScrap ÈõÜÂêà‰∏≠Êü•Êâæ if (holder == null) &#123; holder = getScrapOrHiddenOrCachedHolderForPosition(position, dryRun); if (holder != null) &#123; if (!validateViewHolderForOffsetPosition(holder)) &#123; // recycle holder (and unscrap if relevant) since it can't be used if (!dryRun) &#123; // we would like to recycle this but need to make sure it is not used by // animation logic etc. holder.addFlags(ViewHolder.FLAG_INVALID); if (holder.isScrap()) &#123; removeDetachedView(holder.itemView, false); holder.unScrap(); &#125; else if (holder.wasReturnedFromScrap()) &#123; holder.clearReturnedFromScrapFlag(); &#125; recycleViewHolderInternal(holder); &#125; holder = null; &#125; else &#123; fromScrapOrHiddenOrCache = true; &#125; &#125; &#125; if (holder == null) &#123; final int offsetPosition = mAdapterHelper.findPositionOffset(position); if (offsetPosition &lt; 0 || offsetPosition &gt;= mAdapter.getItemCount()) &#123; throw new IndexOutOfBoundsException("Inconsistency detected. Invalid item " + "position " + position + "(offset:" + offsetPosition + ")." + "state:" + mState.getItemCount() + exceptionLabel()); &#125; final int type = mAdapter.getItemViewType(offsetPosition); // 2) Find from scrap/cache via stable ids, if exists // 2Ôºâ‰ªé mCachedViews ÈõÜÂêà‰∏≠Êü•ÊâæÁºìÂ≠ò if (mAdapter.hasStableIds()) &#123; holder = getScrapOrCachedViewForId(mAdapter.getItemId(offsetPosition), type, dryRun); if (holder != null) &#123; // update position holder.mPosition = offsetPosition; fromScrapOrHiddenOrCache = true; &#125; &#125; if (holder == null &amp;&amp; mViewCacheExtension != null) &#123; // We are NOT sending the offsetPosition because LayoutManager does not // know it. // 3 ‰ªémViewCacheExtension Ëé∑Âèñ final View view = mViewCacheExtension .getViewForPositionAndType(this, position, type); if (view != null) &#123; holder = getChildViewHolder(view); if (holder == null) &#123; throw new IllegalArgumentException("getViewForPositionAndType returned" + " a view which does not have a ViewHolder" + exceptionLabel()); &#125; else if (holder.shouldIgnore()) &#123; throw new IllegalArgumentException("getViewForPositionAndType returned" + " a view that is ignored. You must call stopIgnoring before" + " returning this view." + exceptionLabel()); &#125; &#125; &#125; if (holder == null) &#123; // fallback to pool if (DEBUG) &#123; Log.d(TAG, "tryGetViewHolderForPositionByDeadline(" + position + ") fetching from shared pool"); &#125; // 4Ôºâ‰ªéÁºìÂ≠òÊ±†‰∏≠Ëé∑Âèñ recycledViewPool holder = getRecycledViewPool().getRecycledView(type); if (holder != null) &#123; holder.resetInternal(); if (FORCE_INVALIDATE_DISPLAY_LIST) &#123; invalidateDisplayListInt(holder); &#125; &#125; &#125; if (holder == null) &#123; long start = getNanoTime(); if (deadlineNs != FOREVER_NS &amp;&amp; !mRecyclerPool.willCreateInTime(type, start, deadlineNs)) &#123; // abort - we have a deadline we can't meet return null; &#125; //Â¶ÇÊûúÈÉΩÊ≤°Êúâ Â∞±ÈáçÊñ∞ÂàõÂª∫ createViewHolder holder = mAdapter.createViewHolder(RecyclerView.this, type); ..... &#125; &#125; &#125; ÊÄªÁªìÁºìÂ≠òÁöÑÊú∫Âà∂Â¶Ç‰∏ãÔºö 1.‰ªé mChangedScrap Êàñ mAttachScrap ‰∏≠Ëé∑Âèñ 2.‰ªé mCacheViews 3.‰ªé mRecycledViewPool ÁºìÂ≠òÊ±†‰∏≠Ëé∑Âèñ 4. RecycleView Âà∑Êñ∞Èó™Â±è‰∏ÄËà¨Âà∑Êñ∞Ôºö 1adapter.notifyItemChanged(0); ÂèÇÊï∞Ôºöposition ÂÆûÈôÖ‰∏ä‰ºöÂÖ®ÈÉ®Âà∑Êñ∞ÔºåÂ±ÄÈÉ®Âà∑Êñ∞Â∫î‰ΩøÁî®Ôºö 1adapter.notifyItemChanged(0,"q"); ÂèÇÊï∞Ôºö position,payload Âπ∂‰∏îÂú® adapter ‰∏≠ÈáçÂÜôÊñπÊ≥ïÔºö `onBindViewHolder(RecyclerView.ViewHolder holder, int position, List payloads)ÊñπÊ≥ï` payloads ÁöÑ size ÂßãÁªà‰∏∫1. 123456789@Overridepublic void onBindViewHolder(ViewHolder holder, int position, List&lt;Object&gt; payloads) &#123; if(payloads.isEmpty())&#123; onBindViewHolder(holder,position); &#125;else&#123; String type = payloads.get(0);//Ëé∑Âèñ‰∏∫ q holder.name.setText(list.get(position)); &#125; &#125; 5. RecycleView Âíå listView//https://zhuanlan.zhihu.com/p/23339185 ÁºìÂ≠òÂ±ÇÁ∫ß‰∏çÂêå recycleView ÊØî listView Â§ö‰∏§Á∫ßÁºìÂ≠òÔºåÊîØÊåÅÂºÄÂèëËÄÖËá™ÂÆö‰πâÁºìÂ≠òÂ§ÑÁêÜÔºåÊîØÊåÅÂ§ö‰∏™recycleViewÂÖ±Áî®Âêå‰∏Ä‰∏™ recycleViewPool(ÁºìÂ≠òÊ±†) listView ÁºìÂ≠òÔºà‰∏§Á∫ßÁºìÂ≠òÔºâÔºö ÊòØÂê¶ÈúÄË¶ÅÂõûË∞ÉcreateView ÊòØÂê¶ÈúÄË¶ÅÂõûË∞ÉbindVIew ÁîüÂëΩÂë®Êúü Â§áÊ≥® mActiveViews Âê¶ Âê¶ onLayoutÂáΩÊï∞Âë®ÊúüÂÜÖ Áî®‰∫éÂ±èÂπïÂÜÖitemViewÂø´ÈÄüÈáçÁî® mScrapViews Âê¶ ÊòØ ‰∏émAdapter‰∏ÄËá¥ÔºåÂΩìAdapterË¢´Êõ¥Êç¢Êó∂ÔºåmScrapViewsÂç≥Ë¢´Ê∏ÖÁ©∫ RecycrleView ÁºìÂ≠ò( ÂõõÁ∫ßÁºìÂ≠ò)Ôºö ÊòØÂê¶ÂõûË∞ÉcreateView ÂõûË∞ÉbindVIew ÁîüÂëΩÂë®Êúü Â§áÊ≥® mAttachedScrap Âê¶ Âê¶ onLayout Áî®‰∫éÂ±èÂπïÂÜÖitemViewÂø´ÈÄüÈáçÁî® mCacheViews Âê¶ Âê¶ ‰∏émAdapter‰∏ÄËá¥ÔºåÂΩìAdapterË¢´Êõ¥Êç¢Êó∂,mCacheVIewsË¢´ÁºìÂ≠òÂà∞mRecyclerPool ÈªòËÆ§ÁºìÂ≠òÂ§ßÂ∞èÊòØ2 mViewCacheExtension Áî®Êà∑Ëá™ÂÆö‰πâÂÆûÁé∞ mRecyclerPool Âê¶ ÊòØ ‰∏éËá™Ë∫´ÁîüÂëΩÂë®Êúü‰∏ÄËá¥Ôºå‰∏çÂÜçÂºïÁî®Êó∂Ë¢´ÈáäÊîæ ÈªòËÆ§Â§ßÂ∞èÊòØ5 ListView Âíå RecyclerView ÁºìÂ≠òÊú∫Âà∂Ôºö mActiveViews Âíå mAttachedScrap ÂäüËÉΩÁõ∏‰ººÔºåÊÑè‰πâÂú®‰∫éÂø´ÈÄüÈáçÁî®Â±èÂπï‰∏äÂèØËßÅÁöÑÂàóË°®È°π itemView,ËÄå‰∏çÈúÄË¶ÅÈáçÊñ∞createView Âíå bindView mScrapView Âíå mCachedViews + mRecyclerViewPool ÂäüËÉΩÁõ∏‰ººÔºåÊÑè‰πâÂú®‰∫éÁºìÂ≠òÁ¶ªÂºÄÂ±èÂπïÁöÑitemView,ÁõÆÁöÑÊòØËÆ©Âç≥Â∞ÜËøõÂÖ•Â±èÂπïÁöÑ itemView ÈáçÁî® RecycleView ÁöÑ‰ºòÂäøÂú®‰∫é mCacheVIews ÁöÑ‰ΩøÁî®ÔºåÂèØ‰ª•ÂÅöÂà∞Â±èÂπïÂ§ñÁöÑÂàóË°®È°πitemView ËøõÂÖ•Â±èÂπïÂÜÖÊó∂‰πüÊó†È°ªbindView Âø´ÈÄüÈáçÁî®Ôºõ mRecycleViewPool ÂèØ‰ª•‰æõÂ§ö‰∏™recycleView ÂÖ±Âêå‰ΩøÁî®ÔºåÂú®ÁâπÂÆöÂú∫ÊôØ‰∏ãÔºåÂ¶Çviewpager Âä†Â§ö‰∏™ÂàóË°®È°µÊúâ‰ºòÂäø„ÄÇ 6. RecycleView ÁöÑÂõûÊî∂Â§çÁî®Êú∫Âà∂ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ÈÉΩÊòØÂì™‰∏™Á±ªÂÆåÊàêÁöÑÔºü RecycleView ÁöÑÂõûÊî∂Â§çÁî®Êú∫Âà∂ÈÉΩÊòØÁî±ÂÜÖÈÉ®Á±ª Recycler Á±ªÔºåÊ†∏ÂøÉÊñπÊ≥ïÔºötryGetViewHolderForPositionByDeadline() ÊñπÊ≥ï‰∏≠ÂÆåÊàêÁöÑ„ÄÇ ÈöèÁ¨îÊ∫êÁ†ÅËÆ∞ÂΩïÔºö Â§çÁî®Êú∫Âà∂1234567891011121314151617public View getViewForPosition(int position) &#123; return getViewForPosition(position, false); &#125;View getViewForPosition(int position, boolean dryRun) &#123; return tryGetViewHolderForPositionByDeadline(position, dryRun, FOREVER_NS).itemView;&#125;@NullableViewHolder tryGetViewHolderForPositionByDeadline(int position, boolean dryRun, long deadlineNs) &#123; //Â§çÁî®Êú∫Âà∂ÁöÑÂéüÁêÜ - 1.mCacheView - 2.recyclerViewPool - 3.Êâ©Â±ï - 4.ÈÉΩÊ≤°ÊúâÔºåÈáçÊñ∞ÂàõÂª∫‰∏Ä‰∏™ViewHolder(createViewHolder) ...&#125; ÂõûÊî∂Êú∫Âà∂ ‰πüÊòØ Recycler Á±ª‰∏≠ÁöÑÔºåÊ†∏ÂøÉÊñπÊ≥ïÔºörecycleViewHolderInternal(holder) 123456789101112131415public void recycleView(View view) &#123; // This public recycle method tries to make view recycle-able since layout manager // intended to recycle this view (e.g. even if it is in scrap or change cache) ViewHolder holder = getChildViewHolderInt(view); if (holder.isTmpDetached()) &#123; removeDetachedView(view, false); &#125; if (holder.isScrap()) &#123; holder.unScrap(); &#125; else if (holder.wasReturnedFromScrap()) &#123; holder.clearReturnedFromScrapFlag(); &#125; //ÂõûÊî∂ÁöÑÂÜÖÈÉ®ÂÆûÁé∞ recycleViewHolderInternal(holder); &#125; ÂõûÊî∂ÁöÑÈÄªËæëÔºöÁî± LayoutManager Êù•ÈÅçÂéÜÁßªÂá∫Â±èÂπïÁöÑÂç°‰ΩçÔºåÁÑ∂ÂêéÂØπÊØè‰∏™Âç°‰ΩçËøõË°åÂõûÊî∂Êìç‰ΩúÔºåÂõûÊî∂Êó∂ÔºåÈÉΩÊòØÊää viewHolder ÊîæÂú® mCachedViews ÈáåÈù¢ÔºåÂ¶ÇÊûúmCachedViews Êª°‰∫ÜÔºåÈÇ£Â∞±Âú®mCachedViews ÈáåÊãø‰∏Ä‰∏™ViewHolder ÊâîÂà∞ ViewPool ÁºìÂ≠òÈáåÔºåÁÑ∂ÂêémCachedViews Â∞±ÂèØ‰ª•Á©∫Âá∫‰ΩçÁΩÆÊù•ÊîæÊñ∞ÂõûÊî∂ÁöÑViewHolder ‰∫Ü„ÄÇ mCachedViews ÈáåÂ≠òÊîæÁöÑ ViewHolder Âè™ÊúâÂéüÊú¨‰ΩçÁΩÆÁöÑÂç°‰ΩçÊâçËÉΩÂ§çÁî® ÂèÇËÄÉÈìæÊé•Ôºöhttps://blog.csdn.net/xJ032w2j4cCjhOW8s8/article/details/79946425 =================================================================================== updateViewCacheSize() 12345void updateViewCacheSize() &#123; int extraCache = mLayout != null ? mLayout.mPrefetchMaxCountObserved : 0; mViewCacheMax = mRequestedCacheMax + extraCache; .... &#125; Âú®Á¨¨‰∏ÄÊ¨°Âêë‰∏äÊªëÂä® 7. RecycleView ÊÄßËÉΩ‰ºòÂåñ7.1 Êï∞ÊçÆÂ§ÑÁêÜÂíåËßÜÂõæÂä†ËΩΩÈÄÇÂ∫¶ÂàÜÁ¶ª ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºüÂ∞±ÊòØÊàë‰ª¨ÂºÇÊ≠•‰ªéÊúçÂä°Á´ØÊãâÂèñÊï∞ÊçÆÔºåÊãøÂà∞Êï∞ÊçÆ‰πãÂêéÂ∞±ÊääÊï∞ÊçÆ‰∏¢Áªô ViewHolder ËøõË°åÂ§ÑÁêÜÔºåÂΩìÁÑ∂Êúâ‰∫õÊï∞ÊçÆÈúÄË¶ÅÂçïÁã¨Â§ÑÁêÜÔºåÈÇ£‰πàÂÖ∂ÂÆûËøô‰∫õÂ§ÑÁêÜÈÄªËæë‰πüÂ∫îËØ•ÂºÇÊ≠•ÊâßË°åÔºåËøôÊ†∑ÁöÑËØùÂ∞±ÂèØ‰ª•ËÆ© adapter Âú® notifyDatasetChanged ‰πãÂêéÔºåViewHolder Â∞±ÂèØ‰ª•ÁÆÄÂçïÂ§ÑÁêÜËßÜÂõæ‰∏éÊï∞ÊçÆÁöÑÁªëÂÆöÂ∑•‰Ωú„ÄÇ 7.2 Êï∞ÊçÆÂà∑Êñ∞ Â¶ÇÊûúÊòØ‰∏™Âà´Êï∞ÊçÆÂèëÁîüÊîπÂèòÔºåË∞ÉÁî®Â±ÄÈÉ®Âà∑Êñ∞ÁöÑÊñπÊ≥ï 7.3 Â∏ÉÂ±Ä‰ºòÂåñ ÂáèÂ∞ë GPU ËøáÂ∫¶ÁªòÂà∂Ôºõ 7.4 ÊùÇ‰∏ÉÊùÇÂÖ´ ÂçáÁ∫ß RecycleView ÁâàÊú¨Âà∞ 25.1.0 ‰ª•‰∏ä‰ΩøÁî® Prefetch ÂäüËÉΩÔºåÂºÄÂêØËøô‰∏™ÂäüËÉΩ‰πãÂêéÂØπÈ°µÈù¢Â§çÊùÇÂ∫¶ÁöÑÊïèÊÑüÊÄßÈôç‰ΩéÔºåÂú®È´òÂ§çÊùÇÂ∫¶ÊÉÖÂÜµ‰∏ãÔºåPrefetch ÂèØ‰ª•ÊòæËëóÊèêÈ´òÈ°µÈù¢ÊµÅÁïÖÂ∫¶„ÄÇAndroid 5.0 ‰ª•ÂêéÂºïÂÖ• Render Thread ÊèêÂçáÂä®ÁîªÊµÅÁïÖÊÄß„ÄÇ Â¶ÇÊûúitem È´òÂ∫¶Âõ∫ÂÆöÁöÑËØùÔºåÂèØ‰ª•‰ΩøÁî® RecyclerView.setHasFixSize(true) Êù•ÈÅøÂÖç requestLayout Êµ™Ë¥πËµÑÊ∫êÔºõ ÂÖ±Áî® RecycleViewPool ; ÈÄöËøá getExtraLayoutSpace Êù•Â¢ûÂä† RecyclerView È¢ÑÁïôÁöÑÈ¢ùÂ§ñÁ©∫Èó¥ÔºåÈªòËÆ§ÊòØ‰∏ÄÈ°µÊï∞ÊçÆÁöÑÊï∞Èáè 8. Ëá™ÂÆö‰πâÂ±ûÊÄßËé∑ÂèñÂÆåÂ±ûÊÄßÂêé‰∏∫‰ªÄ‰πàË∞ÉÁî®TypeArray.recycle()Ôºü12345678910111213141516171819202122/** * Recycles the TypedArray, to be re-used by a later caller. After calling * this function you must not ever touch the typed array again. * * @throws RuntimeException if the TypedArray has already been recycled. */ //Â§ßÊ¶ÇÊÑèÊÄùÊòØËØ¥ÂõûÊî∂Ëøô‰∏™TypedArray, Â∞Ü‰ºöË¢´Â§çÁî®ÂΩìÂÜçÊ¨°Ë∞ÉÁî®ÁöÑÊó∂ÂÄôÔºåÂΩì‰Ω†Ë∞ÉÁî®Ëøô‰∏™ÊñπÊ≥ï‰πãÂêé‰Ω†Â∞±‰∏çËÉΩÂÜçÊìç‰Ωúnot touch the typed public void recycle() &#123; if (mRecycled) &#123; //Â¶ÇÊûúÂ∑≤ÁªèË¢´ÂõûÊî∂ÔºåÂ∞±‰ºöÊäõÂá∫ÂºÇÂ∏∏ throw new RuntimeException(toString() + " recycled twice!"); &#125; mRecycled = true; // These may have been set by the client. mXml = null; mTheme = null; mAssets = null; //Áúã‰∏ãÈù¢ mResources.mTypedArrayPool.release(this); &#125; 1234public class Resources&#123; // Pool of TypedArrays targeted to this Resources object. final SynchronizedPool&lt;TypedArray&gt; mTypedArrayPool = new SynchronizedPool&lt;&gt;(5);&#125; Áúã‰∏äÈù¢ÁöÑÈÇ£‰∏™Â§ßÊ¶ÇÊÑèÊÄùÂ∞±ÊòØ‰ªé‰∏Ä‰∏™ÂêåÊ≠•Ê±†Â≠êÈáåËé∑ÂèñÂà∞ÁöÑÔºåÈªòËÆ§Â§ßÂ∞èÊòØ5. Âπ≥Â∏∏Êàë‰ª¨Ëé∑ÂèñÁöÑÂ±ûÊÄßÊòØÈÄöËøáÔºö 1TypedArray ta = context.obtainStyledAttributes(attrs, R.styleable.xx); context ÁöÑ‰∏Ä‰∏™ÈùôÊÄÅÊñπÊ≥ïÔºåÁÇπËøõÂéªÁúãÁúãÔºö 12345678910111213141516171819202122232425262728//ÊúÄÁªàÂà∞‰∫ÜËøôÈáåpublic class TypedArray &#123; static TypedArray obtain(Resources res, int len) &#123; //ËøôÈáå Â∞±ÊòØ‰ªé‰∏äËø∞‰∏Ä‰∏™SynchronizedPool ‰∏≠Ëé∑ÂèñÁöÑ final TypedArray attrs = res.mTypedArrayPool.acquire(); if (attrs != null) &#123; attrs.mLength = len; attrs.mRecycled = false; // Reset the assets, which may have changed due to configuration changes // or further resource loading. attrs.mAssets = res.getAssets(); final int fullLen = len * AssetManager.STYLE_NUM_ENTRIES; if (attrs.mData.length &gt;= fullLen) &#123; return attrs; &#125; attrs.mData = new int[fullLen]; attrs.mIndices = new int[1 + len]; return attrs; &#125; return new TypedArray(res, new int[len*AssetManager.STYLE_NUM_ENTRIES], new int[1+len], len); &#125; SynchronizedPool 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960/** * Simple (non-synchronized) pool of objects. * * @param &lt;T&gt; The pooled type. */ public static class SimplePool&lt;T&gt; implements Pool&lt;T&gt; &#123; private final Object[] mPool; private int mPoolSize; /** * Creates a new instance. * * @param maxPoolSize The max pool size. * * @throws IllegalArgumentException If the max pool size is less than zero. */ public SimplePool(int maxPoolSize) &#123; if (maxPoolSize &lt;= 0) &#123; throw new IllegalArgumentException("The max pool size must be &gt; 0"); &#125; mPool = new Object[maxPoolSize]; &#125; @Override @SuppressWarnings("unchecked") //‰ªépool ‰∏≠Ëé∑Âèñ public T acquire() &#123; if (mPoolSize &gt; 0) &#123; final int lastPooledIndex = mPoolSize - 1; T instance = (T) mPool[lastPooledIndex]; mPool[lastPooledIndex] = null; mPoolSize--; return instance; &#125; return null; &#125; @Override public boolean release(T instance) &#123; if (isInPool(instance)) &#123; throw new IllegalStateException("Already in the pool!"); &#125; if (mPoolSize &lt; mPool.length) &#123; mPool[mPoolSize] = instance; mPoolSize++; return true; &#125; return false; &#125; private boolean isInPool(T instance) &#123; for (int i = 0; i &lt; mPoolSize; i++) &#123; if (mPool[i] == instance) &#123; return true; &#125; &#125; return false; &#125; &#125; Áª¥Êä§‰∏Ä‰∏™ÂêåÊ≠•Ê†àÁªìÊûÑÁöÑÂØπË±°Ê±†ÔºåÈÅøÂÖçÈáçÂ§çÈ¢ëÁπÅÂàõÂª∫Â±ûÊÄßÂÄº TypeArray ÂØπË±°Ôºå‰ΩøÁî®Êó∂ËÆ∞ÂæóË∞ÉÁî® Recycle() ÊñπÊ≥ïÂ∞Ü‰∏çÁî®ÁöÑÂØπË±°ËøîÂõûËá≥ÂØπË±°Ê±†Êù•ËææÂà∞ÈáçÁî®ÁöÑÁõÆÁöÑÔºåÂ¶ÇÊûú‰∏çË∞ÉÁî® recycle() ÊñπÊ≥ïÂ∞Ü‰ºöÈöèÁùÄ ActivityÁöÑÊØè‰∏ÄÊ¨°ÂàõÂª∫ËÄåÂàõÂª∫ÔºåÂõ†Ê≠§Á≥ªÁªüÈ¢ëÁπÅÂàõÂª∫ array, ÂØπÂÜÖÂ≠òÂíåÊÄßËÉΩÊòØ‰∏Ä‰∏™‰∏çÂ∞èÁöÑÂºÄÈîÄÔºåÂ¶ÇÊûú‰∏ç‰ΩøÁî®Ê±†ÔºåÊØèÊ¨°ÈÉΩËÆ© GC Êù•ÂõûÊî∂ÔºåÂæàÂèØËÉΩÂ∞±‰ºöÈÄ†Êàê OOM. 9. Ëá™ÂÆö‰πâÂ±ûÊÄß123456789101112//Ëá™ÂÆö‰πâÂ±ûÊÄß‰∏ÄËà¨Êàë‰ª¨‰ºöÂú®values-attr.xml ‰∏≠ÂÆö‰πâÔºåÂ¶Ç‰∏ãÔºö&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;resources&gt; &lt;!--Á¨¨‰∏ÄÁßçÊñπÂºèÔºåÂú®declare-styleableÊ†áÁ≠æ‰∏≠--&gt; &lt;declare-styleable name="customerView"&gt; &lt;attr name="colors" format="color" /&gt; &lt;/declare-styleable&gt; &lt;!--Á¨¨‰∫åÁßçÊñπÂºèÔºåÂçïÁã¨ÂÆö‰πâÂ±ûÊÄß--&gt; &lt;attr name="AloneAttr" format="color" /&gt;&lt;/resources&gt; ‰∏§ÁßçÊñπÂºèÊúâ‰ªÄ‰πàÂå∫Âà´Âë¢Ôºü Á¨¨‰∏ÄÁßçÊñπÂºè‰ºöÊääÊúâÂÖ≥Ëøô‰∏™Êéß‰ª∂ÁöÑÂ±ûÊÄßÂåÖË£πËµ∑Êù•ÔºåËææÂà∞‰∏Ä‰∏™ÂàÜÁªÑÁöÑÊ¶ÇÂøµÔºå‰∏çÈõ∂Êï£ÔºåÂ±ûÊÄßÁöÑ‰ΩøÁî®ËåÉÂõ¥Êõ¥Âä†ÊòéÁ°ÆÔºå Á¨¨‰∏ÄÁßçÊñπÂºèËé∑ÂèñÂ±ûÊÄßÂÄºÔºö 1TypedArray ta = context.obtainStyledAttributes(attrs,R.styleable.customerView); Á¨¨‰∫åÁßçÊñπÂºèËé∑ÂèñÂ±ûÊÄßÂÄºÔºö 12int[] array = &#123;R.attr.AloneAttr&#125;;TypedArray ta = context.obtainStyledAttributes(attrs,array);]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidÁü•ËØÜÁÇπÊÄªÁªì‰∫å]]></title>
    <url>%2F2018%2F11%2F14%2FAndroid%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[1. Canvas.save() Ë∑ü Canvas.restore()ÁöÑË∞ÉÁî®Êó∂Êú∫ save: Áî®Êù•‰øùÂ≠ò Canvas ÁöÑÁä∂ÊÄÅ„ÄÇsave ‰πãÂêéÔºåÂèØ‰ª•Ë∞ÉÁî®Canvas ÁöÑÂπ≥ÁßªÔºåÊîæÁº©ÔºåÊóãËΩ¨Á≠âÊìç‰Ωú„ÄÇ restore: Áî®Êù•ÊÅ¢Â§çcanvas ‰πãÂâç‰øùÂ≠òÁöÑÁä∂ÊÄÅ„ÄÇÈò≤Ê≠¢save ÂêéÂØπCanvas ÊâßË°åÁöÑÊìç‰ΩúÂØπÂêéÁª≠ÁöÑÁªòÂà∂ÊúâÂΩ±Âìç„ÄÇ 2. Android P(9.0) ÁöÑÊñ∞ÁâπÊÄß ÊîØÊåÅWiFiÂÆ§ÂÜÖÂÆö‰Ωç ÈÄÇÈÖçÂàòÊµ∑Â±è ÈÄöÁü•Ê†èÊîπËøõÔºöÂèØ‰ª•ÊòæÁ§∫ÂØπËØùÔºåÈôÑÂä†ÁÖßÁâáÂíåË°®ÊÉÖÁ≠â Â§öÊëÑÂÉèÂ§¥api ÂØπ‰∫éÈùû http ËøûÊé•ÔºåÂ∞ÜÁõ¥Êé•Êã¶Êà™ÔºåÊé®Ëçê‰ΩøÁî®https Android 8.0 PHONE ÊùÉÈôêÁªÑÊñ∞Â¢ûÂä†‰∏§‰∏™ÊùÉÈôê ANSWER_PHONE_CALLS:ÂÖÅËÆ∏ÊÇ®ÁöÑÂ∫îÁî®ÈÄöËøáÁºñÁ®ãÊñπÂºèÊé•Âê¨ÂëºÂÖ•ÁîµËØù„ÄÇË¶ÅÂú®ÊÇ®ÁöÑÂ∫îÁî®‰∏≠Â§ÑÁêÜÂëºÂÖ•ÁîµËØùÔºåÊÇ®ÂèØ‰ª•‰ΩøÁî® assceptRingingCall() ÂáΩÊï∞ READ_PHONE_NUMBERS: ÊùÉÈôêÂÖÅËÆ∏ÊÇ®ÁöÑÂ∫îÁî®ËØªÂèñËÆæÂ§á‰∏≠Â≠òÂÇ®ÁöÑÁîµËØùÂè∑Á†Å ÈÄöÁü•ÈÄÇÈÖç ‰∏∫‰∫ÜÊõ¥Â•ΩÁöÑÁÆ°ÁêÜÈÄöÁü•ÁöÑÊèêÈÜíÔºå‰∏çÊÉ≥‰∏Ä‰∫õ‰∏çÈáçË¶ÅÁöÑÈÄöÁü•ÊâìÊâ∞Áî®Êà∑ÔºåÊñ∞Â¢ûÂä†Áî®Êà∑Ê∏†ÈÅìÔºåÁî®Êà∑ÂèØÊ†πÊçÆÊ∏†ÈÅìÂ±èËîΩ‰∏Ä‰∫õ‰∏çÈáçË¶ÅÁöÑÈÄöÁü• ÂÆâË£Öapk Âú® AndroidManifest Êñá‰ª∂‰∏≠Ê∑ªÂä†Êú™Áü•Êù•Ê∫êÂ∫îÁî®ÁöÑÊùÉÈôêÔºö &lt;uses-permission android:name=&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot;/&gt; ËøôÊ†∑Á≥ªÁªü‰ºöËá™Âä®ËØ¢ÈóÆÁî®Êà∑ÂÆåÊàêÊéàÊùÉ„ÄÇ ‰πüÂèØ‰ª•ÈÄöËøá canRequestPackageInstalls Êü•ËØ¢ÊòØÂê¶ÊúâÊ≠§ÊùÉÈôêÔºåÂ¶ÇÊûúÊ≤°ÊúâÁöÑËØùÂ∞±‰ΩøÁî® Settings.ACTION_MANAGE_UNKNOW_APP_SOURCE ÂºïÂØºÁî®Êà∑ÂÆâË£ÖÊú™Áü•Â∫îÁî®ÊùÉÈôêÂéªÊéàÊùÉ„ÄÇ 123456789101112131415161718if(Build,VERSION&gt;SDK_INT &gt;= 26)&#123; Boolean isInstall = getPackageManager().canRequestPackageInstalls();//26‰ª•‰∏ä if(isInstall)&#123; //ÊúâÊ≠§ÊùÉÈôêÔºåÂÆâË£ÖÂ∫îÁî® &#125;else&#123; //Ë∑≥ËΩ¨Âà∞ ÂÆâË£ÖÊú™Áü•Â∫îÁî® ÊùÉÈôêÁïåÈù¢ÔºåÂºïÂØºÁî®Êà∑ÂºÄÂêØÊùÉÈôê Uri selfPackageUri = Uri.parse("package:" + this.getPackageName()); Intent intent = new Intent(Settings.ACTION_MANAGE_UNKNOWN_APP_SOURCES, selfPackageUri); startActivityForResult(intent, REQUEST_CODE_UNKNOWN_APP)&#125; @Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; super.onActivityResult(requestCode, resultCode, data); if (requestCode == REQUEST_CODE_UNKNOWN_APP) &#123; //Â¶ÇÊûúÊùÉÈôêÂºÄÂêØÔºåÂàôÂºÄÂßãÂÆâË£ÖÂ∫îÁî® &#125; &#125; ÈùôÊÄÅÂπøÊí≠Êó†Ê≥ïÊ≠£Â∏∏Êé•Âèó Android N(7.0) ÁöÑÊñ∞ÁâπÊÄß ÁßÅÊúâÊñá‰ª∂Â§ñÈÉ®Â∞Ü‰∏çËÉΩËÆøÈóÆÔºåÈÄöËøáFileProvider ÂèØËß£ÂÜ≥ SharedPreferences ËøõÁ®ãÈó¥ÈÄö‰ø°Ê®°ÂºèÈó™ÈÄÄÔºåSecurityException Android 6.0 ËøêË°åÊó∂ÊùÉÈôêÁöÑÁî≥ËØ∑ https ÁöÑÊé®Ëçê 3. APK ÂÜÖÂÆπ assets Â≠òÊîæÈúÄË¶ÅÊâìÂåÖÂà∞ APK ‰∏≠ÁöÑÈùôÊÄÅÊñá‰ª∂ lib ÁõÆÂΩï nativeÂ∫ì res ÁõÆÂΩï Â≠òÊîæÂ∫îÁî®Á®ãÂ∫èÁöÑËµÑÊ∫ê META-INF Â≠òÊîæÂ∫îÁî®Á®ãÂ∫èÁ≠æÂêçÂíåËØÅ‰π¶ÁöÑÁõÆÂΩï AndroidManifest.xml classes.dex resources.arsc ËµÑÊ∫êÈÖçÁΩÆÊñá‰ª∂ 4. Binder Êú∫Âà∂ÁöÑ‰ºòÁÇπ Linux ‰∏≠‰ΩøÁî®ÁöÑ IPC ÈÄö‰ø°Êú∫Âà∂ÊúâÔºöpipe(ÁÆ°ÈÅì)Ôºåsignal(‰ø°Âè∑Èáè)ÔºåSocket socket:ÊòØ‰∏Ä‰∏™ÈÄöÁî®Êé•Âè£Ôºå‰º†ËæìÊïàÁéá‰ΩéÔºåÂºÄÈîÄÊØîËæÉÂ§ßÔºõ ÁÆ°ÈÅìÂíåÊ∂àÊÅØÈòüÂàóÔºöÈááÁî®Â≠òÂÇ®ËΩ¨ÂèëÊñπÂºèÔºåÊâÄ‰ª•Ëá≥Â∞ëÈúÄË¶ÅÊã∑Ë¥ù2Ê¨°Êï∞ÊçÆÔºåÊïàÁéá‰ΩéÔºåÂÖ±‰∫´ÂÜÖÂ≠òËôΩÁÑ∂Âú®‰º†ËæìÊó∂Ê≤°ÊúâÊã∑Ë¥ùÊï∞ÊçÆÔºå‰ΩÜÂÖ∂ÊéßÂà∂Êú∫Âà∂Â§çÊùÇÔºåËÄå Binder Êõ¥Â•Ω‰º†ËæìÊÄßËÉΩ„ÄÇ ÂÆâÂÖ®ÊÄßÊõ¥È´òÔºåÂèØ‰ª•Âª∫Á´ãÁßÅÊúâÈÄöÈÅìÔºåÊúâË∫´‰ªΩÊ†áËØÜÔºàUID/PIDÔºâ Âè¶Â§ñ‰∏Ä‰∏™‰ºòÁÇπÂ∞±ÊòØÔºåÈÄöËøábinder ÂèØ‰ª•ÂæàÊñπ‰æøÁöÑË∞ÉÁî®server Á´ØÁöÑÊñπÊ≥ïÔºåÁäπÂ¶ÇË∞ÉÁî®Êú¨Âú∞ÊñπÊ≥ï‰∏ÄÊ†∑„ÄÇ 5. Gradle ÁöÑÁîüÂëΩÂë®Êúü 1.ÂàùÂßãÂåñ ÂàùÂßãÂåñ‰∏ªË¶ÅÊòØËØªÂèñ settings.gragle Êñá‰ª∂ÔºåÁî®‰∫éÁ°ÆÂÆöÂì™‰∫õÈ°πÁõÆÂèÇ‰∏éÊûÑÂª∫ÔºåÂπ∂ÂàõÂª∫Project ÂÆû‰æã 2.ÈÖçÁΩÆ ÈÖçÁΩÆÈò∂ÊÆµ‰∏ªË¶ÅÊòØ‰∏∫ÊØè‰∏™ build.gradle Êñá‰ª∂ÈÖçÁΩÆ project ÂØπË±° 3.ÊâßË°å ‰∏ªË¶ÅÊ†πÊçÆ gradle ÂëΩ‰ª§Âíå‰º†ÂÖ•ÂèÇÊï∞ÂàõÂª∫Âπ∂ÊâßË°å‰ªªÂä°]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈöèÁ¨îËÆ∞ÂΩïAndroid]]></title>
    <url>%2F2018%2F11%2F13%2F%E9%9A%8F%E7%AC%94%E8%AE%B0%E5%BD%95Android%2F</url>
    <content type="text"><![CDATA[1. Android‰∏≠Êï∞ÊçÆÂ≠òÂÇ®ÁöÑÊñπÂºè FIle SharedPreference Sqlite ÁΩëÁªú ContentProvider FileProvider : ÁªßÊâø‰∫é ContentProvider ÁöÑÂ≠êÁ±ªÔºåÂèØ‰ª•Áî®‰∫éËß£ÂÜ≥Android7.0‰∏≠Á¶ÅÊ≠¢Êàë‰ª¨ÁöÑÂ∫îÁî®ÂØπÂ§ñÈÉ®ÂÖ¨ÂºÄfile://ÁöÑÈóÆÈ¢ò„ÄÇ 2. SharedPreference ÊòØËøõÁ®ãÂêåÊ≠•ÁöÑÂêó sharedPreference ÈªòËÆ§‰∏çÊòØÁ∫øÁ®ãÂêåÊ≠•ÁöÑÔºåÂèØ‰ª•ËÆæÁΩÆÊ®°Âºè‰∏∫ÔºöMODE_MULTI_PROCESS ÂÅöÂà∞ËøõÁ®ãÂêåÊ≠•ÔºåÁ≥ªÁªüÈªòËÆ§‰πüÊòØÊúâÁºìÂ≠òÁöÑÔºåÊúâÂæàÂ§öÈóÆÈ¢òÔºåÂú®Android NÔºà7.0Ôºâ‰ª•‰∏äÂ∫üÂºÉ‰∏çËÉΩ‰ΩøÁî®‰∫ÜÔºå‰ºöÊäõÂá∫ÂºÇÂ∏∏„ÄÇÊé®Ëçê‰ΩøÁî® ContentProvider sharedPreference ÂõõÁßçÊ®°ÂºèÔºö MODE_PRIVATE MODE_MULTI_PROCESS MODE_WORLD_READABLE MODE_WORLD_WRITEABLE 3.Shareferences commit Âíå apply ÁöÑÂå∫Âà´ Âú®ÂæàÊó©ÁöÑsdkÂΩì‰∏≠Ôºå‰∏ÄËà¨ÈÉΩ‰ΩøÁî® commit ÊñπÊ≥ïÔºåÂêåÊ≠•ÔºåÁõ¥Êé•ÂÜôÂÖ•Á£ÅÁõòÔºåÂπ∂‰∏îÊúâËøîÂõûÁªìÊûú boolean Á±ªÂûãÔºåËÄå apply ÊòØÂºÇÊ≠•, ÂÖàÂÜôÂÖ•ÂÜÖÂ≠òÔºåÁÑ∂ÂêéÂºÇÊ≠•ÂÜôÂÖ•Á£ÅÁõò„ÄÇ Â¶ÇÊûúÊìç‰ΩúÈ¢ëÁπÅÁöÑËØùÔºåapply ÁöÑÊÄßËÉΩ‰ºò‰∫é commit. Âú®ÈòøÈáåÂ∑¥Â∑¥ÂºÄÂèëÊâãÂÜå‰∏≠‰πüËÆ∞ÂΩïÂà∞Ôºö SharedPreference Êèê ‰∫§ Êï∞ ÊçÆ Êó∂ Ôºå Â∞Ω Èáè ‰Ωø Áî® Editor#apply()ÔºåËÄåÈùûEditor#commit()„ÄÇ‰∏ÄËà¨Êù•ËÆ≤Ôºå‰ªÖÂΩìÈúÄË¶ÅÁ°ÆÂÆöÊèê‰∫§ÁªìÊûúÔºåÂπ∂ÊçÆÊ≠§ÊúâÂêéÁª≠Êìç‰ΩúÊó∂ÔºåÊâç‰ΩøÁî® Editor#commit()„ÄÇ 4. View ÁöÑ measureSpec Áî±Ë∞ÅÂÜ≥ÂÆöÁöÑ ViewÁöÑMeasureSpec Áî±Ëøô‰∏™Áà∂Êéß‰ª∂ÁöÑMeasureSpec ÂíåËá™Ë∫´ÁöÑ LayoutParams ÂÜ≥ÂÆö È°∂Á∫ß DecorView Áî±Á™óÂè£Â∞∫ÂØ∏ÂíåËá™Ë∫´ÁöÑ LayoutParams ÂÖ±ÂêåÁ°ÆÂÆö 5.ACTION_CANCEL ‰∫ã‰ª∂ ‰∏ÄËà¨Êù•ËØ¥ÔºåÂ¶ÇÊûú‰∏Ä‰∏™Â≠êËßÜÂõæÊé•Âèó‰∫ÜÁà∂ËßÜÂõæÂàÜÂèëÁªôÂÆÉÁöÑ ACTION_DOWN ‰∫ã‰ª∂ÔºåÈÇ£‰πà‰∏éACTION_DOWN ‰∫ã‰ª∂Áõ∏ÂÖ≥ÁöÑ‰∫ã‰ª∂ÈÉΩË¶ÅÂàÜÂèëÁªôËøô‰∏™Â≠êËßÜÂõæÔºå‰ΩÜÊòØÂ¶ÇÊûúÁà∂ËßÜÂõæÂ∏åÊúõÊã¶Êà™ÂÖ∂‰∏≠ÁöÑ‰∏Ä‰∫õ‰∫ã‰ª∂Ôºå‰∏çÂÜçÁªßÁª≠ËΩ¨Âèë‰∫ã‰ª∂ÁªôËøô‰∏™Â≠êËßÜÂõæÁöÑËØùÔºåÈÇ£‰πàÂ∞±ÈúÄË¶ÅÁªôÂ≠êËßÜÂõæ‰∏Ä‰∏™ACTION_CANCEL ‰∫ã‰ª∂„ÄÇ 6. ViewÁöÑinvalidate postInvalidate requestLayoutÂå∫Âà´ invalidate ‰ºöË∞ÉÁî® onDraw ËøõË°åÈáçÁªòÔºåÂè™ËÉΩÂú®‰∏ªÁ∫øÁ®ã postIncalidate ÂèØ‰ª•Âú®ÂÖ∂ÂÆÉÁ∫øÁ®ãÔºåÂ¶ÇÂ≠êÁ∫øÁ®ã requestLayout ‰ºöË∞ÉÁî® onLayout Âíå onMeasure ,‰∏ç‰∏ÄÂÆö‰ºöË∞ÉÁî® onDraw 7. View ÁöÑÁîüÂëΩÂë®Êúü Creation ÂàõÂª∫Ôºà‰ªéxml‰∏≠Âä†ËΩΩÊàñËÄÖlayout Êñá‰ª∂‰∏≠ÂÆö‰πâÂä†ËΩΩÔºâ onFinishInflate() ‰ªéxml‰∏≠Âä†ËΩΩÂÆåÊàê Layout Â∏ÉÂ±Ä onMeasure() onLayout() Drawing ÁªòÂà∂ onDraw() Event processing ‰∫ã‰ª∂Â§ÑÁêÜ Focus ËÅöÁÑ¶ onFocusChanged() onWindowFocusChanged() Attaching ÈôÑ‰∏ä onAttachingToWindow() onDetachedFromWindow() onVisibiltyChanged() onWindowVisibiltyChanged()]]></content>
      <tags>
        <tag>Android</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[javaÂü∫Á°Ä‰∫å]]></title>
    <url>%2F2018%2F11%2F13%2Fjava%E5%9F%BA%E7%A1%80%E4%BA%8C%2F</url>
    <content type="text"><![CDATA[1. HashMap1234public class HashMap&lt;K,V&gt; extends AbstractMap&lt;K,V&gt; implements Map&lt;K,V&gt;, Cloneable, Serializable &#123; .....&#125; Êú™ÂÆåÂæÖÁª≠‚Ä¶.‰ªçÈúÄË¶ÅÊü•ÈòÖÂ§ßÈáèËµÑÊñôÂ≠¶‰π†‚Ä¶. 2.Java ÂÜÖÂ≠òÂàÜÈÖç Ê†àÂå∫ÔºöÊñπÊ≥ïÂå∫ÂÜÖÁöÑÂ±ÄÈÉ®ÂèòÈáèÔºåÂØπË±°ÁöÑÂºïÁî®Á≠â ‰ºòÁÇπÔºöÈÄüÂ∫¶Âø´ÔºåÁº∫ÁÇπÔºöÂ§ßÂ∞èÂíåÁîüÂëΩÂë®ÊúüÂøÖÈ°ªÊòØÁ°ÆÂÆöÁöÑ„ÄÇ Â†ÜÂå∫ÔºönewÂá∫Êù•ÁöÑÂØπË±°ÔºåÂûÉÂúæÂõûÊî∂Âô®ÂõûÊî∂ÁöÑÊòØÂ†ÜÂå∫ÁöÑÂÜÖÂ≠ò ÊñπÊ≥ïÂå∫ÔºàÈùôÊÄÅÂå∫ÔºâÔºöÈùôÊÄÅÂèòÈáèÔºåÂ∏∏ÈáèÔºå‰øùÂ≠òÁ±ª‰ø°ÊÅØ 3.ÂûÉÂúæ ‰ªÄ‰πàÊòØÂûÉÂúæÔºüË¶ÅÈÄöËøáÁßëÂ≠¶ÁöÑÊñπÊ≥ïÊâçËÉΩÂà§Êñ≠ÊòØÂê¶ÊòØ‰∏∫ÂûÉÂúæÔºåÊúâ‰∏§ÁßçÊñπÊ≥ï ÂºïÁî®ËÆ°Êï∞Ê≥ïÔºöÂèØËÉΩ‰ºöÂØºËá¥ÂÜÖÈÉ®Âæ™ÁéØ ÂèØËææÊÄßÂàÜÊûêÔºöÊòØÂê¶ÂèØËææ ÂÄüÂä©‰∏Ä‰∏™ÂõæÂø´ÈÄüÁêÜËß£ ÂºïÁî®ËÆ°Êï∞Ê≥ïÔºö ‰ª£Á†ÅÔºö 123456789101112/**Âæ™ÁéØÈóÆÈ¢ò*/public class Demo&#123; public Demo instance; public static void main(String[] args) &#123; Demo a=new Demo(); Demo b=new Demo(); a.instance=b; b.instance=a; a=null; b=null; &#125;&#125; ÂÜçÁúã‰∏ãËøô‰∏™ ÂèØËææÊÄßÂàÜÊûê Ôºö ObjD Âíå ObjE ËôΩÁÑ∂ÂÜÖÈÉ®Â≠òÂú®ÂºïÁî®Ôºå‰ΩÜÊòØÂÆöÁÇπ‰∏çÂèØËææÔºåÊâÄ‰ª•‰πüÊòØÂûÉÂúæÂõûÊî∂ÁöÑÂØπË±°„ÄÇ 4.ÂûÉÂúæÂõûÊî∂ÁöÑÊñπÊ≥ï Ê†áËÆ∞-Ê∏ÖÈô§ÔºöÂáèÂ∞ëÂÅúÈ°øÊó∂Èó¥Ôºå‰ΩÜ‰ºöÈÄ†ÊàêÂÜÖÂ≠òÁ¢éÁâá Ê†áËÆ∞-Êï¥ÁêÜÔºöÂèØ‰ª•Ëß£ÂÜ≥ÂÜÖÂ≠òÁ¢éÁâáÔºå‰ΩÜÊòØ‰ºöÂ¢ûÂä†ÂÅúÈ°øÊó∂Èó¥ Â§çÂà∂Ê∏ÖÈô§Ôºö‰ªé‰∏Ä‰∏™Âú∞ÊñπÊã∑Ë¥ùÂà∞Âè¶‰∏Ä‰∏™Âú∞ÊñπÔºåÈÄÇÂêàÊúâÂ§ßÈáèÂõûÊî∂ÁöÑÂú∫ÊôØÔºåÊØîÂ¶ÇÔºöÊñ∞Áîü‰ª£ÂõûÊî∂ ‰ºòÁÇπÔºöÊïàÁéáÈ´ò‰∫éÊ†áËÆ∞Ê∏ÖÈô§ÔºåÊ¥ªÁùÄÁöÑÂØπË±°ÊòØÊï¥ÈΩêÊéíÂàóÁöÑÔºåÊ≤°ÊúâÂÜÖÂ≠òÁ¢éÁâá Áº∫ÁÇπÔºö Êµ™Ë¥πÁ©∫Èó¥ÔºåÊØïÁ´üÂ¶ÇÊûúÊåâÁÖß1Ôºö1ÊØî‰æãÂàíÂàÜÁ©∫Èó¥ÁöÑËØùÔºåÈÇ£‰πàÂ∞Ü‰ºöÊúâ50%ÁöÑÁ©∫Èó¥Ë¢´Êµ™Ë¥π„ÄÇ‰∏çËøáÂú®jvm‰∏≠ÔºåÊñ∞Áîü‰ª£Á©∫Èó¥Âπ∂‰∏çÊòØÊåâÁÖß1Ôºö1Êù•ÂàíÂàÜÁöÑÔºåËÄåÊòØÊåâÁÖß8Ôºö1Ôºö1ÁöÑÊØî‰æãÂàÜ‰∏∫‰∏Ä‰∏™eden Âå∫ Âíå‰∏§‰∏™survivor(survivor0,survivor1) Âå∫ÔºåÁÑ∂Âêé‰∏Ä‰∏™eden Âå∫Ôºå‰∏§‰∏™survivor Âå∫„ÄÇÂ§ßÈÉ®ÂàÜÂØπË±°Âú®Eden Âå∫‰∏≠ÁîüÊàê„ÄÇÂõûÊî∂Êó∂ÂÖàÂ∞Üeden Âå∫Â≠òÊ¥ªÂØπË±°Â§çÂà∂Âà∞‰∏Ä‰∏™survicor0 Âå∫ÔºåÁÑ∂ÂêéÊ∏ÖÁ©∫eden Âå∫ÔºåÂΩìËøô‰∏™survivor0Âå∫‰πüÂ≠òÊîæÊª°‰∫ÜÊó∂ÔºåÂàôÂ∞ÜedenÂå∫Âíåsurvivor0Âå∫Â≠òÊ¥ªÂØπË±°Â§çÂà∂Âà∞Âè¶‰∏Ä‰∏™survivor1 Âå∫ÔºåÁÑ∂ÂêéÊ∏ÖÁ©∫eden Âå∫Âíåsurvivor0 Âå∫ÔºåÊ≠§Êó∂survivor0Âå∫ÊòØÁ©∫ÁöÑÔºåÁÑ∂ÂêéÂ∞Üsurvivor0Âå∫Âíåsurvivor1Âå∫‰∫§Êç¢ÔºåÂç≥‰øùÊåÅsurvivor1Âå∫‰∏∫Á©∫ÔºåËøôÊ†∑ÁöÑËøáÁ®ã‰πüÂè´ÂÅöMinor GC,ÊØèËøõË°åMinor GC ‰∏ÄÊ¨°ÔºåÂ≠òÊ¥ªÁùÄÁöÑÂØπË±°ÁöÑÂπ¥ÈæÑÂ∞±‰ºö+1ÔºåÂΩìÂ≠òÊ¥ªÁùÄÁöÑÂØπË±°ÁöÑÂπ¥ÈæÑÂà∞Ëææ15Â≤ÅÊó∂ÔºåÂ∞±‰ºöË¢´ÈÄÅËøõÂπ¥ËÄÅ‰ª£„ÄÇ ÂΩìÁÑ∂ÔºåÂΩìÊï¥‰∏™survivor1Âå∫‰∏çË∂≥‰ª•Â≠òÊîæEdenÂíåsurvivor0ÁöÑÂ≠òÊ¥ªÂØπË±°Êó∂Ôºå‰πü‰ºöÂ∞ÜÂ≠òÊ¥ªÂØπË±°Áõ¥Êé•ÊîæÂà∞Âπ¥ËÄÅ‰ª£„ÄÇËã•ÊòØÂπ¥ËÄÅ‰ª£‰πüÊª°‰∫ÜÂ∞±‰ºöËß¶Âèë‰∏ÄÊ¨°Full GCÔºå‰πüÂ∞±ÊòØÊñ∞Áîü‰ª£ÔºåËÄÅÂπ¥‰ª£ÈÉΩËøõË°åÂõûÊî∂„ÄÇ ÂàÜ‰ª£Êî∂ÈõÜÔºöÊääÂÜÖÂ≠òÂå∫ÂüüÂàÜÊàê‰∏çÂêå‰ª£ÔºåÊ†πÊçÆÂπ¥‰ª£‰∏çÂêåÈááÂèñ‰∏çÂêåÁöÑÁ≠ñÁï•Ôºõ Êñ∞Áîü‰ª£ÔºöÂ≠òÊîæÊñ∞ÂàõÂª∫ÁöÑÂØπË±°ÔºåÈááÁî®Â§çÂà∂ÂõûÊî∂ÊñπÊ≥ï Âπ¥ËÄÅ‰ª£ÔºöËøô‰∫õÂØπË±°ÂûÉÂúæÂõûÊî∂ÁöÑÈ¢ëÁéáËæÉ‰ΩéÔºåÈááÂèñÊ†áËÆ∞Êï¥ÁêÜÊ≥ï Ê∞∏‰πÖ‰ª£ÔºöÂ≠òÊîæJavaÊú¨Ë∫´ÁöÑ‰∏Ä‰∫õÊï∞ÊçÆÔºåÂΩìÁ±ª‰∏çÂÜç‰ΩøÁî®Êó∂Ôºå‰πü‰ºöË¢´ÂõûÊî∂ ÊâãÁ®øÔºö 5. Full GC Ëß¶ÂèëÁöÑÊù°‰ª∂ Ë∞ÉÁî® System.gc Êó∂ÔºåÁ≥ªÁªüÂª∫ËÆÆÊâßË°åFull GC ‰ΩÜÊòØ‰∏çÂøÖÁÑ∂ÊâßË°å Âπ¥ËÄÅ‰ª£ÊàñËÄÖÊ∞∏‰πÖ‰ª£Á©∫Èó¥‰∏çË∂≥ 6. Á∫øÁ®ãË∞ÉÂ∫¶ wait() : object ÊñπÊ≥ïÔºåÂøÖÈ°ªÂú®ÂêåÊ≠•‰ª£Á†ÅÂùó‰∏≠‰ΩøÁî®Ôºå‰ΩøÂΩìÂâçÁ∫øÁ®ãÂ§Ñ‰∫éÁ≠âÂæÖÁä∂ÊÄÅÔºåÈáäÊîæÈîÅ notify() Ôºö Âíå wait ËÅîÂêà‰ΩøÁî®ÔºåÈÄöÁü•‰∏Ä‰∏™Á∫øÁ®ãÔºåÂÖ∑‰ΩìÈÄöÁü•Âì™‰∏™Áî±jvm ÂÜ≥ÂÆöÔºå‰ΩøÁî®‰∏çÂΩìÂèØËÉΩÂèëÁîüÊ≠ªÈîÅ notifyAll() Ôºö Âíåwait ÊñπÊ≥ïËÅîÂêà‰ΩøÁî®ÔºåÈÄöÁü•ÊâÄÊúâÁ∫øÁ®ãÔºåÂÖ∑‰ΩìÂì™‰∏™Á∫øÁ®ãËé∑ÂæóËøêË°åÊùÉ jvm ÂÜ≥ÂÆö sleep() Ôºö Áù°Áú†Áä∂ÊÄÅ 7.Á∫øÁ®ãÂêåÊ≠• Synchronzied ‰øÆÈ•∞ ThreadLocal : ÊØè‰∏™Á∫øÁ®ãÈÉΩÊúâ‰∏Ä‰∏™Â±ÄÈÉ®ÂèòÈáèÁöÑÂâØÊú¨Ôºå‰∫í‰∏çÂπ≤Êâ∞„ÄÇ‰∏ÄÁßç‰ª•Á©∫Èó¥Êç¢Êó∂Èó¥ÁöÑÊñπÂºè„ÄÇ Á∫øÁ®ãÂÆâÂÖ®ÁöÑÂÆπÂô®ÂíåÊñπÊ≥ïÔºåÂèØ‰ª•ÂÆûÁé∞Á∫øÁ®ãÂêåÊ≠•ÔºåÂ¶ÇÔºö Collections.SynchronizedList() Â∞Ü List ËΩ¨‰∏∫Á∫øÁ®ãÂêåÊ≠•ÔºõÁî®ConurrentHashMap ÂÆûÁé∞hashmap Á∫øÁ®ãÂêåÊ≠•„ÄÇ volatile ‰øÆÈ•∞ÁöÑÂèòÈáè‰∏ç‰ºöÁºìÂ≠òÂú®ÂØÑÂ≠òÂô®‰∏≠ÔºåÊØèÊ¨°‰ΩøÁî®ÈÉΩ‰ºö‰ªé‰∏ªÂ≠òÂô®‰∏≠ËØªÂèñÔºõ‰øùËØÅÂèØËßÅÊÄßÔºå‰∏ç‰øùËØÅÂéüÂ≠êÊÄß]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[JavaÂü∫Á°ÄÁü•ËØÜ]]></title>
    <url>%2F2018%2F11%2F12%2FJava%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%2F</url>
    <content type="text"><![CDATA[1. Â¶Ç‰ΩïÂÆûÁé∞ÂØπË±°ÂÖãÈöÜÔºüÊúâ‰∏§ÁßçÊñπÂºèÔºö ÂÆûÁé∞Cloneable Êé•Âè£Âπ∂ÈáçÂÜô clone ÊñπÊ≥ïÔºàÊµÖÊã∑Ë¥ùÔºâÔºõ ÂÆûÁé∞Serializable ÔºåÈÄöËøáÂØπË±°ÁöÑÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÂÆûÁé∞ÁúüÊ≠£ÁöÑÊ∑±Â∫¶ÂÖãÈöÜÔºàÊ∑±Êã∑Ë¥ùÔºâÔºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö 12345678910111213141516171819202122232425262728public class MyUtil &#123; private MyUtil() &#123; throw new AssertionError(); &#125; public static &lt;T&gt; T clone(T obj) throws Exception &#123; ByteArrayOutputStream bout = new ByteArrayOutputStream(); ObjectOutputStream oos = new ObjectOutputStream(bout); oos.writeObject(obj); ByteArrayInputStream bin = new ByteArrayInputStream(bout.toByteArray()); ObjectInputStream ois = new ObjectInputStream(bin); return (T) ois.readObject(); // ËØ¥ÊòéÔºöË∞ÉÁî®ByteArrayInputStreamÊàñByteArrayOutputStreamÂØπË±°ÁöÑcloseÊñπÊ≥ïÊ≤°Êúâ‰ªª‰ΩïÊÑè‰πâ // Ëøô‰∏§‰∏™Âü∫‰∫éÂÜÖÂ≠òÁöÑÊµÅÂè™Ë¶ÅÂûÉÂúæÂõûÊî∂Âô®Ê∏ÖÁêÜÂØπË±°Â∞±ËÉΩÂ§üÈáäÊîæËµÑÊ∫êÔºåËøô‰∏ÄÁÇπ‰∏çÂêå‰∫éÂØπÂ§ñÈÉ®ËµÑÊ∫êÔºàÂ¶ÇÊñá‰ª∂ÊµÅÔºâÁöÑÈáäÊîæ &#125;&#125; Ê≥®ÊÑèÔºöÂü∫‰∫éÂ∫èÂàóÂåñÂíåÂèçÂ∫èÂàóÂåñÂÆûÁé∞ÁöÑÂÖãÈöÜ‰∏ç‰ªÖ‰ªÖÊòØÊ∑±Â∫¶ÂÖãÈöÜÔºåÊõ¥ÈáçË¶ÅÁöÑÊòØÈÄöËøáÊ≥õÂûãÁïåÂÆöÔºåÂèØ‰ª•Ê£ÄÊü•Âá∫Ë¶ÅÂÖãÈöÜÂØπË±°ÊòØÂê¶ÊîØÊåÅÂ∫èÂàóÂåñÔºåËøôÈ°πÊ£ÄÊü•ÊòØÁºñËØëÂô®ÂÆåÊàêÁöÑÔºå‰∏çÊòØËøêË°åÊó∂ÊäõÂá∫ÂºÇÂ∏∏ÔºåËøôÁßçÊñπÊ°àÊòéÊòæ‰ºò‰∫é‰ΩøÁî®objectÁ±ªÁöÑcloneÊñπÊ≥ïÂÖãÈöÜÂØπË±°„ÄÇËÆ©ÈóÆÈ¢òÂú®ÁºñËØëÁöÑÊó∂ÂÄôÊö¥ÊºèÂá∫Êù•ÊÄªÊòØ‰ºò‰∫éÊääÈóÆÈ¢òÁïôÂú®ËøêË°åÊó∂„ÄÇ 2. ÂÜÖÈÉ®Á±ªËÆøÈóÆÂ±ÄÈÉ®ÂèòÈáèÁöÑÊó∂ÂÄôÔºå‰∏∫‰ªÄ‰πàÂä†final? ÂÜÖÈÉ®Á±ªÂíåÂ±ÄÈÉ®ÂèòÈáèÁöÑÁîüÂëΩÂë®Êúü‰∏çÂêåÔºåÊñπÊ≥ïÁªìÊùüÂêéÂ±ÄÈÉ®ÂèòÈáèÁöÑÁîüÂëΩÂë®ÊúüÂ∞±ÁªìÊùü‰∫ÜÔºåËÄåÂÜÖÈÉ®Á±ªÂè™Ë¶ÅÊúâÂºïÁî®Â∞±‰∏çÁªìÊùüÔºåÂÜÖÈÉ®Á±ªÁîüÂëΩÂë®Êúü&gt;=Â±ÄÈÉ®ÂèòÈáè Java‰ºöÂú®ÁºñËØëÊó∂Âú®ÂÜÖÈÉ®Á±ªÁöÑÊûÑÈÄ†ÊñπÊ≥ïÈáåËæπÔºåÂ∞ÜÂ±ÄÈÉ®ÂèòÈáè‰ª•ÂèÇÊï∞ÂΩ¢Âºè‰º†ÈÄíÁªôÂÜÖÈÉ®Á±ª ËÄåÂ¶ÇÊûúÂ±ÄÈÉ®ÂèòÈáèÂèëÁîüÊîπÂèòÔºåÂÜÖÈÉ®Á±ª‰∏çÁü•ÊÉÖÁöÑÂú∫ÊôØÔºåÊâÄ‰ª•Ë¶ÅÂä†fianl Ôºå‰øùËØÅÂºïÁî®‰∏çÂèØÊîπÂèò Ê≥®ÊÑèÔºöÂú®Java8‰∏≠ÔºåÂèØ‰ª•‰∏çÈÄÇÁî®finalÂÖ≥ÈîÆÂ≠óÔºå‰ΩÜÊòØÂ¶ÇÊûúÊàë‰ª¨‰øÆÊîπ‰∫ÜÂ±ÄÈÉ®ÂèòÈáèËøòÊòØ‰ºöÂèëÁîüÈîôËØØÔºå‰ªéËÄå‰øùËØÅÂ±ÄÈÉ®ÂèòÈáèÁöÑÂºïÁî®‰∏çÂèò„ÄÇ 3. transient ÂÖ≥ÈîÆÂ≠ó Â¶ÇÊûú‰ΩøÁî®transient ‰øÆÈ•∞ÂèòÈáèÔºåÂΩìÂØπË±°Â≠òÂÇ®Êó∂ÔºåÂÆÉÁöÑÂÄº‰∏çÈúÄË¶ÅÁª¥ÊåÅ„ÄÇÊç¢Âè•ËØùÊù•ËØ¥Â∞±ÊòØÁî®transient ‰øÆÈ•∞ÁöÑÂèòÈáè‰∏çÂèÇ‰∏éÂ∫èÂàóÂåñÁöÑËøáÁ®ã„ÄÇ 4. String Âíå StringBuild,StringBufferÁöÑÂå∫Âà´ String ÊòØÂè™ËØªÂ≠óÁ¨¶‰∏≤,ÂàõÂª∫ÂÆåÊàê‰πãÂêéÊòØ‰∏çËÉΩ‰øÆÊîπÔºåÂ¶ÇÊûú‰øÆÊîπ‰πüÊòØÂàõÂª∫‰∏Ä‰∏™Êñ∞ÂØπË±°ÔºåÂõûÊî∂ÊóßÂØπË±°ÁöÑËøáÁ®ãÔºåÊâÄ‰ª•ÊâßË°åÊïàÁéáÊØîËæÉ‰ΩéÔºåStringBuild Âíå StringBuffer ÂèØ‰ª•ÊîπÂèòÔºåStringBuild Á∫øÁ®ã‰∏çÂÆâÂÖ®Ôºå‰ΩÜÊòØÊïàÁéáÊØîËæÉÈ´òÔºåStringBuffter Á∫øÁ®ãÂÆâÂÖ® ÊïàÁéáÂø´ÊÖ¢ÔºöStringbuilder&gt; StringBuffer&gt; String 5. String ‰∏∫‰ªÄ‰πàËÆæËÆ°Êàê‰∏çÂèØÂèò ÂÆâÂÖ®ÊÄß Êú¨Ë∫´ÊòØfinal Á±ª‰∏çÂèØ‰øÆÊîπÔºå‰∏çÂèØÂèòÊûÅ‰∏∫ÂÆâÂÖ® String Â∏∏Ë¢´Áî®Êù•‰Ωú‰∏∫ HashMap ÁöÑkey Â¶ÇÊûúÂèØÂèò‰ºöÂºïÊù•ÂÆâÂÖ®ÈóÆÈ¢òÔºå‰æãÂ¶Ç‰∏§‰∏™key Áõ∏Âêå ÊïàÁéáÈ´ò ÈÄöËøáÂ≠óÁ¨¶‰∏≤Ê±†ÂèØ‰ª•ËäÇÁúÅÂæàÂ§öÁ©∫Èó¥ ÊØè‰∏Ä‰∏™String ÂØπÂ∫î‰∏Ä‰∏™ hashcode ,ÂÜçÊ¨°‰ΩøÁî®‰∏çÁî®ÈáçÊñ∞ËÆ°ÁÆó 6. java ‰∏≠ÁöÑÂõõÁßçÂºïÁî®ÂèäÂ∫îÁî®Âú∫ÊôØ Âº∫ÂºïÁî® Âº±ÂºïÁî®‚Äî-ÂºïÁî®Âà∞ËææÔºå‰∏çÂèØËææÂ∞±‰ºöË¢´ÂõûÊî∂ÔºåÂç≥‰æøÊòØÂÜÖÂ≠òÂÖÖË∂≥ÔºåÂèØÁî®‰∫éÂõæÁâáBitmap ÁºìÂ≠òÔºåÂΩì‰∏çÂÜç‰ΩøÁî®Bitmap Êó∂ÔºåÂ∞±‰ºöË¢´ÂõûÊî∂ ËΩØÂºïÁî®‚Äî‚ÄìÂÜÖÂ≠ò‰∏çË∂≥Êó∂Ë¢´ÂõûÊî∂Ôºå‰πüÂèØÁî®‰∫éBitmapÂõûÊî∂ÔºåÂΩìÂÜÖÂ≠ò‰∏çË∂≥Êó∂ÔºåÂèØÂõûÊî∂ ËôöÂºïÁî®‚Äî-ÂÆÉÊåáÂêëÁöÑÂØπË±°ÂõûÊî∂Êó∂ÔºåÂÆÉÊú¨Ë∫´‰ºöË¢´Âä†ÂÖ•Âà∞ÂºïÁî®ÈòüÂàó‰∏≠ÔºåËøôÊ†∑Êàë‰ª¨Â∞±Áü•ÈÅìÂÆÉÊåáÂêëÁöÑÂØπË±°‰ΩïÊó∂Ë¢´ÈîÄÊØÅ]]></content>
      <tags>
        <tag>java</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LeakCannaryÂéüÁêÜÂàÜÊûê]]></title>
    <url>%2F2018%2F11%2F07%2FLeakCannary%E5%8E%9F%E7%90%86%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[‰∏äÁØáÂÜôÂà∞ leakcanary ÁöÑ‰ΩøÁî®,ËøôÁØá‰∏ªË¶ÅÊòØ‰∫ÜËß£LeakCannary Â§ßÊ¶ÇÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑ„ÄÇ 1.È¶ñÂÖàÂÆÉÊòØÂ¶Ç‰ΩïÁõëÂê¨Activity ÈîÄÊØÅÁöÑÔºüÂõ†‰∏∫Êàë‰ª¨Áü•ÈÅìÂè™ÊúâÂΩìactivity ÈîÄÊØÅÔºàonDestroy()ÔºâÁöÑÊó∂ÂÄôÔºåÊàë‰ª¨ÊâçËÉΩÂØπËøô‰∏™activity ËøõË°åÂàÜÊûêÊü•ÁúãÂì™‰∫õÂØπË±°ÂèØËÉΩÂ≠òÂú®ÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ÂèëÁé∞‰∫ÜÂ¶Ç‰∏ã‰ª£Á†ÅÔºö12345public static RefWatcher install(Application application) &#123; return refWatcher(application).listenerServiceClass(DisplayLeakService.class) .excludedRefs(AndroidExcludedRefs.createAppDefaults().build()) .buildAndInstall(); &#125; Âú®buildAndInstall() ‰∏≠Ôºö1234567891011121314public RefWatcher buildAndInstall() &#123; .... if (refWatcher != DISABLED) &#123; if (watchActivities) &#123; //ËøôÊòØËßÇÂØüactivityÁöÑ ActivityRefWatcher.install(context, refWatcher); &#125; if (watchFragments) &#123; FragmentRefWatcher.Helper.install(context, refWatcher); &#125; &#125; LeakCanaryInternals.installedRefWatcher = refWatcher; return refWatcher; &#125; 12345678public final class ActivityRefWatcher &#123; .... public static void install(Context context, RefWatcher refWatcher) &#123; Application application = (Application) context.getApplicationContext(); ActivityRefWatcher activityRefWatcher = new ActivityRefWatcher(application, refWatcher); //ÊãøÂà∞applicationÔºåÊ≥®ÂÜåactivityÁöÑÁîüÂëΩÂë®ÊúüÂõûË∞É application.registerActivityLifecycleCallbacks(activityRefWatcher.lifecycleCallbacks); &#125; ÂÖ∂‰∏≠Ëøô‰∏™ÔºölifecycleCallbacks Â∞±ÊòØÂõûË∞ÉÁõëÂê¨123456private final Application.ActivityLifecycleCallbacks lifecycleCallbacks = new ActivityLifecycleCallbacksAdapter() &#123;//ÁõëÂê¨activityÈîÄÊØÅ @Override public void onActivityDestroyed(Activity activity) &#123; refWatcher.watch(activity); &#125; &#125;; ÈÇ£‰πàÊàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøáapplication Ê≥®ÂÜåËé∑Âèñactivity ÁöÑÁîüÂëΩÂë®ÊúüÁõëÂê¨ÂõûË∞ÉÔºåÂ¶Ç‰∏ãÊòØÊàëÂÜôÁöÑÔºö1234567891011121314151617181920212223242526272829303132333435363738394041424344454647public class LifeCircleActivity extends AppCompatActivity &#123; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.life_layout); final Application application = (Application) getApplicationContext(); application.registerActivityLifecycleCallbacks(new Application.ActivityLifecycleCallbacks() &#123; @Override public void onActivityCreated(Activity activity, Bundle savedInstanceState) &#123; Log.i("xx","activity is onActivityCreated..."); &#125; @Override public void onActivityStarted(Activity activity) &#123; Log.i("xx","activity is onActivityStarted..."); &#125; @Override public void onActivityResumed(Activity activity) &#123; Log.i("xx","activity is onActivityResumed..."); &#125; @Override public void onActivityPaused(Activity activity) &#123; Log.i("xx","activity is onActivityPaused..."); &#125; @Override public void onActivityStopped(Activity activity) &#123; Log.i("xx","activity is onActivityStopped..."); &#125; @Override public void onActivitySaveInstanceState(Activity activity, Bundle outState) &#123; Log.i("xx","activity is onActivitySaveInstanceState..."); &#125; @Override public void onActivityDestroyed(Activity activity) &#123; application.unregisterActivityLifecycleCallbacks(this); Log.i("xx","activity is onDestroy..."); &#125; &#125;);&#125; ËøôÊ†∑Êàë‰ª¨Â∞±ÂèØ‰ª•ÁõëÂê¨Êàë‰ª¨ÂΩìÂâçËøô‰∏™Á±ªÁöÑÁîüÂëΩÂë®Êúü‰∫ÜÔºåÂèØ‰ª•ËøêË°åÊâìÂç∞Êó•ÂøóÂ∞±Áü•ÈÅì‰∫Ü„ÄÇ 2.ÂÜÖÂ≠òÊ≥ÑÊºèÁöÑÂØπË±°ÁöÑÂºïÁî®Ë∑ØÂæÑËøôÂùó‰ΩøÁî®Âà∞‰∫Ü square ÁöÑÂè¶‰∏Ä‰∏™ÂºÄÊ∫êÂ∫ì haha ,Ëé∑ÂèñÂΩìÂâçÂÜÖÂ≠ò‰∏≠ÁöÑheapÂ†Ü‰ø°ÊÅØÁöÑsnapshot]]></content>
      <tags>
        <tag>leakcannary</tag>
      </tags>
  </entry>
  <entry>
    <title></title>
    <url>%2F2018%2F11%2F07%2F%E5%B0%8F%E8%AF%95%E7%89%9B%E5%88%80-leakcannary%2F</url>
    <content type="text"><![CDATA[build gradleÈÖçÁΩÆ 1234debugImplementation 'com.squareup.leakcanary:leakcanary-android:1.6.1'releaseImplementation 'com.squareup.leakcanary:leakcanary-android-no-op:1.6.1'// Optional, if you use support library fragments:debugImplementation 'com.squareup.leakcanary:leakcanary-support-fragment:1.6.1' ÈÖçÁΩÆ application 12345678private RefWatcher refWatcher; public static RefWatcher getRefWatcher(Context context)&#123; HealthApplication application = (HealthApplication) context.getApplicationContext(); return application.refWatcher; &#125; ÁõëÊµã 12RefWatcher refWatcher = MyApplication.getRefWatcher(this);//1 refWatcher.watch(this); ‰æãÂ¶ÇÔºöÊàë‰ª¨ÂÜô‰∏Ä‰∏™Ê≥ÑÊºèÁöÑ‰ª£Á†Å1234567891011121314151617181920212223242526@Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.layout_event_bus); RefWatcher refWatcher = MyApplication.getRefWatcher(this);//1 refWatcher.watch(this); Message message = Message.obtain(); message.obj = "qianqian"; message.what = 666; handler.sendMessageDelayed(message,600000); &#125; Handler handler = new Handler()&#123; @Override public void handleMessage(Message msg) &#123; super.handleMessage(msg); Log.i("xx","handle message"); &#125; &#125;; public void sendMessage(View view)&#123; finish(); &#125; ÁïåÈù¢‰∏ä‰∏Ä‰∏™ÊåâÈíÆÔºåÁÇπÂáªÊåâÈíÆÈÄÄÂá∫Á®ãÂ∫èÔºåÂú®Á®ãÂ∫è onCreate ÊñπÊ≥ï‰∏≠Êàë‰ª¨ÂèëÈÄÅ‰∫Ü‰∏Ä‰∏™Âª∂Êó∂ÁöÑÊ∂àÊÅØÔºåÊåâÁÖßÊàë‰ª¨ÁöÑÂàÜÊûêÔºåËÇØÂÆö‰ºöÂèëÁîüÊ≥ÑÊºèÁöÑ„ÄÇÊù•Êàë‰ª¨Áúã‰∏ãleakcannary ÁªôÊàë‰ª¨ÁöÑÊèêÁ§∫Ôºö Êàë‰ª¨Áü•ÈÅìÂΩìÊàë‰ª¨ÈÄÄÂá∫Á®ãÂ∫èÁöÑÊó∂ÂÄô MessageQueue ‰∏≠ÁöÑÊ∂àÊÅØËøòÊ≤°ÊâßË°åÂÆåÊØïÔºåMessageQueue.mMessages Ëøô‰∏™ÂèòÈáèÊåÅÊúâÁöÑÊòØMessage Ëøô‰∏™ÂØπË±°ÔºåËÄå Message.target‰∏≠ÁöÑ targetÊåÅÊúâÁöÑËØ•ActivityÁöÑ handlerÂºïÁî®ÔºåÊâÄ‰ª•Ê≠§Êó∂finish ÊéâÁöÑ activity Âπ∂‰∏ç‰ºöË¢´ÂõûÊî∂ÔºåÂØºËá¥LeakActivity ÂèëÁîüÂÜÖÂ≠òÊ≥ÑÊºè„ÄÇ ÂÖ∂‰∏≠‰∏ÄÁßçËß£ÂÜ≥ÂäûÊ≥ïÂë¢ÔºåÂ∞±ÊòØÊàë‰ª¨ÂèØ‰ª•ÈÄöËøáÂú®ÁÇπÂáªÊàñactivity ÈÄÄÂá∫Êó∂ÔºåremoveMessageÔºå‰æãÂ¶ÇÔºö1234public void sendMessage(View view)&#123; handler.removeMessages(666); finish(); &#125; ËøôÊ†∑Â∞±‰∏ç‰ºöÊúâË≠¶Âëä‰∫Ü„ÄÇ ‰πüÂèØ‰ª•ÈÄöËøáÈùôÊÄÅÂÜÖÈÉ®Á±ª+Âº±ÂºïÁî®ÁöÑÊñπÂºèÔºö123456789101112131415161718192021222324252627private static class MyHandler extends Handler &#123; private final WeakReference&lt;LeakActivity&gt; mActivity; public MyHandler(SampleActivity activity) &#123; mActivity = new WeakReference&lt;LeakActivity&gt;(activity); &#125; @Override public void handleMessage(Message msg) &#123; LeakActivityactivity = mActivity.get(); if (activity != null) &#123; ... &#125; &#125; &#125;private final MyHandler handler= new MyHandler(this); @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.layout_event_bus); Message message = Message.obtain(); message.obj = "qianqian"; message.what = 666; handler.sendMessageDelayed(message,600000); &#125;&#125; Âú®ÂÆûÈôÖÈ°πÁõÆ‰∏≠ÔºåÂèØ‰ª•Áî®Ëøô‰∏™Â∑•ÂÖ∑Á≠õÊü•‰∏ÄÈÅç„ÄÇ]]></content>
      <tags>
        <tag>leakcannary</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EventBus Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏ãÁØáÔºâ]]></title>
    <url>%2F2018%2F10%2F08%2FEventBus-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%8B%E7%AF%87%EF%BC%89%2F</url>
    <content type="text"><![CDATA[‰∏äÁØá EventBus Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏äÁØáÔºâ ËØ¥Âà∞Ê≥®ÂÜåËÆ¢ÈòÖÁöÑÂâçÂçäÈÉ®ÂàÜÔºåÊ≠§ÁØáÁî®Êù•ÂàÜÊûêÂèëÈÄÅ‰∫ã‰ª∂Âà∞Êé•Êî∂‰∫ã‰ª∂Ëøô‰∏™ËøáÁ®ã„ÄÇ 1. ÂèëÈÄÅ‰∫ã‰ª∂Á§∫‰æãÔºö1EventBus.getDefault().post(new RemindBean(&quot;2018-02-12&quot;,&quot;happy&quot;)); post:1234567891011121314151617181920212223242526272829/** Posts the given event to the event bus. */ public void post(Object event) &#123; - 1.Ëé∑ÂèñÂΩìÂâçÁ∫øÁ®ãÁöÑpostingThreadState ÂØπË±° PostingThreadState postingState = currentPostingThreadState.get(); - 2. Ëé∑ÂèñÈáåÈù¢ÈÇ£‰∏™‰∫ã‰ª∂ÈòüÂàó List&lt;Object&gt; eventQueue = postingState.eventQueue; - 3. Â∞Ü‰∫ã‰ª∂Ê∑ªÂä†Âà∞ÈòüÂàó‰∏≠Âéª eventQueue.add(event); - 4. Âà§Êñ≠ÂΩìÂâçÁöÑevent ÊòØÂê¶Âú® posting if (!postingState.isPosting) &#123; - 5. ÊòØÂê¶ÊòØ‰∏ªÁ∫øÁ®ã postingState.isMainThread = Looper.getMainLooper() == Looper.myLooper(); postingState.isPosting = true; - 6. Âà§Êñ≠ÊòØÂê¶ÂèñÊ∂à if (postingState.canceled) &#123; throw new EventBusException(&quot;Internal error. Abort state was not reset&quot;); &#125; try &#123; while (!eventQueue.isEmpty()) &#123;//‰∏ç‰∏∫Á©∫ÔºåËøõÂÖ•Âæ™ÁéØ - 7.ÊåâÁÖßÈ°∫Â∫èÔºåpost‰∏Ä‰∏™ remove‰∏Ä‰∏™ postSingleEvent(eventQueue.remove(0), postingState); &#125; &#125; finally &#123; postingState.isPosting = false; postingState.isMainThread = false; &#125; &#125; &#125; PostingThreadState Â§ßÊ¶ÇÁúã‰∏ÄÁúº12345678final static class PostingThreadState &#123; final List&lt;Object&gt; eventQueue = new ArrayList&lt;Object&gt;(); boolean isPosting; boolean isMainThread; Subscription subscription; Object event; boolean canceled; &#125; ÂÜçÂ∞±ÊòØ postSingleEvent(eventQueue.remove(0), postingState); ÊñπÊ≥ïÔºö12345678910111213141516171819202122232425262728private void postSingleEvent(Object event, PostingThreadState postingState) throws Error &#123; - 1. Ëé∑ÂèñeventÁöÑÂ≠óËäÇÁ†ÅÔºà‰æãÂ¶ÇÂ∞±ÊòØÔºöRemindBean.classÔºâ Class&lt;?&gt; eventClass = event.getClass(); boolean subscriptionFound = false; if (eventInheritance) &#123;//ÈªòËÆ§‰∏∫true - 2. Ê†πÊçÆeventClass ÁöÑÂ≠óËäÇÁ†ÅÊü•Êâæ List&lt;Class&lt;?&gt;&gt; eventTypes = lookupAllEventTypes(eventClass); int countTypes = eventTypes.size(); - 3.Âæ™ÁéØÈÅçÂéÜ for (int h = 0; h &lt; countTypes; h++) &#123; Class&lt;?&gt; clazz = eventTypes.get(h); - 4.Ê†πÊçÆ‰∫ã‰ª∂ÔºåÂ≠óËäÇÁ†ÅÊü•ÊâæËÆ¢ÈòÖËÄÖ subscriptionFound |= postSingleEventForEventType(event, postingState, clazz); &#125; &#125; else &#123; subscriptionFound = postSingleEventForEventType(event, postingState, eventClass); &#125; if (!subscriptionFound) &#123; if (logNoSubscriberMessages) &#123; Log.d(TAG, &quot;No subscribers registered for event &quot; + eventClass); &#125; if (sendNoSubscriberEvent &amp;&amp; eventClass != NoSubscriberEvent.class &amp;&amp; eventClass != SubscriberExceptionEvent.class) &#123; post(new NoSubscriberEvent(this, event)); &#125; &#125; &#125; postSingleEventForEventType:12345678910111213141516171819202122232425262728293031private boolean postSingleEventForEventType(Object event, PostingThreadState postingState, Class&lt;?&gt; eventClass) &#123; CopyOnWriteArrayList&lt;Subscription&gt; subscriptions; synchronized (this) &#123; - 1.Ê†πÊçÆÂ≠óËäÇÁ†ÅÂèñÂá∫subscriptions,ËøòËÆ∞ÂæóÊàë‰ª¨‰πãÂâçÂú®subscribeËøô‰∏™ÊñπÊ≥ïÁöÑÊó∂ÂÄôÔºåÊääsubscrber,subscriberMethod Â∞ÅË£ÖÊàê‰∏Ä‰∏™subscription ÂØπË±°„ÄÇ subscriptions = subscriptionsByEventType.get(eventClass); &#125; if (subscriptions != null &amp;&amp; !subscriptions.isEmpty()) &#123; for (Subscription subscription : subscriptions) &#123; - 2. ÂèñÂá∫ÊØè‰∏Ä‰∏™subscription ÂØπË±° postingState.event = event; postingState.subscription = subscription; boolean aborted = false; try &#123; - 3. postÂà∞Áõ∏Â∫îÁöÑÁ∫øÁ®ã‰∏≠ÂõûË∞É postToSubscription(subscription, event, postingState.isMainThread); aborted = postingState.canceled; &#125; finally &#123; postingState.event = null; postingState.subscription = null; postingState.canceled = false; &#125; if (aborted) &#123; break; &#125; &#125; return true; &#125; return false; &#125; postToSubscription: Ê†πÊçÆÂÆö‰πâÁöÑ‰∏çÂêåÁ∫øÁ®ãÔºåË∞ÉÁî®Áõ∏Â∫îÁöÑÊñπÊ≥ï1234567891011121314151617181920212223242526private void postToSubscription(Subscription subscription, Object event, boolean isMainThread) &#123; switch (subscription.subscriberMethod.threadMode) &#123; case POSTING://‰∏ÄËà¨Ê≤°ÂÆö‰πâÁöÑÔºåËøô‰∏™Â∞±ÊòØpostÂú®Âì™‰∏™Á∫øÁ®ãÔºåÂìçÂ∫îÂ∞±Âú®Âì™‰∏™Á∫øÁ®ãÊâßË°å invokeSubscriber(subscription, event); break; case MAIN: if (isMainThread) &#123; invokeSubscriber(subscription, event); &#125; else &#123; mainThreadPoster.enqueue(subscription, event); &#125; break; case BACKGROUND: if (isMainThread) &#123; backgroundPoster.enqueue(subscription, event); &#125; else &#123; invokeSubscriber(subscription, event); &#125; break; case ASYNC: asyncPoster.enqueue(subscription, event); break; default: throw new IllegalStateException(&quot;Unknown thread mode: &quot; + subscription.subscriberMethod.threadMode); &#125; &#125; invokeSubscriber:12345678910void invokeSubscriber(Subscription subscription, Object event) &#123; try &#123; - ÂèçÂ∞ÑÊãøÂà∞Â≠óËäÇÁ†Åclazz ÂèçÂ∞ÑË∞ÉÁî®ÊñπÊ≥ïÔºåÂ∞±Êî∂Âà∞Ê∂àÊÅØ‰∫Ü subscription.subscriberMethod.method.invoke(subscription.subscriber, event); &#125; catch (InvocationTargetException e) &#123; handleSubscriberException(subscription, event, e.getCause()); &#125; catch (IllegalAccessException e) &#123; throw new IllegalStateException(&quot;Unexpected exception&quot;, e); &#125; &#125; end.]]></content>
      <tags>
        <tag>EventBus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Eventbus Ê∫êÁ†ÅÂàÜÊûêÔºà‰∏äÁØáÔºâ]]></title>
    <url>%2F2018%2F10%2F08%2FEventbus-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%EF%BC%88%E4%B8%8A%E7%AF%87%EF%BC%89%2F</url>
    <content type="text"><![CDATA[ÂèØÁî®‰∫éÂ∫îÁî®ÂÜÖÁöÑÊ∂àÊÅØ‰∫ã‰ª∂‰º†ÈÄíÔºåÊñπ‰æøÂø´Êç∑ÔºåËÄ¶ÂêàÊÄß‰Ωé 1.Âü∫Êú¨Áî®Ê≥ï1234567891011121314151617181920212223242526272829public class EventBusMain extends AppCompatActivity &#123; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.content_main); EventBus.getDefault().register(this); &#125; - ËÆ¢ÈòÖÁöÑ‰∫ã‰ª∂ onEvent1 @Subscribe public void onEvent1(RemindBean bean)&#123; &#125;- ËÆ¢ÈòÖÁöÑ‰∫ã‰ª∂ onEvent2 @Subscribe public void onEvent2(UserInfo bean)&#123; &#125; @Override protected void onDestroy() &#123; super.onDestroy(); EventBus.getDefault().unregister(this); &#125;&#125; ÈúÄË¶ÅÂèëÈÄÅÊ∂àÊÅØ‰º†ÈÄíÁöÑÊó∂ÂÄôÔºö1EventBus.getDefault().post(new RemindBean()) 2.Ê∫êÁ†ÅËß£ËØªÊîæ‰∏äÂÆòÁΩëÁöÑ‰∏ÄÂº†ÂéüÁêÜÂõæÔºåÊÑüËßâÊå∫Ê∏ÖÊô∞ÁöÑÔºö ÂèëÂ∏ÉÊ∂àÊÅØÁöÑ‰∏ÄÊñπ(Publisher)ÔºåÂè™ÈúÄË¶Å post ‰∏Ä‰∏™ event ‰πãÂêéÂ∞±‰∏çÁî®ÁÆ°‰∫ÜÔºåEventBus ÂÜÖÈÉ®‰ºöÂ∞ÜeventÈÄê‰∏ÄÂàÜÂèëÁªôËÆ¢ÈòÖÊ≠§ event ÁöÑËÆ¢ÈòÖËÄÖÔºàSubscriberÔºâ. ‰∏çÈîôÂ∞±ÊòØËøôÊ†∑‰∏Ä‰∏™‰∏úË•ø„ÄÇ ËøòËÆ∞Âæó‰ª•ÂæÄÊàëË¶ÅÂÆûÁé∞‰∏§‰∏™‰∏çÂêåÁöÑactivity ‰πãÈó¥Ë¶Å‰º†ÈÄí‰∏Ä‰∫õÊï∞ÊçÆÁöÑÊó∂ÂÄôÔºåÊàëÈÉΩÊòØÈÄöËøáÂÆö‰πâ‰∏Ä‰∏™interfaceÁöÑÂΩ¢ÂºèÂÆåÊàêÔºåÊó∂Èó¥‰∏ÄÈïøÔºåÂÆö‰πâÁöÑÊé•Âè£‰∏ÄÂ†ÜÔºåÂú®ÂõûÈ°æÊü•Áúã‰ª£Á†Å‰πüÁ°ÆÂÆû‰∏çÂ§üÁæéËßÇ„ÄÇÂ•Ω‰∫ÜËØù‰∏çÂ§öËØ¥ÔºåÁúã‰∏ãÂ§ßÂÆ∂ÈÉΩÂú®Áî®ÁöÑEventbus. 3.È¶ñÂÖà1EventBus.getDefault().register(this); getDefault():123456789101112EventBus ÊòØ‰∏Ä‰∏™Âçï‰æãÊ®°ÂºèÔºåÊáíÊ±âÂºèÔºåÂèåÈáçÂà§Êñ≠ /** Convenience singleton for apps using a process-wide EventBus instance. */ public static EventBus getDefault() &#123; if (defaultInstance == null) &#123; synchronized (EventBus.class) &#123; if (defaultInstance == null) &#123; defaultInstance = new EventBus(); &#125; &#125; &#125; return defaultInstance; &#125; register ÊòØ‰ªÄ‰πàÊÑèÊÄùÂë¢ÔºåÂ∞±ÊòØÂ∞±Ë∑ü‰Ω†ËÆ¢ÈòÖÊä•Á∫∏‰∏ÄÊ†∑ÔºåÊä•Á§æÈúÄË¶ÅÁ°ÆÂÆöÂá†‰∏™ÈáçË¶ÅÁöÑÈóÆÈ¢òÔºö ËÆ¢ÈòÖËÄÖÊòØË∞ÅÔºàSubscriberÔºâÔºü ËÆ¢ÈòÖÁöÑ‰ªÄ‰πàÊä•Á∫∏(Event) Ôºü Â∞±ÊòØÊàëËÆ§‰∏∫ÊØîËæÉÈáçË¶ÅÁöÑÔºåÈÇ£‰πàregister Ëøô‰∏ÄÊ≠•Â∞±ÊòØSubscriber ÂëäËØâ Êä•Á§æÔºåËÆ¢ÈòÖÁöÑevent1234567891011121314public void register(Object subscriber) &#123; - 1.ÂÖàÊãøÂà∞Ëøô‰∏™ËÆ¢ÈòÖËÄÖ(subscriber)Á±ªÁöÑÂ≠óËäÇÁ†Å Class&lt;?&gt; subscriberClass = subscriber.getClass(); - 2. ÈÄöËøáËøô‰∏™Á±ªÁöÑÂ≠óËäÇÁ†ÅÔºåÊãøÂà∞ÊâÄÊúâÁöÑËÆ¢ÈòÖÁöÑ event,Â≠òÊîæÂú®List‰∏≠ List&lt;SubscriberMethod&gt; subscriberMethods = subscriberMethodFinder.findSubscriberMethods(subscriberClass); synchronized (this) &#123; - 3. Âæ™ÁéØÈÅçÂéÜÊâÄÊúâÁöÑËÆ¢ÈòÖÁöÑÊñπÊ≥ïÔºåÂÆåÊàêsubscriber Âíå subscriberMethod ÁöÑÂÖ≥ËÅî for (SubscriberMethod subscriberMethod : subscriberMethods) &#123; subscribe(subscriber, subscriberMethod); &#125; &#125; &#125; Êàë‰ª¨Áúã‰∏ãËøô‰∏™Â¶Ç‰ΩïÊ†πÊçÆsubscriberClass ÊâæÂà∞Ëøô‰∏™ËÆ¢ÈòÖÁöÑ methodÁöÑÔºåfindSubscriberMethods: 1234567891011121314151617181920212223242526List&lt;SubscriberMethod&gt; findSubscriberMethods(Class&lt;?&gt; subscriberClass) &#123; - 1.ÂÖà‰ªéÁºìÂ≠ò‰∏≠Âèñ List&lt;SubscriberMethod&gt; subscriberMethods = METHOD_CACHE.get(subscriberClass); - 2. Á¨¨‰∏ÄÊ¨°ËÇØÂÆö null if (subscriberMethods != null) &#123; return subscriberMethods; &#125; - 3. Êü•ÊâæÈªòËÆ§‰πüÊòØfalseÔºåÊÑüÂÖ¥Ë∂£ÁöÑÂèØ‰ª•Áúã‰∏ã if (ignoreGeneratedIndex) &#123; subscriberMethods = findUsingReflection(subscriberClass); &#125; else &#123; - 4. ÊâÄ‰ª•ÊòØËµ∞ËøôÈáå subscriberMethods = findUsingInfo(subscriberClass); &#125; if (subscriberMethods.isEmpty()) &#123; throw new EventBusException(&quot;Subscriber &quot; + subscriberClass + &quot; and its super classes have no public methods with the @Subscribe annotation&quot;); &#125; else &#123; - 5. ÊâæÂà∞‰πãÂêéÊ∑ªÂä†Âà∞ÁºìÂ≠ò‰∏≠ÔºåkeyÊòØ subscriber ;value ÊòØÔºömethods METHOD_CACHE.put(subscriberClass, subscriberMethods); return subscriberMethods; &#125; &#125; Áúã‰∏ãÔºöfindUsingInfo(subscriberClass)123456789101112131415161718192021222324252627282930private List&lt;SubscriberMethod&gt; findUsingInfo(Class&lt;?&gt; subscriberClass) &#123; - 1. ÊàëËÆ§‰∏∫Â∞±ÊòØÂáÜÂ§á‰∏Ä‰∏™Êü•ÊâæÁªìÊûúÂæóÂ≠òÂÇ®ÂØπË±° FindState findState = prepareFindState(); - 2. Â∞ÜËÆ¢ÈòÖËÄÖÁöÑsubscriberClass Â≠òÂÇ®Ëµ∑Êù•Ôºå‰øùÂ≠òÂú®‰∏Ä‰∏™FindState Á±ª‰∏≠ÁöÑsubscriberClass ÂêåÊó∂ËµãÂÄºÁªôclazzÂèòÈáè‰∏≠,‰ª•‰∏ã‰ª£Á†ÅËÉΩÂ§üÁúãÂá∫// void initForSubscriber(Class&lt;?&gt; subscriberClass) &#123; // this.subscriberClass = clazz = subscriberClass;//&#125; findState.initForSubscriber(subscriberClass); while (findState.clazz != null) &#123;ËøõÂÖ•Âæ™ÁéØ‰∏≠ //Ëé∑ÂèñsubscriberInfo ‰ø°ÊÅØÔºåËøîÂõûnull findState.subscriberInfo = getSubscriberInfo(findState); if (findState.subscriberInfo != null) &#123; SubscriberMethod[] array = findState.subscriberInfo.getSubscriberMethods(); for (SubscriberMethod subscriberMethod : array) &#123; if (findState.checkAdd(subscriberMethod.method, subscriberMethod.eventType)) &#123; findState.subscriberMethods.add(subscriberMethod); &#125; &#125; &#125; else &#123; - 3. ËøõÂÖ•Âà∞ËøôÈáå‰∫Ü findUsingReflectionInSingleClass(findState); &#125; - 4. Êü•ÊâæÁà∂Á±ª‰∏≠ÁöÑÊñπÊ≥ï findState.moveToSuperclass(); &#125; return getMethodsAndRelease(findState); &#125; findUsingReflectionInSingleClass Â¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657private void findUsingReflectionInSingleClass(FindState findState) &#123; Method[] methods; try &#123; // This is faster than getMethods, especially when subscribers are fat classes like Activities - 1. ÈÄöËøáËÆ¢ÈòÖËÄÖÁöÑÂ≠óËäÇÁ†ÅÊü•ÊâæÂΩìÂâçÁ±ª‰∏≠ÊâÄÊúâÁîüÂëΩÁöÑÊñπÊ≥ï methods = findState.clazz.getDeclaredMethods(); &#125; catch (Throwable th) &#123; // Workaround for java.lang.NoClassDefFoundError, see https://github.com/greenrobot/EventBus/issues/149 methods = findState.clazz.getMethods(); findState.skipSuperClasses = true; &#125; - 2. Âæ™ÁéØÈÅçÂéÜÊâÄÊúâÁöÑÊñπÊ≥ï for (Method method : methods) &#123; - 3. Ëé∑ÂèñÊñπÊ≥ïÁöÑ‰øÆÈ•∞Á¨¶ int modifiers = method.getModifiers(); - 4.Âà§Êñ≠‰øÆÈ•∞Á¨¶ÔºåËÆ¢ÈòÖÊñπÊ≥ïÁöÑ‰øÆÈ•∞Á¨¶‰∏çËÉΩÊòØprivateÔºåstatic if ((modifiers &amp; Modifier.PUBLIC) != 0 &amp;&amp; (modifiers &amp; MODIFIERS_IGNORE) == 0) &#123; - 5. Ëé∑ÂèñÊñπÊ≥ïÁöÑÊâÄÊúâÁöÑÂèÇÊï∞ Class&lt;?&gt;[] parameterTypes = method.getParameterTypes(); - 6.Âà§Êñ≠ÂèÇÊï∞ÁöÑ‰∏™Êï∞ÔºåÂè™ËÉΩÊúâ1‰∏™ÂèÇÊï∞ÔºåËÆ¢ÈòÖÊñπÊ≥ï‰∏≠ if (parameterTypes.length == 1) &#123; - 7.Ëé∑ÂèñÊñπÊ≥ï‰∏äÂÖ∑Êúâsubscribe Ê≥®Ëß£ Subscribe subscribeAnnotation = method.getAnnotation(Subscribe.class); - 8.Âê´ÊúâsubscribeÊ≥®Ëß£ÁöÑÊñπÊ≥ïÔºåÂ∞±ÊòØËØ•Á±ªËÆ¢ÈòÖÁöÑÊñπÊ≥ïÔºåÂÖ∂ÂÆÉ‰∏çÁ¨¶ÂêàÁöÑÂèØËÉΩÂ∞±ÊòØÊôÆÈÄöÁöÑÊñπÊ≥ï if (subscribeAnnotation != null) &#123; - 9. Ëé∑ÂèñÁ¨¨‰∏Ä‰∏™ÂèÇÊï∞eventType Class&lt;?&gt; eventType = parameterTypes[0]; if (findState.checkAdd(method, eventType)) &#123; - 10. Ëé∑ÂèñÊ≥®Ëß£ÁöÑmodeÔºåÂ∞±ÊòØÊàë‰ª¨Âú®Ê≥®Ëß£‰∏äÊ†áËØÜÁöÑÔºå ÊúâmainThread,Posting,background,async ThreadMode threadMode = subscribeAnnotation.threadMode(); - 11. Â∞ÜËÆ¢ÈòÖÊñπÊ≥ïÁöÑ‰∏ÄÁ≥ªÂàó‰ø°ÊÅØÔºàÊñπÊ≥ïÂêçÁß∞ÔºåthreadMode,‰ºòÂÖàÁ∫ßÔºåÊòØÂê¶ÊòØÁ≤òÊÄßÁ≠âÔºâÊ∑ªÂä†Âà∞ÈõÜÂêàsubscriberMethods‰∏≠Âéª findState.subscriberMethods.add(new SubscriberMethod(method, eventType, threadMode, subscribeAnnotation.priority(), subscribeAnnotation.sticky())); &#125; &#125; &#125; else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) &#123; - 12. ÂèÇÊï∞ÊòØÂ§ö‰∏™ÁöÑÊó∂ÂÄôÊäõÂá∫ÂºÇÂ∏∏ String methodName = method.getDeclaringClass().getName() + &quot;.&quot; + method.getName(); throw new EventBusException(&quot;@Subscribe method &quot; + methodName + &quot;must have exactly 1 parameter but has &quot; + parameterTypes.length); &#125; &#125; else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) &#123; - 13. ÊñπÊ≥ïÁöÑ‰øÆÈ•∞Á¨¶‰∏çÊòØpublicÁöÑÔºåÊäõÂá∫ÂºÇÂ∏∏ String methodName = method.getDeclaringClass().getName() + &quot;.&quot; + method.getName(); throw new EventBusException(methodName + &quot; is a illegal @Subscribe method: must be public, non-static, and non-abstract&quot;); &#125; &#125; &#125; ËøôÊ†∑Êàë‰ª¨Â∞ÜÊâÄÊúâ‰ø°ÊÅØÈÉΩ‰øùÂ≠òÂà∞findState Á±ª‰∏≠Âéª‰∫Ü„ÄÇÂÜçÂõûÂ§¥ÁúãÊàë‰ª¨ÂéüÂÖàÈÇ£‰∏™ÊñπÊ≥ï,Âà∞Á¨¨‰∏âÊ≠•‰∫ÜÔºö123456789101112131415161718192021222324252627282930private List&lt;SubscriberMethod&gt; findUsingInfo(Class&lt;?&gt; subscriberClass) &#123; - 1. ÊàëËÆ§‰∏∫Â∞±ÊòØÂáÜÂ§á‰∏Ä‰∏™Êü•ÊâæÁªìÊûúÂæóÂ≠òÂÇ®ÂØπË±° FindState findState = prepareFindState(); - 2. Â∞ÜËÆ¢ÈòÖËÄÖÁöÑsubscriberClass Â≠òÂÇ®Ëµ∑Êù•Ôºå‰øùÂ≠òÂú®‰∏Ä‰∏™FindState Á±ª‰∏≠ÁöÑsubscriberClass ÂêåÊó∂ËµãÂÄºÁªôclazzÂèòÈáè‰∏≠,‰ª•‰∏ã‰ª£Á†ÅËÉΩÂ§üÁúãÂá∫// void initForSubscriber(Class&lt;?&gt; subscriberClass) &#123; // this.subscriberClass = clazz = subscriberClass;//&#125; findState.initForSubscriber(subscriberClass); while (findState.clazz != null) &#123;ËøõÂÖ•Âæ™ÁéØ‰∏≠ //Ëé∑ÂèñsubscriberInfo ‰ø°ÊÅØÔºåËøîÂõûnull findState.subscriberInfo = getSubscriberInfo(findState); if (findState.subscriberInfo != null) &#123; SubscriberMethod[] array = findState.subscriberInfo.getSubscriberMethods(); for (SubscriberMethod subscriberMethod : array) &#123; if (findState.checkAdd(subscriberMethod.method, subscriberMethod.eventType)) &#123; findState.subscriberMethods.add(subscriberMethod); &#125; &#125; &#125; else &#123; - 3. ËøõÂÖ•Âà∞ËøôÈáå‰∫ÜÔºå‰∏äÈù¢Â∑≤ÁªèÂàÜÊûêÊâÄÊúâ‰ø°ÊÅØ‰øùÂ≠òÂà∞findState‰∏≠ findUsingReflectionInSingleClass(findState); &#125; - 4. Êü•ÊâæÁà∂Á±ª‰∏≠ÁöÑÊñπÊ≥ï findState.moveToSuperclass(); &#125; return getMethodsAndRelease(findState); &#125; Âú®Ëøô‰∏™getMethodsAndRelease(findState):123456789101112131415private List&lt;SubscriberMethod&gt; getMethodsAndRelease(FindState findState) &#123; - 1. ÂèñÂá∫ÈáåÈù¢ÁöÑsubscriberMethods List&lt;SubscriberMethod&gt; subscriberMethods = new ArrayList&lt;&gt;(findState.subscriberMethods); findState.recycle(); synchronized (FIND_STATE_POOL) &#123; for (int i = 0; i &lt; POOL_SIZE; i++) &#123; if (FIND_STATE_POOL[i] == null) &#123; FIND_STATE_POOL[i] = findState; break; &#125; &#125; &#125; - 2. ËøîÂõûÈõÜÂêà return subscriberMethods; &#125; Ëá≥Ê≠§ÔºåÊàë‰ª¨Áü•ÈÅì‰∫ÜÊ†πÊçÆËÆ¢ÈòÖËÄÖÔºàsubscriberÔºâÁöÑclazz ÊâæÂà∞‰∫ÜÊâÄÊúâËÆ¢ÈòÖÁöÑÊñπÊ≥ï‰∫ã‰ª∂ methods ÂõûÂà∞ÊúÄÂàùÁöÑÁ¨¨‰∏ÄÊ≠•register:1234567891011public void register(Object subscriber) &#123; Class&lt;?&gt; subscriberClass = subscriber.getClass(); - 2. ÂÆåÊàê List&lt;SubscriberMethod&gt; subscriberMethods = subscriberMethodFinder.findSubscriberMethods(subscriberClass); synchronized (this) &#123; for (SubscriberMethod subscriberMethod : subscriberMethods) &#123; - 3.Âæ™ÁéØÈÅçÂéÜÊâÄÊúâÁöÑËÆ¢ÈòÖÊñπÊ≥ïÂíåËÆ¢ÈòÖËÄÖ‰πãÈó¥Âª∫Á´ãÂÖ≥ËÅî subscribe(subscriber, subscriberMethod); &#125; &#125; &#125; subscribe(subscriber, subscriberMethod) ÊñπÊ≥ïÔºö123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// Must be called in synchronized block private void subscribe(Object subscriber, SubscriberMethod subscriberMethod) &#123; - 1. ËÆ¢ÈòÖÊñπÊ≥ïÁöÑeventTypeÁöÑÂ≠óËäÇÁ†Å Class&lt;?&gt; eventType = subscriberMethod.eventType; - 2. ËÆ¢ÈòÖËÄÖÂíåËÆ¢ÈòÖÊñπÊ≥ïÂ∞ÅË£ÖÊàê‰∏Ä‰∏™Subscription ÂØπË±° Subscription newSubscription = new Subscription(subscriber, subscriberMethod); - 3. subscriptionsByEventType Á¨¨‰∏ÄÊ¨°‰πüÊòØnull ,Ê†πÊçÆeventType CopyOnWriteArrayList&lt;Subscription&gt; subscriptions = subscriptionsByEventType.get(eventType); - 4. Á¨¨‰∏ÄÊ¨°ËÇØÂÆö‰∏∫null if (subscriptions == null) &#123; subscriptions = new CopyOnWriteArrayList&lt;&gt;(); - 5. key ‰∏∫ eventType, value ÊòØsubscriptionsÂØπË±° subscriptionsByEventType.put(eventType, subscriptions); &#125; else &#123; - ÊäõÂá∫ÂºÇÂ∏∏ if (subscriptions.contains(newSubscription)) &#123; throw new EventBusException(&quot;Subscriber &quot; + subscriber.getClass() + &quot; already registered to event &quot; + eventType); &#125; &#125; - 6. Ëé∑ÂèñÊâÄÊúâÊ∑ªÂä†ÁöÑsubscriptions int size = subscriptions.size(); for (int i = 0; i &lt;= size; i++) &#123; - 7. ‰ºöÂà§Êñ≠ÊØè‰∏™ËÆ¢ÈòÖÊñπÊ≥ïÁöÑ‰ºòÂÖàÁ∫ßÔºåÊ∑ªÂä†Âà∞Ëøô‰∏™ subscriptions‰∏≠ÔºåÊåâÁÖß‰ºòÂÖàÁ∫ß if (i == size || subscriberMethod.priority &gt; subscriptions.get(i).subscriberMethod.priority) &#123; subscriptions.add(i, newSubscription); break; &#125; &#125; - 8.Ëé∑ÂèñËÆ¢ÈòÖÁöÑÊñπÊ≥ïÈõÜÂêà List&lt;Class&lt;?&gt;&gt; subscribedEvents = typesBySubscriber.get(subscriber); if (subscribedEvents == null) &#123; subscribedEvents = new ArrayList&lt;&gt;(); - 9. ‰∏∫Á©∫Ê∑ªÂä†Âà∞ typesBySubscriber typesBySubscriber.put(subscriber, subscribedEvents); &#125; - 10. ËÆ¢ÈòÖ‰∫ã‰ª∂Ê∑ªÂä†Âà∞subscribedEventsÈõÜÂêà‰∏≠Âéª subscribedEvents.add(eventType); - 11. Âà§Êñ≠ÊòØÂê¶ÊòØÁ≤òÊÄß‰∫ã‰ª∂ÁöÑÂÖ≥ËÅî if (subscriberMethod.sticky) &#123; if (eventInheritance) &#123; // Existing sticky events of all subclasses of eventType have to be considered. // Note: Iterating over all events may be inefficient with lots of sticky events, // thus data structure should be changed to allow a more efficient lookup // (e.g. an additional map storing sub classes of super classes: Class -&gt; List&lt;Class&gt;). Set&lt;Map.Entry&lt;Class&lt;?&gt;, Object&gt;&gt; entries = stickyEvents.entrySet(); for (Map.Entry&lt;Class&lt;?&gt;, Object&gt; entry : entries) &#123; Class&lt;?&gt; candidateEventType = entry.getKey(); if (eventType.isAssignableFrom(candidateEventType)) &#123; Object stickyEvent = entry.getValue(); checkPostStickyEventToSubscription(newSubscription, stickyEvent); &#125; &#125; &#125; else &#123; Object stickyEvent = stickyEvents.get(eventType); checkPostStickyEventToSubscription(newSubscription, stickyEvent); &#125; &#125; &#125; Âà∞Ê≠§ÔºåÂ¶ÇÊûú‰Ω†Ë∑üÁùÄÊàë‰∏ÄÊ≠•Ê≠•ÁúãÂà∞ËøôÈáåÔºåÂ∫îËØ•Â§ßÊ¶ÇÊòéÁôΩ‰∏Ä‰∫õ‰∫ÜÔºåËøòÊúâ‰∏ÄÈÉ®ÂàÜÊ≤°ÂÆåÔºåÂ∞±ÊòØregister ÂâçÂçäÈÉ®ÂàÜÂÆåÊàêËÆ¢ÈòÖÔºåÂ≠òÂÇ®Á≠âÂ∑•‰ΩúÔºõÂâ©‰∏ãpost(event) ÊñπÊ≥ïÂ∞±ÊòØÂ∞Üevent ÂàÜÂèëÁªôÁõ∏Â∫îËÆ¢ÈòÖËøáÊ≠§‰∫ã‰ª∂ÁöÑËÆ¢ÈòÖËÄÖ‰∫Ü„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[AsyncTaskÊ∫êÁ†ÅËß£ËØª]]></title>
    <url>%2F2018%2F09%2F19%2FAsyncTask%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%2F</url>
    <content type="text"><![CDATA[Â±°ÊÄùË∑Ø 1. ÂàùÂßã AsyncTaskAsyncTask Ëøô‰∏™Á±ªÁöÑÂ£∞ÊòéÂ¶Ç‰∏ãÔºö1234public abstract class AsyncTask&lt;Params, Progress, Result&gt; &#123; .....&#125; ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ªParams Ë°®Á§∫ËæìÂÖ•ÂèÇÊï∞ÁöÑÁ±ªÂûãProgress Ë°®Á§∫ÂêéÂè∞‰ªªÂä°ÁöÑÊâßË°åËøõÂ∫¶Result Ë°®Á§∫ËøîÂõûÁªìÊûúÁöÑÁ±ªÂûã 2.‰ΩøÁî® Âú® AsyncTask Ëøô‰∏™Á±ªÁöÑÈ°∂ÈÉ®Êúâ‰∏Ä‰∫õ‰ª£Á†ÅÊ≥®ÈáäÔºåÈáåÈù¢ËÆ≤Ëø∞‰∫ÜÂ¶Ç‰Ωï‰ΩøÁî®‰∏Ä‰∏™ AsyncTask,Â¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930* &lt;p&gt;Here is an example of subclassing:&lt;/p&gt; * &lt;pre class=&quot;prettyprint&quot;&gt; * private class DownloadFilesTask extends AsyncTask&amp;lt;URL, Integer, Long&amp;gt; &#123; * protected Long doInBackground(URL... urls) &#123; * int count = urls.length; * long totalSize = 0; * for (int i = 0; i &lt; count; i++) &#123; * totalSize += Downloader.downloadFile(urls[i]); * publishProgress((int) ((i / (float) count) * 100)); * // Escape early if cancel() is called * if (isCancelled()) break; * &#125; * return totalSize; * &#125; * * protected void onProgressUpdate(Integer... progress) &#123; * setProgressPercent(progress[0]); * &#125; * * protected void onPostExecute(Long result) &#123; * showDialog(&quot;Downloaded &quot; + result + &quot; bytes&quot;); * &#125; * &#125; * &lt;/pre&gt;//user&lt;p&gt;Once created, a task is executed very simply:&lt;/p&gt; * &lt;pre class=&quot;prettyprint&quot;&gt; * new DownloadFilesTask().execute(url1, url2, url3); * &lt;/pre&gt; 3. ÂÜÖÈÉ®ÈáçË¶ÅÊñπÊ≥ï onPreExecute()123@MainThread protected void onPreExecute() &#123; &#125; Âú®‰∏ªÁ∫øÁ®ã‰∏≠ËøêË°åÔºåÂºÇÊ≠•‰ªªÂä°‰πãÂâç‰ºöË¢´Ë∞ÉÁî®Ôºå‰∏ÄËà¨Áî®‰∫éÂÅö‰∏Ä‰∫õÂáÜÂ§áÂ∑•‰ΩúÔºõ doInBackground()12@WorkerThread protected abstract Result doInBackground(Params... params); Âú®Á∫øÁ®ãÊ±†‰∏≠ËøêË°åÔºåÊ≠§ÊñπÊ≥ï‰∏ÄËà¨Áî®‰∫éÊâßË°åÂºÇÊ≠•‰ªªÂä°ÔºåÈÄöËøápublishProgress ÊñπÊ≥ïÊù•Êõ¥Êñ∞ËøõÂ∫¶Ôºõ onProgressUpdate()123@MainThread protected void onProgressUpdate(Progress... values) &#123; &#125; ‰∏ªÁ∫øÁ®ã‰∏≠ËøêË°åÔºåÂΩìÈÄöËøápublishProgress ÊñπÊ≥ïË∞ÉÁî®ÂêéÔºåonProgressUpdate() ÊñπÊ≥ï‰ºöË¢´Ë∞ÉÁî®Ôºõ onPostExecute()123@MainThread protected void onPostExecute(Result result) &#123; &#125; ‰∏ªÁ∫øÁ®ã‰∏≠ËøêË°åÔºåÂ∞ÜËøîÂõûÁöÑÁªìÊûúÂ±ïÁ§∫„ÄÇ 4.Ê∫êÁ†ÅÂàÜÊûê‰ªéÂÆÉÁöÑ execute ÊñπÊ≥ïÂºÄÂßãÔºö12345678 @MainThread public final AsyncTask&lt;Params, Progress, Result&gt; execute(Params... params) &#123; //sDefaultExecutor ÂÆö‰πâÂ¶Ç‰∏ãÔºåÁ∫øÁ®ãÊ±† return executeOnExecutor(sDefaultExecutor, params); &#125;private static volatile Executor sDefaultExecutor = SERIAL_EXECUTOR;public static final Executor SERIAL_EXECUTOR = new SerialExecutor(); 1234567891011121314151617181920212223242526@MainThread public final AsyncTask&lt;Params, Progress, Result&gt; executeOnExecutor(Executor exec, Params... params) &#123; //È¶ñÂÖàÂà§Êñ≠ÊòØ‰∏çÊòØ PENDING if (mStatus != Status.PENDING) &#123; switch (mStatus) &#123; case RUNNING: throw new IllegalStateException(&quot;Cannot execute task:&quot; + &quot; the task is already running.&quot;); case FINISHED: throw new IllegalStateException(&quot;Cannot execute task:&quot; + &quot; the task has already been executed &quot; + &quot;(a task can be executed only once)&quot;); &#125; &#125; //Â∞ÜÁä∂ÊÄÅËÆæÁΩÆ‰∏∫ RUNNING Áä∂ÊÄÅ mStatus = Status.RUNNING; //1.Ë∞ÉÁî®‰∫Ü onPreExecute() ÊñπÊ≥ï onPreExecute(); //Â∞ÜÂèÇÊï∞Â∞ÅË£ÖÂà∞ mWorker.mParams ‰∏≠Âéª‰∫Ü mWorker.mParams = params; //Ë∞ÉÁî®execute Â∞ÜmFuture ‰º†ËøõÂéª‰∫Ü exec.execute(mFuture); return this; &#125; ‰∏∫‰∫ÜÂºÑÊòéÁôΩÊï¥‰ΩìÊµÅÁ®ãÔºåÈ¶ñÈ°µË¶ÅÊêûÊòéÁôΩ‰∏äÈù¢ÁöÑ mWorker mFuture ÊòØÂπ≤ÂòõÁöÑ„ÄÇ mWorker 1234567891011121314151617 private final WorkerRunnable&lt;Params, Result&gt; mWorker;//ÊäΩË±°Á±ª Âπ∂‰∏îÂÆûÁé∞‰∫ÜCallable Êé•Âè£private static abstract class WorkerRunnable&lt;Params, Result&gt; implements Callable&lt;Result&gt; &#123; Params[] mParams; &#125; @SuppressWarnings(&#123;&quot;RawUseOfParameterizedType&quot;&#125;) private static class AsyncTaskResult&lt;Data&gt; &#123; final AsyncTask mTask; final Data[] mData; AsyncTaskResult(AsyncTask task, Data... data) &#123; mTask = task; mData = data; &#125; &#125;&#125; 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849//Âú®AsyncTask ÁöÑÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÔºåÂàÜÂà´ÂØπ mWorker, mFuture ËøõË°å‰∫ÜÂàùÂßãÂåñpublic AsyncTask(@Nullable Looper callbackLooper) &#123; mHandler = callbackLooper == null || callbackLooper == Looper.getMainLooper() ? getMainHandler() : new Handler(callbackLooper); mWorker = new WorkerRunnable&lt;Params, Result&gt;() &#123; //ÂÆûÁé∞ ‰∫Ü call ÊñπÊ≥ï public Result call() throws Exception &#123; //ËÆæÁΩÆË∞ÉÁî®‰∫Ü‰∏∫ true mTaskInvoked.set(true); // Result result = null; try &#123; //ËÆæÁΩÆÁ∫øÁ®ãÁöÑ‰ºòÂÖàÁ∫ß Process.setThreadPriority(Process.THREAD_PRIORITY_BACKGROUND); //noinspection unchecked //Â∞Ü 2. doInBackgroundÁöÑÁªìÊûúÂ≠òÂÇ®Âà∞ result ‰∏≠ result = doInBackground(mParams); Binder.flushPendingCommands(); &#125; catch (Throwable tr) &#123; mCancelled.set(true); throw tr; &#125; finally &#123; //ÊúÄÂêéÊâßË°åpostResult postResult(result); &#125; //ËøîÂõûÁªìÊûú return result; &#125; &#125;; mFuture = new FutureTask&lt;Result&gt;(mWorker) &#123; @Override protected void done() &#123; try &#123; postResultIfNotInvoked(get()); &#125; catch (InterruptedException e) &#123; android.util.Log.w(LOG_TAG, e); &#125; catch (ExecutionException e) &#123; throw new RuntimeException(&quot;An error occurred while executing doInBackground()&quot;, e.getCause()); &#125; catch (CancellationException e) &#123; postResultIfNotInvoked(null); &#125; &#125; &#125;; &#125; postResult(result) ÊñπÊ≥ï1234567private Result postResult(Result result) &#123; @SuppressWarnings(&quot;unchecked&quot;) Message message = getHandler().obtainMessage(MESSAGE_POST_RESULT, new AsyncTaskResult&lt;Result&gt;(this, result)); message.sendToTarget(); return result; &#125; ÂèëÈÄÅ‰∏ÄÊù° MESSAGE_POST_RESULT ÁöÑÊ∂àÊÅØÔºåÂπ∂‰∏îÂ∞Üresult Â≠òÂÖ•Âà∞‰∫Ü AsyncTaskResult‰∏≠ÁöÑ mData ‰∏≠Âéª‰∫ÜÔºåÂÖ∂‰∏≠ AsyncTaskResult12345678910@SuppressWarnings(&#123;&quot;RawUseOfParameterizedType&quot;&#125;) private static class AsyncTaskResult&lt;Data&gt; &#123; final AsyncTask mTask; final Data[] mData; AsyncTaskResult(AsyncTask task, Data... data) &#123; mTask = task; mData = data; &#125; &#125; getHandler Ëé∑Âèñ‰∏Ä‰∏™ Handler ,Êàë‰ª¨Áúã‰∏ã handleMessage ÁöÑMESSAGE_POST_RESULT ÂØπËøôÊù°Ê∂àÊÅØÁöÑÂ§ÑÁêÜÔºö123456789101112131415161718192021private static class InternalHandler extends Handler &#123; public InternalHandler(Looper looper) &#123; super(looper); &#125; @SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;RawUseOfParameterizedType&quot;&#125;) @Override public void handleMessage(Message msg) &#123; AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj; switch (msg.what) &#123; case MESSAGE_POST_RESULT: //ÊòØ‰ªñÊòØ‰ªñ Â∞±ÊòØ‰ªñ // There is only one result result.mTask.finish(result.mData[0]); break; case MESSAGE_POST_PROGRESS: result.mTask.onProgressUpdate(result.mData); break; &#125; &#125; &#125; ÂÖ∂‰∏≠ result ÊòØ AsyncTaskResult Á±ªÂûãÔºåÂâçÈù¢Êàë‰ª¨ËßÅÂà∞ËøáÁöÑÔºåmTask ÂΩìÊó∂Êàë‰ª¨‰º†ÁöÑÊòØ this ‰πüÂ∞±ÊòØÂΩìÂâçÁöÑ AsyncTask ,Ë∞ÉÁî®finish ÊñπÊ≥ïÔºåÂ∞ÜmData ËøîÂõûÁöÑÁªìÊûú‰º†ÂÖ•ËøõÂéªÔºåËøòËÆ∞ÂæóÊàë‰ª¨ÂâçÈù¢ÁúãËøáÁöÑÂêóÔºåÂ∞ÜËøîÂõûÁöÑÁªìÊûúÂ≠òÂÖ•AsyncTaskResult.mData‰∏≠Âéª‰∫Ü„ÄÇ ‰∏ãÈù¢Áúã‰∏ã finishÊñπÊ≥ïÔºö1234567891011private void finish(Result result) &#123; //Âà§Êñ≠ÊòØÂê¶ÂèñÊ∂àÔºåÂ¶ÇÊûúÂèñÊ∂à‰∫ÜÔºåÂ∞±‰∏çÊâßË°åonPostExecute ‰∫Ü if (isCancelled()) &#123; onCancelled(result); &#125; else &#123; //4. Â∞±ÊâßË°åonPostExecute ÊñπÊ≥ï‰∫Ü onPostExecute(result); &#125; // Â∞ÜÁä∂ÊÄÅÊ†áÂøó‰∏∫ finish mStatus = Status.FINISHED; &#125; ok Ôºå‰∏äËø∞ÈÉΩÊòØ mWorker Â∑•‰ΩúÁöÑÔºåÊé•‰∏ãÊù•ÊòØÊàë‰ª¨‰∏ÄÂºÄÂßãËØ¥ÁöÑ mFuture mFuture123456789101112131415161718private final FutureTask&lt;Result&gt; mFuture;//ÂàùÂßãÂåñ‰πüÊòØÂú®AsyncTask ÊûÑÈÄ†ÊñπÊ≥ï‰∏≠ÊâßË°åÁöÑÔºåÂú®mWorker ‰πã‰∏ãÔºåÂπ∂‰∏îÂ∞ÜmWorder ‰º†ÂÖ•mFuture = new FutureTask&lt;Result&gt;(mWorker) &#123; @Override protected void done() &#123; try &#123; postResultIfNotInvoked(get()); &#125; catch (InterruptedException e) &#123; android.util.Log.w(LOG_TAG, e); &#125; catch (ExecutionException e) &#123; throw new RuntimeException(&quot;An error occurred while executing doInBackground()&quot;, e.getCause()); &#125; catch (CancellationException e) &#123; postResultIfNotInvoked(null); &#125; &#125; &#125;; postResultIfNotInvoked(get()); Â¶Ç‰∏ãÔºö1234567891011private void postResultIfNotInvoked(Result result) &#123; final boolean wasTaskInvoked = mTaskInvoked.get(); //wasTaskInvoked ‰∏∫true ,‰πãÂâçÂú® mWorker ‰∏≠ËÆæÁΩÆ‰∫Ü‰∏∫true//mWorker = new WorkerRunnable&lt;Params, Result&gt;() &#123;// public Result call() throws Exception &#123; // mTaskInvoked.set(true); if (!wasTaskInvoked) &#123; postResult(result); &#125; &#125; FutureTask :123456789101112131415161718192021222324252627282930313233343536373839404142Êàë‰ª¨Áü•ÈÅìmWorker implement Callable Êé•Âè£Ôºå‰º†ÂÖ•ËµãÂÄºÁªô‰∫Ücallable ÂèòÈáè public FutureTask(Callable&lt;V&gt; callable) &#123; if (callable == null) throw new NullPointerException(); this.callable = callable; this.state = NEW; // ensure visibility of callable &#125;public void run() &#123; if (state != NEW || !U.compareAndSwapObject(this, RUNNER, null, Thread.currentThread())) return; try &#123; //callable ÂèòÈáèÂèàËµãÂÄºÁªô‰∫Ü c Callable&lt;V&gt; c = callable; if (c != null &amp;&amp; state == NEW) &#123; V result; boolean ran; try &#123; //ËøôÈáåË∞ÉÁî®c.call ÂÆûÈôÖ‰∏äÂ∞±ÊòØË∞ÉÁî® mWorker.call ÊñπÊ≥ï//ÔºåÁî±Êàë‰ª¨‰∏äÈù¢ÁöÑÂàÜÊûêÁü•ÈÅìÔºåÂú®mWorker.call ÊñπÊ≥ï‰∏≠ÊúÄÁªà‰ºöËøîÂõû result ÁªìÊûú result = c.call(); ran = true; &#125; catch (Throwable ex) &#123; result = null; ran = false; setException(ex); &#125; if (ran) set(result); &#125; &#125; finally &#123; // runner must be non-null until state is settled to // prevent concurrent calls to run() runner = null; // state must be re-read after nulling runner to prevent // leaked interrupts int s = state; if (s &gt;= INTERRUPTING) handlePossibleCancellationInterrupt(s); &#125; &#125; ok ÔºåËøôÊòØ mFuture,ËøòÂâ©‰∏ãÊúÄÂêé‰∏Ä‰∏™Ôºö exec.execute(mFuture); exec Â∞±ÊòØ sDefaultExecutor ,ÂÖ∂ÂÆû Â∞±ÊòØ SerialExecutor,Â¶Ç‰∏ãÔºö123private static volatile Executor sDefaultExecutor = SERIAL_EXECUTOR;public static final Executor SERIAL_EXECUTOR = new SerialExecutor(); SerialExecutor Â¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627private static class SerialExecutor implements Executor &#123; final ArrayDeque&lt;Runnable&gt; mTasks = new ArrayDeque&lt;Runnable&gt;(); Runnable mActive; public synchronized void execute(final Runnable r) &#123; mTasks.offer(new Runnable() &#123; public void run() &#123; try &#123; r.run(); &#125; finally &#123; scheduleNext(); &#125; &#125; &#125;); //Á¨¨‰∏ÄÊ¨°ËÇØÂÆö‰∏∫null ÔºåÊâßË°å scheduleNext if (mActive == null) &#123; scheduleNext(); &#125; &#125; protected synchronized void scheduleNext() &#123; //Áªô mActivie ËµãÂÄºÔºåmTasks.poll ‰ºö‰ªéÁ¨¨‰∏Ä‰∏™ÂºÄÂßãÂèñ if ((mActive = mTasks.poll()) != null) &#123; THREAD_POOL_EXECUTOR.execute(mActive); &#125; &#125; &#125; ‰∏äÈù¢Êàë‰ª¨Â∞Ü mFuture ‰º†ÂÖ•ÔºåÂÆûÈôÖÂ∞±ÊòØ r.mTask ÊòØ ArrayDeque&lt;Runnable&gt; Âßë‰∏îËÆ§‰∏∫ÂÆÉÊòØËøô‰∏™ÊéíÈòüÂ∫èÂàóÁöÑÂêß„ÄÇÁúã‰∏ãoffer ÊñπÊ≥ïÔºö12345678910111213/** ÊèíÂÖ•‰∏Ä‰∏™ element Âú®ÈòüÂ∞æ * Inserts the specified element at the end of this deque. * * &lt;p&gt;This method is equivalent to &#123;@link #offerLast&#125;. * * @param e the element to add * @return &#123;@code true&#125; (as specified by &#123;@link Queue#offer&#125;) * @throws NullPointerException if the specified element is null */ public boolean offer(E e) &#123; return offerLast(e); &#125; ÁúãÊ≥®ÈáäÔºå‰πüÂ∞±ÊòØËØ¥ÊòØÊØèÊ¨°ÊâßË°å‰∏Ä‰∏™‰ªªÂä°ÔºåÈÉΩÊòØÂú®ÂΩìÂâç deque ÁöÑÈòüÂ∞æÂºÄÂßãÊéíÈòüÁöÑ„ÄÇÂπ∂‰∏îÊâßË°åÊòØ‰∏≤Ë°åÁöÑÔºåÂõ†‰∏∫ÂΩìÁ¨¨‰∫å‰∏™Á∫øÁ®ãËøáÊù•ÁöÑÊó∂ÂÄôÔºåÂà§Êñ≠ mActive ‰∏ç‰∏∫ null Â∞Ü‰∏ç‰ºöÊâßË°å scheduleNext.(ÊàëËøô‰∏™ÊòØ8.0)Ê∫êÁ†ÅÔºåÂÖ∂ÂÆûÂú® android 3.0 ‰πãÂêé AsyncTask ÈÉΩÊòØÈááÁî®‰∏≤Ë°åÊâßË°å‰ªªÂä°ÁöÑ„ÄÇ ÂêÑ‰∏™ÁâàÊú¨ÁöÑ‰∏çÂêåÂ¶Ç‰∏ãÔºöandroid 1.6‰πãÂâç ‚Äî‚Äî ‰∏≤Ë°åandroid 1.6-3.0 ‰πãÈó¥ ‚Äî‚Äì Âπ∂Ë°åandroid 3.0 ‰πãÂêé ‚Äî‚Äì ‰∏≤Ë°å Â∞ΩÁÆ°Â¶ÇÊ≠§ÔºåÊàë‰ª¨‰ªçÁÑ∂ÂèØ‰ª•ÈÄöËøá Ë∞ÉÁî® executeOnExecutor Êù•Âπ∂Ë°åÊâßË°å‰ªªÂä°„ÄÇ ok Ôºå ÂõûÂà∞ÈÇ£‰∏™ execute ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ËØ¥Ë∞ÉÁî®‰∫Ü r.run ÂÆûÈôÖÂ±±Â∞±ÊòØ Ë∞ÉÁî® mFuture.run ÊñπÊ≥ïÔºö‰∏äÈù¢Êàë‰ª¨Â±ïÁ§∫ËøáÂú® mFuture.run ÊñπÊ≥ï‰∏≠Â¶Ç‰∏ãÔºö 12345678910try &#123; //ËøôÈáåË∞ÉÁî®c.call ÂÆûÈôÖ‰∏äÂ∞±ÊòØË∞ÉÁî® mWorker.call ÊñπÊ≥ï//ÔºåÁî±Êàë‰ª¨‰∏äÈù¢ÁöÑÂàÜÊûêÁü•ÈÅìÔºåÂú®mWorker.call ÊñπÊ≥ï‰∏≠ÊúÄÁªà‰ºöËøîÂõû result ÁªìÊûú result = c.call(); ran = true; &#125; catch (Throwable ex) &#123; result = null; ran = false; setException(ex); &#125; ÊúÄÁªàË∞ÉÁî®mWorker.call ÊñπÊ≥ïÔºåËÄåÂú® mWorker.call ÊñπÊ≥ï‰∏≠ÔºåÊàë‰ª¨ÂÆåÊàê‰∏ÄÁ≥ªÂàóÁöÑ‰ªªÂä°ÔºåË∞ÉÁî®‰∫Ü doInBackground onPostExecute ÂÆåÊàê‰∫ÜÊï¥‰∏™ÁöÑË∞ÉÁî®ËøáÁ®ã„ÄÇ ÊúâÁöÑ‰∫∫ÂèØËÉΩÂ∑≤ÁªèÊ≥®ÊÑèÂà∞‰∫Ü ËøòÂ∑Æ‰∏Ä‰∏™ onProgressUpdate ÊñπÊ≥ïËøòÊ≤°Ë¢´Ë∞ÉÁî®ÔºåÊàë‰ª¨Áü•ÈÅìÂè™ÊúâË∞ÉÁî®ÈÇ£‰∏™ publishProgress ÊñπÊ≥ïÁöÑÊó∂ÂÄôÊâçËÉΩË∞ÉÁî® onProgressUpdate ,ÈÇ£‰∏ãÈù¢Êàë‰ª¨Âç°Â§è publishProgress ÊñπÊ≥ïÔºö12345678@WorkerThread protected final void publishProgress(Progress... values) &#123; //Â¶ÇÊûúÊ≤°ÂèñÊ∂à if (!isCancelled()) &#123; //‰ºöÂèëÈÄÅ‰∏Ä‰∏™ MESSAGE_POST_PROGRESS ÁöÑÊ∂àÊÅØ getHandler().obtainMessage(MESSAGE_POST_PROGRESS, new AsyncTaskResult&lt;Progress&gt;(this, values)).sendToTarget(); &#125; &#125; 123456789101112131415161718192021private static class InternalHandler extends Handler &#123; public InternalHandler(Looper looper) &#123; super(looper); &#125; @SuppressWarnings(&#123;&quot;unchecked&quot;, &quot;RawUseOfParameterizedType&quot;&#125;) @Override public void handleMessage(Message msg) &#123; AsyncTaskResult&lt;?&gt; result = (AsyncTaskResult&lt;?&gt;) msg.obj; switch (msg.what) &#123; case MESSAGE_POST_RESULT: // There is only one result result.mTask.finish(result.mData[0]); break; case MESSAGE_POST_PROGRESS://ÊòØ‰ªñÊòØ‰ªñ Â∞±ÊòØ‰ªñ //3. Ë∞ÉÁî®‰∫Ü onProgressUpdate ÊñπÊ≥ï‰∫Ü result.mTask.onProgressUpdate(result.mData); break; &#125; &#125; &#125; ‰ºöË∞ÉÁî® AsyncTask ÁöÑ onProgressUpdate ÊñπÊ≥ï‰∫Ü„ÄÇÁªìÊùü„ÄÇ ÊÄªÁªì AsyncTask ÂÆûÁé∞ÂéüÁêÜÂ∞±ÂÜÖÈÉ®Áª¥Êä§‰∫Ü2‰∏™Á∫øÁ®ãÊ±†+HandlderÔºå2‰∏™Á∫øÁ®ãÊ±†ÂàÜÂà´‰∏∫Ôºö‰ªªÂä°ÈòüÂàó Á∫øÁ®ãÊ±†ÔºàSerialExecutorÔºâ,ÊâßË°å Á∫øÁ®ãÊ±†ÔºàThread_pool_executorÔºâÁúüÊ≠£ÊâßË°åÂÖ∑‰ΩìÁöÑÁ∫øÁ®ã‰ªªÂä°Ôºå‰ªªÂä°ÂÆåÊàêÊúÄÂêéÈÄöËøá InternalHandler ÂèëÈÄÅÊ∂àÊÅØ ÔºåÂ∞ÜÊâßË°å‰ªªÂä°ÁöÑÁªìÊûúpost Âà∞‰∏ªÁ∫øÁ®ã‰∏≠„ÄÇÊ≠§Á∫øÁ®ãÊ±†‰∏≠ÊâßË°å‰ªªÂä°ÁöÑÈ°∫Â∫èÔºåÊ†πÊçÆ‰∏çÂêå api ÁâàÊú¨ÁöÑ‰∏çÂêåÈ°∫Â∫èÁï•Êúâ‰∏çÂêåÔºåÂú®android 1.6‰πãÂâçÔºåÊòØ‰∏≤Ë°åÊâßË°å‰ªªÂä°ÔºåÂú® Android 1.6-3.0 ‰πãÈó¥ÈÄöËøáÂπ∂Ë°åÊâßË°å‰ªªÂä°ÔºåAndroid 3.0‰πãÂêéÂ∞±ÊòØÈªòËÆ§‰∏≤Ë°åÊâßË°å‰ªªÂä°‰∫ÜÔºåÂΩìÁÑ∂Êàë‰ª¨‰πüÂèØ‰ª•ÈÄöËøáË∞ÉÁî®executeOnExecuteor Âπ∂Ë°åÊâßË°å„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[Service ÂêØÂä®ËøáÁ®ã]]></title>
    <url>%2F2018%2F09%2F11%2FService%E5%90%AF%E5%8A%A8%E8%BF%87%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ÁúãÂÆå Activity ÁöÑÂêØÂä®ËøáÁ®ãÔºåÂèëÁé∞ Service ÁöÑÂêØÂä®ËøáÁ®ãÁõ∏ÂØπÊù•ËØ¥Â∞±ÊØîËæÉÁÆÄÂçï‰∫Ü„ÄÇ Ë¶ÅËØ¥Ëµ∑ÂêØÂä®ËøáÁ®ãÔºåÂ∞±Âæó‰ªé startService ÂºÄÂßãÔºö 1.startServiceÊ†πÊçÆÊ∫êÁ†ÅÁöÑË∑≥ËΩ¨ÔºåÂèëÁé∞Ë∑≥ËΩ¨Âà∞ ContextWrapper Ëøô‰∏™Á±ª‰∏≠Ôºå‰ª£Á†ÅÂ¶Ç‰∏ãÔºö1234@Override public ComponentName startService(Intent service) &#123; return mBase.startService(service); &#125; ÂÖ∂‰∏≠ mBase ÊòØÁ±ªÂûãÊòØÔºöContext Á±ªÂûãÔºåÂ¶Ç‰∏ãÔºö1234public class ContextWrapper extends Context &#123; Context mBase; ......&#125; ËÄåÊàë‰ª¨ÂèàÁü•ÈÅì Context ÊòØ‰∏Ä‰∏™ÊäΩË±°Á±ª ÔºåÂÆûÁé∞ËÄÖÊòØ ContextImpl ,ÊâÄ‰ª•Êàë‰ª¨Â∫îËØ•ÊòØÊü•ÁúãContextImpl Ëøô‰∏™Á±ª‰∏≠ÁöÑ startService(service) ÊñπÊ≥ï„ÄÇ ContextImpl ‰∏≠ÁöÑÊñπÊ≥ïÂÆö‰πâÂ¶Ç‰∏ãÔºö12345@Override public ComponentName startService(Intent service) &#123; warnIfCallingFromSystemProcess(); return startServiceCommon(service, false, mUser); &#125; Âú® startService ‰∏≠ÂèàË∞ÉÁî®‰∫Ü startServiceCommon(service,(requirForeground:false),mUser) Ëøô‰∏™ÊñπÊ≥ïÔºåÁªßÁª≠Ë∑üËøõÔºö 2.startServiceCommonstartServiceCommon ÊñπÊ≥ïÂ¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829private ComponentName startServiceCommon(Intent service, boolean requireForeground, UserHandle user) &#123; try &#123; //Ê†°È™åË¶ÅÂêØÂä®ÁöÑservice validateServiceIntent(service); service.prepareToLeaveProcess(this); ComponentName cn = ActivityManager.getService().startService( mMainThread.getApplicationThread(), service, service.resolveTypeIfNeeded( getContentResolver()), requireForeground, getOpPackageName(), user.getIdentifier()); if (cn != null) &#123; if (cn.getPackageName().equals(&quot;!&quot;)) &#123; throw new SecurityException( &quot;Not allowed to start service &quot; + service + &quot; without permission &quot; + cn.getClassName()); &#125; else if (cn.getPackageName().equals(&quot;!!&quot;)) &#123; throw new SecurityException( &quot;Unable to start service &quot; + service + &quot;: &quot; + cn.getClassName()); &#125; else if (cn.getPackageName().equals(&quot;?&quot;)) &#123; throw new IllegalStateException( &quot;Not allowed to start service &quot; + service + &quot;: &quot; + cn.getClassName()); &#125; &#125; return cn; &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125; &#125; ËøôÈáåÈù¢ÊúâÂá†‰∏™ÈúÄË¶ÅËØ¥Êòé‰∏Ä‰∏ãÔºö ActivityManager.getService() ÁÇπËøõÂéªÊü•Áúã12345678910111213141516/** * @hide */ public static IActivityManager getService() &#123; return IActivityManagerSingleton.get(); &#125; private static final Singleton&lt;IActivityManager&gt; IActivityManagerSingleton = new Singleton&lt;IActivityManager&gt;() &#123; @Override protected IActivityManager create() &#123; final IBinder b = ServiceManager.getService(Context.ACTIVITY_SERVICE); final IActivityManager am = IActivityManager.Stub.asInterface(b); return am; &#125; &#125;; È¶ñÂÖàÊòØËøîÂõûÁöÑÁ±ªÂûãÊòØ IActivityManager Á±ªÂûãÔºåÂÖ∂‰∏≠Âú®create ÊñπÊ≥ï‰∏≠ÔºåÊãøÂà∞ËøúÁ®ãÊúçÂä°ÁöÑBinder ÂØπË±°ÔºåÂÖ∂‰∏≠IActivityManager.Stub.asInterface(b) ‰∏çÁü•ÈÅìÂ§ßÂÆ∂ÊúâÊ≤°ÊúâÊÉ≥Ëµ∑AIDL ËøôÂ∞±ÂæàÁÜüÊÇâ‰∫ÜÔºåÂ∞±ÊòØÊãøÂà∞ËøúÁ®ãÊúçÂä°ÁöÑ‰ª£ÁêÜÂØπË±°ÔºöIActivityManager,ÈÄöËøá‰ª£ÁêÜÂØπË±°Ë∞ÉÁî®ËøúÁ®ãÁöÑÊñπÊ≥ïÔºåÊòØÂ∫îÁî®ËøõÁ®ã‰∏éÊúçÂä°ËøõÁ®ãÈÄö‰ø°ÁöÑÂ™í‰ªãÔºåÂ¶ÇÊûúÊ≤°ÁåúÈîôÁöÑËØùÂ∞±ÊòØÂú®ActivityManagerService ‰∏≠ÂÆûÁé∞‰∫ÜÔºåÊü•ÁúãActivityManagerService Á±ªÔºö1234public class ActivityManagerService extends IActivityManager.Stub implements Watchdog.Monitor, BatteryStatsImpl.BatteryCallback &#123;.....&#125; ÊûúÁÑ∂‰∏çÂá∫ÊâÄÊñôÔºåAMS extend IActivityManager.Stub . mMainThread.getApplicationThread() È¶ñÂÖàÊòéÁôΩ mMainThread ÊòØ ActivityThread Á±ªÁöÑÂÆû‰æãÂèòÈáèÔºåÈÄöËøágetApplicationThread() ÊñπÊ≥ïÊãøÂà∞‰∏Ä‰∏™ ApplicationThread Á±ªÁöÑÂÆû‰æãÔºö1234public ApplicationThread getApplicationThread() &#123; return mAppThread; &#125; ËÄåApplicationThread Á±ªÂÆö‰πâÂ¶Ç‰∏ãÔºö123private class ApplicationThread extends IApplicationThread.Stub &#123;.....&#125; ÂèëÁé∞ ApplicationThread ÊòØ ActivityThread ÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ª.Âπ∂‰∏îÂÆûÁé∞‰∫Ü IApplicationThread.Stub ,ËÄåÊàë‰ª¨ÂèàÊääËøô‰∏™Á±ªÂûã‰º†ÂÖ•Áªô‰∫ÜAMS,Áõ∏ÂΩì‰∫éËøúÁ®ãÊúçÂä°ÊãøÂà∞‰∫Ü‰∏Ä‰∏™ËÆøÈóÆÂ∫îÁî®ËøõÁ®ãÁöÑ‰ª£ÁêÜÔºåÁ±ªÂûã‰∏∫ÔºöIApplicationThread ÊÄªÁªìÔºöÂà∞ÁõÆÂâç‰∏∫Ê≠¢ÔºåÂÆ¢Êà∑Á´ØÊãøÂà∞‰∫ÜËøúÁ®ãÊúçÂä°ÁöÑ‰ª£ÁêÜÔºàIActivityManagerÔºâ, ÊúçÂä°Á´ØÊãøÂà∞‰∫ÜÂÆ¢Êà∑Á´ØÁöÑ‰ª£ÁêÜÔºàIApplicationThreadÔºâ,ÂÆÉ‰ª¨‰∫íÁõ∏ÊãøÂà∞ÂêÑËá™ËøõÁ®ãÁöÑ‰ª£ÁêÜÁ±ªÔºåÊòØÂÆÉ‰ª¨ËøõË°åËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑÂü∫Á°Ä„ÄÇ ok ,Êàë‰ª¨ÂõûÂà∞ÊúÄÂàùÈÇ£‰∏™Âú∞ÊñπÔºö1234ComponentName cn = ActivityManager.getService().startService( mMainThread.getApplicationThread(), service, service.resolveTypeIfNeeded( getContentResolver()), requireForeground, getOpPackageName(), user.getIdentifier()); ÈÄöËøáÂâçÈù¢ÁöÑÂàÜÊûêÊàë‰ª¨Áü•ÈÅìÔºöActivityManager.getService(). ÂÆûÈôÖÂ∞±ÊòØ AMS ËøúÁ®ã‰ª£ÁêÜÔºåÊúÄÁªàÂú®AMS ‰∏≠ÂÆåÊàêÔºåÊàë‰ª¨Âéª AMS ‰ª£Á†Å‰∏≠Êü•Áúã‰∏ã startService ‰ª£Á†ÅÔºö 3.ActivityManagerService. startService1234567891011121314151617181920212223242526272829303132@Override public ComponentName startService(IApplicationThread caller, Intent service, String resolvedType, boolean requireForeground, String callingPackage, int userId) throws TransactionTooLargeException &#123; enforceNotIsolatedCaller(&quot;startService&quot;); // Refuse possible leaked file descriptors if (service != null &amp;&amp; service.hasFileDescriptors() == true) &#123; throw new IllegalArgumentException(&quot;File descriptors passed in Intent&quot;); &#125; if (callingPackage == null) &#123; throw new IllegalArgumentException(&quot;callingPackage cannot be null&quot;); &#125; if (DEBUG_SERVICE) Slog.v(TAG_SERVICE, &quot;*** startService: &quot; + service + &quot; type=&quot; + resolvedType + &quot; fg=&quot; + requireForeground); synchronized(this) &#123; final int callingPid = Binder.getCallingPid(); final int callingUid = Binder.getCallingUid(); final long origId = Binder.clearCallingIdentity(); ComponentName res; try &#123; // ÂèàË∞ÉÁî®‰∫ÜstartServiceLocked ÊñπÊ≥ï res = mServices.startServiceLocked(caller, service, resolvedType, callingPid, callingUid, requireForeground, callingPackage, userId); &#125; finally &#123; Binder.restoreCallingIdentity(origId); &#125; return res; &#125; &#125; startServiceLocked ÊñπÊ≥ïÂæàÂ§çÊùÇÔºåÂ§ßÊ¶ÇÂ¶Ç‰∏ãÔºö1234567891011ComponentName startServiceLocked(IApplicationThread caller, Intent service, String resolvedType, int callingPid, int callingUid, boolean fgRequired, String callingPackage, final int userId) throws TransactionTooLargeException &#123;.....ServiceRecord r = res.record;//ÂêØÂä®serviceÁöÑ‰ø°ÊÅØ‰øùÂ≠òÂú® serviceRecord ‰∏≠.... ComponentName cmp = startServiceInnerLocked(smap, service, r, callerFg, addToStarting); return cmp;.....&#125; ÂÜÖÈÉ®ÂèàË∞ÉÁî®‰∫ÜÔºöstartServiceInnerLocked ÊñπÊ≥ï 4.startServiceInnerLockedÂ¶Ç‰∏ãÔºö123456ComponentName startServiceInnerLocked(ServiceMap smap, Intent service, ServiceRecord r, boolean callerFg, boolean addToStarting) throws TransactionTooLargeException &#123;... String error = bringUpServiceLocked(r, service.getFlags(), callerFg, false, false);...&#125; ÂèàË∞ÉÁî®Ôºö bringUpServiceLocked 5.bringUpServiceLocked1234567 private String bringUpServiceLocked(ServiceRecord r, int intentFlags, boolean execInFg, boolean whileRestarting, boolean permissionsReviewRequired) throws TransactionTooLargeException &#123;....realStartServiceLocked(r, app, execInFg);&#125; ËÄåÂêéÂèàË∞ÉÁî®‰∫Ü realStartServiceLocked(r, app, execInFg); 6.realStartServiceLocked12345678private final void realStartServiceLocked(ServiceRecord r, ProcessRecord app, boolean execInFg) throws RemoteException &#123; .... app.thread.scheduleCreateService(r, r.serviceInfo, mAm.compatibilityInfoForPackageLocked(r.serviceInfo.applicationInfo), app.repProcState); ....&#125; ÂÖ∂‰∏≠ app.thread ÊòØ IApplicationThread Á±ªÂûãÔºåÂ∞±ÊòØËøúÁ®ãË∞ÉÁî®ÂÆ¢Êà∑Á´ØËøõÁ®ãÈáåÁöÑÊñπÊ≥ïÔºåscheduleCreateService ,ËÄåÊàë‰ª¨ÂèàÁü•ÈÅì ApplicationThread ÂÆûÁé∞‰∫Ü IApplicationThreadÔºåÊâÄ‰ª•Â∞±Êü•Áúã ApplicationThread Á±ª‰∏≠ÁöÑ scheduleCreateServiceÊñπÊ≥ïÔºåÂâçÈù¢Êàë‰ª¨ËØ¥ËøáApplicationThread ÊòØ ActivityThread ÁöÑ‰∏Ä‰∏™ÂÜÖÈÉ®Á±ªÔºåÊü•ÁúãÔºö 7.ApplicationThread.scheduleCreateService12345678910public final void scheduleCreateService(IBinder token, ServiceInfo info, CompatibilityInfo compatInfo, int processState) &#123; updateProcessState(processState, false); CreateServiceData s = new CreateServiceData(); s.token = token; s.info = info; s.compatInfo = compatInfo; sendMessage(H.CREATE_SERVICE, s); &#125; ÂèëÁé∞ÂÜÖÈÉ®ÈÄöËøáÂèëÈÄÅ‰∏Ä‰∏™ CREATE_SERVICE ÁöÑÊ∂àÊÅØÔºåH ÊòØ Handle,ÁªßÁª≠Êü•ÁúãÔºöhandleMessage ÊñπÊ≥ï 12345case CREATE_SERVICE: Trace.traceBegin(Trace.TRACE_TAG_ACTIVITY_MANAGER, (&quot;serviceCreate: &quot; + String.valueOf(msg.obj))); handleCreateService((CreateServiceData)msg.obj); Trace.traceEnd(Trace.TRACE_TAG_ACTIVITY_MANAGER); break; Âà∞ handleCreateService ‰∏≠Ôºö12345678910111213141516171819202122232425262728293031323334353637383940414243444546private void handleCreateService(CreateServiceData data) &#123; // If we are getting ready to gc after going to the background, well // we are back active so skip it. unscheduleGcIdler(); LoadedApk packageInfo = getPackageInfoNoCheck( data.info.applicationInfo, data.compatInfo); Service service = null; try &#123; java.lang.ClassLoader cl = packageInfo.getClassLoader(); service = (Service) cl.loadClass(data.info.name).newInstance(); &#125; catch (Exception e) &#123; if (!mInstrumentation.onException(service, e)) &#123; throw new RuntimeException( &quot;Unable to instantiate service &quot; + data.info.name + &quot;: &quot; + e.toString(), e); &#125; &#125; try &#123; if (localLOGV) Slog.v(TAG, &quot;Creating service &quot; + data.info.name); //ÂàõÂª∫context ContextImpl context = ContextImpl.createAppContext(this, packageInfo); context.setOuterContext(service); //ÂàõÂª∫Application Application app = packageInfo.makeApplication(false, mInstrumentation); //ÈÄöËøáattach ÊñπÊ≥ïÔºåÂ∞Ücontext application Ôºåservice ËøûÊé•Ëµ∑Êù• service.attach(context, this, data.info.name, data.token, app, ActivityManager.getService()); //Ë∞ÉÁî®service oncreateÊñπÊ≥ï service.onCreate(); mServices.put(data.token, service); try &#123; ActivityManager.getService().serviceDoneExecuting( data.token, SERVICE_DONE_EXECUTING_ANON, 0, 0); &#125; catch (RemoteException e) &#123; throw e.rethrowFromSystemServer(); &#125; &#125; catch (Exception e) &#123; if (!mInstrumentation.onException(service, e)) &#123; throw new RuntimeException( &quot;Unable to create service &quot; + data.info.name + &quot;: &quot; + e.toString(), e); &#125; &#125; &#125; service.onCreate(); ok ÔºåË∞ÉÁî®‰∫Ü onCreate ÊñπÊ≥ïÔºåËá≥Ê≠§ÔºåserviceÁöÑÂêØÂä®ËøáÁ®ãÁöÑÂ∞±ÂÆåÊàê‰∫Ü„ÄÇ]]></content>
  </entry>
  <entry>
    <title><![CDATA[TransitionDrawable]]></title>
    <url>%2F2018%2F08%2F16%2FTransitionDrawable%2F</url>
    <content type="text"><![CDATA[1.È¶ñÂÖàÂàõÂª∫‰∏Ä‰∏™xml Âú® drawable ÁõÆÂΩï‰∏ã transition_image 12345&lt;?xml version="1.0" encoding="utf-8"?&gt;&lt;transition xmlns:android="http://schemas.android.com/apk/res/android"&gt; &lt;item android:drawable="@drawable/first" /&gt; &lt;item android:drawable="@drawable/two" /&gt;&lt;/transition&gt; 2.Âú®xml‰∏≠ÂºïÁî® 1android:drawable="@drawable/transition_image" 3.Âú®Activity‰∏≠‰ΩøÁî® 123ImageView mImageView = (ImageView) findViewById(R.id.iv); TransitionDrawable transitionDrawable = (TransitionDrawable) mImageView.getDrawable(); transitionDrawable.startTransition(3000) Âè¶Â§ñ‰∏ÄÁßçÂÜôÊ≥ïÂÆûÁé∞Â§öÂº†ÂõæÁâáÊïàÊûú123TransitionDrawable transitionDrawable = new TransitionDrawable(new Drawable[]&#123;getResources().getDrawable(R.drawable.first),getResources().getDrawable(R.drawable.two)&#125;);mImageView.setImageDrawable(transitionDrawable);transitionDrawable.startTransition(3000);]]></content>
      <tags>
        <tag>‰∏§‰∏™Drawable‰πãÈó¥Ê∑°ÂÖ•Ê∑°Âá∫</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â∞èÁ®ãÂ∫èÁöÑÁà¨Âùë‰πãË∑Ø]]></title>
    <url>%2F2018%2F07%2F05%2F%E5%B0%8F%E7%A8%8B%E5%BA%8F%E7%9A%84%E7%88%AC%E5%9D%91%E4%B9%8B%E8%B7%AF%2F</url>
    <content type="text"><![CDATA[ËøëÊúüÁî±‰∫éÈ°πÁõÆÈúÄË¶ÅÔºåÈúÄË¶ÅÁºñÂÜôÂ∞èÁ®ãÂ∫èÔºåÈÅáÂà∞‰∏Ä‰∫õÈóÆÈ¢òÔºåËÆ∞ÂΩï‰∏ãÊù•Ôºå‰πüÊòØÁªôËá™Â∑±ÂºÄÂèëÁöÑ‰∏Ä‰∏™ÊÄªÁªì„ÄÇ 1.ÂÖ≥‰∫éÊ®°Êùø templateÂú®ÁúãÂÆå ÂÆòÊñπÊñáÊ°£ ÈáåÁöÑËØ¥Êòé‰πãÂêéÔºåÊàëÂπ∂Ê≤°ÊúâÊàêÂäü‰ΩøÁî®ÔºåÊåâÁÖßÂÆÉÈÇ£‰∏™ËÆæÁΩÆÂÆåÊàêÂêéÔºå‰∏ÄÁõ¥ËØ¥Êâæ‰∏çÂà∞ÔºåÊúÄÂêéÂú®Áü•ÈÅìÔºåÂéüÊù•Èô§‰∫ÜÂÆû‰æãÈÇ£‰∫õ‰πãÂ§ñÔºåËøòË¶ÅÂú®ÂΩìÂâç wxml ‰∏≠ import ËøõÊù•„ÄÇ 1.ÂÖàÂª∫‰∏Ä‰∏™ template ÁöÑÊñá‰ª∂Â§πÔºåÊñ∞Âª∫ wxml,Ê†πÊçÆÂÖ∑‰ΩìÁöÑË∑ØÂæÑÂºïÂÖ•ËøõÊù•Ôºå‰æãÂ¶ÇÔºö1&lt;import src=&quot;../template/line.wxml&quot; /&gt; ËøòÊúâ‰∏Ä‰∏™Â∞±ÊòØÂ¶ÇÊûúÊúâÁõ∏ÂØπÂ∫îÁöÑ wxssÊñá‰ª∂ÔºåÂèØÂú® app.wxssÊñá‰ª∂‰∏≠ÂºïÁî®ÔºåËøôÊ†∑Êï¥‰∏™È°πÁõÆÈÉΩ‰∏çÈúÄË¶ÅÂºïÁî®Ëøô‰∏™Ê†∑ÂºèÊñá‰ª∂‰∫Ü„ÄÇ Ê≥®ÊÑèÔºöÊ®°ÊùøÊã•ÊúâËá™Â∑±ÁöÑ‰ΩúÁî®ÂüüÔºåÂè™ËÉΩ‰ΩøÁî® data ‰º†ÂÖ•ÁöÑÊï∞ÊçÆ‰ª•ÂèäÊ®°ÁâàÂÆö‰πâÊñá‰ª∂‰∏≠ÂÆö‰πâÁöÑ Ê®°Âùó„ÄÇ 2. ÂÖ≥‰∫éÊ∞¥Âπ≥Â±Ö‰∏≠ÔºåÂûÇÁõ¥Â±Ö‰∏≠‰∏ÄÂºÄÂßãÊÑüËßâËøôÂï•Áé©ÊÑèÔºå‰∏çÂê¨ËØùÂïäÔºåËÆ©Â±Ö‰∏≠‰πü‰∏çÂ±Ö‰∏≠ÔºåÂ∞±ÊòØ‰∏çÂä®ÂïäÔºåÂæàÊòØÈÉÅÈó∑ÔºåÂêéÊù•ÂèëÁé∞‰∫Ü‰∏Ä‰∫õËßÑÂæã„ÄÇ 2.1 Ê∞¥Âπ≥Â±Ö‰∏≠ È¶ñÂÖàÂ¶ÇÊûúÊòØË°åÂÜÖÂÖÉÁ¥†Ôºå‰æãÂ¶Ç ËøôÊ†∑ÁöÑÔºåÂ¶ÇÊûúÊÉ≥Ê∞¥Âπ≥Â±Ö‰∏≠Ôºå‰ΩøÁî®text-align:center ‰Ω†‰ºöÂèëÁé∞‰∏çÂ•Ω‰ΩøÂïäÔºåÁ∫π‰∏ù‰∏çÂä®ÔºåÂéüÂõ†ÊòØÂõ†‰∏∫Ë°åÂÜÖÂÖÉÁ¥†ÈïøÂ∫¶ÈöèÂÜÖÂÆπÂèòÂåñÔºåÊâÄ‰ª•ÂÆÉ‰∏çËÉΩËÆ©‰Ω†Âú®‰∏ÄË°åÁöÑ‰∏≠Èó¥ÔºåÂõ†‰∏∫ÂÆÉÁöÑÈïøÂ∫¶Â∞±ÊòØÊñáÂ≠óÈïøÂ∫¶„ÄÇ Ëß£ÂÜ≥ÊñπÊ°àÔºöÂèØ‰ª•Êç¢Êàêview Êéß‰ª∂ÔºåÊàñËÄÖ‰ΩøÁî®Ôºödisplay:block + text-align:center ÂÖ∂ÂÆÉÂÖÉÁ¥†ÂèØ‰ª•‰ΩøÁî®123456======3‰∏™‰∏ÄËµ∑‰ΩøÁî®==========text-align:center;align-items:center;justify-content: center;==================margin:auto # Â≠êÂÆπÂô®Âú®Áà∂ÂÆπÂô®‰∏≠Â±Ö‰∏≠,ÂçïÁã¨‰ΩøÁî® 2.2 ÂûÇÁõ¥Â±Ö‰∏≠1234//ÂèØ‰ΩøÁî®Â¶Ç‰∏ãdisplay:flex;align-items:center;justify-content:center; 3.ÂÖ≥‰∫éÂá†‰∏™Êéß‰ª∂Âπ≥ÂàÜÊï¥‰∏™Â±èÂπïÂÆΩÂ∫¶ÈóÆÈ¢ò ‰∏ÄÂºÄÂßãÊàëËøòÊÉ≥ÁùÄËé∑ÂèñÂ±èÂπïÁöÑÂÆΩÂíåÈ´òÔºåÁÑ∂ÂêéÂÜçÂä®ÊÄÅÁªôÊéß‰ª∂ËÆæÁΩÆÂÖ∑‰ΩìÁöÑÂÄºÔºåÂêéÊù•ÂèëÁé∞ÊúâÊõ¥ÁÆÄÂçïÁöÑÂÅöÊ≥ï ‰æãÂ¶ÇÔºöÂÉèËøôÊ†∑‰∏ÄË°åÊéíÂõõ‰∏™ Ëß£ÂÜ≥ÊñπÊ°àÔºöËÆæÁΩÆÊéß‰ª∂ÁöÑÂÆΩÂ∫¶‰∏∫ Ôºö25%ÔºåËøôÊ†∑Â∞±Ëá™Âä®Âπ≥ÂàÜÂï¶„ÄÇÂΩìÁÑ∂ËøòÊúâÂÖ∂ÂÆÉÁöÑÊñπÂºèÔºå‰ΩÜÊòØÊàëËÆ§‰∏∫ÁôæÂàÜÊØîÁöÑËøôÁßçÂÜôÊ≥ïÊÑüËßâÂæàÁõ¥ËßÇ„ÄÇ 4. flex Â∏ÉÂ±ÄÁÜüÁªÉÊéåÊè° flexbox Â∏ÉÂ±ÄÔºåÂèØ‰ª•Êõ¥ËΩªÊùæÁöÑÁºñÂÜô‰ªª‰ΩïÂ∏∏ËßÅÁöÑÂ∏ÉÂ±ÄÔºåÂèØ‰ª•Êü•ÁúãÁõ∏ÂÖ≥‰∏ì‰∏öÁöÑÊñáÁ´†„ÄÇ Êú™ÂÆåÂæÖÁª≠‚Ä¶..]]></content>
      <tags>
        <tag>Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlin-ÂèØËßÇÂØüÂ±ûÊÄß]]></title>
    <url>%2F2018%2F06%2F27%2FKotlin-%E5%8F%AF%E8%A7%82%E5%AF%9F%E5%B1%9E%E6%80%A7%2F</url>
    <content type="text"><![CDATA[Á±ª‰ºº‰∫éËßÇÂØüËÄÖÊ®°ÂºèÔºåÂΩìÊâÄÁõëÊµãÁöÑÂØπË±°ÂèëÁîüÊîπÂèòÊó∂ÔºåËÉΩÂ§üÊî∂Âà∞ÂõûË∞ÉÈÄöÁü•„ÄÇ ‰æãÂ¶ÇÔºöÊàë‰ª¨ÁõëÊµã‰∏Ä‰∏™ÂèòÈáèÔºö123456789var str: String by Delegates.observable("qianqian",&#123; property: KProperty&lt;*&gt;, oldValue: String, newValue: String -&gt; Log.i("xx","ÊîπÂèòÁöÑÂ±ûÊÄßÂêçÁß∞Ôºö$&#123;property.name&#125; --- $&#123;oldValue&#125; -- $&#123;newValue&#125;" ) &#125;) //ÁÇπÂáª‰∏Ä‰∏™ÊåâÈíÆÔºåÊîπÂèòstrÁöÑÂÄº fun foo(view : View)&#123; str = "haha" &#125; ËøôÊó∂ÂÄôÊàë‰ª¨‰ºöÂèëÁé∞ÔºåÂΩìÊîπÂèòstr ÁöÑÂÄºÁöÑÊó∂ÂÄôÔºå‰ºöÊâìÂç∞‰ø°ÊÅØÔºå‰πüÂ∞±ÊòØÊî∂Âà∞ÂõûË∞ÉÔºö1ÊîπÂèòÁöÑÂ±ûÊÄßÂêçÁß∞Ôºöstr --- qianqian -- haha ÂÜçÊØîÂ¶ÇÔºöÊ£ÄÊµãÂØπË±°ÈáåÁöÑÂÖ∂‰∏≠‰∏Ä‰∏™Â±ûÊÄßÔºö1234567891011121314import kotlin.properties.Delegatesclass User &#123; var name: String by Delegates.observable("&lt;no name&gt;") &#123; prop, old, new -&gt; println("$old -&gt; $new") &#125;&#125;fun main(args: Array&lt;String&gt;) &#123; val user = User() user.name = "first" user.name = "second"&#125; ÊâìÂç∞‰ø°ÊÅØÔºö12&lt;no name&gt; -&gt; firstfirst -&gt; second]]></content>
  </entry>
  <entry>
    <title><![CDATA[Kotlin let with run also applyÂå∫ÂàÜ]]></title>
    <url>%2F2018%2F04%2F28%2FKotlin-let-with-run-also-apply%E5%8C%BA%E5%88%86%2F</url>
    <content type="text"><![CDATA[applyÂÆÉ‰∏éÂÖ∂ÂÆÉÁâπÊÆä‰πãÂ§ÑÂú®‰∫éÔºåÂÆÉËøîÂõûÊú¨ÁúÅÂØπË±°Ôºö 1public inline fun &lt;T&gt; T.apply(block: T.() -&gt; Unit): T &#123;&#125; ‰æãÂ¶ÇÔºö 123456ArrayList&lt;String&gt;().apply &#123; add("qq") add("mi") &#125;.let &#123;//this-&gt;ArrayListÊú¨Ë∫´ Log.i("xx","list==="+it) &#125; ÊâìÂç∞ÁªìÊûúÔºö 1list===[qq, mi] ËøôÈáåT Â∞±ÊòØ ArrayList&lt;String&gt;() ËøîÂõûÂØπË±°Êú¨Ë∫´Ôºå‰πüÂ∞±ÊòØArrayList ÂÜÖÈÉ®ÊòØ this ËøòÊòØ it Ëøô‰∏™ÂÄíÊ≤°‰ªÄ‰πàÔºåÁºñËæëÂô®‰∏ÄËà¨ÈÉΩ‰ºöÊúâÊèêÁ§∫ÔºåÂ¶ÇÂõæÔºö apply ÊòØ this , also ÊòØ it run run: 1public inline fun &lt;T, R&gt; T.run(block: T.() -&gt; R): R &#123;&#125; ËøîÂõûÊúÄÂêé‰∏ÄË°åÔºå‰º†ÂÖ•block ËøîÂõû ÊúÄÂêé‰∏ÄË°åÔºå‰æãÂ¶ÇÔºö 1234567ArrayList&lt;String&gt;().run &#123; add("lala") add("kaka") this.get(1) &#125;.let &#123; Log.i("xx","ËøîÂõûÔºöÔºö"+it) &#125; ÊâìÂç∞Ôºö 1ËøîÂõûÔºöÔºökaka let1public inline fun &lt;T, R&gt; T.let(block: (T) -&gt; R): R &#123;&#125; ‰πüÊòØËøîÂõûÊúÄÂêé‰∏ÄË°åÔºå‰ΩÜÊòØÂÆÉÂÜÖÈÉ®‰∏çËÉΩË∞ÉÁî®ÂØπË±°ÁöÑÊñπÊ≥ïÔºö 123456fun letGo(): Int&#123; "qianqian".let &#123; Log.i("xx",it) return 1 &#125; &#125; Ë∞ÉÁî®letGO ËøîÂõû 1 withÁ±ª‰ºº‰∫éÔºöapply + let ÁöÑÁªìÂêà 1public inline fun &lt;T, R&gt; with(receiver: T, block: T.() -&gt; R): R &#123;&#125; ‰æãÂ¶ÇÔºö 1234567with(ArrayList&lt;String&gt;())&#123; add("haha") add("heihei") this//ÊúÄÂêéËøîÂõûArrayListÂØπË±° &#125;.let &#123; Log.i("xx","list==="+it)//ÊâìÂç∞Ôºö[haha,heihei] &#125;]]></content>
      <tags>
        <tag>let</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Ëé∑ÂèñÊâãÊú∫Â±èÂπïÁöÑÂØÜÂ∫¶]]></title>
    <url>%2F2018%2F04%2F24%2F%E8%8E%B7%E5%8F%96%E6%89%8B%E6%9C%BA%E5%B1%8F%E5%B9%95%E7%9A%84%E5%AF%86%E5%BA%A6%2F</url>
    <content type="text"><![CDATA[ÁõÆÂâçÊúâ‰∏§ÁßçÊñπÂºèÔºå‰∏ÄÁßçÊòØÊ†πÊçÆÊâãÊú∫ÁöÑÂàÜËæ®ÁéáËÆ°ÁÆóÔºåÂè¶Â§ñ‰∏ÄÁßçÊòØÈÄöËøá‰ª£Á†ÅËé∑Âèñ„ÄÇ Á¨¨‰∏ÄÁßçÔºöÊ†πÊçÆÊâãÊú∫ÂàÜËæ®ÁéáËøõË°åËÆ°ÁÆó(ËÆ°ÁÆóÂæóÂá∫ÂÆûÈôÖÁöÑdpi)ÊØîÂ¶ÇÊàëÁöÑÊâãÊú∫È≠ÖÊóèÂàÜËæ®ÁéáÊòØÔºö1920*1080ÔºåÂ±èÂπïÂ∞∫ÂØ∏Â§ßÂ∞èÊòØÔºö5.5ÂØ∏ÁöÑÔºåÈÇ£‰πàËÆ°ÁÆóÔºö(ÂÆΩÁöÑÂπ≥Êñπ+È´òÁöÑÂπ≥Êñπ‰πãÂêéÂºÄÊ†πÂè∑ÔºåÊúÄÂêéÈô§‰ª•Â±èÂπïÁöÑÂ∞∫ÂØ∏)dpi = (‚àö1920^2+1080^2 ) / 5.5 ‚âà 401 ÂèÇÁÖß‰∏ãÂõæÔºö ldpiÔºà‰Ωé240*320Ôºâ~120dpi density=0.75 mdpiÔºà‰∏≠320*480Ôºâ~160dpi density=1 hdpiÔºàÈ´ò480*800Ôºâ~240dpi density=1.5 xhdpiÔºàË∂ÖÈ´ò720*1080Ôºâ~320dpi density=2 xxhdpiÔºàË∂ÖË∂ÖÈ´ò1080*1920Ôºâ~480dpi density=3 xxxhdpiÔºàË∂ÖË∂ÖË∂ÖÈ´òÔºâ~640dpi density=4 ÂØπÂ∫îÂõæÁâáÁöÑÁõÆÂΩïÂ∫îËØ•ÊòØÔºöxxhdpi Á¨¨‰∫åÁßçÔºöÈÄöËøá‰ª£Á†ÅÊñπÂºè(Á≥ªÁªüÂÆö‰πâÁöÑdpi)12float xdpi = getResources().getDisplayMetrics().xdpi;float ydpi = getResources().getDisplayMetrics().ydpi; ‰∏çÂêåÊâãÊú∫Ëé∑ÂèñÁöÑxdpi ydpi ÂÄºÊúâÁöÑ‰∏ÄÊ®°‰∏ÄÊ†∑ÔºåÊúâÁöÑÊúâ‰∫õÂ∑ÆÂºÇÔºå‰ΩÜÊòØÁõ∏Â∑Æ‰∏ç‰ºöÂ§™Â§ßÔºå‰∏§ËÄÖËé∑ÂèñÁöÑÂÄºËøë‰πé‰∏ÄÊ†∑„ÄÇ ‰∏§ËÄÖËÆ°ÁÆóÂá∫ÁöÑÁªìÊûúÂπ∂‰∏çÂÆåÂÖ®Áõ∏ÂêåÔºåÂõ†‰∏∫‰Ω†‰ª¨ÊÉ≥ÔºåÂÆûÈôÖËÆ°ÁÆóÂæóÂá∫ÁöÑdpi ÂæàÂÆπÊòìÊ†πÊçÆÂ±èÂπïÂ∞∫ÂØ∏ÁöÑ‰∏çÂêåÔºåÂæóÂá∫‰∏çÂêåÁöÑdpi ÔºåËøôÊ†∑ÁöÑËØùÂæóÂà∞ÁöÑÂÄºÂæàÂ§öÔºåÊó†Ê≥ïÈÄÇÈÖç„ÄÇÊàëÊü•ÈòÖÁΩë‰∏äÁõ∏ÂÖ≥‰ªãÁªçÔºåÂ∞±ÊòØÊØè‰∏™ÊâãÊú∫ÂàùÂßãÊúâ‰∏Ä‰∏™Âõ∫ÂÆöÁöÑdpi ÔºåÂàÜÂà´ÊòØ‰∏äËø∞ÁöÑÔºö120Ôºå160Ôºå240Ôºå320Ôºå480Ôºå640ÔºåÂÆâÂçìÂÆûÈôÖËøõË°åÁº©ÊîæÁöÑÊó∂ÂÄôÊåâÁÖßÁöÑÊòØÁ≥ªÁªüÂÆö‰πâÁöÑËøô‰∫õÔºåËÄå‰∏çÊòØÂÆûÈôÖËÆ°ÁÆóÂæóÂá∫ÁöÑdpi,Ëøô‰∏ÄÁÇπÈúÄË¶ÅÊ≥®ÊÑè„ÄÇ ÂÉèÁ¥†Âíådp‰πãÈó¥ÁöÑËΩ¨Âåñ12345px = dp * desity// ËøôÈáåÁöÑdpiÂ∞±ÊòØ‰∏äËø∞Á¨¨‰∏ÄÁßçÁöÑËÆ°ÁÆóÊñπÊ≥ï//dpi = (‚àö1920^2+1080^2 ) / 5.5(Â±èÂπïÂ∞∫ÂØ∏) ‚âà 401desity = dpi / 160ÊâÄ‰ª•Ôºöpx = dp * (dpi/160) DisplayMetrics.java 123DisplayMetrics#density //Â∞±ÊòØÊàë‰ª¨ÁÜüÁü•ÁöÑdesityDisplayMetrics#densityDpi //dpiDisplayMetrics#scaleDensity //Â≠ó‰ΩìÁº©ÊîæÂõ†Â≠êÔºåÊ≠£Â∏∏ÊÉÖÂÜµ‰∏ãÂíådensityÁõ∏ÂêåÔºå‰ΩÜÊòØÊàëÊâãÂä®Ë∞ÉÊï¥Â≠ó‰ΩìÂ§ßÂ∞èÂêé‰ºöÊîπÂèòËøô‰∏™ÂÄº ÂÖ≥‰∫éÊâãÊú∫ÁöÑ density ÂèØ‰ª•Âú® /system/build.prop Êñá‰ª∂‰∏≠Êü•ÁúãÁöÑÂÆö‰πâÂÄºÔºö 1ro.sf.lcd_density=480 // Ëøô‰∏™Â≠óÊÆµ Ëøô‰∏™ÂÆö‰πâÁöÑÊï∞ÂÄºÔºåÂèØËÉΩ‰ºöË∑üËÆ°ÁÆóÂæóÂà∞ÁöÑdensity ‰∏çÁõ∏Âêå„ÄÇ ‰ªäÊó•Â§¥Êù°ÈÄÇÈÖçÊ†∏ÂøÉ‰ª£Á†Å12345678910111213141516171819202122232425262728293031323334353637383940414243444546float sNoncompatScaledDensity;float sNoncompatDensity;public void setCustomerDensity(Activity activity, final Application application)&#123; DisplayMetrics displayMetrics = application.getResources().getDisplayMetrics(); Log.e("xx","density::"+displayMetrics.density); float targetDensity = displayMetrics.widthPixels / 360f; final int targetDensityDpi = (int) (targetDensity * 160); if(sNoncompatDensity == 0)&#123; sNoncompatDensity = displayMetrics.density; sNoncompatScaledDensity = displayMetrics.scaledDensity; application.registerComponentCallbacks(new ComponentCallbacks() &#123; @Override public void onConfigurationChanged(Configuration newConfig) &#123; if(newConfig != null &amp;&amp; newConfig.fontScale &gt; 0)&#123; sNoncompatScaledDensity = application.getResources().getDisplayMetrics().scaledDensity; &#125; &#125; @Override public void onLowMemory() &#123; &#125; &#125;); &#125; final float targetScaleDensity = targetDensity * (sNoncompatScaledDensity / sNoncompatDensity); displayMetrics.density = targetDensity; displayMetrics.scaledDensity = targetScaleDensity; displayMetrics.densityDpi = targetDensityDpi; DisplayMetrics activityDisplayMetrics = activity.getResources().getDisplayMetrics(); activityDisplayMetrics.density = targetDensity; activityDisplayMetrics.scaledDensity = targetScaleDensity; activityDisplayMetrics.densityDpi = targetDensityDpi; Log.e("xx","‰øÆÊîπÂêéÁöÑdensity::"+displayMetrics.density); btn.postDelayed(new Runnable() &#123; @Override public void run() &#123; Log.e("xx","width::"+btn.getWidth()); &#125; &#125;,1000); &#125;]]></content>
      <tags>
        <tag>dpi</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[EventBus ‰∏∫‰ªÄ‰πàËÆ¢ÈòÖÁöÑÊñπÊ≥ïÂøÖÈ°ªÊòØpublicÔºü]]></title>
    <url>%2F2018%2F04%2F08%2FEventBus-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%AE%A2%E9%98%85%E7%9A%84%E6%96%B9%E6%B3%95%E5%BF%85%E9%A1%BB%E6%98%AFpublic%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[Âú®Áúã‰∫ÜÊ∫êÁ†Å‰πãÂêéÂèëÁé∞ÊòØËøôÊ†∑ÁöÑÔºö12345678910111213141516171819202122232425262728293031323334353637383940private void findUsingReflectionInSingleClass(FindState findState) &#123; Method[] methods; try &#123; // This is faster than getMethods, especially when subscribers are fat classes like Activities //Ëé∑ÂèñÊâÄÊúâÂ£∞ÊòéÁöÑÊñπÊ≥ï methods = findState.clazz.getDeclaredMethods(); &#125; catch (Throwable th) &#123; // Workaround for java.lang.NoClassDefFoundError, see https://github.com/greenrobot/EventBus/issues/149 methods = findState.clazz.getMethods(); findState.skipSuperClasses = true; &#125; for (Method method : methods) &#123; //Ëé∑ÂèñÊñπÊ≥ïÁöÑÊ†áËØÜÁ¨¶ int modifiers = method.getModifiers(); //ÊñπÊ≥ïÁöÑÊ†áËØÜÁ¨¶ÂøÖÈ°ªÊòØpublic if ((modifiers &amp; Modifier.PUBLIC) != 0 &amp;&amp; (modifiers &amp; MODIFIERS_IGNORE) == 0) &#123; Class&lt;?&gt;[] parameterTypes = method.getParameterTypes(); if (parameterTypes.length == 1) &#123; Subscribe subscribeAnnotation = method.getAnnotation(Subscribe.class); if (subscribeAnnotation != null) &#123; Class&lt;?&gt; eventType = parameterTypes[0]; if (findState.checkAdd(method, eventType)) &#123; ThreadMode threadMode = subscribeAnnotation.threadMode(); findState.subscriberMethods.add(new SubscriberMethod(method, eventType, threadMode, subscribeAnnotation.priority(), subscribeAnnotation.sticky())); &#125; &#125; &#125; else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) &#123; String methodName = method.getDeclaringClass().getName() + "." + method.getName(); throw new EventBusException("@Subscribe method " + methodName + "must have exactly 1 parameter but has " + parameterTypes.length); &#125; &#125; else if (strictMethodVerification &amp;&amp; method.isAnnotationPresent(Subscribe.class)) &#123; //Âê¶ÂàôÊäõÂá∫ÂºÇÂ∏∏ ÔºåËØ¥Ëøô‰∏™ÊñπÊ≥ïÂøÖÈ°ªÂä†‰∏ä@Subscribe ,Âπ∂‰∏îÊòØpublic ÁöÑÔºå‰∏çËÉΩÊòØÈùôÊÄÅÁöÑÔºåÊäΩË±°ÁöÑ String methodName = method.getDeclaringClass().getName() + "." + method.getName(); throw new EventBusException(methodName + " is a illegal @Subscribe method: must be public, non-static, and non-abstract"); &#125; &#125; &#125; ÁÑ∂ÂêéÂ∞±Ê≤°ÊúâÁÑ∂Âêé‰∫ÜÔºå‰πãÂâçÊÄÄÁñëprivate ‰øÆÈ•∞ÁöÑÊñπÊ≥ïÔºåÂèçÂ∞ÑÂêé‰∏çËÉΩË¢´ÂÖ∂‰ªñÁ±ªË∞ÉÁî®ÔºåÂêéÊù•Êü•‰∫ÜÁõ∏ÂÖ≥ËµÑÊñôÔºåÂèëÁé∞ÂèØ‰ª•ÔºåÂêéÊù•ÂéªÁΩë‰∏äÂØªÊâæÊó†ÊûúÔºåÂêéÊù•Âú®ÊàëÂæÆ‰ø°ÂÖ≥Ê≥®ÁöÑÂÖ¨‰ºóÂè∑ÈáåÔºåÁæ§‰∏ª‰ºØÁâπËØ¥ÔºöËôΩÁÑ∂ÂèØ‰ª•ÂèçÂ∞ÑË∞ÉÁî®private ÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂøÖÈ°ªÈÄöËøásetAccessÊù•‰øÆÊîπËÆøÈóÆÊùÉÈôê„ÄÇËØ¥ÊòØ‰øÆÊîπÔºåÂÆûÂàôÁ†¥Âùè‰∫Üjava‰∏≠ÁöÑ‰ΩúÁî®ÂüüÔºåËø´‰∏çÂæóÂ∑≤‰∏çÊé®ËçêËøô‰πàÂÅö„ÄÇEventBus ‰Ωú‰∏∫‰∏âÊñπÂ∫ìÔºåÊòæÁÑ∂‰∏ç‰ºöÂú®‰Ω†ËÆæÁΩÆ‰∏∫private Êó∂ÔºåÂ•ΩÂøÉÂäûÂùè‰∫ãÔºåÂº∫Âà∂ËÆøÈóÆ„ÄÇ ‰ªÖÊ≠§ËÄåÂ∑≤Ôºå‰ªÖÊ≠§ËÄåÂ∑≤„ÄÇÂàÜ‰∫´ÁªôËøò‰∏çÁü•ÈÅìÁöÑÁ´•Èûã„ÄÇ]]></content>
      <tags>
        <tag>EventBus</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ActivityÁä∂ÊÄÅ‰øùÂ≠ò‰∏éÊÅ¢Â§ç]]></title>
    <url>%2F2018%2F03%2F23%2FActivity%E7%8A%B6%E6%80%81%E4%BF%9D%E5%AD%98%E4%B8%8E%E6%81%A2%E5%A4%8D%2F</url>
    <content type="text"></content>
      <tags>
        <tag>ActivityÁä∂ÊÄÅ‰øùÂ≠ò‰∏éÊÅ¢Â§ç</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂõõÂ§ßÁªÑ‰ª∂ÊòØ‰ªÄ‰πà‰∏éÂÆÉ‰ª¨ÁöÑÁîüÂëΩÂë®ÊúüÔºàÂèäFragmentÔºâ]]></title>
    <url>%2F2018%2F03%2F22%2F%E5%9B%9B%E5%A4%A7%E7%BB%84%E4%BB%B6%E6%98%AF%E4%BB%80%E4%B9%88%E4%B8%8E%E5%AE%83%E4%BB%AC%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%EF%BC%88%E5%8F%8AFragment%EF%BC%89%2F</url>
    <content type="text"><![CDATA[È¶ñÂÖàÂΩìÊàë‰ª¨‰∏ÄÂºÄÂßãÂ≠¶‰π†ÂÆâÂçìÁöÑÊó∂ÂÄôÊÉ≥ÂøÖÂ∞±ÊòØÂõõÂ§ßÁªÑ‰ª∂‰∫Ü‰ª•ÂèäÂÆÉ‰ª¨ÁöÑÁîüÂëΩÂë®ÊúüÔºåÁé∞Âú®Â∞±Êù•Â§ç‰π†ÂõûÊÉ≥‰∏ã„ÄÇ ÂõõÂ§ßÁªÑ‰ª∂ÊúâÔºöActivity, ContentProvider, BroadcastReceiver, Service Activity Êèê‰æõ‰∏éÁî®Êà∑‰∫§‰∫íÁöÑÁïåÈù¢ÊàñËÄÖÂèØ‰ª•ËØ¥ÊòØ‰∏Ä‰∏™Á™óÂè£ ‰∏ãÈù¢ÊàëÊòØ‰ªéÂÆòÊñπÊñáÊ°£‰∏≠ÂÖ≥‰∫éActivityÁîüÂëΩÂë®Êúü ÁöÑ‰∏ÄÂº†Âõæ Ê≠£Â∏∏ÂêØÂä®Êó∂ÔºöonCreate() -&gt; onStart() -&gt; onResume() ËÄåÂêéÊàë‰ª¨ÁúãÂà∞ÂΩì Another activity comes into the foreground ÊâßË°å onPause() ÊñπÊ≥ïÂΩìÊåâ home ÈîÆÁöÑÊó∂ÂÄôÔºö ÂΩìÂâçActivity Â∑≤Áªè‰∏çÂèØËßÅ‰∫ÜÔºåÊâÄ‰ª•ÊâßË°åÔºöonPause() -&gt; onStop() ÂΩìÈáçÊñ∞ÂõûÂà∞appÊó∂ÔºåÂàÜ‰∏∫‰∏§ÁßçÊÉÖÂÜµÂ∞±ÊòØÔºö‚ë†ÊòØappËøòÂú®ÂêéÂè∞ÔºåÊâßË°åÔºöonRestart() -&gt; onStart() -&gt; onResume(); ‚ë°ÊòØappË¢´Á≥ªÁªüÊùÄÊ≠ª‰∫ÜÔºåÂàôÊâßË°åÔºöonCreate() -&gt; onStart() &gt; onResume() ÂΩìÂú®app Èáå ‰ªé A -&gt; B Ê≠§Êó∂AÈöêËóèÔºåBÊòæÁ§∫ÔºåÂΩìÈáçÊñ∞ËøîÂõûA Êó∂ÔºåÊâßË°åÔºöonPause() -&gt; onResume(),ËøôÁßçÂ∫îÁî®Âú∫ÊôØ‰∏ÄËà¨ÊòØÊØîÂ¶ÇÈúÄË¶ÅËøîÂõûÂÅöÂà∑Êñ∞Êìç‰ΩúÁöÑÔºåÂèØ‰ª•Â∞ÜÂà∑Êñ∞ÊñπÊ≥ïÂÜôÂú®onResume() ÊñπÊ≥ï‰∏≠ÊâßË°å„ÄÇ ÊúÄÂêéÂΩìÈÄÄÂá∫Â∫îÁî®Á®ãÂ∫èÁöÑÊó∂ÂÄôÊâßË°å onDestroy() Service ÊúçÂä°ÔºåÊúâÂâçÂè∞ÊúçÂä°ÂíåÂêéÂè∞ÊúçÂä°Ôºå‰∏ÄËà¨Êèê‰æõÈúÄÂú®ÂêéÂè∞ÈïøÊúüËøêË°åÁöÑÊúçÂä°Ôºå‰æãÂ¶ÇÔºöÈü≥‰πêÊí≠ÊîæÂô®Á≠â ÂÆÉÁöÑÁîüÂëΩÂë®ÊúüÂ¶Ç‰∏ãÂõæÔºö Âõ†‰∏∫ÂêØÂä®ÊúçÂä°ÁöÑÊñπÊ≥ïÊúâ‰∏§‰∏™ÔºöstartService() Âíå bindService() ‰∏§ËÄÖÁöÑÁîüÂëΩÂë®ÊúüÁï•Êúâ‰∏çÂêå„ÄÇ È¶ñÂÖàÊù•ÁúãÔºöstartService() ÊñπÂºèÂêØÂä®ÔºöonCreate() -&gt; onStartCommand() Ë∞ÉÁî®stopServcie() ÂÅúÊ≠¢ÊúçÂä°ÔºåÈöèÂêéÊâßË°å onDestroy() ÂÖ∂Ê¨°ÊòØÔºöbindService() ÊñπÂºèÂêØÂä®ÔºöonCreate() -&gt; onBind() ÊúçÂä°ÂêØÂä®Ëµ∑Êù•‰∫ÜÔºåË∞ÉÁî®unbindService() ÂÅúÊ≠¢ÊúçÂä°ÔºåÈöèÂêéÊâßË°å onUnbind() -&gt; onDestroy() Broadcastreceiver ÂπøÊí≠ÔºåÂèØ‰ª•Êé•ÂèóÊù•Ëá™Â∫îÁî®ÂÜÖÊàñËÄÖÂ∫îÁî®Â§ñÁöÑÂπøÊí≠ÔºåÂàÜ‰∏∫‰∏§‰∏™ËßíËâ≤ÔºöÂπøÊí≠ÂèëÈÄÅËÄÖÔºåÂπøÊí≠Êé•Êî∂ËÄÖ ÂπøÊí≠ÁöÑÊ≥®ÂÜåÊñπÂºèÊúâ‰∏§ÁßçÔºö‰∏ÄÁßçÊòØ‰ª£Á†ÅÊ≥®ÂÜåÔºå‰∏ÄÁßçÊòØÊ∏ÖÂçïÊñá‰ª∂Ê≥®ÂÜåÔºå‰ª£Á†ÅÊ≥®ÂÜåÁöÑ‰ºòÂÖàÁ∫ßË¶ÅÊØîÊ∏ÖÂçïÊñá‰ª∂Ê≥®ÂÜåÁöÑ‰ºòÂÖàÁ∫ßË¶ÅÈ´òÔºõ ÂπøÊí≠ÁöÑÂèëÈÄÅÂèØ‰ª•ÊòØÊúâÂ∫èÂπøÊí≠‰πüÂèØ‰ª•ÊòØÊó†Â∫èÂπøÊí≠ÔºåÊúâÂ∫èÂπøÊí≠Êé•Êî∂Âà∞ÂπøÊí≠ÁöÑÈ°∫Â∫èÊåâÁÖß‰ºòÂÖàÁ∫ßÁöÑÈ°∫Â∫èÔºõ Ê≥®ÊÑèÂπøÊí≠Êé•Êî∂Âô®onReceive() ÊñπÊ≥ïËøêË°åÂú® UI Á∫øÁ®ã‰∏≠Ôºå‰∏çÂèØ‰ª•ÂÅöËÄóÊó∂Êìç‰ΩúÔºåÂê¶Âàô‰ºöÂØºËá¥ANRÂºÇÂ∏∏Ôºõ ContentProvider ÂÜÖÂÆπÊèê‰æõËÄÖÔºåÂ∫îÁî®ÂÜÖÊï∞ÊçÆÂÖ±‰∫´ Fragment ‰∏ÄËà¨Âíå viewpager ÈÖçÂêà‰ΩøÁî®Ôºå‰∏çËÉΩÂçïÁã¨‰ΩøÁî®ÔºåË¶ÅÈÖçÂêàActivity‰ΩøÁî®Ôºå‰ΩÜÊòØÊúâËá™Â∑±ÁöÑÁîüÂëΩÂë®Êúü ‰∏ÄËà¨Âú®onAttach()‰∏≠Ëé∑ÂèñÂèÇÊï∞ÂÄº‰∏Ä‰∫õÔºåonCreateView()‰∏≠ÂàõÂª∫Â∏ÉÂ±ÄÔºåÂ∏ÉÂ±ÄÂä†ËΩΩÂÆåÊàêÂêéÂú®onActivityCreated()‰∏≠ÊâßË°å‰∏Ä‰∫õÂàùÂßãÂåñÊìç‰ΩúÔºåÈöèÂêéonStart(),onResume().onPause(),onStop(), fragment ÈîÄÊØÅÔºåonDestroyView() -&gt; onDestroy() -&gt;onDetach()]]></content>
      <tags>
        <tag>ÁîüÂëΩÂë®Êúü</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidÁü•ËØÜÁÇπÊÄªÁªì]]></title>
    <url>%2F2018%2F03%2F22%2FAndroid%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[ÁΩë‰∏äÂà´‰∫∫ÂàóÂá∫‰∏Ä‰∫õÊù•ÔºåÊàëÊääÂÆÉÊãøËøáÊù•‰∫ÜÔºåÈúÄË¶ÅËá™Â∑±‰∏ÄÈ°π‰∏ÄÈ°πÂ§ç‰π†Êü•ÈòÖÔºå‰ª•ÂêéÊúâ‰ºöÁªßÁª≠Ê∑ªÂä†Êñ∞ÁöÑÔºåÁâπÊ≠§ÊÄªÁªì„ÄÇ ÂõõÂ§ßÁªÑ‰ª∂ÊòØ‰ªÄ‰πà‰∏éÂÆÉ‰ª¨ÁöÑÁîüÂëΩÂë®ÊúüÔºàÂèäFragmentÔºâ; AcitivtyÁöÑÂõõÁßçÂêØÂä®Ê®°Âºè‰∏éÁâπÁÇπ„ÄÇ Ëé∑ÂèñÊâãÊú∫Â±èÂπïÁöÑÂØÜÂ∫¶ ActivityÁä∂ÊÄÅ‰øùÂ≠ò‰∏éÊÅ¢Â§ç„ÄÇ ServiceÁöÑÁîüÂëΩÂë®ÊúüÔºåÂêØÂä®ÊñπÊ≥ïÔºåÊúâ‰ªÄ‰πàÂå∫Âà´„ÄÇ serviceÂíåactivityÊÄé‰πàËøõË°åÊï∞ÊçÆ‰∫§‰∫í„ÄÇ ÊÄé‰πà‰øùËØÅservice‰∏çË¢´ÊùÄÊ≠ª„ÄÇ ÂπøÊí≠‰ΩøÁî®ÁöÑÊñπÂºèÂíåÂú∫ÊôØ‰ª•ÂèäÂπøÊí≠ÁöÑÂá†ÁßçÂàÜÁ±ª„ÄÇ IntentÁöÑ‰ΩøÁî®ÊñπÊ≥ïÔºåÂèØ‰ª•‰º†ÈÄíÂì™‰∫õÊï∞ÊçÆÁ±ªÂûã„ÄÇ ContentProvider‰ΩøÁî®ÊñπÊ≥ï„ÄÇ ContentProvider„ÄÅContentResolver„ÄÅContentObserver ‰πãÈó¥ÁöÑÂÖ≥Á≥ª„ÄÇ Thread„ÄÅAsycTask„ÄÅIntentServiceÁöÑ‰ΩøÁî®Âú∫ÊôØ‰∏éÁâπÁÇπ„ÄÇ FrameLayout „ÄÅ LinearLayout „ÄÅ RelativeLayout ÂêÑËá™ÁâπÁÇπÂèäÁªòÂà∂ÊïàÁéáÂØπÊØî„ÄÇ AndroidÁöÑÊï∞ÊçÆÂ≠òÂÇ®ÂΩ¢Âºè„ÄÇ Android‰∏§ÁßçÂ∫èÂàóÂåñÁöÑÂå∫Âà´Âíå‰ΩúÁî®„ÄÇ SqliteÁöÑÂü∫Êú¨Êìç‰Ωú„ÄÇ Android‰∏≠ÁöÑMVC„ÄÅMVPÊ®°Âºè„ÄÇ Merge„ÄÅViewStubÁöÑ‰ΩúÁî®„ÄÇ Âä®ÁîªÊúâÂì™Âá†Á±ªÔºåÂêÑÊúâ‰ªÄ‰πàÁâπÁÇπÔºü Handler„ÄÅLoopÊ∂àÊÅØÈòüÂàóÊ®°ÂûãÔºåÂêÑÈÉ®ÂàÜÁöÑ‰ΩúÁî®„ÄÇ AndroidÁöÑÊ∂àÊÅØÊú∫Âà∂ÔºåÂ≠êÁ∫øÁ®ãÊõ¥Êñ∞UIÁöÑÊñπÊ≥ïÂíåÂéüÁêÜ„ÄÇ AndroidÊÄé‰πàÂä†ÈÄüÂêØÂä®Activity„ÄÇ AppÁöÑÂêØÂä®ËøáÁ®ã„ÄÇ Android‰ºòÂåñÊñπÊ≥ï„ÄÇ Â¶Ç‰ΩïÈò≤Ê≠¢ÂÜÖÂ≠òÊ≥ÑÊºèÔºü Android‰∏≠Âº±ÂºïÁî®‰∏éËΩØÂºïÁî®ÁöÑÂ∫îÁî®Âú∫ÊôØ„ÄÇ BitmapÁöÑÂõõÁßçÂ±ûÊÄßÔºåÂ¶Ç‰ΩïÂä†ËΩΩÂ§ßÂõæÔºàinJustDecodeBoundsÔºâ„ÄÇ View‰∏éView GroupÂàÜÁ±ª„ÄÇËá™ÂÆö‰πâViewËøáÁ®ãÔºöonMeasure()„ÄÅonLayout()„ÄÅonDraw()„ÄÇ ViewÂà∑Êñ∞Êú∫Âà∂ÂíåÁªòÂà∂ÊµÅÁ®ã„ÄÇ Activity„ÄÅWindow„ÄÅViewÁöÑËÅîÁ≥ªÂíåÁêÜËß£„ÄÇ invalidateÂíårequestLayoutÁöÑÂå∫Âà´Âèä‰ΩøÁî®„ÄÇ Touch‰∫ã‰ª∂ÂàÜÂèëÊú∫Âà∂ÂíåÂÜ≤Á™ÅÂ§ÑÁêÜ„ÄÇ Android IPC:BinderÂéüÁêÜ„ÄÇ Android5.0ÔºàUIÂ∫ìÔºâ„ÄÅ6.0ÔºàÊùÉÈôêÔºâ„ÄÅ7.0ÁâπÊÄß„ÄÅ8.0ÁâπÊÄß„ÄÇ]]></content>
      <tags>
        <tag>AndroidÁü•ËØÜÁÇπ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Kotlin ‰º†ÈÄíÊï∞ÊçÆ]]></title>
    <url>%2F2018%2F03%2F14%2FKotlin-%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE%2F</url>
    <content type="text"><![CDATA[‰ªäÂ§©Âú®ÊéòÈáëÁúãÂà∞‰ΩøÁî® Kotlin È´òÈò∂ÂáΩÊï∞‰º†ÈÄíIntent Êï∞ÊçÆÂæàÁÆÄÊ¥ÅÔºåËßâÁùÄÂèØ‰ª•ËØïËØïÔºåÂπ∂Â∫îÁî®Âà∞È°πÁõÆ‰∏≠ÂéªÔºåËá™Â∑±ÂÜçÂä†‰ª•ÁêÜËß£ÔºåËÆ∞ÂΩïÁ¨îËÆ∞ÔºåÊñπ‰æøÊü•ÈòÖ„ÄÇÊéòÈáëÂéüÊñáÁ´†Âú∞ÂùÄÔºöhttps://mp.weixin.qq.com/s/0TuDlsfBtO7wP9TwI8CeJw ‰º†ÁªüÁöÑIntent Êï∞ÊçÆ‰º†ÈÄíÊàëÂ∞±‰∏ç‰ªãÁªç‰∫ÜÔºåÂè™‰ªãÁªçKotlinÂÆûÁé∞ÊñπÂºèÔºö123456789101112131415161718192021//ÁõÆÊ†á ÂÅáËÆæÂè´`KTestActivity4` ÂÆö‰πâ object IntentOptions&#123; private const val MSG_KEY = "key for message" var Intent.message: String? get() = getStringExtra(MSG_KEY) set(message) &#123; putExtra(MSG_KEY,message) &#125; &#125;//Ë∑≥ËΩ¨Êó∂ with(KTestActivity4.IntentOptions)&#123; intent = Intent(this@KTestActivity5,KTestActivity4::class.java) intent.message = "I am KTestActivity5" startActivity(intent) &#125;//‰ΩøÁî®with(IntentOptions)&#123; var message= intent.message Toast.makeText(this@KTestActivity4,"ÊòæÁ§∫‰ø°ÊÅØÔºö"+message,Toast.LENGTH_SHORT).show() &#125; ÂÅáËÆæÊúâÂ§ö‰∏™Êï∞ÊçÆ‰º†ÈÄíÔºö1234567891011121314151617181920212223object IntentOptions&#123; private const val MSG_KEY = "key for message" private const val MSG_ID = "ID for message" var Intent.message: String? get() = getStringExtra(MSG_KEY) set(message) &#123; putExtra(MSG_KEY,message) &#125; // ÂÜçÂ§öÂ¢ûÂä†‰∏ÄÊù°Âç≥ÂèØ var Intent.id: String? get() = getStringExtra(MSG_ID) set(id) &#123; putExtra(MSG_ID,id) &#125; &#125;// ‰º†ÈÄíÊó∂with(KTestActivity4.IntentOptions)&#123; intent = Intent(this@KTestActivity5,KTestActivity4::class.java) intent.message = "I am KTestActivity5" intent.id = "I am id" startActivity(intent) &#125; ËøòÊúâÂè¶Â§ñ‰∏ÄÁßç‰º†ÈÄíÊñπÂºèÔºöÂßîÊâòÊú∫Âà∂Ôºå‰∏çÊòØÁâπÂà´ÊòéÁôΩ„ÄÇÂõΩÂ§ñÂ§ßÁ•ûÂ∞ÅË£ÖÁöÑgithubÂú∞ÂùÄÔºöhttps://github.com/Takhion/android-extras-delegates]]></content>
      <tags>
        <tag>Kotlin#Intent</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÈòøÈáåÂ∑¥Â∑¥AndroidÂºÄÂèëÊâãÂÜå]]></title>
    <url>%2F2018%2F03%2F13%2F%E9%98%BF%E9%87%8C%E5%B7%B4%E5%B7%B4Android%E5%BC%80%E5%8F%91%E6%89%8B%E5%86%8C%2F</url>
    <content type="text"><![CDATA[ÊëòËá™ÈòøÈáåÂ∑¥Â∑¥AndroidÂºÄÂèëÊâãÂÜå Âº∫Âà∂Ë¶ÅÊ±ÇÁöÑ 1. Activity Èó¥ÁöÑÊï∞ÊçÆÈÄö‰ø°ÔºåÂØπ‰∫éÊï∞ÊçÆÈáèÊØîËæÉÂ§ßÁöÑÔºåÈÅøÂÖç‰ΩøÁî® intent + Parcelable ÁöÑÊñπÂºèÔºåÂèØ‰ª•ËÄÉËôë EventBusÁ≠âÊõø‰ª£ÊñπÊ°àÔºå‰ª•ÂÖçÈÄ†Êàê TransationTooLargeException 2. Activity Èó¥ÈÄöËøáÈöêÂ£´ IntentÁöÑË∑≥ËΩ¨ÔºåÂú®ÂèëÂá∫ Intent ‰πãÂâçÂøÖÈ°ªÈÄöËøá resolveActivity Ê£ÄÊü•ÔºåÈÅøÂÖçÊâæ‰∏çÂà∞ÂêàÈÄÇÁöÑË∞ÉÁî®ÁªÑ‰ª∂ÔºåÈÄ†Êàê ActivityNotFoundException ÁöÑÂºÇÂ∏∏„ÄÇ 12345678910 public void viewUrl(String url, String mimeType) &#123; Intent intent = new Intent(Intent.ACTION_VIEW); intent.setDataAndType(Uri.parse(url), mimeType); if (getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY) != null) &#123; startActivity(intent); &#125;else &#123; // Êâæ‰∏çÂà∞ÊåáÂÆöÁöÑ Activity &#125;&#125; ËÄå‰∏çÂ∫îËØ•Ôºö1234567Intent intent = new Intent();intent.setAction("com.example.DemoIntent ");try &#123; startActivity(intent);&#125; catch (ActivityNotFoundException e) &#123; e.printStackTrace();&#125; 3. ÈÅøÂÖçÂú®Service#onStartCommand/onBind()ÊñπÊ≥ï‰∏≠ÊâßË°åËÄóÊó∂Êìç‰ΩúÔºåÂ¶ÇÊûúÁ°ÆÂÆûÊúâÈúÄÊ±ÇÔºåÂ∫îÈááÁî®IntentService ÊàñÈááÁî®ÂÖ∂‰ªñÂºÇÊ≠•Êú∫Âà∂ÂÆåÊàê„ÄÇÊ≠£‰æãÔºö 12345678910111213141516171819202122232425public class MainActivity extends Activity &#123; @Override public void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.main); &#125; public void startIntentService(View source) &#123; Intent intent = new Intent(this, MyIntentService.class); startService(intent); &#125;&#125;public class MyIntentService extends IntentService &#123; public MyIntentService() &#123; super("MyIntentService"); &#125; @Override protected void onHandleIntent(Intent intent) &#123; synchronized (this) &#123; try &#123;...... &#125; catch (Exception e) &#123; &#125; &#125; &#125;&#125; 4. ÈÅøÂÖçÂú® BroadcastReceive#onReceive()‰∏≠ÊâßË°åËÄóÊó∂Êìç‰ΩúÔºåÂ¶ÇÊûúÊúâËÄóÊó∂Â∑•‰ΩúÔºåÂ∫îËØ•ÂàõÂª∫ IntentServiceÂÆåÊàêÔºåËÄå‰∏çÂ∫îËØ•Âú®BroadcastReceiver ÂÜÖÂàõÂª∫Â≠êÁ∫øÁ®ãÂéªÂÅö„ÄÇ ËØ¥ÊòéÔºöÁî±‰∫éËØ•ÊñπÊ≥ïÊòØÂú®‰∏ªÁ∫øÁ®ãÊâßË°åÔºåÂ¶ÇÊûúÊâßË°åËÄóÊó∂Êìç‰Ωú‰ºöÂØºËá¥ UI ‰∏çÊµÅÁïÖÔºåÂèØ‰ª•‰ΩøÁî® IntentService,ÂàõÂª∫ HanlderThread ÊàñËÄÖË∞ÉÁî® Context#registerReceiver(BroadcastReceiver,IntentFitter,String,Handler) ÊñπÊ≥ïÁ≠âÊñπÂºèÔºåÂú®ÂÖ∂‰ªñ Worker Á∫øÁ®ãÊâßË°å onReceive.BroadcastReceiver#onReceive() ÊñπÊ≥ïËÄóÊó∂Ë∂ÖËøá10ÁßíÈíüÔºåÂèØËÉΩ‰ºöË¢´Á≥ªÁªüÊùÄÊ≠ª„ÄÇÊ≠£‰æãÔºö 1234567891011IntentFilter filter = new IntentFilter();filter.addAction(LOGIN_SUCCESS);this.registerReceiver(mBroadcastReceiver, filter);mBroadcastReceiver = new BroadcastReceiver() &#123; @Override public void onReceive(Context context, Intent intent) &#123; Intent userHomeIntent = new Intent(); userHomeIntent.setClass(this, UserHomeService.class); this.startService(userHomeIntent); &#125;&#125;; Âèç‰æãÔºö123456789mBroadcastReceiver = new BroadcastReceiver() &#123; @Override public void onReceive(Context context, Intent intent) &#123; MyDatabaseHelper myDB = new MyDatabaseHelper(context); myDB.initData(); // have more database operation here &#125;&#125;; 5. ÈÅøÂÖç‰ΩøÁî®ÈöêÂ£´ Intent ÂπøÊí≠ÊïèÊÑü‰ø°ÊÅØÔºå‰ø°ÊÅØÂèØËÉΩË¢´ÂÖ∂‰ªñÊ≥®ÂÜå‰∫ÜÂØπÂ∫î BroadcastReceiver ÁöÑAppÊé•Êî∂„ÄÇ ËØ¥ÊòéÔºöÈÄöËøáContext#sendBroadcast()ÂèëÈÄÅÁöÑÈöêÂ£´ÂπøÊí≠‰ºöË¢´ÊÑüÂÖ¥Ë∂£ÁöÑ receiver Êé•Êî∂ÔºåÊÅ∂ÊÑèÂ∫îÁî®Ê≥®ÂÜåÁõëÂê¨ËØ•ÂπøÊí≠ÁöÑ receiverÂèØËÉΩ‰ºöËé∑ÂèñÂà∞ Intent ‰∏≠‰º†ÈÄíÁöÑÊïèÊÑü‰ø°ÊÅØÔºåÂπ∂ËøõË°åÂÖ∂‰ªñÂç±Èô©Êìç‰Ωú„ÄÇÂ¶ÇÊûúÂèëÈÄÅÁöÑÂπøÊí≠‰∏∫‰ΩøÁî® Context#sendOrderedBroadcast()ÊñπÊ≥ïÂèëÈÄÅÁöÑÊúâÂ∫èÂπøÊí≠Ôºå‰ºòÂÖàÁ∫ßËæÉÈ´òÁöÑÊÅ∂ÊÑè receiverÂèØËÉΩÁõ¥Êé•‰∏¢ÂºÉËØ•ÂπøÊí≠ÔºåÈÄ†ÊàêÊúçÂä°‰∏çÂèØÁî®ÔºåÊàñËÄÖÂêëÂπøÊí≠ÁªìÊûúÂ°ûÂÖ•ÊÅ∂ÊÑèÊï∞ÊçÆ„ÄÇ Â¶ÇÊûúÂπøÊí≠‰ªÖÈôê‰∫éÂ∫îÁî®ÂÜÖÔºåÂàôÂèØ‰ª•ÊòØiyongLocalBroadcastManager#sendBroadcast()ÂÆûÁé∞ÔºåÈÅøÂÖçÊïèÊÑü‰ø°ÊÅØÂ§ñÊ≥ÑÂíåintentÊã¶Êà™ÁöÑÈ£éÈô©„ÄÇ Ê≠£‰æãÔºö123Intent intent = new Intent("my-sensitive-event");intent.putExtra("event", "this is a test event");LocalBroadcastManager.getInstance(this).sendBroadcast(intent); Âèç‰æãÔºö1234567891011Intent intent = new Intent();v1.setAction("com.sample.action.server_running");v1.putExtra("local_ip", v0.h);v1.putExtra("port", v0.i);v1.putExtra("code", v0.g);v1.putExtra("connected", v0.s);v1.putExtra("pwd_predefined", v0.r);if (!TextUtils.isEmpty(v0.t)) &#123; v1.putExtra("connected_usr", v0.t);&#125;context.sendBroadcast(v1); ‰ª•‰∏äÂπøÊí≠ÂèØËÉΩË¢´ÂÖ∂‰ªñÂ∫îÁî®ÁöÑÂ¶Ç‰∏ã receiver Êé•Êî∂ÂØºËá¥ÊïèÊÑü‰ø°ÊÅØÊ≥ÑÈú≤Ôºö12345678910111213final class MyReceiver extends BroadcastReceiver &#123; public final void onReceive(Context context, Intent intent) &#123; if (intent != null &amp;&amp; intent.getAction() != null) &#123; String s = intent.getAction(); if (s.equals("com.sample.action.server_running") &#123; String ip = intent.getStringExtra("local_ip"); String pwd = intent.getStringExtra("code"); String port = intent.getIntExtra("port", 8888); boolean status = intent.getBooleanExtra("connected", false); &#125; &#125; &#125;&#125;]]></content>
      <tags>
        <tag>ÈòøÈáåÂ∑¥Â∑¥AndroidÂºÄÂèëÊâãÂÜåËßÑËåÉ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÁõëÂê¨ÈîÆÁõòÊòæÁ§∫‰∏éÈöêËóè]]></title>
    <url>%2F2018%2F03%2F08%2F%E7%9B%91%E5%90%AC%E9%94%AE%E7%9B%98%E6%98%BE%E7%A4%BA%E4%B8%8E%E9%9A%90%E8%97%8F%2F</url>
    <content type="text"><![CDATA[È°πÁõÆ‰∏≠ÊúâÊó∂ÂÄôÈúÄË¶ÅÁõëÂê¨keyboardÁöÑÊòæÁ§∫‰∏éÈöêËóèÔºåÁâπÊ≠§Â§áÊ≥®ÔºåÊñπ‰æø‰ΩøÁî®„ÄÇ 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970public class KeyboardWatcher &#123; private ViewTreeObserver.OnGlobalLayoutListener onGlobalLayoutListener; private View rootView; private int viewSize = -1; private boolean isShowing = false; private OnKeyboardListener onKeyboardListener; public KeyboardWatcher(Activity activity)&#123; rootView = activity.getWindow().getDecorView().getRootView(); &#125; public KeyboardWatcher register(OnKeyboardListener listener)&#123; onKeyboardListener = listener; if(onGlobalLayoutListener == null) &#123; onGlobalLayoutListener = new ViewTreeObserver.OnGlobalLayoutListener() &#123; @Override public void onGlobalLayout() &#123; Rect r = new Rect(); rootView.getWindowVisibleDisplayFrame(r); int viewHeight = r.bottom - r.top; if(viewSize &lt; 0)&#123; viewSize = viewHeight; return; &#125; if(viewHeight != viewSize)&#123; // Â§ß‰∫é100dpÊâçÁÆóÂèòÂåñ if(Math.abs(viewHeight - viewSize) &gt; dpToPx(rootView.getContext(),100)) &#123; if (viewHeight &lt; viewSize &amp;&amp; !isShowing) &#123; onKeyboardListener.onShow(viewHeight); isShowing = true; &#125; else if(isShowing)&#123; onKeyboardListener.onHide(); isShowing = false; &#125; &#125; viewSize = viewHeight; &#125; &#125; &#125;; &#125; rootView.post(new Runnable() &#123; @Override public void run() &#123; viewSize = rootView.getHeight(); rootView.getViewTreeObserver().addOnGlobalLayoutListener(onGlobalLayoutListener); &#125; &#125;); return this; &#125; public void unRegister()&#123; rootView.getViewTreeObserver().removeGlobalOnLayoutListener(onGlobalLayoutListener); rootView = null; &#125; public interface OnKeyboardListener&#123; void onShow(int viewSize); void onHide(); &#125; private int dpToPx(Context context,int dp) &#123; return (int) TypedValue.applyDimension( TypedValue.COMPLEX_UNIT_DIP, dp, context.getResources().getDisplayMetrics() ); &#125;&#125; ‰ΩøÁî®ÊñπÊ≥ï1234KeyBoardWatcher keyboardWatcher = new KeyboardWatcher()keyboardWatcher.register(this)//ÂÆûÁé∞KeyboardWatcher.OnKeyboardListenerÊé•Âè£//ÂÆûÁé∞ÊñπÊ≥ïonShow() , onHide(),ÂØπÂ∫îÈîÆÁõòÁöÑÊòæÁ§∫‰∏éÈöêËóè]]></content>
      <tags>
        <tag>keyboard</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Fragment ÊáíÂä†ËΩΩ]]></title>
    <url>%2F2018%2F02%2F28%2FFragment-%E6%87%92%E5%8A%A0%E8%BD%BD%2F</url>
    <content type="text"><![CDATA[Âõ†‰∏∫È°πÁõÆ‰∏≠ÁªèÂ∏∏Áî®Âà∞tabLayout + viewpager ÁªìÂêà‰ΩøÁî®ÔºåÈ°µÈù¢ÂàáÊç¢Êó∂Ë¶ÅÁî®Âà∞Âª∂ËøüÂä†ËΩΩÁöÑÊÉÖÂÜµÔºåÊâÄ‰ª•ÂçïÁã¨ÂÜôÂá∫‰∏Ä‰∏™demoÔºåÊñπ‰æøÊü•ÁúãÂíå‰æø‰∫é‰ΩøÁî® 1.È¶ñÂÖàÊñ∞Âª∫‰∏Ä‰∏™BaseLazyFragment/** * Created by xuqianqian on 2018/2/28. */ public abstract class BaseLazyFragment extends Fragment { protected View mRootView; public Context mContext; protected boolean isVisible; private boolean isPrepared; private boolean isLoad = false; //ÊúÄÂÖàÊâßË°å @Override public void setUserVisibleHint(boolean isVisibleToUser) { super.setUserVisibleHint(isVisibleToUser); if (getUserVisibleHint()) {//ÂΩìÂâçÊòæÁ§∫ isVisible = true; if(!isLoad){ lazyLoad(); } } else { isVisible = false; //onInvisible(); } } @Override public void onCreate(@Nullable Bundle savedInstanceState) { super.onCreate(savedInstanceState); mContext = getActivity(); setHasOptionsMenu(true); } @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) { if (mRootView == null) { mRootView = getLayout(); } return mRootView; } @Override public void onActivityCreated(@Nullable Bundle savedInstanceState) { super.onActivityCreated(savedInstanceState); isPrepared = true; //Â¶ÇÊûúÂ∑≤ÁªèÂä†ËΩΩËøá‰∫ÜÔºåÂ∞±Êó†ÈúÄÂÜçÈáçÊñ∞Âä†ËΩΩ if(!isLoad){ lazyLoad(); } } /** * ÊáíÂä†ËΩΩ */ protected void lazyLoad() { if (!isPrepared || !isVisible) { return; } isLoad = true; initData(); } // protected void onInvisible() { // // } //ÂàùÂßãÂåñÂ∏ÉÂ±ÄView public abstract View getLayout(); public abstract void initData(); } 2.ËÆ©‰Ω†ÁöÑfragment extend BaseLazyFragmentpublic class GankFragment extends BaseLazyFragment { String type; public static GankFragment newInstance(String type) { GankFragment gankFragment = new GankFragment(); Bundle bundle = new Bundle(); bundle.putString(&quot;type&quot;, type); gankFragment.setArguments(bundle); return gankFragment; } //Âä†ËΩΩÂ∏ÉÂ±Ä @Override public View getLayout() { type = getArguments().getString(&quot;type&quot;); TextView tv = new TextView(getActivity()); tv.setText(type); tv.setGravity(Gravity.CENTER); return tv; } @Override public void initData() { //ÂàùÂßãÂåñ‰∏Ä‰∫õÊéß‰ª∂ÔºåÂä†ËΩΩÁΩëÁªúÊï∞ÊçÆ } } 3.Ââ©‰∏ãÁöÑÂ∞±ÊòØFragmentPagerAdapter‰∫Üpublic class TitleAdapter extends FragmentPagerAdapter { private List&lt;Fragment&gt; fragments; private List&lt;String&gt; types; public TitleAdapter(FragmentManager fm, List&lt;Fragment&gt; fragments, List&lt;String&gt; types) { super(fm); this.fragments = fragments; this.types = types; } @Override public Fragment getItem(int position) { return fragments.get(position); } @Override public int getCount() { return fragments.size(); } @Override public CharSequence getPageTitle(int position) { return types.get(position); } } MainActivity.java private List&lt;String&gt; titles = new ArrayList&lt;&gt;(); private List&lt;Fragment&gt; fragments = new ArrayList&lt;&gt;(); TitleAdapter titleAdapter; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); TabLayout tablayout = findViewById(R.id.tablayout); ViewPager viewpager = findViewById(R.id.viewpager); titles.add(&quot;android&quot;); titles.add(&quot;ios&quot;); titles.add(&quot;web&quot;); titles.add(&quot;java&quot;); fragments.add(GankFragment.newInstance(&quot;android&quot;)); fragments.add(GankFragment.newInstance(&quot;ios&quot;)); fragments.add(GankFragment.newInstance(&quot;web&quot;)); fragments.add(GankFragment.newInstance(&quot;java&quot;)); titleAdapter = new TitleAdapter(getSupportFragmentManager(), fragments, titles); viewpager.setAdapter(titleAdapter); tablayout.setTabMode(TabLayout.MODE_FIXED); tablayout.setupWithViewPager(viewpager); } https://github.com/QQabby/LazyFragmentApplication]]></content>
      <tags>
        <tag>ÊáíÂä†ËΩΩ</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Dialog]]></title>
    <url>%2F2018%2F02%2F28%2FDialog%2F</url>
    <content type="text"><![CDATA[Âø´ÈÄüÂàùÂßãÂåñmaterialDialognew MaterialDialog.Builder(mContext) .title(&quot;title&quot;) .content(&quot;I&apos;m a content&quot;) .negativeText(&quot;cancel&quot;) .negativeColorRes(R.color.colorNegative) .positiveText(&quot;ok&quot;) .positiveColorRes(R.color.colorPositive) .onPositive(new MaterialDialog.SingleButtonCallback() { @Override public void onClick(@NonNull MaterialDialog dialog, @NonNull DialogAction which) { showMsg(&quot;click dialog ok&quot;); ... } }) .show();]]></content>
      <tags>
        <tag>materialDialog</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÈÄüÊü•Á¨îËÆ∞]]></title>
    <url>%2F2018%2F01%2F30%2F%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E9%80%9F%E6%9F%A5%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[Ëøô‰∏™ÂæÆ‰ø°Â∞èÁ®ãÂ∫è‰πüÂá∫Êù•Â•ΩÈïøÊó∂Èó¥‰∫ÜÔºå‰∏ÄÁõ¥ÊÉ≥ÂÅö‰∏Ä‰∏™Â±û‰∫éËá™Â∑±ÁöÑÂ∞èÁ®ãÂ∫èÔºåËøô‰∏çËØ¥Âä®ÊâãÂ∞±Âä®ÊâãÂÆûÁé∞‰∏Ä‰∏™ÂêßÔºåÊØîËæÉÁÆÄÊòìÔºå‰∏≠Èó¥‰πüÈÅáÂà∞‰∏çÂ∞ëÈóÆÈ¢òÔºåËÆ∞ÂΩï‰∏Ä‰∏ãÔºåÊñπ‰æø‰ª•ÂêéËá™Â∑±Êü•ÈòÖ„ÄÇ ÂæÆ‰ø°Â∞èÁ®ãÂ∫èÁöÑÁªìÊûÑ ÈªòËÆ§Ê≤°ÊúâËøô‰πà‰∫õÊñá‰ª∂Â§πÁöÑÔºåÂè™Êúâindex ÔºåÁÑ∂ÂêéËøô‰∏™Ê†áËØÜ app ÂºÄÂ§¥ÁöÑÊñá‰ª∂ÈÉΩÊòØ‰∏Ä‰∫õÂÖ®Â±ÄÁöÑËÆæÁΩÆ„ÄÇÂèØ‰ª•Ëá™Â∑±Êü•Áúã‰∏ãÔºåÈÉΩÊúâÊ≥®ÈáäÔºåÂ∞±‰ªéËøô‰∏™ÈÖçÁΩÆÂºÄÂßãËØ¥„ÄÇ ‰øÆÊîπÂêØÂä®È°µÈù¢ÈªòËÆ§ÂêØÂä®È°µÈù¢ÊòØindexÈ°µÈù¢ÔºåÂ¶ÇÊûúË¶Å‰øÆÊîπÔºåÊâìÂºÄapp.jsonÈÖçÁΩÆÊñá‰ª∂ÔºåÂú®È°∂ÈÉ®‰Ω†‰ºöÂèëÁé∞Êúâ‰∏Ä‰∏™pagesÁöÑÈÖçÁΩÆÔºåÂ¶Ç‰∏ãÔºö &quot;pages&quot;: [ &quot;pages/home/home&quot; Âè™ÈúÄË¶ÅÂ∞ÜÊàë‰ª¨ÁöÑÊÉ≥Ë¶ÅÊòæÁ§∫ÁöÑÈ°µÈù¢ÁöÑË∑ØÂæÑÂÜôÂú® Á¨¨‰∏Ä‰∏™ Â∞±ÂèØ‰ª•Êàê‰∏∫ÂêØÂä®È°µÔºåÁâπÂà´Ê≥®ÊÑèË∑ØÂæÑ‰∏ÄÂÆöË¶ÅÊ≠£Á°Æ„ÄÇ ÂΩìÁÑ∂‰Ω†‰ºöÊñ∞Âª∫ÂæàÂ§öÈ°µÈù¢ÔºåÊâÄÊúâÁöÑÈ°µÈù¢ÈÉΩÂøÖÈ°ªÂÜôÂú®Ëøô‰∏™ÈáåÈù¢Ôºå‰∏çÁÑ∂Ë∑≥ËΩ¨ÁöÑÊó∂ÂÄô‰ºöÊâæ‰∏çÂà∞„ÄÇ Â∫ïÈÉ®tabÊ†èÂàáÊç¢Â∞±ÊòØÂ∫ïÈÉ®tabÊ†èÂàáÊç¢,ÂêåÊ†∑ËøòÊòØÂú®app.json ÈÖçÁΩÆÊñá‰ª∂‰∏≠‰øÆÊîπÂ¶Ç‰∏ãÔºö &quot;tabBar&quot;: { &quot;color&quot;: &quot;#333333&quot;, &quot;selectedColor&quot;: &quot;#2B91D8&quot;, &quot;backgroundColor&quot;: &quot;#eee&quot;, &quot;borderStyle&quot;: &quot;white&quot;, &quot;list&quot;: [ { &quot;pagePath&quot;: &quot;pages/home/home&quot;, &quot;text&quot;: &quot;È¶ñÈ°µ&quot;, &quot;iconPath&quot;: &quot;pages/home/images/tab_icon_home_nor.png&quot;, &quot;selectedIconPath&quot;: &quot;pages/home/images/tab_icon_home_pre.png&quot; }, { &quot;pagePath&quot;: &quot;pages/myCenter/myCenter&quot;, &quot;text&quot;: &quot;ÊàëÁöÑ&quot;, &quot;iconPath&quot;: &quot;pages/home/images/tab_icon_center_nor.png&quot;, &quot;selectedIconPath&quot;: &quot;pages/home/images/tab_icon_center_pre.png&quot; } ] }, ËøôÈáåÁöÑ pagePath Â∞±ÊòØÈ°µÈù¢ÁöÑË∑ØÂæÑÔºåtextÊñáÂ≠óÔºåiconPathÂõæÊ†áÔºåÊ≥®ÊÑèÂõæÁâá‰∏ÄÂÆöË¶ÅÂ∏¶ÂêéÁºÄÔºåselectedIconPathÁÇπÂáªÊÄÅÁöÑÂõæÊ†áÔºåÂêÑËá™Êç¢Êàê‰Ω†Ëá™Â∑±ÁöÑÂ∞±Ë°åÔºåÈóÆÈ¢ò‰∏ç‰ºöÂ§™Â§ß„ÄÇ Âä†ËΩΩ‰∏≠Â¶Ç‰∏ãÔºö ÊúâÊ†áÁ≠æÂèØ‰ª•Áõ¥Êé•ÊòæÁ§∫Ëøô‰∏™,Âú®wxmlÊñá‰ª∂‰∏≠ÁºñÂÜôÔºö &lt;loading hidden=&quot;{{hidden}}&quot; bindchange=&quot;loadingChange&quot;&gt; Âä†ËΩΩ‰∏≠... &lt;/loading&gt; ÂèØ‰ª•ÊéßÂà∂ÊòæÁ§∫ËøòÊòØÈöêËóèÔºåÂú®.jsÊñá‰ª∂‰∏≠ÂèØ‰ª•ÊéßÂà∂Ôºö data: { hidden: false, } ÂèØ‰ª•Âú®data Â∫ï‰∏ãÈÖçÁΩÆÈªòËÆ§ÂÄºÔºåhidden: false ÈªòËÆ§‰∏çÊòæÁ§∫ÔºåËµãÂÄºÁöÑÊó∂ÂÄôÂøÖÈ°ªÂú®ËøôÈáåÈù¢ÂÜôÔºö that.setData({ hidden: true }) ÁΩëÁªúËØ∑Ê±Ç wx.request({ //ÁΩëÁªúËØ∑Ê±ÇÂú∞ÂùÄurl url: &apos;https://xx&apos;, header: { // &apos;content-type&apos;: &apos;application/x-www-form-urlencoded&apos; &apos;content-type&apos;: &apos;application/json&apos; // &apos;content-type&apos;: &apos;text/xml&apos; }, //ËØ∑Ê±ÇÂ§¥ÂèÇÊï∞ÈÖçÁΩÆ data: { page: pageNo, timestamp: timeStamps }, method: &quot;POST&quot;, success: function (res) { //xmlstring2json ÊòØÊàë‰ΩøÁî®Á¨¨‰∏âÊñπxmlËΩ¨jsonÁöÑ‰∏Ä‰∏™Â∫ì var xml2json = require(&apos;..//lib/xmlstring2json/dist/xml2json&apos;); var json = JSON.stringify(xml2json(res.data), null, 4); var jsonObject = xml2json(res.data); var jokeObject = jsonObject.root.joke //timestamp if(pageNo == 0){ timeStamps = jsonObject.root.timestamp.text } // console.log(&apos;json::&apos; + jsonObject.root.timestamp.text) // var data = new Array(); // for (var i = 0; i &lt; jokeObject.length;i++){ // var text = JSON.stringify(jokeObject[i].text).replace(&quot;#&quot;, &quot;&quot;) // //JSON.parse(text).text // var value = JSON.parse(text).text; // data.push(value) // } // console.log(&apos;data::Ôºö&apos; + jokeObject[0].text.text ); // var l = jokeObject; var l; if(pageNo == 0){ l = jokeObject }else{ var l = that.data.list; for (var i = 0; i &lt; jokeObject.length; i++) { l.push(jokeObject[i]) } } //È°µÈù¢ÁªëÂÆöÁöÑÊï∞ÊçÆËµãÂÄº that.setData({ list: l }) pageNo++ that.setData({ hidden: true }) }, fail : function(s){ wx.showModal({ title: &apos;ÊèêÁ§∫&apos;, content: &apos;ËØ∑Ê±ÇÊé•Âè£Â§±Ë¥•&apos; + JSON.stringify(s) }) } Ë¶ÅËøõË°åÁΩëÁªúËØ∑Ê±ÇÔºåÈ¶ñÂÖàÊµãËØïÈò∂ÊÆµÂèØ‰ª•Â∞ÜÂºÄÂèëÂ∑•ÂÖ∑ÈáåÁöÑÔºö ÊúÄÂêé‰∏Ä‰∏™ÈÄâÈ°πÂãæÈÄâ‰∏äÔºå‰∏çÊ†°È™å‚Ä¶,ÂêåÊó∂ÁÆ°ÁêÜÂëòËøòÈúÄÂú®ÂêéÂè∞ÈÖçÁΩÆÁΩëÁªúËØ∑Ê±ÇÁöÑÂüüÂêçÔºå‰∏§‰∏™Áº∫‰∏Ä‰∏çÂèØ„ÄÇ]]></content>
      <tags>
        <tag>ÂæÆ‰ø°Â∞èÁ®ãÂ∫è</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Â¶Ç‰ΩïÁªôTextView‰∏äÁöÑdrawable‰∏äÁöÑÂõæÁâáÊ∑ªÂä†Âä®ÁîªÔºü]]></title>
    <url>%2F2018%2F01%2F24%2F%E5%A6%82%E4%BD%95%E7%BB%99TextView%E4%B8%8A%E7%9A%84drawableEnd%E7%AD%89%E4%B8%8A%E7%9A%84%E5%9B%BE%E7%89%87%E6%B7%BB%E5%8A%A0%E5%8A%A8%E7%94%BB%EF%BC%9F%2F</url>
    <content type="text"><![CDATA[ÂèØËÉΩ‰Ω†ÈÅáÂà∞ËøáËøôÊ†∑ÁöÑÂú∫ÊôØÔºåÂ∞±ÊòØÂú® xml ÈáåÔºåÁªôTextViewÊ∑ªÂä†‰∫Ü‰∏Ä‰∏™drawableLeftÊàñËÄÖdrawableRightÁ≠âÔºå‰Ω†ÊÉ≥ÁªôËøô‰∏™ÂõæÁâáÊ∑ªÂä†‰∏Ä‰∏™Âä®ÁîªÔºåÁÑ∂ËÄå‰Ω†‰ºöÂèëÁé∞ÂΩì‰Ω†ÁªôËøô‰∏™TextViewÂä†Âä®ÁîªÂêßÂπ∂‰∏çÊòØÊàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÔºåÊàë‰ª¨Âè™ÊÉ≥Ë¶ÅÈÇ£‰∏™ÂõæÁâáÂÅöÂä®ÁîªÔºåÊñáÂ≠ó‰∏çÈúÄË¶ÅÂÅö‰ªª‰ΩïÂä®ÁîªÔºåÁõÆÂâçÂèØ‰ª•Êúâ‰∏§ÁßçÂÅöÊ≥ï„ÄÇ Á¨¨‰∏ÄÁßçÂÅöÊ≥ï ‰πüÊòØÊØîËæÉÈÄö‰øóÁöÑÊñπÊ≥ïÔºåËØ¥Ëøô‰∏™drawable ÂçïÁã¨ÂºÑÊàêImageView‰∏çÂ∞±Â•Ω‰∫ÜÔºåÂú®xmlÈáåÊñ∞Â¢û‰∏Ä‰∏™ImageView ÊòØÂêßÔºåÂπ≤ÂòõÈùûË¶ÅÂä†Âú®‰∏Ä‰∏™Ê†áÁ≠æÈáåÈù¢ÔºåË¶ÅÁõ∏‰ø°Â∏ÉÂ±ÄÈÉΩÊòØÂæàÂº∫Â§ßÁöÑÔºåËÇØÂÆöÂèØ‰ª•ÂÆûÁé∞ÊïàÊûú„ÄÇ Á¨¨‰∫åÁßçÂÅöÊ≥ï ‰Ω†ËØ¥ÁúüÁöÑÊ≤°ÂäûÊ≥ïÔºåÂøÖÈ°ªÂÜôÂú®‰∏Ä‰∏™ÈáåÈù¢Ôºå‰πüÊòØÊúâÂäûÊ≥ïÁöÑÔºåÈÇ£Â∞±‰∏çËÉΩÂú®xmlÈáåËÆæÁΩÆdrawableLeft‰∫ÜÔºå‰ª£Á†ÅËÆæÁΩÆÔºåÂ¶Ç‰∏ãÔºö 123AnimationDrawable d = (AnimationDrawable) getResources().getDrawable(R.drawable.animation_draw); d.setBounds(0,0,d.getIntrinsicWidth(),d.getIntrinsicHeight()); messageText.setCompoundDrawables(d, null, null, null); Ëøô‰∏™ÂÖ∑‰ΩìÁöÑÂä®ÁîªÂú®Ëøô‰∏™animation_drawÈáåÔºåÂ¶Ç‰∏ãÔºö 12345678&lt;animation-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:oneshot=&quot;false&quot; &gt; &lt;item android:drawable=&quot;@drawable/ic_launcher&quot; android:duration=&quot;500&quot; /&gt;&lt;/animation-list&gt; ËøôÊòØ‰∏Ä‰∏™Â∏ßÂä®ÁîªÔºåÈáåÈù¢ÂèØ‰ª•ÊîæÂæàÂ§öÁöÑitem,‰ªéËÄåÂΩ¢ÊàêÂä®Áîª,Á¢∞Âà∞‰∫ÜËøôÁßçÊÉÖÂÜµËÆ∞ÂΩï‰∏ãÔºåÊñπ‰æø‰ª•ÂêéÊü•ÈòÖ„ÄÇ]]></content>
      <tags>
        <tag>add animation to drawable</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android O Êñ∞ÁâπÊÄß AutoSizing]]></title>
    <url>%2F2018%2F01%2F16%2FAndroid-O-%E6%96%B0%E7%89%B9%E6%80%A7-AutoSizing%2F</url>
    <content type="text"><![CDATA[Ëá™Âä®Ë∞ÉÊï¥TextViewÁöÑÂ§ßÂ∞èÁöÑ‰ΩøÁî®autoSizing Android 8.0ÂÖÅËÆ∏Ê†πÊçÆTextViewÁöÑÂ§ßÂ∞èËá™Âä®ËÆæÁΩÆÊñáÊú¨Â±ïÂºÄÊàñÊî∂Áº©ÁöÑÂ§ßÂ∞è,ËøôÊÑèÂë≥ÁùÄÔºåÂú®‰∏çÂêåÂ±èÂπï‰∏ä‰ºòÂåñÊñáÊú¨Â§ßÂ∞èÊàñËÄÖ‰ºòÂåñÂåÖÂê´Âä®ÊÄÅÂÜÖÂÆπÁöÑÊñáÊú¨Â§ßÂ∞èÊØî‰ª•ÂæÄÁÆÄÂçïÂ§ö‰∫Ü„ÄÇ Âú®‰πãÂâçÁúã ÊñáÂ≠óÂ§™Â§öÔºüÊéß‰ª∂Â§™Â∞èÔºüËØïËØï TextView ÁöÑÊñ∞ÁâπÊÄß Autosizing ÂêßÔºÅ ‰ΩúËÄÖÂÜôÂà∞ÂÖ≥‰∫éËøô‰∏™Â±ûÊÄßÁöÑÊâÄÊúâÁî®Ê≥ïÔºåÂú®ËøôÈáåÊàëÂ∞±‰∏çÂ§öËØ¥‰ªÄ‰πà‰∫ÜÔºåÁî®Ê≥ïÂÖ∂ÂÆûÊå∫ÁÆÄÂçïÔºåÂÖ≥ÈîÆÊòØÊàëÂú®Áî®ÁöÑÊó∂ÂÄôÈÅáÂà∞‰∫Ü‰∏Ä‰∫õÂ∞èÈóÆÈ¢òÔºåÂØºËá¥‰∏ÄÁõ¥Âá∫‰∏çÊù•„ÄÇ ÂÆòÊñπÊñáÊ°£ ÁÇπÂáªÂç≥ÂèØÊü•ÁúãÔºåÂèØ‰ª•ÁúãÂà´‰∫∫ËÆ≤Ëß£ÁöÑÂêåÊó∂‰πüÂèØËá™Ë°åÊü•ÈòÖÊñáÊ°£ÔºåÂèåÊñπÂØπÊØîÁùÄÁúãÔºåÊÑüËßâ‰ºöÂ•Ω‰∏ÄÁÇπ„ÄÇ Â¶Ç‰∏ãÂõæÂèØ‰ª•ÁÆÄÂçïÊòé‰∫ÜÁöÑËØ¥ÊòéËØ•ÁâπÊÄßÔºö ÂÖ∑‰ΩìÊúÄÁÆÄÂçïÁöÑ‰ΩøÁî®Êúâ‰∏§ÁßçÔºö 1.‰∏ÄÁßçÂ∞±ÊòØapi &gt;= api 26ÁöÑÂèØ‰ª•Áõ¥Êé•Âú®xmlÈáåÈù¢ËØ•Â±ûÊÄßÔºö12345&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;TextView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;200dp&quot; android:autoSizeTextType=&quot;uniform&quot; /&gt; Âú®Ê≠§ÈúÄË¶ÅÊ≥®ÊÑèÁöÑÊòØÔºö‰ΩøÁî®Ëøô‰∏™autoSizeTextTypeÁöÑÊó∂ÂÄôÔºåÊéß‰ª∂ÁöÑlayout_width layout_height ‰∏çËÉΩ‰ΩøÁî®Ëøô‰∏™wrap_contentÂê¶ÂàôÁúã‰∏çÂá∫‰ªÄ‰πàÊïàÊûúÔºåË¶Å‰ΩøÁî®ÂÖ∑‰ΩìÂèØË°°ÈáèÁöÑ„ÄÇËøô‰∏™‰πü‰∏çÈöæÁêÜËß£ÔºåÂõ†‰∏∫ÂÆÉË¶ÅËÆ°ÁÆóÔºå‰Ω†ËÆæÁΩÆ‰∏Ä‰∏™Ê®°Á≥äÁöÑÂÆΩÂíåÈ´òÔºåÂ∞±ÁÆó‰∏çÂá∫Êù•‰∫Ü„ÄÇ 2. api&lt;26 ÁöÑ‰ΩéËÆæÂ§á ÁöÑÂÖºÂÆπÂÜôÊ≥ï ÂÆòÊñπÊñáÊ°£Èáå‰πüÊòéÁ°ÆËØ¥Êòé‰∫ÜÂÖºÂÆπ‰ΩéÁâàÊú¨The library provides support to Android 4.0 (API level 14) and higher. ‰πüÂ∞±ÊòØÂÖºÂÆπÂà∞4.0‰ª•‰∏äÔºåÂÜôÊ≥ïÊúâ‰∫õ‰∏çÂêåÔºåÂ¶Ç‰∏ãÔºö1234567891011121314&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;200dp&quot; tools:ignore=&quot;MissingPrefix&quot; app:autoSizeTextType=&quot;uniform&quot; /&gt;&lt;/LinearLayout&gt; Ëøô‰∏™appÊòØËøô‰∏™xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; Êàë‰ª¨Âú®Ëá™ÂÆö‰πâÊéß‰ª∂ÁöÑÊó∂ÂÄôÁªèÂ∏∏ÈÅáÂà∞ÂÆÉÔºåtoolsÊòØËøô‰∏™xmlns:tools=&quot;http://schemas.android.com/tools&quot; ÂΩìÁÑ∂‰ª•‰∏äÂÜôÊ≥ïÈÉΩÊîØÊåÅÂä®ÊÄÅÁºñÁ†ÅÔºåÂÖ∑‰ΩìÂèØÊü•ÈòÖÊñáÊ°£ Êï≤ÈªëÊùøÈáçÁÇπ‰Ω†‰ºöÂèëÁé∞‰Ω†ÂÜôÂÆå‰πãÂêéÁºñËØëÊòØÊä•ÈîôÁöÑÔºåÈîôËØØÁ±ª‰ººÊòØËøôÊ†∑ÁöÑÔºö Êâæ‰∏çÂà∞ÔºÅÔºÅÔºÅ Âú®ÂÜôÈÇ£ÁØáÊñáÁ´†‰ΩúËÄÖÁöÑÂ∏ÆÂä©‰∏ãÔºåÂèëÁé∞È¶ñÂÖàË¶ÅÂÖºÂÆπ‰ΩéÁâàÊú¨Ôºåmodule ÁöÑ build.gradle Êñá‰ª∂Ê∑ªÂä†‰æùËµñÊó∂ÂÄô Â∞±ÊòØËøô‰∏™com.android.support:appcompat-v7:xx ÂêéÈù¢ÁöÑÁâàÊú¨Âè∑Ë¶Å26‰ª•‰∏äÔºå‰Ω†ÁúãÁúã‰Ω†Ëá™Â∑±È°πÁõÆÈáåÊúâÂì™‰∏™ÁâàÊú¨‰Ω†Â∞±ÂÜô‰∏äÂì™‰∏™ÔºåËøòË¶ÅÂú®project ÁöÑ build.gradle Êñá‰ª∂ÈáåÊ∑ªÂä†Ôºömaven{ url &#39;https://maven.google.com&#39; }Ê∑ªÂä†Âà∞ÂØπÂ∫îÁöÑ‰ΩçÁΩÆ123456789allprojects &#123; repositories &#123; jcenter() //Ê∑ªÂä†Â¶Ç‰∏ãÂÜÖÂÆπ maven&#123; url &apos;https://maven.google.com&apos; &#125; &#125;&#125; Ëá≥Ê≠§ÊàëÂèëÁé∞ÊàëÁöÑÈ°πÁõÆÁªà‰∫é‰∏çÊä•Èîô‰∫ÜÔºåÂèØ‰ª•ËøêË°åËµ∑Êù•Âπ∂ËøõË°å‰∏ã‰∏ÄÊ≠•ÁöÑÂÆûË∑µÊìç‰Ωú‰∫ÜÔºåÂ§ßÂÆ∂Â¶ÇÊûúÂú®È°πÁõÆ‰∏≠‰πüÈÅáÂà∞ËøôÊ†∑ÁöÑÈóÆÈ¢òÔºåÊåâÊàëÈÇ£Ê†∑ÊîπÂ∫îËØ•Ê≤°Âï•ÈóÆÈ¢ò‰∫ÜÔºåÈ°∫‰æøÊääÊàëÂÜôÁöÑ‰ª£Á†Å‰∏ä‰º†Âà∞github ‰∏ä‰∫ÜÔºåÂèàÈúÄË¶ÅÁöÑÂèØ‰ª•‰∏ãËΩΩÁúãÁúãÔºödemo Âè¶Â§ñÂú®Êü•Áúã Android OÊñ∞ÁâπÊÄß‰∏≠ÂèëÁé∞‰∏Ä‰∏™ÊØîËæÉÂ•ΩÁé©ÁöÑ‰∏úË•øÔºöÁé∞Âú®ÔºåfindViewById() ÂáΩÊï∞ÁöÑÂÖ®ÈÉ®ÂÆû‰æãÂùáËøîÂõû TÔºåËÄå‰∏çÊòØ View„ÄÇ‰ª•ÂêéÂ∞±ÂèØ‰ª•Ëøô‰πàÂÜôÂï¶Ôºö1EditText et = findViewById(R.id.et); Â∞±ÊòØÈÇ£Ê†∑ÔºåÊó†ÈúÄÂº∫ËΩ¨‰∫ÜÔºåÂΩìÁÑ∂‰∫Ü‰ΩøÁî®‰∫ÜKotlinÁöÑËØùÂ∞±ÂøΩÁï•ÂêßÔºåÂõ†‰∏∫KotlinËøûfindViewById‰πü‰∏çÁî®ÂÜôÔºåÂìàÂìà„ÄÇÊõ¥Â§öÂ•ΩÁé©ÁâπÊÄßÂèØÊü•Áúã ÊñáÊ°£„ÄÇ]]></content>
      <tags>
        <tag>Android O</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[‰øÆÊîπËá™Âä®ÁîüÊàêget/setÊñπÊ≥ïÊ®°Êùø‰ª£Á†Å]]></title>
    <url>%2F2018%2F01%2F11%2F%E4%BF%AE%E6%94%B9%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90get-set%E6%96%B9%E6%B3%95%E6%A8%A1%E6%9D%BF%E4%BB%A3%E7%A0%81%2F</url>
    <content type="text"><![CDATA[‰ªäÂ§©ÁúãÂà∞Èù¢ÂØπÊé•Âè£ËÑèÊï∞ÊçÆ‰Ω†ËøòÂú®VÂ±Çif str==null else setText? ‰∏ÄÊñáÔºåËßâÁùÄÂÜôÂæóÊå∫Â•ΩÔºåÂºÄÂèëËøáÁ®ã‰∏≠Â§öÊÄùËÄÉÂ§öÂä®ÊâãÔºå‰ºöÂ∏¶Êù•ÊÑèÊÉ≥‰∏çÂà∞ÁöÑÊïàÊûú„ÄÇÂ∫ï‰∏ãËØÑËÆ∫Â§ßÂÆ∂‰πüÈÉΩËØ¥‰∫ÜÂêÑËá™ÁöÑÊñπÊ≥ïÂíåËßÅËß£ÔºåÊñá‰∏≠Êúâ‰∏Ä‰∫õÈóÆÈ¢ò‰ΩúËÄÖÂêéÊù•‰πüËß£ÂÜ≥‰∫ÜÔºåÁúãÂà∞ËØÑËÆ∫ÈáåÊúâ‰∫∫ËØ¥Ôºö ËØ¥Âà∞ÈÖçÁΩÆas,Â∞±ÂèØ‰ª•ÂÆûÁé∞Âú®ÂàõÂª∫beanÊó∂Ëá™Âä®ÁîüÊàêreturn xx==null?&quot;&quot;:xx; ËßâÁùÄÂæàÂ•ΩÔºåÂõ†‰∏∫ÊàëËßâÁùÄËøôÊòØ‰∏ÄÁßçÊå∫ÁÆÄÂçïÁöÑÊñπÊ≥ïÔºå‰ΩÜÊòØÂ∞±Â¶ÇÂêåÂ∫ï‰∏ã‰∫∫ÈóÆ‰∫ÜÊÄé‰πàÈÖçÁΩÆÂëÄÔºåÊàë‰πü‰∏çÁü•ÈÅìÔºå‰∫éÊòØÊàëÂ∞±Âú®Ëá™Â∑±asÂ∑•ÂÖ∑ÈáåÊñ∞Âª∫‰∫Ü‰∏Ä‰∏™beanÂØπË±°ÔºåÊåâ‰Ωèalt+insertÊ∑ªÂä†get/setÊñπÊ≥ïÔºåÂèëÁé∞‰∫ÜËß£ÂÜ≥ÂäûÊ≥ï„ÄÇÂ¶Ç‰∏ãÂõæÔºö Âπ≥Êó∂ÊâãÂø´‰πüÊ≤°Ê≥®ÊÑèÔºå‰ªäÂ§©‰ªîÁªÜÁúã‰∫ÜÁúãÔºåÈÇ£‰∏äÈù¢ÁöÑÊÑèÊÄù‰∏çÂ∞±ÊòØÔºåget ÊñπÊ≥ïÊ®°ÂùóÔºåsetÊñπÊ≥ïÊ®°ÊùøÂêóÔºåÂêéÈù¢Ë∑üÁùÄ IntelliJ DefaultÂ§ßÊ¶ÇÂ∞±ÊòØÈªòËÆ§ÁöÑÁîüÊàêÊ®°ÊùøÂêßÔºåÁÇπÂáªÂêéÈù¢ÁöÑ‰∏â‰∏™ÁÇπÊåâÈíÆËøõÂéªÁúãÁúãÔºåÂ¶Ç‰∏ãÔºö ËøôÊòØsetÁöÑÔºågetÊñπÊ≥ï‰πüÁ±ª‰ººÊòØËøôÊ†∑ÁöÑÔºåÂ§ßÊ¶Ç‰πüËÉΩÁúãÊáÇÔºåÊÉ≥ÁùÄÊòØ‰∏çÊòØÂèØ‰ª•Áõ¥Êé•Ê®°ÊùøÂ∞±Â•Ω‰∫ÜÔºåÂèëÁé∞Êó†Ê≥ï‰øÆÊîπÔºåÂêéÊù•ÂèàÂèëÁé∞Â∑¶‰∏äËßíÁöÑ+Âè∑ÔºåÂéüÊù•ÊòØËá™Â∑±ÂèØ‰ª•Êñ∞Âª∫‰∏Ä‰∏™Ê®°ÊùøÔºåÁÑ∂ÂêéÂÜçÁîüÊàêÁöÑÊó∂ÂÄôÈÄâÊã©Ëá™Â∑±ÁöÑÊ®°ÊùøÂ∞±Â•Ω‰∫ÜÔºåÂ¶ÇÊàë‰ª¨Âú®getÊ®°Êùø‰∏≠Êñ∞Âª∫‰∏Ä‰∏™Ëá™Â∑±ÁöÑÊ®°ÊùøÔºö Êàë‰ª¨Áü•ÈÅìÊàë‰ª¨Âè™ÈúÄË¶ÅÊîπ‰∏Ä‰∏ãÊúÄÂêégetÊñπÊ≥ïreturnÈÇ£‰∏™Âú∞ÊñπÁöÑ‰ª£Á†ÅÔºå‰πüÂ∞±ÊòØËøôÂÑøÔºö ‰∏çÁ°ÆÂÆöÊòØ‰∏çÊòØÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÂêéÈù¢Ë∑üÁùÄ‰∏Ä‰∏™‚Äú#‚ÄùÂè∑ËØïËØïÔºö123$&#123;name&#125;() &#123; return $field.name+&quot;#&quot;;&#125; Âú®ÁîüÊàêÁöÑÊó∂ÂÄôÈÄâÊã©Êàë‰ª¨Ëá™ÂÆö‰πâÁöÑÊ®°ÊùøÔºö ÂèëÁé∞ÊúÄÂêéÁîüÊàêÁöÑ‰ª£Á†ÅÔºö1234567public String getAge() &#123; return age + &quot;#&quot;;&#125;public void setAge(String age) &#123; this.age = age;&#125; ËøôÊ†∑ËØÅÊòéÁ°ÆÂÆöÊòØËøôÊ†∑ÁöÑÔºåÈÇ£‰πàÊàë‰πàÂèØ‰ª•ÁªßÁª≠ËøõË°åÁúüÊ≠£ÁöÑÂà§Êñ≠‰∫ÜÔºöÊàë‰ª¨ÂÖàÊääËøô‰∏™ÈªòËÆ§ÈáåÁöÑgetÊñπÊ≥ï‰ª£Á†ÅÊã∑Ë¥ùÂà∞ MyGetter‰∏≠ÔºåÊàë‰ª¨ÂÜçÊ†πÊçÆÊàë‰ª¨Ëá™Â∑±ÁöÑÈúÄË¶Å‰øÆÊîπÊ®°Êùø‰ª£Á†Å,ÂÖ∂ÂÆÉÂú∞Êñπ‰∏çÂèòÔºåÂ∞±‰øÆÊîπÈúÄË¶Å‰øÆÊîπÁöÑÂú∞ÊñπÔºöÊàë‰ª¨ÊÉ≥Ë¶ÅÂÆûÁé∞ËøôÊ†∑ÁöÑÔºöreturn xx==null?&quot;&quot;:xx,Ok ÔºåÈÇ£‰πàÊàëËÆ§‰∏∫Â§ßÊ¶ÇÊòØËøô‰πàÂÜôÁöÑÔºåÈ¶ñÂÖàÂà§Êñ≠ÊòØÂê¶ÊòØÂ≠óÁ¨¶‰∏≤Ôºö12345678$&#123;name&#125;() &#123; #if(field.String)&#123; return $field.name == null ? &quot;&quot; : $field.name; &#125; #else return $field.name; #end &#125; Êàë‰ª¨ÂØπÊØî‰∏Ä‰∏™defaultÁöÑÂÜôÊ≥ïÔºö123$&#123;name&#125;() &#123; return $field.name;&#125; Â•ΩÁöÑÔºåÊàë‰ª¨ÂÜçÁªßÁª≠ÁîüÊàê‰∏Ä‰∏ãÔºö1234567public String getAge() &#123; return age == null ? &quot;&quot; : age; &#125; public void setAge(String age) &#123; this.age = age; &#125; Â•ΩÁöÑÔºåËææÊàêÊïàÊûúÔºåËÄ∂ÔºåÂ±ÖÁÑ∂ËøòÂèØ‰ª•Ëøô‰πàÁé©Ôºå‰ª•ÂêéÂèØÊ†πÊçÆËá™Â∑±ÈúÄÊ±ÇËá™Ë°å‰øÆÊîπÔºåË∞¢Ë∞¢Â§ßÂÆ∂„ÄÇ]]></content>
      <tags>
        <tag>get/set.template</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ActivityÂêØÂä®Ê®°Âºè]]></title>
    <url>%2F2018%2F01%2F09%2FActivity%E5%90%AF%E5%8A%A8%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[‚óè standard Ê†áÂáÜÊ®°Âºè‚Äã ÁÆÄËø∞ÔºöÂØπ‰∫é‰ΩøÁî®standardÊ®°ÂºèÁöÑÊ¥ªÂä®ÔºåÁ≥ªÁªü‰∏ç‰ºöÂú®‰πéËøô‰∏™Ê¥ªÂä®ÊòØÂê¶Â∑≤ÁªèÂú®ËøîÂõûÊ†à‰∏≠Â≠òÂú®ÔºåÊØèÊ¨°ÂêØÂä®ÈÉΩ‰ºöÂàõÂª∫ËØ•Ê¥ªÂä®ÁöÑ‰∏Ä‰∏™Êñ∞ÁöÑÂÆû‰æã„ÄÇ‰æãÂ¶ÇÔºöAÂêØÂä®AÔºåAÂÜçÊé•ÁùÄÂêØÂä®A,AÂÜçÊé•ÁùÄÂêØÂä®A,ÔºåÁÑ∂ÂêéÂÜçÂàÜÂà´Âá∫Ê†àÔºåÂ¶ÇÂõæÊâÄÁ§∫Ôºö‚Äã ‚óè singleTopÁÆÄËø∞ÔºöÂΩìÊ¥ªÂä®ÁöÑÂêØÂä®Ê®°ÂºèÊåáÂÆö‰∏∫ singleTop ,Âú®ÂêØÂä®Ê¥ªÂä®Êó∂Â¶ÇÊûúÂèëÁé∞ËøîÂõûÊ†àÁöÑÊ†àÈ°∂Â∑≤ÁªèÊòØËØ•Ê¥ªÂä®ÔºåÂàôËÆ§‰∏∫ÂèØ‰ª•Áõ¥Êé•‰ΩøÁî®ÂÆÉÔºå‰∏ç‰ºöÂÜçÂàõÂª∫Êñ∞ÁöÑÊ¥ªÂä®ÂÆû‰æã„ÄÇ‰æãÂ¶ÇÔºöÂ¶ÇÊûúÂø´ÈÄüÁÇπÂáª‰∏Ä‰∏™ÊåâÈíÆÔºåËøõÂÖ•ActivityÔºåË¶Å‰øùËØÅÂêØÂä®ÁöÑActivity‰∏ç‰∏∫Â§ö‰∏™ÔºåÂèØ‰ª•‰ΩøÁî®Â∞ÜActivityÁöÑÂêØÂä®Ê®°ÂºèÊîπ‰∏∫ singleTopÔºåÂ∞±‰∏ç‰ºöÂêØÂä®Â§ö‰∏™‰∫Ü„ÄÇÂ¶ÇÂõæÊâÄÁ§∫Ôºö‚Äã ‚óè singleTaskÁÆÄËø∞ÔºöÂΩìÊ¥ªÂä®ÁöÑÂêØÂä®Ê®°ÂºèÊåáÂÆö‰∏∫singleTaskÔºåÊØèÊ¨°ÂêØÂä®ËØ•Ê¥ªÂä®Êó∂ÂÄôÔºåÂÆÉ‰ºöÂÖàÂú®Á≥ªÁªü‰∏≠Êü•ÊâæÂ±ûÊÄßÂÄºtaskaffinityÁ≠â‰∫éÂÆÉÁöÑÂ±ûÊÄßÂÄºtaskAffinityÁöÑ‰ªªÂä°Â≠òÂú®ÔºõÂ¶ÇÊûúÂ≠òÂú®ËøôÊ†∑ÁöÑ‰ªªÂä°Ôºå‰ªñÂ∞±‰ºöËøô‰∏™‰ªªÂä°‰∏≠ÂêØÂä®ÔºåÂê¶ÂàôÂ∞±‰ºöÂú®Êñ∞‰ªªÂä°‰∏≠ÂêØÂä®„ÄÇÂõ†Ê≠§ÔºåÂ¶ÇÊûúÊàë‰ª¨ÊÉ≥Ë¶ÅËÆæÁΩÆ‰∫Ü‚ÄúsingleTask‚ÄùÂêØÂä®Ê®°ÂºèÁöÑActivityÂú®Êñ∞ÁöÑ‰ªªÂä°‰∏≠ÂêØÂä®ÔºåÂ∞±Ë¶Å‰∏∫ÂÆÉËÆæÁΩÆ‰∏Ä‰∏™Áã¨Á´ãÁöÑtaskAffinityÂ±ûÊÄßÂÄº„ÄÇ Â¶ÇÊûúËÆæÁΩÆ‰∫Ü‚ÄúsingleTask‚ÄùÂêØÂä®Ê®°ÂºèÁöÑActivity‰∏çÊòØÂú®Êñ∞ÁöÑ‰ªªÂä°‰∏≠ÂêØÂä®Êó∂ÔºåÂÆÉ‰ºöÂú®Â∑≤ÊúâÁöÑ‰ªªÂä°‰∏≠Êü•ÁúãÊòØÂê¶Â∑≤ÁªèÂ≠òÂú®Âú®Áõ∏Â∫îÁöÑActivityÂÆû‰æãÔºåÂ¶ÇÊûúÂ≠òÂú®ÔºåÂ∞±‰ºöÊää‰Ωç‰∫éËøô‰∏™ActivityÂÆû‰æã‰∏äÈù¢ÁöÑActivityÂÖ®ÈÉ®ÁªìÊùüÊéâÔºåÂç≥ÊúÄÁªàËøô‰∏™ActivityÂÆû‰æã‰ºö‰Ωç‰∫é‰ªªÂä°ÁöÑÂ†ÜÊ†àÈ°∂Á´Ø‰∏≠„ÄÇ ÊØèÊ¨°ÂêØÂä®ËØ•Ê¥ªÂä®Êó∂Á≥ªÁªüÈ¶ñÂÖà‰ºöÂú®ËøîÂõûÊ†à‰∏≠Ê£ÄÊü•ÊòØÂê¶Â≠òÂú®ËØ•Ê¥ªÂä®ÁöÑÂÆû‰æãÔºåÂ¶ÇÊûúÂèëÁé∞Â∑≤ÁªèÂ≠òÂú®ÂàôÁõ¥Êé•‰ΩøÁî®ËØ•ÂÆû‰æãÔºåÂπ∂ÊääÂú®Ëøô‰∏™Ê¥ªÂä®‰πã‰∏äÁöÑÊâÄÊúâÊ¥ªÂä®ÁªüÁªüÂá∫Ê†àÔºåÂ¶ÇÊûúÊ≤°ÊúâÂèëÁé∞Â∞±‰ºöÂàõÂª∫‰∏Ä‰∏™Êñ∞ÁöÑÊ¥ªÂä®ÂÆû‰æã„ÄÇ ÂΩìÊ†àÂ∫ïÈÉ®ÁöÑ A ÈáçÊñ∞Ë¢´ÂêØÂä®ÊâìÂºÄÊó∂Ôºå‰ºöÊâßË°åonNewIntent() onStart() ÊñπÊ≥ï„ÄÇ ‰ΩøÁî®Âú∫ÊôØÔºöÂ∫îÁî®‰∏ªÈ°µÈù¢‰∏ÄËà¨ÊòØ singleTask ‚óè singleInstanceÔºàÂçïÁã¨‰ªªÂä°Ê†àÔºâÁÆÄËø∞Ôºö‰ΩøÁî®singleInstance Ê®°ÂºèÂ∞±ÂèØ‰ª•Ëß£ÂÜ≥Ëøô‰∏™ÈóÆÈ¢òÔºåÂú®ËøôÁßçÊ®°Âºè‰∏ã‰ºöÊúâ‰∏Ä‰∏™ÂçïÁã¨ÁöÑËøîÂõûÊ†àÊù•ÁÆ°ÁêÜËøô‰∏™Ê¥ªÂä®Ôºå‰∏çÁÆ°ÊòØÂì™‰∏™Â∫îÁî®Á®ãÂ∫èÊù•ËÆøÈóÆËøô‰∏™Ê¥ªÂä®ÔºåÈÉΩ‰ºöÂÖ±Áî®Âêå‰∏Ä‰∏™ËøîÂõûÊ†àÔºå‰πüÂ∞±Ëß£ÂÜ≥‰∫ÜÂÖ±‰∫´Ê¥ªÂä®ÂÆû‰æãÁöÑÈóÆÈ¢ò„ÄÇ‚Äã ËøîÂõûÁöÑÈ°µÈù¢È°∫Â∫èÊòØÔºöC-B-A]]></content>
      <tags>
        <tag>launchMode</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AIDLÂÆû‰æã]]></title>
    <url>%2F2018%2F01%2F08%2FAIDL%E5%AE%9E%E4%BE%8B%2F</url>
    <content type="text"><![CDATA[ËØ¥Âà∞ËøõÁ®ãÈó¥ÈÄö‰ø°Ôºå‰∏ÄËà¨È¶ñÂÖàÂ∞±‰ºöÊÉ≥Âà∞AIDLÔºå‰πüÁúã‰∫ÜÂæàÂ§öÊñáÁ´†ÔºåÂÅö‰∏ãÁ¨îËÆ∞ÔºåËÆ∞ÂΩï‰∏Ä‰∏ãÔºåÊñπ‰æø‰ª•ÂêéÊü•ÈòÖ„ÄÇ ÂØπ‰∫é AIDL ÊàëÊòØËøôÊ†∑ÁêÜËß£ÁöÑÔºåÈ¶ñÂÖàËøõÁ®ãÈó¥ÊòØÊó†Ê≥ïÈÄö‰ø°ÁöÑÔºåÈÇ£Ë¶ÅÈÄö‰ø°Â∞±ÂæóÊúâ‰∏Ä‰∏™Â™í‰ªãÊàñËÄÖËØ¥‰∏§‰∏™ËøõÁ®ãÊúâÁªü‰∏ÄÂØπÂ§ñÁöÑÊé•Âè£ÂèØ‰ª•Áõ∏‰∫íËØÜÂà´Ôºå‰ªéËøô‰∏™ AIDLÂÖ®Á®ãÁöÑÂêçÂ≠óAndroid Interface Definition Language (android Êé•Âè£ÂÆö‰πâËØ≠Ë®Ä) Êù•Áúã‰∏çÈöæÁúãÂá∫ÂÆÉÂ∞±ÊòØÊàë‰ª¨ËøõÁ®ãÈó¥ÈÄö‰ø°ÁöÑÂ™í‰ªãÔºåÂÆÉÂèØ‰ª•ÂÆûÁé∞Êàë‰ª¨ÊÉ≥Ë¶ÅÁöÑÈÄö‰ø°„ÄÇ Âú®ÁøªÈòÖÁΩë‰∏äÂêÑÁ±ªÊñáÁ´†ÁöÑËÆ≤Ëß£ÂêéÔºåÊàëËÆ§‰∏∫‰∏Ä‰∏™ÊØîËæÉÂ•ΩÁöÑÂÆû‰æãÂèØ‰ª•Êõ¥Â•ΩÁêÜËß£Ëøô‰∏™‰∏úË•øÔºåÂÖ∑‰ΩìÂ¶Ç‰∏ãÔºö Á¨¨‰∏ÄÊ≠•Êàë‰ª¨Êñ∞ÂàõÂª∫‰∏§‰∏™moduleÔºå‰ª£Ë°®Êàë‰ª¨‰∏§‰∏™ËøõÁ®ãÔºåËøõÁ®ãÂêçÁß∞ÈªòËÆ§Â∞±ÊòØÊàë‰ª¨Á®ãÂ∫èÁöÑÂåÖÂêçÔºö Á¨¨‰∫åÊ≠•Êàë‰ª¨ÂÖàÁºñÂÜôserviceËøô‰∏™moduleÈáåÁöÑ‰ª£Á†ÅÔºåÂÖàÂÆö‰πâ‰∏Ä‰∏™ PersonÁöÑ‰∏Ä‰∏™beanÂØπË±°ÔºåËÆ∞‰Ωè‰∏ÄÂÆöË¶Åimplements Parcelable Êé•Âè£ÔºåÂ§ßËá¥Â¶Ç‰∏ãÔºö1234567891011121314151617181920212223242526272829303132333435363738394041public class Person implements Parcelable &#123; private String mName; public Person(String name) &#123; mName = name; &#125; protected Person(Parcel in) &#123; mName = in.readString(); &#125; public static final Creator&lt;Person&gt; CREATOR = new Creator&lt;Person&gt;() &#123; @Override public Person createFromParcel(Parcel in) &#123; return new Person(in); &#125; @Override public Person[] newArray(int size) &#123; return new Person[size]; &#125; &#125;; @Override public int describeContents() &#123; return 0; &#125; @Override public void writeToParcel(Parcel dest, int flags) &#123; dest.writeString(mName); &#125; @Override public String toString() &#123; return "\nPerson&#123;" + "mName='" + mName + '\'' + '&#125;'; &#125;&#125; ÁÑ∂ÂêéÊàë‰ª¨ÂÜçÊñ∞Âª∫‰∏Ä‰∏™Êñá‰ª∂Â§πÔºöaidl,Êñ∞Âª∫‰∏Ä‰∏™ÂåÖÂêçÂíåPersonÁ±ª‰∏ÄÊ®°‰∏ÄÊ†∑ÁöÑÂåÖÂêçÂíå‰∏é‰πãÂØπÂ∫îÁöÑaidl,ËøòÊúâ‰∏Ä‰∏™Êàë‰ª¨ÂØπÂ§ñÊèê‰æõËé∑ÂèñpersonÈõÜÂêàÁöÑ‰∏Ä‰∏™aidl: Âú®Person.aidlÈáåÔºåÊàë‰ª¨Â∫èÂàóÂåñÊàë‰ª¨javaÈáåÁöÑ Person Á±ªÔºö 12345package com.example.service.bean;//ËøòË¶ÅÂíåÂ£∞ÊòéÁöÑÂÆû‰ΩìÁ±ªÂú®‰∏Ä‰∏™ÂåÖÈáåÔºåÂêåÊó∂Ê≥®ÊÑè‰∏çË¶ÅÊñ∞Âª∫aidlÊñá‰ª∂ÔºåÂõ†‰∏∫‰Ω†‰ºöÂèëÁé∞ÔºåÊñ∞Âª∫‰∏ç‰∫ÜÔºå//ÊèêÁ§∫‰Ω†ÂêçÁß∞ÂîØ‰∏ÄÔºåÊ≠§Êó∂‰Ω†Êñ∞Âª∫‰∏Ä‰∏™file,ÂêçÂ≠ó‰∏∫Person.aidlÂ∞±ÂèØ‰ª•ÔºåÈúÄË¶ÅÁâπÂà´Ê≥®ÊÑè‰∏ãparcelable Person; IMyAidl.aidl Êñá‰ª∂Êèê‰æõÂØπÂ§ñÊñπÊ≥ïÔºö12345678910111213141516// IMyAidl.aidlpackage com.example.service.bean;//ÁâπÂà´Ê≥®ÊÑè‰∏ÄÂÆöË¶ÅÊâãÂä®ÂØºÂåÖÔºå‰∏ç‰ºöËá™Âä®ÂØºÂåÖimport com.example.service.bean.Person;// Declare any non-default types here with import statements//ÂèØ‰ª•ÁêÜËß£‰∏∫ÈÄö‰ø°Â™í‰ªãinterface IMyAidl &#123; /** * Èô§‰∫ÜÂü∫Êú¨Êï∞ÊçÆÁ±ªÂûãÔºåÂÖ∂‰ªñÁ±ªÂûãÁöÑÂèÇÊï∞ÈÉΩÈúÄË¶ÅÊ†á‰∏äÊñπÂêëÁ±ªÂûãÔºöin(ËæìÂÖ•), out(ËæìÂá∫), inout(ËæìÂÖ•ËæìÂá∫) */ void addPerson(in Person person); List&lt;Person&gt; getPersonList();&#125; ÁÑ∂ÂêéÂú®Êàë‰ª¨ÁöÑjavaÊñá‰ª∂ÈáåÔºåÊñ∞Âª∫‰∏Ä‰∏™MyAidlService,123456789101112131415161718192021222324252627282930313233343536373839public class MyAidlService extends Service &#123; private final String TAG = this.getClass().getSimpleName(); private ArrayList&lt;Person&gt; mPersons; /** * ÂàõÂª∫ÁîüÊàêÊú¨Âú∞ÁöÑbinder ,ÂÆûÁé∞AIDLÁöÑÊñπÊ≥ï */ private IBinder mIBinder = new IMyAidl.Stub()&#123; @Override public void addPerson(Person person) throws RemoteException &#123; mPersons.add(person); &#125; @Override public List&lt;Person&gt; getPersonList() throws RemoteException &#123; return mPersons; &#125; &#125;; /** * ÂÆ¢Êà∑Á´Ø‰∏éÊúçÂä°Á´ØÁªëÂÆöÊó∂ÁöÑÂõûË∞ÉÔºåËøîÂõûIBinderÂØπË±°ÂêéÂÆ¢Êà∑Á´ØÂ∞±ÂèØ‰ª•ÈÄöËøáÂÆÉËøúÁ®ãË∞ÉÁî®ÊúçÂä°Á´ØÁöÑÊñπÊ≥ïÔºåÂç≥ÂÆûÁé∞‰∫ÜÈÄöËÆØ * @param intent * @return */ @Nullable @Override public IBinder onBind(Intent intent) &#123; mPersons = new ArrayList&lt;&gt;(); return mIBinder; &#125; @Override public void onCreate() &#123; super.onCreate(); &#125; ÊúÄÂêéÂà´Âøò‰∫ÜÂú®Ê∏ÖÂçïÊñá‰ª∂‰∏≠Ê≥®ÂÜåMyAidlService1234&lt;service android:name="com.example.service.MyAidlService" android:enabled="true" android:exported="true" /&gt; Âà∞Ê≠§ÔºåÊàë‰ª¨ÂÆåÊàê‰∫ÜserviceÁ´ØÁöÑÂ∑•‰ΩúÔºö Á¨¨‰∏âÊ≠•Â∞ÜÊàë‰ª¨ÂàöÊâçÂàõÂª∫Â•ΩÁöÑaidlÊñá‰ª∂Â§πÊã∑Ë¥ùÂà∞ app module‰∏ãmainÊñá‰ª∂Â§π‰∏ãÔºåÂú®MainActivity‰∏≠ÁªëÂÆöÊúçÂä°Ôºå123Intent intent = new Intent(); intent.setComponent(new ComponentName("com.example.service","com.example.service.MyAidlService")); bindService(intent,mConnection,BIND_AUTO_CREATE); ÂÖ∂‰∏≠Ëøô‰∏™mConnectionÂèØ‰ª•ËÆ©Êàë‰ª¨ÊãøÂà∞IMyAidlÂØπË±°ÁöÑ‰ª£ÁêÜ123456789101112private ServiceConnection mConnection = new ServiceConnection() &#123; @Override public void onServiceConnected(ComponentName componentName, IBinder iBinder) &#123; mAidl = IMyAidl.Stub.asInterface(iBinder); &#125; @Override public void onServiceDisconnected(ComponentName componentName) &#123; mAidl = null; &#125; &#125;; ÈÄöËøáËøîÂõûÁöÑIBinder ÊãøÂà∞Ëøô‰∏™IMyAidlÔºåÊ≠§Êó∂Êàë‰ª¨Â∞±ÂèØ‰ª•ÈÄö‰ø°‰∫ÜÔºå‰æãÂ¶ÇÊàë‰ª¨Ë∞ÉÁî®IMyAidl‰∏≠ÁöÑaddPersonÊñπÊ≥ïÔºåÂÜçË∞ÉÁî®getPersonListÁúãÁúãÔºö1234567891011Random random = new Random(); Person person = new Person("qian"+random.nextInt(20)); try&#123; mAidl.addPerson(person); List&lt;Person&gt; mPersons = mAidl.getPersonList(); tvName.setText(mPersons.toString()); &#125;catch (Exception e)&#123; e.printStackTrace(); &#125; ÊâìÂç∞ÂèëÁé∞list ËøîÂõû‰∫ÜÊàë‰ª¨Ê∑ªÂä†ÁöÑPersonÔºåÂÆåÊàê‰∫Üapp‰∏éservice‰∏§‰∏™ËøõÁ®ãÈó¥ÁöÑÈÄö‰ø°„ÄÇdemoÂú∞ÂùÄÔºöhttps://github.com/QQabby/AIDLDemo]]></content>
      <tags>
        <tag>AIDLÂÆû‰æã</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ÂÜôÊñá‰ª∂Áõ∏ÂÖ≥]]></title>
    <url>%2F2017%2F12%2F28%2F%E5%86%99%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%2F</url>
    <content type="text"><![CDATA[ÂêësdÂç°Ê†πÁõÆÂΩï‰∏≠ÂÜôÂÖ•Êñá‰ª∂123456789101112//È¶ñÂÖàÂà§Êñ≠ÊòØÂê¶Â≠òÂú®sdÂç°if(Environment.getExternalStorageState().equals( Environment.MEDIA_MOUNTED))&#123; //Ëé∑ÂèñÂ§ñÈÉ®ËÆæÂ§á File file=new File(Environment.getExternalStorageDirectory(),"qianqian.txt"); FileOutputStream outStream=new FileOutputStream(file); //ÂÜôÂÖ•Êñá‰ª∂ outStream.write(content.getBytes()); outStream.close(); &#125; ËØªÂèñassets‰∏ãÁöÑÊñá‰ª∂Ë∑ØÂæÑ123//Ê†ºÂºèÂ¶Ç‰∏ãfile:///android_asset/myVideo.htmlfile:///android_asset/xx(Êñá‰ª∂ÂêçÁß∞) ËØªÂèñassets‰∏ãÁöÑÊñá‰ª∂ËΩ¨Âåñ‰∏∫String123456789101112131415public String getFromAssets(String fileName) &#123; try &#123; InputStreamReader inputReader = new InputStreamReader( getResources().getAssets().open(fileName)); BufferedReader bufReader = new BufferedReader(inputReader); String line = ""; String Result = ""; while ((line = bufReader.readLine()) != null) Result += line; return Result; &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; return ""; &#125;]]></content>
      <tags>
        <tag>ÂêësdÂç°ÂÜôÂÖ•Êñá‰ª∂</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[LRUÁÆóÊ≥ïËøò‰∏ÄÁü•ÂçäËß£Ôºü]]></title>
    <url>%2F2017%2F12%2F19%2Flru%2F</url>
    <content type="text"><![CDATA[ÊüêÂπ¥ÊüêÊúàÊüêÊó•ÔºåÁ≥ñËë´Ëä¶ÂêåÂ≠¶Âú®ÊéòÈáëapp‰∏äÁúã‰∫ÜÂá†ÁØáÊñáÁ´†ÔºåÂÅ∂ÁÑ∂ÁúãÂà∞‰∫Ü‰∏ÄÁØáÁÜüÊÇâÁöÑËØçLRUÁÆóÊ≥ïÔºåËÑëÊµ∑ÈáåÂ∞±ÊÉ≥Ëøô‰∏çÊòØÁªèÂ∏∏ËØ¥ÁöÑÂòõÔºåÂ∞±ÈÇ£‰πàÂõû‰∫ãÔºåÂΩìÂ§©Êôö‰∏äÁù°ËßâÔºåLRUÁÆóÊ≥ïÊòØÂï•Êù•ÁùÄÔºåÂ•ΩÂÉèÊòØ‰ªÄ‰πàÊúÄËøëÊúÄÂ∞ë‰ΩøÁî®ÁöÑÔºåÁôΩÂ§©Âú®Âú∞ÈìÅ‰∏äÁúãÁöÑÊñáÁ´†‰πü‰∏çÂ∞ëÔºå‰ΩÜÊòØÂà∞Êôö‰∏äÊÉ≥ÊÉ≥Â•ΩÂÉèÂï•‰πüÊ≤°ËÆ∞‰ΩèÔºåÂ∞±ËÆ∞ÂæóLRUÁÆóÊ≥ïÔºåÊàëÂèëÁé∞‰∫∫Â§ßÂ§öÊï∞ÊòØËøôÊ†∑ÁöÑÂïäÔºåÂØπ‰∫éËá™Â∑±ÁÜüÊÇâÁöÑÈÉ®ÂàÜÂë¢ËøòËÉΩËÆ∞ÁùÄÁÇπÔºå‰∏çÁÜüÊÇâÊàñËÄÖ‰∏ç‰ºöÁöÑÂèØËÉΩÁúüÁöÑÊòØÁúãËøáÂ∞±ÂøòÂïä~Êó¢ÁÑ∂ËøôÊ†∑Ëøò‰∏çÂ¶ÇÂÖàÊääÁÜüÊÇâÁöÑÂºÑÊòéÁôΩ„ÄÇ Á¨¨‰∫åÂ§©Êù•Âà∞ÂÖ¨Âè∏ÔºåÊàëËßâÁùÄËøòÊòØÊúâÂøÖË¶ÅÁúã‰∏Ä‰∏ãËøô‰∏™LRUÁöÑÊ∫êÁ†ÅÔºåÂà∞Â∫ïÊòØÊÄé‰πàÂõû‰∫ãÔºåÂóØÔºåÁ≥ñËë´Ëä¶ÂêåÂ≠¶Âà∑Âà∑ÂæóÁúãÔºå‰∏ãÈù¢Êàë‰ª¨Â∞ÜËøõÂÖ•Ê≠£È¢òÔºåËØ∑Êà¥ÁúºÈïúÁöÑÂêåÂ≠¶ÊääÁúºÈïúÊì¶‰∏ÄÊì¶ÔºåÂìàÂìàÂìà FirstÂÖàÁúãÊ∫êÁ†ÅÔºåÂÜçÁî®ÂÖ∑‰ΩìÁöÑdemoÂä†‰ª•È™åËØÅÔºåÊàë‰ª¨ÂÖàÁúã‰∏Ä‰∏ãËøô‰∏™LruCacheËøô‰∏™Á±ªÁöÑÂ§ßËá¥ÁªìÊûÑÂíåÊñπÊ≥ïÔºåÂ¶Ç‰∏ãÂõæÊâÄÁ§∫Ôºö ËøôÂèàÊòØ get(K)Ôºåput(K,V), remove(K) ÁöÑÊñπÊ≥ïÁöÑ Áªô‰∫∫ÁöÑÊÑüËßâÂ∞±ÂÉèÊòØ‰∏Ä‰∏™MapÁöÑÈõÜÂêàÂòõÔºåÂèàÊúâKey ÔºåÂèàÊúâvalue ÁöÑÔºåÂÜçÁúã‰∏ãÂÖ∑‰ΩìÁöÑ‰ª£Á†ÅÔºö 12345678910111213141516171819202122232425public class LruCache&lt;K, V&gt; &#123; private final LinkedHashMap&lt;K, V&gt; map; /** Size of this cache in units. Not necessarily the number of elements. */ private int size; private int maxSize; private int putCount; private int createCount; private int evictionCount; private int hitCount; private int missCount; /** * @param maxSize for caches that do not override &#123;@link #sizeOf&#125;, this is * the maximum number of entries in the cache. For all other caches, * this is the maximum sum of the sizes of the entries in this cache. */ public LruCache(int maxSize) &#123; if (maxSize &lt;= 0) &#123; throw new IllegalArgumentException("maxSize &lt;= 0"); &#125; this.maxSize = maxSize; this.map = new LinkedHashMap&lt;K, V&gt;(0, 0.75f, true); &#125; ÁúãÂà∞ÂºÄÂ§¥ÔºåÊàë‰ª¨Â∞±ÊòéÁôΩ‰∫ÜÔºåÂì¶ÂéüÊù•Ëøô‰∏™LruCacheÁ±ª‰∏≠Áª¥Êä§‰∏Ä‰∏™LinkedHashMapÁöÑ‰∏Ä‰∏™ÈõÜÂêàÔºåÁºìÂ≠òÊàë‰ª¨Ëøô‰∏™ÂØπË±°ÔºåËÄå‰∏îÊûÑÈÄ†ÊñπÊ≥ïÈáåÈúÄË¶ÅÊàë‰ª¨‰º†ÂÖ•‰∏Ä‰∏™maxSizeÁöÑ‰∏Ä‰∏™ÂÄºÔºåÊ†πÊçÆ‰∏äÈù¢ÁöÑÊ≥®ÈáäÊàë‰ª¨Â∞±ÊòéÁôΩ‰∫ÜËøô‰∏™Â∞±ÊòØÊàë‰ª¨LruCacheÁºìÂ≠òÂØπË±°ÁöÑÊúÄÂ§ßÊï∞ÁõÆ„ÄÇ Êúâ‰ªÄ‰πàÁî®Âë¢ÔºüÊ†πÊçÆÊÉØÊÄßÊÄùÁª¥ÔºåÊàë‰ª¨ÂèØ‰ª•ËÆ§‰∏∫ÔºåÂú®putÊñ∞ÁöÑÁºìÂ≠òÂØπË±°ÁöÑÊó∂ÂÄôÔºåÊ†πÊçÆÊàë‰ª¨ËÆæÂÆöÁöÑÊúÄÂ§ßÂÄºremoveÈõÜÂêàÈáåÁöÑÊüê‰∫õÁºìÂ≠òÂØπË±°ÔºåËøõËÄåÊ∑ªÂä†Êñ∞ÁöÑÁºìÂ≠òÂØπË±°„ÄÇ SecondÊ†πÊçÆÊàë‰ª¨ÁöÑÂàÜÊûêÔºåÊàë‰ª¨ÊúâÂøÖË¶ÅÂéªÁúã‰∏Ä‰∏ãËøô‰∏™putÊñπÊ≥ïÁöÑÊ∫êÁ†ÅÔºö12345678910111213141516171819202122232425262728/** * Caches &#123;@code value&#125; for &#123;@code key&#125;. The value is moved to the head of * the queue. * * @return the previous value mapped by &#123;@code key&#125;. */public final V put(K key, V value) &#123; if (key == null || value == null) &#123; throw new NullPointerException("key == null || value == null"); &#125; V previous; synchronized (this) &#123; putCount++; size += safeSizeOf(key, value); previous = map.put(key, value); if (previous != null) &#123; size -= safeSizeOf(key, previous); &#125; &#125; if (previous != null) &#123; entryRemoved(false, key, previous, value); &#125; trimToSize(maxSize); return previous;&#125; ‰ª£Á†ÅÈáè‰πü‰∏çÊòØÁâπÂà´Â§öÔºåÊàë‰ª¨Áúã‰∏ãËøô‰∏™ÔºåÂú®Ëøô‰∏™synchronizedÂêåÊ≠•‰ª£Á†ÅÂùóÈáåÔºåÊàë‰ª¨ÁúãÂà∞Ëøô‰∏™ size,ÊòØÂØπputËøõÊù•ÁºìÂ≠òÂØπË±°‰∏™Êï∞ÁöÑÁ¥ØÂä†ÔºåÁÑ∂ÂêéË∞ÉÁî®ÈõÜÂêàÁöÑmap.putÊñπÊ≥ïÔºåËøîÂõû‰∏Ä‰∏™ÂØπË±° previous ÔºåÂ∞±ÊòØÂà§Êñ≠Ëøô‰∏™ÈõÜÂêà‰∏≠ÊòØÂê¶Ê∑ªÂä†‰∫ÜËøô‰∏™ÁºìÂ≠òÂØπË±°ÔºåÂ¶ÇÊûú‰∏ç‰∏∫null,Â∞±ÂØπsizeÂáèÂõûÂéª„ÄÇ ÊúÄÂêéÂèàË∞ÉÁî®‰∏Ä‰∏™ trimToSize(maxSize)ÊñπÊ≥ïÔºå‰∏äÈù¢ÈÉΩÊòØÂØπÊ∑ªÂä†‰∏Ä‰∫õÈÄªËæëÁöÑÂ§ÑÁêÜÔºåÈÇ£‰πà‰∏çÂèØËÉΩÊó†ÈôêÂà∂Ê∑ªÂä†ÂïäÔºåËÇØÂÆöÊúâÁßªÈô§Êìç‰ΩúÔºåÈÇ£‰πàÊàë‰ª¨Êé®ÊµãËøô‰∏™ÈÄªËæëÂèØËÉΩÂú®Ëøô‰∏™trimToSize(maxSize) ÈáåÂ§ÑÁêÜ„ÄÇ Ê∫êÁ†ÅÂ¶Ç‰∏ãÔºö123456789101112131415161718192021222324252627282930313233/** * Remove the eldest entries until the total of remaining entries is at or * below the requested size. * * @param maxSize the maximum size of the cache before returning. May be -1 * to evict even 0-sized elements. */ public void trimToSize(int maxSize) &#123; while (true) &#123; K key; V value; synchronized (this) &#123; if (size &lt; 0 || (map.isEmpty() &amp;&amp; size != 0)) &#123; throw new IllegalStateException(getClass().getName() + ".sizeOf() is reporting inconsistent results!"); &#125; //Âè™Ë¶ÅÂΩìÂâçsize&lt;= maxSize Â∞±ÁªìÊùüÂæ™ÁéØ if (size &lt;= maxSize || map.isEmpty()) &#123; break; &#125; // Ëé∑ÂèñËøô‰∏™ÂØπË±°ÔºåÁÑ∂Âêé‰ªémap‰∏≠ÁßªÈô§ÊéâÔºå‰øùËØÅsize&lt;=maxSize Map.Entry&lt;K, V&gt; toEvict = map.entrySet().iterator().next(); key = toEvict.getKey(); value = toEvict.getValue(); map.remove(key); size -= safeSizeOf(key, value); evictionCount++; &#125; entryRemoved(true, key, value, null); &#125; &#125; Ê≥®ÈáäÔºöRemove the eldest entries until the total of remaining entries is at or below the requested size Â§ßÊ¶ÇÊÑèÊÄùÊòØËØ¥ÔºöÊ∏ÖÈô§Êó∂Èó¥ÊúÄ‰πÖÁöÑÂØπË±°Áõ¥Âà∞Ââ©‰ΩôÁºìÂ≠òÂØπË±°ÁöÑÂ§ßÂ∞èÂ∞è‰∫éËÆæÁΩÆÁöÑÂ§ßÂ∞è„ÄÇÊ≤°ÈîôÊòØÊàë‰ª¨ÊÉ≥ÊâæÁöÑ„ÄÇ ËøôÈáåËØ¥Êòé‰∏Ä‰∏ãÔºömaxSizeÂ∞±ÊòØÊàë‰ª¨Âú®ÊûÑÈÄ†ÊñπÊ≥ïÈáå‰º†ÂÖ•ÁöÑÔºåËá™Â∑±ËÆæÁΩÆÁöÑ1234567public LruCache(int maxSize) &#123; if (maxSize &lt;= 0) &#123; throw new IllegalArgumentException("maxSize &lt;= 0"); &#125; this.maxSize = maxSize; this.map = new LinkedHashMap&lt;K, V&gt;(0, 0.75f, true); &#125; ËøôÊ†∑LruCacheÁöÑÊ†∏ÂøÉÊñπÊ≥ï trimToSizeÊñπÊ≥ïÊàë‰ª¨Â∞±ËØ¥ÂÆå‰∫ÜÔºåÊé•‰∏ãÊù•ÊàëÂ∞ÜÈÄöËøáÂÆû‰æãÂÜçÊ¨°È™åËØÅ‰∏ãÔºö ËÆæÁΩÆÂú∫ÊôØ ÂÅáËÆæÊàë‰ª¨ËÆæÁΩÆmaxSize ‰∏∫2ÔºåÂ∏ÉÂ±ÄÈáåÊòæÁ§∫3‰∏™imageView,ÂàÜÂà´‰ª£Ë°®3Âº†Êàë‰ª¨Ë¶ÅÊòæÁ§∫ÁöÑÂõæÁâáÔºåÊàë‰ª¨Ê∑ªÂä†3Âº†ÂõæÁâáÔºåÁúãÁúã‰ºö‰∏ç‰ºöÊòæÁ§∫3Âº†Ôºü xmlÂ∏ÉÂ±ÄÊòæÁ§∫Â¶Ç‰∏ãÔºà‰ª£Á†ÅÂ∞±‰∏çË¥¥‰∫ÜÔºåÂæàÁÆÄÂçïÔºâÔºö activity‰ª£Á†ÅÂ¶Ç‰∏ãÔºö12345678910111213141516171819202122232425262728public final int MAX_SIZE = 2; @Override protected void onCreate(@Nullable Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.layout_lru); ImageView iv1 = (ImageView) findViewById(R.id.iv1); ImageView iv2 = (ImageView) findViewById(R.id.iv2); ImageView iv3 = (ImageView) findViewById(R.id.iv3); Bitmap bitmap1 = BitmapFactory.decodeResource(getResources(),R.drawable.bg); Bitmap bitmap2 = BitmapFactory.decodeResource(getResources(),R.drawable.header_img); Bitmap bitmap3 = BitmapFactory.decodeResource(getResources(),R.drawable.ic_launcher); LruCache&lt;String,Bitmap&gt; lruCache = new LruCache&lt;&gt;(MAX_SIZE); lruCache.put("1",bitmap1); lruCache.put("2",bitmap2); lruCache.put("3",bitmap3); Bitmap bitmap = lruCache.get("1"); iv1.setImageBitmap(bitmap); Bitmap b2 = lruCache.get("2"); iv2.setImageBitmap(b2); Bitmap b3 = lruCache.get("3"); iv3.setImageBitmap(b3); &#125; ÂõæÔºö Êàë‰ª¨ÂèØ‰ª•ÂÖàÂ∞ùËØïÂàÜÊûê‰∏Ä‰∏ãÔºöÂõ†‰∏∫Êàë‰ª¨ËÆæÁΩÆÁöÑMaxSize ÊòØ2 ÔºåÈÇ£‰πàÂú®putÁ¨¨‰∏â‰∏™BitmapÁöÑÊó∂ÂÄôÔºåÂú®trimToSizeÊñπÊ≥ï‰∏≠ÔºåÂèëÁé∞Ëøô‰∏™sizeÊòØ3 ÔºåmaxSize ÊòØ2Ôºå‰ºöÁªßÁª≠Âêë‰∏ãÊâßË°å,‰∏ç‰ºöbreak,ÁªìÂêà‰∏ãÈù¢‰ª£Á†ÅÁúã‰∏ã12345678910111213141516171819202122232425262728public void trimToSize(int maxSize) &#123; while (true) &#123; K key; V value; synchronized (this) &#123; if (size &lt; 0 || (map.isEmpty() &amp;&amp; size != 0)) &#123; throw new IllegalStateException(getClass().getName() + ".sizeOf() is reporting inconsistent results!"); &#125; //Á¨¨‰∏ÄÊ¨°Âæ™ÁéØÔºöÊ≠§Êó∂ size ÊòØ3ÔºåmaxSize ÊòØ 2 //Á¨¨‰∫åÊ¨°Âæ™ÁéØÔºåÊ≠§Êó∂ size ÊòØ 2 ÔºåmaxSize ÊòØ 2 ÔºåÊª°Ë∂≥Êù°‰ª∂Ôºåbreak,ÁªìÊùüÂæ™ÁéØ if (size &lt;= maxSize || map.isEmpty()) &#123; break; &#125; //Ëé∑ÂèñÊúÄÂÖàÊ∑ªÂä†ÁöÑÁ¨¨‰∏Ä‰∏™ÂÖÉÁ¥† Map.Entry&lt;K, V&gt; toEvict = map.entrySet().iterator().next(); key = toEvict.getKey(); value = toEvict.getValue(); //ÁßªÈô§ÊéâÁ¨¨‰∏Ä‰∏™ÁºìÂ≠òÂØπË±° map.remove(key); // size = 2,ÂáèÂéªÁßªÈô§ÁöÑÂÖÉÁ¥† size -= safeSizeOf(key, value); evictionCount++; &#125; entryRemoved(true, key, value, null); &#125; &#125; Ëøô‰∏™ safeSizeOf ÊòØË∞ÉÁî®sizeOfÊñπÊ≥ï„ÄÇ ÈÇ£‰πà‰πüÂ∞±ÊòØËØ¥ÔºåÊàë‰ª¨Âú®putÁ¨¨‰∏â‰∏™bitmapÁöÑÊó∂ÂÄôÔºåLruCache ‰ºöËá™Âä®Â∏ÆÊàë‰ª¨ÁßªÈô§ÊéâÁ¨¨‰∏Ä‰∏™ÁºìÂ≠òÂØπË±°ÔºåÂõ†‰∏∫Á¨¨‰∏Ä‰∏™ÊúÄÂÖàÊ∑ªÂä†ËøõÂéªÔºåÊó∂Èó¥‰πüÊúÄÈïøÔºåÂΩìÁÑ∂ÂêéÊ∑ªÂä†ÁöÑbitmapÂ∞±ÊòØÊñ∞ÁöÑÔºåÊúÄËøëÁöÑÔºåÈÇ£‰πàÊàë‰ª¨Êé®Êñ≠Ëøô‰∏™iv1ÊòØÊòæÁ§∫‰∏çÂá∫ÂõæÁâáÁöÑÔºåÂõ†‰∏∫Ë¢´ÁßªÈô§Êéâ‰∫ÜÔºåÂÖ∂ÂÆÉÂâ©‰Ωô‰∏§‰∏™ÂèØ‰ª•ÊòæÁ§∫ÔºåÂàÜÊûêÂ∞±Âà∞ËøôÈáåÔºåÁúã‰∏ãËøêË°åÁªìÊûúÊòØ‰∏çÊòØË∑üÊàë‰ª¨ÂàÜÊûêÁöÑ‰∏ÄÊ†∑Ôºö ÂìáÔºÅÁúüÁöÑË∑üÊàë‰ª¨ÊÉ≥ÁöÑ‰∏ÄÊ†∑ËÄ∂ÔºåËØÅÊòéÊàë‰ª¨ÊÉ≥ÁöÑÊòØÂØπÁöÑ„ÄÇËøôÈáåÊàë‰ª¨ÊÄùËÄÉ‰∏Ä‰∏ãÂ∞±ÊòØ‰∏∫‰ªÄ‰πàLruCache‰ΩøÁî®‰∫ÜËøô‰∏™LinkedHashMap,‰∏∫‰ªÄ‰πàLinkedHashMapÁöÑÂàõÈÄ†ÊñπÊ≥ïË∑üÊàë‰ª¨Âπ≥Êó∂ÂàõÂª∫ÁöÑ‰∏çÂ§™‰∏ÄÊ†∑ÔºåÊ∫êÁ†ÅÊòØËøôÊ†∑ÁöÑÔºö1234567public LruCache(int maxSize) &#123; if (maxSize &lt;= 0) &#123; throw new IllegalArgumentException("maxSize &lt;= 0"); &#125; this.maxSize = maxSize; this.map = new LinkedHashMap&lt;K, V&gt;(0, 0.75f, true); &#125; ËøôÈáåËØ¥‰∏Ä‰∏ãÂú®ÊéòÈáëÂèëÂ∏ÉÁöÑËØÑËÆ∫Èáå ËóèÂú∞ÊÉÖ‰∫∫ËØÑËÆ∫ÊòØÔºönew LinkedHashMap&lt;K, V&gt;(0, 0.75f, true)ËøôÂè•‰ª£Á†ÅË°®Á§∫ÔºåÂàùÂßãÂÆπÈáè‰∏∫Èõ∂Ôºå0.75ÊòØÂä†ËΩΩÂõ†Â≠êÔºåË°®Á§∫ÂÆπÈáèËææÂà∞ÊúÄÂ§ßÂÆπÈáèÁöÑ75%ÁöÑÊó∂ÂÄô‰ºöÊääÂÜÖÂ≠òÂ¢ûÂä†‰∏ÄÂçä„ÄÇÊúÄÂêéËøô‰∏™ÂèÇÊï∞Ëá≥ÂÖ≥ÈáçË¶Å„ÄÇË°®Á§∫ËÆøÈóÆÂÖÉÁ¥†ÁöÑÊéíÂ∫èÊñπÂºèÔºåtrueË°®Á§∫ÊåâÁÖßËÆøÈóÆÈ°∫Â∫èÊéíÂ∫èÔºåfalseË°®Á§∫ÊåâÁÖßÊèíÂÖ•ÁöÑÈ°∫Â∫èÊéíÂ∫è„ÄÇËøô‰∏™ËÆæÁΩÆ‰∏∫trueÁöÑÊó∂ÂÄôÔºåÂ¶ÇÊûúÂØπ‰∏Ä‰∏™ÂÖÉÁ¥†ËøõË°å‰∫ÜÊìç‰Ωú(put„ÄÅget)ÔºåÂ∞±‰ºöÊääÈÇ£‰∏™ÂÖÉÁ¥†ÊîæÂà∞ÈõÜÂêàÁöÑÊúÄÂêé„ÄÇ Á°ÆÂÆû‰πüÊòØËøôÊ†∑ÁöÑÔºåÊàë‰ª¨Áúã‰∏ãLinkedHashMapÁöÑÊ∫êÁ†ÅÔºö1234567891011121314151617/** * Constructs an empty &lt;tt&gt;LinkedHashMap&lt;/tt&gt; instance with the * specified initial capacity, load factor and ordering mode. * * @param initialCapacity the initial capacity * @param loadFactor the load factor * @param accessOrder the ordering mode - &lt;tt&gt;true&lt;/tt&gt; for * access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order * @throws IllegalArgumentException if the initial capacity is negative * or the load factor is nonpositive */ public LinkedHashMap(int initialCapacity, float loadFactor, boolean accessOrder) &#123; super(initialCapacity, loadFactor); this.accessOrder = accessOrder; &#125; ÈáåÈù¢Ëøô‰∏™assessOrder Ê≥®ÈáäÈáå‰πüËØ¥ÁöÑÂæàÊòéÁôΩÔºöthe ordering mode - &lt;tt&gt;true&lt;/tt&gt; for access-order, &lt;tt&gt;false&lt;/tt&gt; for insertion-order -&gt; true Âë¢Â∞±Ë°®Á§∫‰ºöÊéíÂ∫èÔºåfalse Â∞±‰ª£Ë°®ÊåâÁÖßÊèíÂÖ•ÁöÑÈ°∫Â∫è„ÄÇÈªòËÆ§‰∏ç‰º†Â∞±ÊòØ false ,ËÄå‰∏îÊàë‰ª¨ÊØèÊ¨° get(K) put(K,V) ÁöÑÊó∂ÂÄô ‰ºöÊ†πÊçÆËøô‰∏™ÂèòÈáèË∞ÉÊï¥ÂÖÉÁ¥†Âú®ÈõÜÂêàÈáåÁöÑ‰ΩçÁΩÆ„ÄÇËÄåËøô‰πàÂÅöÁöÑÁõÆÁöÑ‰πüÂè™Êúâ‰∏Ä‰∏™Ôºö‰øùÁïôÊúÄËøë‰ΩøÁî®ÁöÑÁºìÂ≠òÂØπË±°Ôºå‰∏æ‰∏™‰æãÂ≠êËØ¥Êòé‰∏Ä‰∏ãÔºö Êàë‰ª¨ÂêëËøô‰∏™ÈõÜÂêàÈáåÊ∑ªÂä†‰∫Ü‰∏âÁßçÂÖÉÁ¥† LruCache&lt;String, Bitmap&gt; lruCache = new LruCache&lt;&gt;(MAX_SIZE);(MAX_SIZE=2) lruCache.put(&quot;1&quot;, bitmap1); lruCache.put(&quot;2&quot;, bitmap2); lruCache.put(&quot;3&quot;, bitmap3); Ê≠§Êó∂ÂÆÉ‰ª¨Âú®ÈõÜÂêàÈáåÁöÑÈ°∫Â∫èÊòØËøôÊ†∑ÁöÑÔºö ÈÇ£ÊØîÂ¶ÇËØ¥Êàë‰ª¨Âú®put 3 ÂÖÉÁ¥†‰πãÂâçÔºå‰ΩøÁî®‰∫Ü1ÂÖÉÁ¥†ÔºåÂ∞±ÊòØË∞ÉÁî®‰∫Üget(&quot;1&quot;)ÊñπÊ≥ïÔºåÊàë‰ª¨Áü•ÈÅìLinkedHashMapÂ∞±‰ºöÊîπÂèòÈìæË°®ÈáåÂÖÉÁ¥†ÁöÑÂ≠òÂÇ®È°∫Â∫èÔºå‰ª£Á†ÅÊòØËøôÊ†∑ÁöÑÔºö1234lruCache.put("1", bitmap1);lruCache.put("2", bitmap2);lruCache.get("1");lruCache.put("3", bitmap3); ÈÇ£‰πàÊ≠§Êó∂ÂØπÂ∫îÈìæË°®ÈáåÁöÑÈ°∫Â∫èÂ∞±ÊòØÔºö ÂΩìÊàë‰ª¨ÂÜçË∞ÉÁî®ÊòæÁ§∫ÁöÑÊó∂ÂÄôÔºåÂæ™ÁéØÈÅçÂéÜÂ∞±‰ºö‰ºòÂÖàÊääÁ¨¨‰∏Ä‰∏™‰ΩçÁΩÆÁöÑkey = &quot;2&quot; ÁöÑÁºìÂ≠òÂØπË±°ÁßªÈô§ÊéâÔºå‰øùËØÅ‰∫ÜÊúÄËøë‰ΩøÁî®ÁöÑÂéüÂàôÔºåÂΩìÁÑ∂‰∫ÜÂõ†‰∏∫ÊääËøô‰∏™max_size = 2ÊâÄ‰ª•Âú®Êàë‰ª¨ÊâßË°ålruCache.put(&quot;3&quot;, bitmap3); Êó∂ÔºåÈõÜÂêàÊúÄÁªà‰ºöÂèòÊàêËøôÊ†∑Ôºö ÈõÜÂêàÈáåÂè™Ââ©‰∏ã 1 ,3ÂØπÂ∫îÁöÑÁºìÂ≠òÂØπË±°„ÄÇ Ëá≥Ê≠§ÔºåLruCacheÂ∞±ËØ¥ÂÆå‰∫ÜÔºåÂ¶ÇÊûúÁúãÂÆåÁöÑ‰Ω†Êúâ‰∏çÊòéÁôΩÁöÑÂú∞ÊñπÂèØ‰ª•ÁïôË®ÄÔºå‰∏ÄËµ∑ËÆ®ËÆ∫‰∏ã~]]></content>
      <tags>
        <tag>Lru</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F12%2F11%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
</search>
